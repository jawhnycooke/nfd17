# Created by Topology-Converter v4.6.5
#    Template Revision: v4.6.5
#    https://github.com/cumulusnetworks/topology_converter
#    using topology data from: topology.dot
#    built with the following args: topology_converter.py -p libvirt -s 8000 -g 2000 -cmd topology.dot
#
#    NOTE: in order to use this Vagrantfile you will need:
#       -Vagrant(v1.8.6+) installed: http://www.vagrantup.com/downloads
#       -the "helper_scripts" directory that comes packaged with topology-converter.py
#        -Libvirt Installed -- guide to come
#       -Vagrant-Libvirt Plugin installed: $ vagrant plugin install vagrant-libvirt
#       -Boxes which have been mutated to support Libvirt -- see guide below:
#            https://community.cumulusnetworks.com/cumulus/topics/converting-cumulus-vx-virtualbox-vagrant-box-gt-libvirt-vagrant-box
#       -Start with \"vagrant up --provider=libvirt --no-parallel\n")

#Set the default provider to libvirt in the case they forget --provider=libvirt or if someone destroys a machine it reverts to virtualbox
ENV['VAGRANT_DEFAULT_PROVIDER'] = 'libvirt'

Vagrant.require_version ">= 1.8.6"

# Check required plugins
REQUIRED_PLUGINS_LIBVIRT = %w(vagrant-libvirt)
exit unless REQUIRED_PLUGINS_LIBVIRT.all? do |plugin|
  Vagrant.has_plugin?(plugin) || (
    puts "The #{plugin} plugin is required. Please install it with:"
    puts "$ vagrant plugin install #{plugin}"
    false
  )
end


$script = <<-SCRIPT
if grep -q -i 'cumulus' /etc/lsb-release &> /dev/null; then
    echo "### RUNNING CUMULUS EXTRA CONFIG ###"
    source /etc/lsb-release
    if [[ $DISTRIB_RELEASE =~ ^2.* ]]; then
        echo "  INFO: Detected a 2.5.x Based Release"

        echo "  adding fake cl-acltool..."
        echo -e "#!/bin/bash\nexit 0" > /usr/bin/cl-acltool
        chmod 755 /usr/bin/cl-acltool

        echo "  adding fake cl-license..."
        echo -e "#!/bin/bash\nexit 0" > /usr/bin/cl-license
        chmod 755 /usr/bin/cl-license

        echo "  Disabling default remap on Cumulus VX..."
        mv -v /etc/init.d/rename_eth_swp /etc/init.d/rename_eth_swp.backup

        echo "### Rebooting to Apply Remap..."

    elif [[ $DISTRIB_RELEASE =~ ^3.* ]]; then
        echo "  INFO: Detected a 3.x Based Release"
        echo "### Disabling default remap on Cumulus VX..."
        mv -v /etc/hw_init.d/S10rename_eth_swp.sh /etc/S10rename_eth_swp.sh.backup &> /dev/null
        echo "### Disabling ZTP service..."
        systemctl stop ztp.service
        ztp -d 2>&1
        echo "### Resetting ZTP to work next boot..."
        ztp -R 2>&1
        echo "  INFO: Detected Cumulus Linux v$DISTRIB_RELEASE Release"
        if [[ $DISTRIB_RELEASE =~ ^3.[1-9].* ]]; then
            echo "### Fixing ONIE DHCP to avoid Vagrant Interface ###"
            echo "     Note: Installing from ONIE will undo these changes."
            mkdir /tmp/foo
            mount LABEL=ONIE-BOOT /tmp/foo
            sed -i 's/eth0/eth1/g' /tmp/foo/grub/grub.cfg
            sed -i 's/eth0/eth1/g' /tmp/foo/onie/grub/grub-extra.cfg
            umount /tmp/foo
        fi
        if [[ $DISTRIB_RELEASE =~ ^3.[2-9].* ]]; then
            if [[ $(grep "vagrant" /etc/netd.conf | wc -l ) == 0 ]]; then
                echo "### Giving Vagrant User Ability to Run NCLU Commands ###"
                sed -i 's/users_with_edit = root, cumulus/users_with_edit = root, cumulus, vagrant/g' /etc/netd.conf
                sed -i 's/users_with_show = root, cumulus/users_with_show = root, cumulus, vagrant/g' /etc/netd.conf
            fi
        fi

    fi
fi
echo "### DONE ###"
echo "### Rebooting Device to Apply Remap..."
nohup bash -c 'sleep 10; shutdown now -r "Rebooting to Remap Interfaces"' &
SCRIPT

Vagrant.configure("2") do |config|

  config.vm.provider :libvirt do |domain|
    # increase nic adapter count to be greater than 8 for all VMs.
    domain.management_network_address = "10.255.1.0/24"
    domain.management_network_name = "wbr1"
    domain.nic_adapter_count = 130
  end




  ##### DEFINE VM for oob-mgmt-server #####
  config.vm.define "oob-mgmt-server" do |device|

    device.vm.hostname = "oob-mgmt-server"

    device.vm.box = "yk0/ubuntu-xenial"

    device.vm.provider :libvirt do |v|
      v.memory = 1024
    end
    #   see note here: https://github.com/pradels/vagrant-libvirt#synced-folders
    device.vm.synced_folder ".", "/vagrant", disabled: true



    # NETWORK INTERFACES
      # link for eth1 --> oob-mgmt-switch1:swp1
      device.vm.network "private_network",
            :mac => "44:38:39:00:05:bf",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8736',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10736',
            :libvirt__iface_name => 'eth1',
            auto_config: false



    # Fixes "stdin: is not a tty" and "mesg: ttyname failed : Inappropriate ioctl for device"  messages --> https://github.com/mitchellh/vagrant/issues/1673
    device.vm.provision :shell , inline: "(sudo grep -q 'mesg n' /root/.profile 2>/dev/null && sudo sed -i '/mesg n/d' /root/.profile  2>/dev/null) || true;", privileged: false

    # Shorten Boot Process - Applies to Ubuntu Only - remove \"Wait for Network\"
    device.vm.provision :shell , inline: "sed -i 's/sleep [0-9]*/sleep 1/' /etc/init/failsafe.conf 2>/dev/null || true"

    #Copy over DHCP files and MGMT Network Files
    device.vm.provision "file", source: "./helper_scripts/auto_mgmt_network/dhcpd.conf", destination: "~/dhcpd.conf"
    device.vm.provision "file", source: "./helper_scripts/auto_mgmt_network/dhcpd.hosts", destination: "~/dhcpd.hosts"
    device.vm.provision "file", source: "./helper_scripts/auto_mgmt_network/hosts", destination: "~/hosts"
    device.vm.provision "file", source: "./helper_scripts/auto_mgmt_network/ansible_hostfile", destination: "~/ansible_hostfile"
    device.vm.provision "file", source: "./helper_scripts/auto_mgmt_network/ztp_oob.sh", destination: "~/ztp_oob.sh"

    # Run the Config specified in the Node Attributes
    device.vm.provision :shell , privileged: false, :inline => 'echo "$(whoami)" > /tmp/normal_user'
    device.vm.provision :shell , path: "./helper_scripts/auto_mgmt_network/OOB_Server_Config_auto_mgmt.sh"


    # Install Rules for the interface re-map
    device.vm.provision :shell , :inline => <<-delete_udev_directory
if [ -d "/etc/udev/rules.d/70-persistent-net.rules" ]; then
    rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
fi
rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
delete_udev_directory

device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:05:bf --> eth1"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:05:bf", NAME="eth1", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule

      device.vm.provision :shell , :inline => <<-vagrant_interface_rule
echo "  INFO: Adding UDEV Rule: Vagrant interface = eth0"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{ifindex}=="2", NAME="eth0", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
echo "#### UDEV Rules (/etc/udev/rules.d/70-persistent-net.rules) ####"
cat /etc/udev/rules.d/70-persistent-net.rules
vagrant_interface_rule

# Run Any Platform Specific Code and Apply the interface Re-map
    #   (may or may not perform a reboot depending on platform)
    device.vm.provision :shell , :inline => $script

end

  ##### DEFINE VM for oob-mgmt-switch1 #####
  config.vm.define "oob-mgmt-switch1" do |device|

    device.vm.hostname = "oob-mgmt-switch1"

    device.vm.box = "CumulusCommunity/cumulus-vx"
    device.vm.box_version = "3.5.0"

    device.vm.provider :libvirt do |v|
      v.memory = 768
    end
    #   see note here: https://github.com/pradels/vagrant-libvirt#synced-folders
    device.vm.synced_folder ".", "/vagrant", disabled: true



    # NETWORK INTERFACES
      # link for swp1 --> oob-mgmt-server:eth1
      device.vm.network "private_network",
            :mac => "44:38:39:00:05:c0",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10736',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8736',
            :libvirt__iface_name => 'swp1',
            auto_config: false
      # link for swp2 --> oob-mgmt-switch2:swp1
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:ea",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10245',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8245',
            :libvirt__iface_name => 'swp2',
            auto_config: false
      # link for swp3 --> leaf01:eth0
      device.vm.network "private_network",
            :mac => "44:38:39:00:08:8b",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '9094',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '11094',
            :libvirt__iface_name => 'swp3',
            auto_config: false
      # link for swp4 --> leaf02:eth0
      device.vm.network "private_network",
            :mac => "44:38:39:00:06:3d",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8799',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10799',
            :libvirt__iface_name => 'swp4',
            auto_config: false
      # link for swp5 --> leaf03:eth0
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:47",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8420',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10420',
            :libvirt__iface_name => 'swp5',
            auto_config: false
      # link for swp6 --> leaf04:eth0
      device.vm.network "private_network",
            :mac => "44:38:39:00:08:11",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '9033',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '11033',
            :libvirt__iface_name => 'swp6',
            auto_config: false
      # link for swp7 --> leaf05:eth0
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:cf",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8360',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10360',
            :libvirt__iface_name => 'swp7',
            auto_config: false
      # link for swp8 --> leaf06:eth0
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:d7",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8620',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10620',
            :libvirt__iface_name => 'swp8',
            auto_config: false
      # link for swp9 --> leaf07:eth0
      device.vm.network "private_network",
            :mac => "44:38:39:00:07:97",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8972',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10972',
            :libvirt__iface_name => 'swp9',
            auto_config: false
      # link for swp10 --> leaf08:eth0
      device.vm.network "private_network",
            :mac => "44:38:39:00:05:d3",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8746',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10746',
            :libvirt__iface_name => 'swp10',
            auto_config: false
      # link for swp11 --> leaf09:eth0
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:a3",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8594',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10594',
            :libvirt__iface_name => 'swp11',
            auto_config: false
      # link for swp12 --> leaf10:eth0
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:eb",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8630',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10630',
            :libvirt__iface_name => 'swp12',
            auto_config: false
      # link for swp13 --> leaf11:eth0
      device.vm.network "private_network",
            :mac => "44:38:39:00:06:61",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8817',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10817',
            :libvirt__iface_name => 'swp13',
            auto_config: false
      # link for swp14 --> leaf12:eth0
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:cf",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8232',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10232',
            :libvirt__iface_name => 'swp14',
            auto_config: false
      # link for swp15 --> leaf13:eth0
      device.vm.network "private_network",
            :mac => "44:38:39:00:08:39",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '9053',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '11053',
            :libvirt__iface_name => 'swp15',
            auto_config: false
      # link for swp16 --> leaf14:eth0
      device.vm.network "private_network",
            :mac => "44:38:39:00:06:e3",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8882',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10882',
            :libvirt__iface_name => 'swp16',
            auto_config: false
      # link for swp17 --> leaf15:eth0
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:b5",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8219',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10219',
            :libvirt__iface_name => 'swp17',
            auto_config: false
      # link for swp18 --> leaf16:eth0
      device.vm.network "private_network",
            :mac => "44:38:39:00:08:83",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '9090',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '11090',
            :libvirt__iface_name => 'swp18',
            auto_config: false
      # link for swp19 --> leaf17:eth0
      device.vm.network "private_network",
            :mac => "44:38:39:00:06:af",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8856',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10856',
            :libvirt__iface_name => 'swp19',
            auto_config: false
      # link for swp20 --> leaf18:eth0
      device.vm.network "private_network",
            :mac => "44:38:39:00:08:2d",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '9047',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '11047',
            :libvirt__iface_name => 'swp20',
            auto_config: false
      # link for swp21 --> leaf19:eth0
      device.vm.network "private_network",
            :mac => "44:38:39:00:05:4d",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8679',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10679',
            :libvirt__iface_name => 'swp21',
            auto_config: false
      # link for swp22 --> leaf20:eth0
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:cb",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8230',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10230',
            :libvirt__iface_name => 'swp22',
            auto_config: false
      # link for swp23 --> leaf21:eth0
      device.vm.network "private_network",
            :mac => "44:38:39:00:07:47",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8932',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10932',
            :libvirt__iface_name => 'swp23',
            auto_config: false
      # link for swp24 --> leaf22:eth0
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:31",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8409',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10409',
            :libvirt__iface_name => 'swp24',
            auto_config: false
      # link for swp25 --> leaf23:eth0
      device.vm.network "private_network",
            :mac => "44:38:39:00:07:95",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8971',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10971',
            :libvirt__iface_name => 'swp25',
            auto_config: false
      # link for swp26 --> leaf24:eth0
      device.vm.network "private_network",
            :mac => "44:38:39:00:08:c1",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '9121',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '11121',
            :libvirt__iface_name => 'swp26',
            auto_config: false
      # link for swp27 --> leaf25:eth0
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:4f",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8552',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10552',
            :libvirt__iface_name => 'swp27',
            auto_config: false
      # link for swp28 --> leaf26:eth0
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:1b",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8398',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10398',
            :libvirt__iface_name => 'swp28',
            auto_config: false
      # link for swp29 --> leaf27:eth0
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:f7",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8124',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10124',
            :libvirt__iface_name => 'swp29',
            auto_config: false
      # link for swp30 --> leaf28:eth0
      device.vm.network "private_network",
            :mac => "44:38:39:00:06:0f",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8776',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10776',
            :libvirt__iface_name => 'swp30',
            auto_config: false
      # link for swp31 --> leaf29:eth0
      device.vm.network "private_network",
            :mac => "44:38:39:00:05:ef",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8760',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10760',
            :libvirt__iface_name => 'swp31',
            auto_config: false
      # link for swp32 --> leaf30:eth0
      device.vm.network "private_network",
            :mac => "44:38:39:00:08:ff",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '9152',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '11152',
            :libvirt__iface_name => 'swp32',
            auto_config: false
      # link for swp33 --> leaf31:eth0
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:6d",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8567',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10567',
            :libvirt__iface_name => 'swp33',
            auto_config: false
      # link for swp34 --> leaf32:eth0
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:33",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8154',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10154',
            :libvirt__iface_name => 'swp34',
            auto_config: false
      # link for swp35 --> leaf33:eth0
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:7d",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8319',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10319',
            :libvirt__iface_name => 'swp35',
            auto_config: false
      # link for swp36 --> leaf34:eth0
      device.vm.network "private_network",
            :mac => "44:38:39:00:07:b3",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8986',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10986',
            :libvirt__iface_name => 'swp36',
            auto_config: false
      # link for swp37 --> leaf35:eth0
      device.vm.network "private_network",
            :mac => "44:38:39:00:08:e1",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '9137',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '11137',
            :libvirt__iface_name => 'swp37',
            auto_config: false
      # link for swp38 --> leaf36:eth0
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:03",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8130',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10130',
            :libvirt__iface_name => 'swp38',
            auto_config: false
      # link for swp39 --> leaf37:eth0
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:53",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8170',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10170',
            :libvirt__iface_name => 'swp39',
            auto_config: false
      # link for swp40 --> leaf38:eth0
      device.vm.network "private_network",
            :mac => "44:38:39:00:05:3b",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8670',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10670',
            :libvirt__iface_name => 'swp40',
            auto_config: false
      # link for swp41 --> leaf39:eth0
      device.vm.network "private_network",
            :mac => "44:38:39:00:06:49",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8805',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10805',
            :libvirt__iface_name => 'swp41',
            auto_config: false
      # link for swp42 --> leaf40:eth0
      device.vm.network "private_network",
            :mac => "44:38:39:00:08:3f",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '9056',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '11056',
            :libvirt__iface_name => 'swp42',
            auto_config: false
      # link for swp43 --> leaf41:eth0
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:57",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8556',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10556',
            :libvirt__iface_name => 'swp43',
            auto_config: false
      # link for swp44 --> leaf42:eth0
      device.vm.network "private_network",
            :mac => "44:38:39:00:05:b3",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8730',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10730',
            :libvirt__iface_name => 'swp44',
            auto_config: false
      # link for swp45 --> leaf43:eth0
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:01",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8129',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10129',
            :libvirt__iface_name => 'swp45',
            auto_config: false
      # link for swp46 --> leaf44:eth0
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:7b",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8318',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10318',
            :libvirt__iface_name => 'swp46',
            auto_config: false
      # link for swp47 --> leaf45:eth0
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:ff",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8128',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10128',
            :libvirt__iface_name => 'swp47',
            auto_config: false
      # link for swp48 --> leaf46:eth0
      device.vm.network "private_network",
            :mac => "44:38:39:00:05:67",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8692',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10692',
            :libvirt__iface_name => 'swp48',
            auto_config: false
      # link for swp49 --> leaf47:eth0
      device.vm.network "private_network",
            :mac => "44:38:39:00:05:eb",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8758',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10758',
            :libvirt__iface_name => 'swp49',
            auto_config: false
      # link for swp50 --> leaf48:eth0
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:bb",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8222',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10222',
            :libvirt__iface_name => 'swp50',
            auto_config: false



    # Fixes "stdin: is not a tty" and "mesg: ttyname failed : Inappropriate ioctl for device"  messages --> https://github.com/mitchellh/vagrant/issues/1673
    device.vm.provision :shell , inline: "(sudo grep -q 'mesg n' /root/.profile 2>/dev/null && sudo sed -i '/mesg n/d' /root/.profile  2>/dev/null) || true;", privileged: false

    #Copy over Topology.dot File
    device.vm.provision "file", source: "topology.dot", destination: "~/topology.dot"
    device.vm.provision :shell, privileged: false, inline: "sudo mv ~/topology.dot /etc/ptm.d/topology.dot"

# Transfer Bridge File
      device.vm.provision "file", source: "./helper_scripts/auto_mgmt_network/bridge-untagged", destination: "~/bridge-untagged"

    # Run the Config specified in the Node Attributes
    device.vm.provision :shell , privileged: false, :inline => 'echo "$(whoami)" > /tmp/normal_user'
    device.vm.provision :shell , path: "./helper_scripts/config_oob_switch.sh"


    # Install Rules for the interface re-map
    device.vm.provision :shell , :inline => <<-delete_udev_directory
if [ -d "/etc/udev/rules.d/70-persistent-net.rules" ]; then
    rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
fi
rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
delete_udev_directory

device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:05:c0 --> swp1"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:05:c0", NAME="swp1", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:ea --> swp2"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:ea", NAME="swp2", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:08:8b --> swp3"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:08:8b", NAME="swp3", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:06:3d --> swp4"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:06:3d", NAME="swp4", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:47 --> swp5"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:47", NAME="swp5", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:08:11 --> swp6"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:08:11", NAME="swp6", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:cf --> swp7"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:cf", NAME="swp7", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:d7 --> swp8"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:d7", NAME="swp8", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:07:97 --> swp9"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:07:97", NAME="swp9", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:05:d3 --> swp10"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:05:d3", NAME="swp10", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:a3 --> swp11"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:a3", NAME="swp11", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:eb --> swp12"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:eb", NAME="swp12", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:06:61 --> swp13"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:06:61", NAME="swp13", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:cf --> swp14"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:cf", NAME="swp14", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:08:39 --> swp15"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:08:39", NAME="swp15", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:06:e3 --> swp16"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:06:e3", NAME="swp16", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:b5 --> swp17"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:b5", NAME="swp17", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:08:83 --> swp18"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:08:83", NAME="swp18", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:06:af --> swp19"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:06:af", NAME="swp19", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:08:2d --> swp20"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:08:2d", NAME="swp20", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:05:4d --> swp21"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:05:4d", NAME="swp21", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:cb --> swp22"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:cb", NAME="swp22", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:07:47 --> swp23"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:07:47", NAME="swp23", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:31 --> swp24"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:31", NAME="swp24", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:07:95 --> swp25"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:07:95", NAME="swp25", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:08:c1 --> swp26"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:08:c1", NAME="swp26", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:4f --> swp27"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:4f", NAME="swp27", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:1b --> swp28"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:1b", NAME="swp28", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:f7 --> swp29"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:f7", NAME="swp29", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:06:0f --> swp30"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:06:0f", NAME="swp30", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:05:ef --> swp31"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:05:ef", NAME="swp31", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:08:ff --> swp32"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:08:ff", NAME="swp32", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:6d --> swp33"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:6d", NAME="swp33", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:33 --> swp34"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:33", NAME="swp34", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:7d --> swp35"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:7d", NAME="swp35", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:07:b3 --> swp36"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:07:b3", NAME="swp36", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:08:e1 --> swp37"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:08:e1", NAME="swp37", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:03 --> swp38"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:03", NAME="swp38", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:53 --> swp39"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:53", NAME="swp39", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:05:3b --> swp40"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:05:3b", NAME="swp40", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:06:49 --> swp41"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:06:49", NAME="swp41", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:08:3f --> swp42"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:08:3f", NAME="swp42", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:57 --> swp43"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:57", NAME="swp43", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:05:b3 --> swp44"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:05:b3", NAME="swp44", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:01 --> swp45"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:01", NAME="swp45", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:7b --> swp46"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:7b", NAME="swp46", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:ff --> swp47"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:ff", NAME="swp47", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:05:67 --> swp48"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:05:67", NAME="swp48", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:05:eb --> swp49"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:05:eb", NAME="swp49", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:bb --> swp50"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:bb", NAME="swp50", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule

      device.vm.provision :shell , :inline => <<-vagrant_interface_rule
echo "  INFO: Adding UDEV Rule: Vagrant interface = eth0"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{ifindex}=="2", NAME="eth0", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
echo "#### UDEV Rules (/etc/udev/rules.d/70-persistent-net.rules) ####"
cat /etc/udev/rules.d/70-persistent-net.rules
vagrant_interface_rule

# Run Any Platform Specific Code and Apply the interface Re-map
    #   (may or may not perform a reboot depending on platform)
    device.vm.provision :shell , :inline => $script

end

  ##### DEFINE VM for oob-mgmt-switch4 #####
  config.vm.define "oob-mgmt-switch4" do |device|

    device.vm.hostname = "oob-mgmt-switch4"

    device.vm.box = "CumulusCommunity/cumulus-vx"
    device.vm.box_version = "3.5.0"

    device.vm.provider :libvirt do |v|
      v.memory = 768
    end
    #   see note here: https://github.com/pradels/vagrant-libvirt#synced-folders
    device.vm.synced_folder ".", "/vagrant", disabled: true



    # NETWORK INTERFACES
      # link for swp1 --> oob-mgmt-switch3:swp2
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:a5",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8211',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10211',
            :libvirt__iface_name => 'swp1',
            auto_config: false
      # link for swp3 --> chassis01-lc1-1:eth0
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:f3",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8122',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10122',
            :libvirt__iface_name => 'swp3',
            auto_config: false
      # link for swp4 --> chassis01-lc1-2:eth0
      device.vm.network "private_network",
            :mac => "44:38:39:00:07:75",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8955',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10955',
            :libvirt__iface_name => 'swp4',
            auto_config: false
      # link for swp5 --> chassis01-lc2-1:eth0
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:e7",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8372',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10372',
            :libvirt__iface_name => 'swp5',
            auto_config: false
      # link for swp6 --> chassis01-lc2-2:eth0
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:97",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8588',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10588',
            :libvirt__iface_name => 'swp6',
            auto_config: false
      # link for swp7 --> chassis01-lc3-1:eth0
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:d1",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8105',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10105',
            :libvirt__iface_name => 'swp7',
            auto_config: false
      # link for swp8 --> chassis01-lc3-2:eth0
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:bd",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8607',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10607',
            :libvirt__iface_name => 'swp8',
            auto_config: false
      # link for swp9 --> chassis01-lc4-1:eth0
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:c7",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8484',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10484',
            :libvirt__iface_name => 'swp9',
            auto_config: false
      # link for swp10 --> chassis01-lc4-2:eth0
      device.vm.network "private_network",
            :mac => "44:38:39:00:07:0b",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8902',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10902',
            :libvirt__iface_name => 'swp10',
            auto_config: false
      # link for swp11 --> chassis01-fc1-1:eth0
      device.vm.network "private_network",
            :mac => "44:38:39:00:07:e9",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '9013',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '11013',
            :libvirt__iface_name => 'swp11',
            auto_config: false
      # link for swp12 --> chassis01-fc2-1:eth0
      device.vm.network "private_network",
            :mac => "44:38:39:00:05:45",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8675',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10675',
            :libvirt__iface_name => 'swp12',
            auto_config: false
      # link for swp13 --> chassis01-fc3-1:eth0
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:69",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8565',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10565',
            :libvirt__iface_name => 'swp13',
            auto_config: false
      # link for swp14 --> chassis01-fc4-1:eth0
      device.vm.network "private_network",
            :mac => "44:38:39:00:09:17",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '9164',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '11164',
            :libvirt__iface_name => 'swp14',
            auto_config: false
      # link for swp15 --> chassis02-lc1-1:eth0
      device.vm.network "private_network",
            :mac => "44:38:39:00:07:45",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8931',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10931',
            :libvirt__iface_name => 'swp15',
            auto_config: false
      # link for swp16 --> chassis02-lc1-2:eth0
      device.vm.network "private_network",
            :mac => "44:38:39:00:08:33",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '9050',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '11050',
            :libvirt__iface_name => 'swp16',
            auto_config: false
      # link for swp17 --> chassis02-lc2-1:eth0
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:55",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8427',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10427',
            :libvirt__iface_name => 'swp17',
            auto_config: false
      # link for swp18 --> chassis02-lc2-2:eth0
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:7f",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8448',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10448',
            :libvirt__iface_name => 'swp18',
            auto_config: false
      # link for swp19 --> chassis02-lc3-1:eth0
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:c7",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8100',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10100',
            :libvirt__iface_name => 'swp19',
            auto_config: false
      # link for swp20 --> chassis02-lc3-2:eth0
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:dd",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8623',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10623',
            :libvirt__iface_name => 'swp20',
            auto_config: false
      # link for swp21 --> chassis02-lc4-1:eth0
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:61",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8049',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10049',
            :libvirt__iface_name => 'swp21',
            auto_config: false
      # link for swp22 --> chassis02-lc4-2:eth0
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:3d",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8287',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10287',
            :libvirt__iface_name => 'swp22',
            auto_config: false
      # link for swp23 --> chassis02-fc1-1:eth0
      device.vm.network "private_network",
            :mac => "44:38:39:00:09:37",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '9180',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '11180',
            :libvirt__iface_name => 'swp23',
            auto_config: false
      # link for swp24 --> chassis02-fc2-1:eth0
      device.vm.network "private_network",
            :mac => "44:38:39:00:08:97",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '9100',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '11100',
            :libvirt__iface_name => 'swp24',
            auto_config: false
      # link for swp25 --> chassis02-fc3-1:eth0
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:7d",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8063',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10063',
            :libvirt__iface_name => 'swp25',
            auto_config: false
      # link for swp26 --> chassis02-fc4-1:eth0
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:d5",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8619',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10619',
            :libvirt__iface_name => 'swp26',
            auto_config: false
      # link for swp27 --> chassis03-lc1-1:eth0
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:bf",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8480',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10480',
            :libvirt__iface_name => 'swp27',
            auto_config: false
      # link for swp28 --> chassis03-lc1-2:eth0
      device.vm.network "private_network",
            :mac => "44:38:39:00:07:41",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8929',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10929',
            :libvirt__iface_name => 'swp28',
            auto_config: false
      # link for swp29 --> chassis03-lc2-1:eth0
      device.vm.network "private_network",
            :mac => "44:38:39:00:06:01",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8769',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10769',
            :libvirt__iface_name => 'swp29',
            auto_config: false
      # link for swp30 --> chassis03-lc2-2:eth0
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:83",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8066',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10066',
            :libvirt__iface_name => 'swp30',
            auto_config: false
      # link for swp31 --> chassis03-lc3-1:eth0
      device.vm.network "private_network",
            :mac => "44:38:39:00:06:3f",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8800',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10800',
            :libvirt__iface_name => 'swp31',
            auto_config: false
      # link for swp32 --> chassis03-lc3-2:eth0
      device.vm.network "private_network",
            :mac => "44:38:39:00:05:d9",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8749',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10749',
            :libvirt__iface_name => 'swp32',
            auto_config: false
      # link for swp33 --> chassis03-lc4-1:eth0
      device.vm.network "private_network",
            :mac => "44:38:39:00:07:51",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8937',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10937',
            :libvirt__iface_name => 'swp33',
            auto_config: false
      # link for swp34 --> chassis03-lc4-2:eth0
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:6b",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8182',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10182',
            :libvirt__iface_name => 'swp34',
            auto_config: false
      # link for swp35 --> chassis03-fc1-1:eth0
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:dd",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8239',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10239',
            :libvirt__iface_name => 'swp35',
            auto_config: false
      # link for swp36 --> chassis03-fc2-1:eth0
      device.vm.network "private_network",
            :mac => "44:38:39:00:08:c5",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '9123',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '11123',
            :libvirt__iface_name => 'swp36',
            auto_config: false
      # link for swp37 --> chassis03-fc3-1:eth0
      device.vm.network "private_network",
            :mac => "44:38:39:00:06:27",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8788',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10788',
            :libvirt__iface_name => 'swp37',
            auto_config: false
      # link for swp38 --> chassis03-fc4-1:eth0
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:db",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8366',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10366',
            :libvirt__iface_name => 'swp38',
            auto_config: false
      # link for swp39 --> chassis04-lc1-1:eth0
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:df",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8368',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10368',
            :libvirt__iface_name => 'swp39',
            auto_config: false
      # link for swp40 --> chassis04-lc1-2:eth0
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:11",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8521',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10521',
            :libvirt__iface_name => 'swp40',
            auto_config: false
      # link for swp41 --> chassis04-lc2-1:eth0
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:1f",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8528',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10528',
            :libvirt__iface_name => 'swp41',
            auto_config: false
      # link for swp42 --> chassis04-lc2-2:eth0
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:df",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8496',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10496',
            :libvirt__iface_name => 'swp42',
            auto_config: false
      # link for swp43 --> chassis04-lc3-1:eth0
      device.vm.network "private_network",
            :mac => "44:38:39:00:06:05",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8771',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10771',
            :libvirt__iface_name => 'swp43',
            auto_config: false
      # link for swp44 --> chassis04-lc3-2:eth0
      device.vm.network "private_network",
            :mac => "44:38:39:00:08:51",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '9065',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '11065',
            :libvirt__iface_name => 'swp44',
            auto_config: false
      # link for swp45 --> chassis04-lc4-1:eth0
      device.vm.network "private_network",
            :mac => "44:38:39:00:08:31",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '9049',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '11049',
            :libvirt__iface_name => 'swp45',
            auto_config: false
      # link for swp46 --> chassis04-lc4-2:eth0
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:4d",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8295',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10295',
            :libvirt__iface_name => 'swp46',
            auto_config: false
      # link for swp47 --> chassis04-fc1-1:eth0
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:bd",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8351',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10351',
            :libvirt__iface_name => 'swp47',
            auto_config: false
      # link for swp48 --> chassis04-fc2-1:eth0
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:77",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8572',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10572',
            :libvirt__iface_name => 'swp48',
            auto_config: false
      # link for swp49 --> chassis04-fc3-1:eth0
      device.vm.network "private_network",
            :mac => "44:38:39:00:08:95",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '9099',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '11099',
            :libvirt__iface_name => 'swp49',
            auto_config: false
      # link for swp50 --> chassis04-fc4-1:eth0
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:7f",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8064',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10064',
            :libvirt__iface_name => 'swp50',
            auto_config: false



    # Fixes "stdin: is not a tty" and "mesg: ttyname failed : Inappropriate ioctl for device"  messages --> https://github.com/mitchellh/vagrant/issues/1673
    device.vm.provision :shell , inline: "(sudo grep -q 'mesg n' /root/.profile 2>/dev/null && sudo sed -i '/mesg n/d' /root/.profile  2>/dev/null) || true;", privileged: false

    #Copy over Topology.dot File
    device.vm.provision "file", source: "topology.dot", destination: "~/topology.dot"
    device.vm.provision :shell, privileged: false, inline: "sudo mv ~/topology.dot /etc/ptm.d/topology.dot"

# Transfer Bridge File
      device.vm.provision "file", source: "./helper_scripts/auto_mgmt_network/bridge-untagged4", destination: "~/bridge-untagged"

    # Run the Config specified in the Node Attributes
    device.vm.provision :shell , privileged: false, :inline => 'echo "$(whoami)" > /tmp/normal_user'
    device.vm.provision :shell , path: "./helper_scripts/config_oob_switch.sh"


    # Install Rules for the interface re-map
    device.vm.provision :shell , :inline => <<-delete_udev_directory
if [ -d "/etc/udev/rules.d/70-persistent-net.rules" ]; then
    rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
fi
rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
delete_udev_directory

device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:a5 --> swp1"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:a5", NAME="swp1", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:f3 --> swp3"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:f3", NAME="swp3", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:07:75 --> swp4"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:07:75", NAME="swp4", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:e7 --> swp5"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:e7", NAME="swp5", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:97 --> swp6"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:97", NAME="swp6", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:d1 --> swp7"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:d1", NAME="swp7", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:bd --> swp8"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:bd", NAME="swp8", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:c7 --> swp9"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:c7", NAME="swp9", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:07:0b --> swp10"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:07:0b", NAME="swp10", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:07:e9 --> swp11"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:07:e9", NAME="swp11", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:05:45 --> swp12"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:05:45", NAME="swp12", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:69 --> swp13"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:69", NAME="swp13", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:09:17 --> swp14"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:09:17", NAME="swp14", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:07:45 --> swp15"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:07:45", NAME="swp15", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:08:33 --> swp16"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:08:33", NAME="swp16", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:55 --> swp17"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:55", NAME="swp17", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:7f --> swp18"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:7f", NAME="swp18", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:c7 --> swp19"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:c7", NAME="swp19", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:dd --> swp20"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:dd", NAME="swp20", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:61 --> swp21"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:61", NAME="swp21", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:3d --> swp22"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:3d", NAME="swp22", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:09:37 --> swp23"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:09:37", NAME="swp23", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:08:97 --> swp24"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:08:97", NAME="swp24", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:7d --> swp25"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:7d", NAME="swp25", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:d5 --> swp26"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:d5", NAME="swp26", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:bf --> swp27"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:bf", NAME="swp27", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:07:41 --> swp28"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:07:41", NAME="swp28", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:06:01 --> swp29"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:06:01", NAME="swp29", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:83 --> swp30"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:83", NAME="swp30", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:06:3f --> swp31"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:06:3f", NAME="swp31", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:05:d9 --> swp32"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:05:d9", NAME="swp32", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:07:51 --> swp33"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:07:51", NAME="swp33", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:6b --> swp34"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:6b", NAME="swp34", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:dd --> swp35"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:dd", NAME="swp35", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:08:c5 --> swp36"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:08:c5", NAME="swp36", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:06:27 --> swp37"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:06:27", NAME="swp37", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:db --> swp38"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:db", NAME="swp38", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:df --> swp39"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:df", NAME="swp39", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:11 --> swp40"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:11", NAME="swp40", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:1f --> swp41"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:1f", NAME="swp41", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:df --> swp42"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:df", NAME="swp42", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:06:05 --> swp43"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:06:05", NAME="swp43", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:08:51 --> swp44"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:08:51", NAME="swp44", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:08:31 --> swp45"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:08:31", NAME="swp45", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:4d --> swp46"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:4d", NAME="swp46", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:bd --> swp47"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:bd", NAME="swp47", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:77 --> swp48"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:77", NAME="swp48", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:08:95 --> swp49"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:08:95", NAME="swp49", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:7f --> swp50"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:7f", NAME="swp50", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule

      device.vm.provision :shell , :inline => <<-vagrant_interface_rule
echo "  INFO: Adding UDEV Rule: Vagrant interface = eth0"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{ifindex}=="2", NAME="eth0", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
echo "#### UDEV Rules (/etc/udev/rules.d/70-persistent-net.rules) ####"
cat /etc/udev/rules.d/70-persistent-net.rules
vagrant_interface_rule

# Run Any Platform Specific Code and Apply the interface Re-map
    #   (may or may not perform a reboot depending on platform)
    device.vm.provision :shell , :inline => $script

end

  ##### DEFINE VM for oob-mgmt-switch3 #####
  config.vm.define "oob-mgmt-switch3" do |device|

    device.vm.hostname = "oob-mgmt-switch3"

    device.vm.box = "CumulusCommunity/cumulus-vx"
    device.vm.box_version = "3.5.0"

    device.vm.provider :libvirt do |v|
      v.memory = 768
    end
    #   see note here: https://github.com/pradels/vagrant-libvirt#synced-folders
    device.vm.synced_folder ".", "/vagrant", disabled: true



    # NETWORK INTERFACES
      # link for swp1 --> oob-mgmt-switch2:swp2
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:f3",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8506',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10506',
            :libvirt__iface_name => 'swp1',
            auto_config: false
      # link for swp2 --> oob-mgmt-switch4:swp1
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:a6",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10211',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8211',
            :libvirt__iface_name => 'swp2',
            auto_config: false
      # link for swp3 --> leaf97:eth0
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:ad",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8471',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10471',
            :libvirt__iface_name => 'swp3',
            auto_config: false
      # link for swp4 --> leaf98:eth0
      device.vm.network "private_network",
            :mac => "44:38:39:00:06:d1",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8873',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10873',
            :libvirt__iface_name => 'swp4',
            auto_config: false
      # link for swp5 --> leaf99:eth0
      device.vm.network "private_network",
            :mac => "44:38:39:00:05:2d",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8663',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10663',
            :libvirt__iface_name => 'swp5',
            auto_config: false
      # link for swp6 --> leaf100:eth0
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:4b",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8550',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10550',
            :libvirt__iface_name => 'swp6',
            auto_config: false
      # link for swp7 --> leaf101:eth0
      device.vm.network "private_network",
            :mac => "44:38:39:00:06:0d",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8775',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10775',
            :libvirt__iface_name => 'swp7',
            auto_config: false
      # link for swp8 --> leaf102:eth0
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:c1",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8353',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10353',
            :libvirt__iface_name => 'swp8',
            auto_config: false
      # link for swp9 --> leaf103:eth0
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:37",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8284',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10284',
            :libvirt__iface_name => 'swp9',
            auto_config: false
      # link for swp10 --> leaf104:eth0
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:17",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8140',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10140',
            :libvirt__iface_name => 'swp10',
            auto_config: false
      # link for swp11 --> leaf105:eth0
      device.vm.network "private_network",
            :mac => "44:38:39:00:05:c5",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8739',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10739',
            :libvirt__iface_name => 'swp11',
            auto_config: false
      # link for swp12 --> leaf106:eth0
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:4f",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8168',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10168',
            :libvirt__iface_name => 'swp12',
            auto_config: false
      # link for swp13 --> leaf107:eth0
      device.vm.network "private_network",
            :mac => "44:38:39:00:09:11",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '9161',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '11161',
            :libvirt__iface_name => 'swp13',
            auto_config: false
      # link for swp14 --> leaf108:eth0
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:9b",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8334',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10334',
            :libvirt__iface_name => 'swp14',
            auto_config: false
      # link for swp15 --> leaf109:eth0
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:d9",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8493',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10493',
            :libvirt__iface_name => 'swp15',
            auto_config: false
      # link for swp16 --> leaf110:eth0
      device.vm.network "private_network",
            :mac => "44:38:39:00:06:a9",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8853',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10853',
            :libvirt__iface_name => 'swp16',
            auto_config: false
      # link for swp17 --> leaf111:eth0
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:3b",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8286',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10286',
            :libvirt__iface_name => 'swp17',
            auto_config: false
      # link for swp18 --> leaf112:eth0
      device.vm.network "private_network",
            :mac => "44:38:39:00:08:4d",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '9063',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '11063',
            :libvirt__iface_name => 'swp18',
            auto_config: false
      # link for swp19 --> leaf113:eth0
      device.vm.network "private_network",
            :mac => "44:38:39:00:05:db",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8750',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10750',
            :libvirt__iface_name => 'swp19',
            auto_config: false
      # link for swp20 --> leaf114:eth0
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:83",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8578',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10578',
            :libvirt__iface_name => 'swp20',
            auto_config: false
      # link for swp21 --> leaf115:eth0
      device.vm.network "private_network",
            :mac => "44:38:39:00:05:a3",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8722',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10722',
            :libvirt__iface_name => 'swp21',
            auto_config: false
      # link for swp22 --> leaf116:eth0
      device.vm.network "private_network",
            :mac => "44:38:39:00:07:eb",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '9014',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '11014',
            :libvirt__iface_name => 'swp22',
            auto_config: false
      # link for swp23 --> leaf117:eth0
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:09",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8517',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10517',
            :libvirt__iface_name => 'swp23',
            auto_config: false
      # link for swp24 --> leaf118:eth0
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:57",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8428',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10428',
            :libvirt__iface_name => 'swp24',
            auto_config: false
      # link for swp25 --> leaf119:eth0
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:03",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8258',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10258',
            :libvirt__iface_name => 'swp25',
            auto_config: false
      # link for swp26 --> leaf120:eth0
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:ab",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8086',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10086',
            :libvirt__iface_name => 'swp26',
            auto_config: false
      # link for swp27 --> leaf121:eth0
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:b7",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8092',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10092',
            :libvirt__iface_name => 'swp27',
            auto_config: false
      # link for swp28 --> leaf122:eth0
      device.vm.network "private_network",
            :mac => "44:38:39:00:07:3d",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8927',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10927',
            :libvirt__iface_name => 'swp28',
            auto_config: false
      # link for swp29 --> leaf123:eth0
      device.vm.network "private_network",
            :mac => "44:38:39:00:08:5f",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '9072',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '11072',
            :libvirt__iface_name => 'swp29',
            auto_config: false
      # link for swp30 --> leaf124:eth0
      device.vm.network "private_network",
            :mac => "44:38:39:00:05:7f",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8704',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10704',
            :libvirt__iface_name => 'swp30',
            auto_config: false
      # link for swp31 --> leaf125:eth0
      device.vm.network "private_network",
            :mac => "44:38:39:00:09:19",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '9165',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '11165',
            :libvirt__iface_name => 'swp31',
            auto_config: false
      # link for swp32 --> leaf126:eth0
      device.vm.network "private_network",
            :mac => "44:38:39:00:07:07",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8900',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10900',
            :libvirt__iface_name => 'swp32',
            auto_config: false
      # link for swp33 --> leaf127:eth0
      device.vm.network "private_network",
            :mac => "44:38:39:00:08:37",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '9052',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '11052',
            :libvirt__iface_name => 'swp33',
            auto_config: false
      # link for swp34 --> leaf128:eth0
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:71",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8057',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10057',
            :libvirt__iface_name => 'swp34',
            auto_config: false
      # link for swp35 --> netq-ts:eth0
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:27",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8148',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10148',
            :libvirt__iface_name => 'swp35',
            auto_config: false



    # Fixes "stdin: is not a tty" and "mesg: ttyname failed : Inappropriate ioctl for device"  messages --> https://github.com/mitchellh/vagrant/issues/1673
    device.vm.provision :shell , inline: "(sudo grep -q 'mesg n' /root/.profile 2>/dev/null && sudo sed -i '/mesg n/d' /root/.profile  2>/dev/null) || true;", privileged: false

    #Copy over Topology.dot File
    device.vm.provision "file", source: "topology.dot", destination: "~/topology.dot"
    device.vm.provision :shell, privileged: false, inline: "sudo mv ~/topology.dot /etc/ptm.d/topology.dot"

# Transfer Bridge File
      device.vm.provision "file", source: "./helper_scripts/auto_mgmt_network/bridge-untagged3", destination: "~/bridge-untagged"

    # Run the Config specified in the Node Attributes
    device.vm.provision :shell , privileged: false, :inline => 'echo "$(whoami)" > /tmp/normal_user'
    device.vm.provision :shell , path: "./helper_scripts/config_oob_switch.sh"


    # Install Rules for the interface re-map
    device.vm.provision :shell , :inline => <<-delete_udev_directory
if [ -d "/etc/udev/rules.d/70-persistent-net.rules" ]; then
    rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
fi
rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
delete_udev_directory

device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:f3 --> swp1"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:f3", NAME="swp1", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:a6 --> swp2"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:a6", NAME="swp2", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:ad --> swp3"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:ad", NAME="swp3", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:06:d1 --> swp4"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:06:d1", NAME="swp4", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:05:2d --> swp5"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:05:2d", NAME="swp5", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:4b --> swp6"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:4b", NAME="swp6", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:06:0d --> swp7"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:06:0d", NAME="swp7", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:c1 --> swp8"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:c1", NAME="swp8", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:37 --> swp9"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:37", NAME="swp9", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:17 --> swp10"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:17", NAME="swp10", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:05:c5 --> swp11"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:05:c5", NAME="swp11", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:4f --> swp12"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:4f", NAME="swp12", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:09:11 --> swp13"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:09:11", NAME="swp13", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:9b --> swp14"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:9b", NAME="swp14", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:d9 --> swp15"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:d9", NAME="swp15", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:06:a9 --> swp16"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:06:a9", NAME="swp16", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:3b --> swp17"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:3b", NAME="swp17", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:08:4d --> swp18"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:08:4d", NAME="swp18", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:05:db --> swp19"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:05:db", NAME="swp19", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:83 --> swp20"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:83", NAME="swp20", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:05:a3 --> swp21"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:05:a3", NAME="swp21", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:07:eb --> swp22"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:07:eb", NAME="swp22", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:09 --> swp23"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:09", NAME="swp23", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:57 --> swp24"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:57", NAME="swp24", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:03 --> swp25"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:03", NAME="swp25", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:ab --> swp26"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:ab", NAME="swp26", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:b7 --> swp27"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:b7", NAME="swp27", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:07:3d --> swp28"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:07:3d", NAME="swp28", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:08:5f --> swp29"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:08:5f", NAME="swp29", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:05:7f --> swp30"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:05:7f", NAME="swp30", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:09:19 --> swp31"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:09:19", NAME="swp31", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:07:07 --> swp32"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:07:07", NAME="swp32", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:08:37 --> swp33"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:08:37", NAME="swp33", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:71 --> swp34"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:71", NAME="swp34", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:27 --> swp35"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:27", NAME="swp35", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule

      device.vm.provision :shell , :inline => <<-vagrant_interface_rule
echo "  INFO: Adding UDEV Rule: Vagrant interface = eth0"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{ifindex}=="2", NAME="eth0", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
echo "#### UDEV Rules (/etc/udev/rules.d/70-persistent-net.rules) ####"
cat /etc/udev/rules.d/70-persistent-net.rules
vagrant_interface_rule

# Run Any Platform Specific Code and Apply the interface Re-map
    #   (may or may not perform a reboot depending on platform)
    device.vm.provision :shell , :inline => $script

end

  ##### DEFINE VM for oob-mgmt-switch2 #####
  config.vm.define "oob-mgmt-switch2" do |device|

    device.vm.hostname = "oob-mgmt-switch2"

    device.vm.box = "CumulusCommunity/cumulus-vx"
    device.vm.box_version = "3.5.0"

    device.vm.provider :libvirt do |v|
      v.memory = 768
    end
    #   see note here: https://github.com/pradels/vagrant-libvirt#synced-folders
    device.vm.synced_folder ".", "/vagrant", disabled: true



    # NETWORK INTERFACES
      # link for swp1 --> oob-mgmt-switch1:swp2
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:e9",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8245',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10245',
            :libvirt__iface_name => 'swp1',
            auto_config: false
      # link for swp2 --> oob-mgmt-switch3:swp1
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:f4",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10506',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8506',
            :libvirt__iface_name => 'swp2',
            auto_config: false
      # link for swp3 --> leaf49:eth0
      device.vm.network "private_network",
            :mac => "44:38:39:00:05:11",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8649',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10649',
            :libvirt__iface_name => 'swp3',
            auto_config: false
      # link for swp4 --> leaf50:eth0
      device.vm.network "private_network",
            :mac => "44:38:39:00:06:45",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8803',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10803',
            :libvirt__iface_name => 'swp4',
            auto_config: false
      # link for swp5 --> leaf51:eth0
      device.vm.network "private_network",
            :mac => "44:38:39:00:07:5b",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8942',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10942',
            :libvirt__iface_name => 'swp5',
            auto_config: false
      # link for swp6 --> leaf52:eth0
      device.vm.network "private_network",
            :mac => "44:38:39:00:05:5d",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8687',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10687',
            :libvirt__iface_name => 'swp6',
            auto_config: false
      # link for swp7 --> leaf53:eth0
      device.vm.network "private_network",
            :mac => "44:38:39:00:07:d7",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '9004',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '11004',
            :libvirt__iface_name => 'swp7',
            auto_config: false
      # link for swp8 --> leaf54:eth0
      device.vm.network "private_network",
            :mac => "44:38:39:00:08:ef",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '9144',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '11144',
            :libvirt__iface_name => 'swp8',
            auto_config: false
      # link for swp9 --> leaf55:eth0
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:a7",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8596',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10596',
            :libvirt__iface_name => 'swp9',
            auto_config: false
      # link for swp10 --> leaf56:eth0
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:79",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8573',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10573',
            :libvirt__iface_name => 'swp10',
            auto_config: false
      # link for swp11 --> leaf57:eth0
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:dd",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8111',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10111',
            :libvirt__iface_name => 'swp11',
            auto_config: false
      # link for swp12 --> leaf58:eth0
      device.vm.network "private_network",
            :mac => "44:38:39:00:05:c3",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8738',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10738',
            :libvirt__iface_name => 'swp12',
            auto_config: false
      # link for swp13 --> leaf59:eth0
      device.vm.network "private_network",
            :mac => "44:38:39:00:06:b9",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8861',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10861',
            :libvirt__iface_name => 'swp13',
            auto_config: false
      # link for swp14 --> leaf60:eth0
      device.vm.network "private_network",
            :mac => "44:38:39:00:08:7d",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '9087',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '11087',
            :libvirt__iface_name => 'swp14',
            auto_config: false
      # link for swp15 --> leaf61:eth0
      device.vm.network "private_network",
            :mac => "44:38:39:00:07:e7",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '9012',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '11012',
            :libvirt__iface_name => 'swp15',
            auto_config: false
      # link for swp16 --> leaf62:eth0
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:99",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8077',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10077',
            :libvirt__iface_name => 'swp16',
            auto_config: false
      # link for swp17 --> leaf63:eth0
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:2f",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8024',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10024',
            :libvirt__iface_name => 'swp17',
            auto_config: false
      # link for swp18 --> leaf64:eth0
      device.vm.network "private_network",
            :mac => "44:38:39:00:06:7d",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8831',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10831',
            :libvirt__iface_name => 'swp18',
            auto_config: false
      # link for swp19 --> leaf65:eth0
      device.vm.network "private_network",
            :mac => "44:38:39:00:08:47",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '9060',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '11060',
            :libvirt__iface_name => 'swp19',
            auto_config: false
      # link for swp20 --> leaf66:eth0
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:ab",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8214',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10214',
            :libvirt__iface_name => 'swp20',
            auto_config: false
      # link for swp21 --> leaf67:eth0
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:67",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8052',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10052',
            :libvirt__iface_name => 'swp21',
            auto_config: false
      # link for swp22 --> leaf68:eth0
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:b7",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8476',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10476',
            :libvirt__iface_name => 'swp22',
            auto_config: false
      # link for swp23 --> leaf69:eth0
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:a1",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8081',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10081',
            :libvirt__iface_name => 'swp23',
            auto_config: false
      # link for swp24 --> leaf70:eth0
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:0d",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8007',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10007',
            :libvirt__iface_name => 'swp24',
            auto_config: false
      # link for swp25 --> leaf71:eth0
      device.vm.network "private_network",
            :mac => "44:38:39:00:08:eb",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '9142',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '11142',
            :libvirt__iface_name => 'swp25',
            auto_config: false
      # link for swp26 --> leaf72:eth0
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:ed",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8503',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10503',
            :libvirt__iface_name => 'swp26',
            auto_config: false
      # link for swp27 --> leaf73:eth0
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:d5",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8491',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10491',
            :libvirt__iface_name => 'swp27',
            auto_config: false
      # link for swp28 --> leaf74:eth0
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:71",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8313',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10313',
            :libvirt__iface_name => 'swp28',
            auto_config: false
      # link for swp29 --> leaf75:eth0
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:2b",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8022',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10022',
            :libvirt__iface_name => 'swp29',
            auto_config: false
      # link for swp30 --> leaf76:eth0
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:bb",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8606',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10606',
            :libvirt__iface_name => 'swp30',
            auto_config: false
      # link for swp31 --> leaf77:eth0
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:3f",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8416',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10416',
            :libvirt__iface_name => 'swp31',
            auto_config: false
      # link for swp32 --> leaf78:eth0
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:47",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8292',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10292',
            :libvirt__iface_name => 'swp32',
            auto_config: false
      # link for swp33 --> leaf79:eth0
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:27",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8404',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10404',
            :libvirt__iface_name => 'swp33',
            auto_config: false
      # link for swp34 --> leaf80:eth0
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:e3",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8242',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10242',
            :libvirt__iface_name => 'swp34',
            auto_config: false
      # link for swp35 --> leaf81:eth0
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:bb",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8350',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10350',
            :libvirt__iface_name => 'swp35',
            auto_config: false
      # link for swp36 --> leaf82:eth0
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:43",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8546',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10546',
            :libvirt__iface_name => 'swp36',
            auto_config: false
      # link for swp37 --> leaf83:eth0
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:8b",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8454',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10454',
            :libvirt__iface_name => 'swp37',
            auto_config: false
      # link for swp38 --> leaf84:eth0
      device.vm.network "private_network",
            :mac => "44:38:39:00:09:39",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '9181',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '11181',
            :libvirt__iface_name => 'swp38',
            auto_config: false
      # link for swp39 --> leaf85:eth0
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:63",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8562',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10562',
            :libvirt__iface_name => 'swp39',
            auto_config: false
      # link for swp40 --> leaf86:eth0
      device.vm.network "private_network",
            :mac => "44:38:39:00:07:a7",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8980',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10980',
            :libvirt__iface_name => 'swp40',
            auto_config: false
      # link for swp41 --> leaf87:eth0
      device.vm.network "private_network",
            :mac => "44:38:39:00:07:53",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8938',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10938',
            :libvirt__iface_name => 'swp41',
            auto_config: false
      # link for swp42 --> leaf88:eth0
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:2b",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8534',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10534',
            :libvirt__iface_name => 'swp42',
            auto_config: false
      # link for swp43 --> leaf89:eth0
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:23",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8018',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10018',
            :libvirt__iface_name => 'swp43',
            auto_config: false
      # link for swp44 --> leaf90:eth0
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:9f",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8592',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10592',
            :libvirt__iface_name => 'swp44',
            auto_config: false
      # link for swp45 --> leaf91:eth0
      device.vm.network "private_network",
            :mac => "44:38:39:00:06:a1",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8849',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10849',
            :libvirt__iface_name => 'swp45',
            auto_config: false
      # link for swp46 --> leaf92:eth0
      device.vm.network "private_network",
            :mac => "44:38:39:00:07:61",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8945',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10945',
            :libvirt__iface_name => 'swp46',
            auto_config: false
      # link for swp47 --> leaf93:eth0
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:99",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8461',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10461',
            :libvirt__iface_name => 'swp47',
            auto_config: false
      # link for swp48 --> leaf94:eth0
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:63",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8306',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10306',
            :libvirt__iface_name => 'swp48',
            auto_config: false
      # link for swp49 --> leaf95:eth0
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:ff",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8384',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10384',
            :libvirt__iface_name => 'swp49',
            auto_config: false
      # link for swp50 --> leaf96:eth0
      device.vm.network "private_network",
            :mac => "44:38:39:00:05:2b",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8662',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10662',
            :libvirt__iface_name => 'swp50',
            auto_config: false



    # Fixes "stdin: is not a tty" and "mesg: ttyname failed : Inappropriate ioctl for device"  messages --> https://github.com/mitchellh/vagrant/issues/1673
    device.vm.provision :shell , inline: "(sudo grep -q 'mesg n' /root/.profile 2>/dev/null && sudo sed -i '/mesg n/d' /root/.profile  2>/dev/null) || true;", privileged: false

    #Copy over Topology.dot File
    device.vm.provision "file", source: "topology.dot", destination: "~/topology.dot"
    device.vm.provision :shell, privileged: false, inline: "sudo mv ~/topology.dot /etc/ptm.d/topology.dot"

# Transfer Bridge File
      device.vm.provision "file", source: "./helper_scripts/auto_mgmt_network/bridge-untagged2", destination: "~/bridge-untagged"

    # Run the Config specified in the Node Attributes
    device.vm.provision :shell , privileged: false, :inline => 'echo "$(whoami)" > /tmp/normal_user'
    device.vm.provision :shell , path: "./helper_scripts/config_oob_switch.sh"


    # Install Rules for the interface re-map
    device.vm.provision :shell , :inline => <<-delete_udev_directory
if [ -d "/etc/udev/rules.d/70-persistent-net.rules" ]; then
    rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
fi
rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
delete_udev_directory

device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:e9 --> swp1"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:e9", NAME="swp1", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:f4 --> swp2"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:f4", NAME="swp2", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:05:11 --> swp3"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:05:11", NAME="swp3", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:06:45 --> swp4"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:06:45", NAME="swp4", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:07:5b --> swp5"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:07:5b", NAME="swp5", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:05:5d --> swp6"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:05:5d", NAME="swp6", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:07:d7 --> swp7"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:07:d7", NAME="swp7", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:08:ef --> swp8"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:08:ef", NAME="swp8", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:a7 --> swp9"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:a7", NAME="swp9", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:79 --> swp10"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:79", NAME="swp10", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:dd --> swp11"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:dd", NAME="swp11", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:05:c3 --> swp12"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:05:c3", NAME="swp12", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:06:b9 --> swp13"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:06:b9", NAME="swp13", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:08:7d --> swp14"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:08:7d", NAME="swp14", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:07:e7 --> swp15"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:07:e7", NAME="swp15", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:99 --> swp16"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:99", NAME="swp16", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:2f --> swp17"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:2f", NAME="swp17", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:06:7d --> swp18"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:06:7d", NAME="swp18", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:08:47 --> swp19"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:08:47", NAME="swp19", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:ab --> swp20"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:ab", NAME="swp20", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:67 --> swp21"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:67", NAME="swp21", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:b7 --> swp22"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:b7", NAME="swp22", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:a1 --> swp23"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:a1", NAME="swp23", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:0d --> swp24"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:0d", NAME="swp24", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:08:eb --> swp25"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:08:eb", NAME="swp25", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:ed --> swp26"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:ed", NAME="swp26", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:d5 --> swp27"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:d5", NAME="swp27", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:71 --> swp28"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:71", NAME="swp28", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:2b --> swp29"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:2b", NAME="swp29", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:bb --> swp30"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:bb", NAME="swp30", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:3f --> swp31"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:3f", NAME="swp31", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:47 --> swp32"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:47", NAME="swp32", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:27 --> swp33"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:27", NAME="swp33", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:e3 --> swp34"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:e3", NAME="swp34", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:bb --> swp35"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:bb", NAME="swp35", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:43 --> swp36"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:43", NAME="swp36", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:8b --> swp37"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:8b", NAME="swp37", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:09:39 --> swp38"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:09:39", NAME="swp38", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:63 --> swp39"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:63", NAME="swp39", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:07:a7 --> swp40"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:07:a7", NAME="swp40", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:07:53 --> swp41"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:07:53", NAME="swp41", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:2b --> swp42"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:2b", NAME="swp42", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:23 --> swp43"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:23", NAME="swp43", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:9f --> swp44"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:9f", NAME="swp44", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:06:a1 --> swp45"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:06:a1", NAME="swp45", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:07:61 --> swp46"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:07:61", NAME="swp46", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:99 --> swp47"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:99", NAME="swp47", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:63 --> swp48"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:63", NAME="swp48", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:ff --> swp49"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:ff", NAME="swp49", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:05:2b --> swp50"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:05:2b", NAME="swp50", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule

      device.vm.provision :shell , :inline => <<-vagrant_interface_rule
echo "  INFO: Adding UDEV Rule: Vagrant interface = eth0"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{ifindex}=="2", NAME="eth0", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
echo "#### UDEV Rules (/etc/udev/rules.d/70-persistent-net.rules) ####"
cat /etc/udev/rules.d/70-persistent-net.rules
vagrant_interface_rule

# Run Any Platform Specific Code and Apply the interface Re-map
    #   (may or may not perform a reboot depending on platform)
    device.vm.provision :shell , :inline => $script

end

  ##### DEFINE VM for leaf38 #####
  config.vm.define "leaf38" do |device|

    device.vm.hostname = "leaf38"

    device.vm.box = "CumulusCommunity/cumulus-vx"
    device.vm.box_version = "3.5.0"

    device.vm.provider :libvirt do |v|
      v.memory = 768
    end
    #   see note here: https://github.com/pradels/vagrant-libvirt#synced-folders
    device.vm.synced_folder ".", "/vagrant", disabled: true



    # NETWORK INTERFACES
      # link for eth0 --> oob-mgmt-switch1:swp40
      device.vm.network "private_network",
            :mac => "44:38:39:00:05:3c",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10670',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8670',
            :libvirt__iface_name => 'eth0',
            auto_config: false
      # link for swp1 --> chassis01-lc2-1:swp6
      device.vm.network "private_network",
            :mac => "44:38:39:00:06:ee",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10887',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8887',
            :libvirt__iface_name => 'swp1',
            auto_config: false
      # link for swp2 --> chassis02-lc2-1:swp6
      device.vm.network "private_network",
            :mac => "44:38:39:00:07:6c",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10950',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8950',
            :libvirt__iface_name => 'swp2',
            auto_config: false
      # link for swp3 --> chassis03-lc2-1:swp6
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:3e",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10031',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8031',
            :libvirt__iface_name => 'swp3',
            auto_config: false
      # link for swp4 --> chassis04-lc2-1:swp6
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:0c",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10518',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8518',
            :libvirt__iface_name => 'swp4',
            auto_config: false



    # Fixes "stdin: is not a tty" and "mesg: ttyname failed : Inappropriate ioctl for device"  messages --> https://github.com/mitchellh/vagrant/issues/1673
    device.vm.provision :shell , inline: "(sudo grep -q 'mesg n' /root/.profile 2>/dev/null && sudo sed -i '/mesg n/d' /root/.profile  2>/dev/null) || true;", privileged: false

    #Copy over Topology.dot File
    device.vm.provision "file", source: "topology.dot", destination: "~/topology.dot"
    device.vm.provision :shell, privileged: false, inline: "sudo mv ~/topology.dot /etc/ptm.d/topology.dot"


    # Run the Config specified in the Node Attributes
    device.vm.provision :shell , privileged: false, :inline => 'echo "$(whoami)" > /tmp/normal_user'
    device.vm.provision :shell , path: "./helper_scripts/extra_switch_config.sh"


    # Install Rules for the interface re-map
    device.vm.provision :shell , :inline => <<-delete_udev_directory
if [ -d "/etc/udev/rules.d/70-persistent-net.rules" ]; then
    rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
fi
rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
delete_udev_directory

device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:05:3c --> eth0"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:05:3c", NAME="eth0", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:06:ee --> swp1"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:06:ee", NAME="swp1", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:07:6c --> swp2"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:07:6c", NAME="swp2", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:3e --> swp3"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:3e", NAME="swp3", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:0c --> swp4"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:0c", NAME="swp4", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule

      device.vm.provision :shell , :inline => <<-vagrant_interface_rule
echo "  INFO: Adding UDEV Rule: Vagrant interface = vagrant"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{ifindex}=="2", NAME="vagrant", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
echo "#### UDEV Rules (/etc/udev/rules.d/70-persistent-net.rules) ####"
cat /etc/udev/rules.d/70-persistent-net.rules
vagrant_interface_rule

# Run Any Platform Specific Code and Apply the interface Re-map
    #   (may or may not perform a reboot depending on platform)
    device.vm.provision :shell , :inline => $script

end

  ##### DEFINE VM for leaf37 #####
  config.vm.define "leaf37" do |device|

    device.vm.hostname = "leaf37"

    device.vm.box = "CumulusCommunity/cumulus-vx"
    device.vm.box_version = "3.5.0"

    device.vm.provider :libvirt do |v|
      v.memory = 768
    end
    #   see note here: https://github.com/pradels/vagrant-libvirt#synced-folders
    device.vm.synced_folder ".", "/vagrant", disabled: true



    # NETWORK INTERFACES
      # link for eth0 --> oob-mgmt-switch1:swp39
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:54",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10170',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8170',
            :libvirt__iface_name => 'eth0',
            auto_config: false
      # link for swp1 --> chassis01-lc2-1:swp5
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:06",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10131',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8131',
            :libvirt__iface_name => 'swp1',
            auto_config: false
      # link for swp2 --> chassis02-lc2-1:swp5
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:6c",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10438',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8438',
            :libvirt__iface_name => 'swp2',
            auto_config: false
      # link for swp3 --> chassis03-lc2-1:swp5
      device.vm.network "private_network",
            :mac => "44:38:39:00:08:8e",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '11095',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '9095',
            :libvirt__iface_name => 'swp3',
            auto_config: false
      # link for swp4 --> chassis04-lc2-1:swp5
      device.vm.network "private_network",
            :mac => "44:38:39:00:06:c4",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10866',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8866',
            :libvirt__iface_name => 'swp4',
            auto_config: false



    # Fixes "stdin: is not a tty" and "mesg: ttyname failed : Inappropriate ioctl for device"  messages --> https://github.com/mitchellh/vagrant/issues/1673
    device.vm.provision :shell , inline: "(sudo grep -q 'mesg n' /root/.profile 2>/dev/null && sudo sed -i '/mesg n/d' /root/.profile  2>/dev/null) || true;", privileged: false

    #Copy over Topology.dot File
    device.vm.provision "file", source: "topology.dot", destination: "~/topology.dot"
    device.vm.provision :shell, privileged: false, inline: "sudo mv ~/topology.dot /etc/ptm.d/topology.dot"


    # Run the Config specified in the Node Attributes
    device.vm.provision :shell , privileged: false, :inline => 'echo "$(whoami)" > /tmp/normal_user'
    device.vm.provision :shell , path: "./helper_scripts/extra_switch_config.sh"


    # Install Rules for the interface re-map
    device.vm.provision :shell , :inline => <<-delete_udev_directory
if [ -d "/etc/udev/rules.d/70-persistent-net.rules" ]; then
    rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
fi
rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
delete_udev_directory

device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:54 --> eth0"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:54", NAME="eth0", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:06 --> swp1"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:06", NAME="swp1", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:6c --> swp2"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:6c", NAME="swp2", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:08:8e --> swp3"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:08:8e", NAME="swp3", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:06:c4 --> swp4"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:06:c4", NAME="swp4", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule

      device.vm.provision :shell , :inline => <<-vagrant_interface_rule
echo "  INFO: Adding UDEV Rule: Vagrant interface = vagrant"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{ifindex}=="2", NAME="vagrant", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
echo "#### UDEV Rules (/etc/udev/rules.d/70-persistent-net.rules) ####"
cat /etc/udev/rules.d/70-persistent-net.rules
vagrant_interface_rule

# Run Any Platform Specific Code and Apply the interface Re-map
    #   (may or may not perform a reboot depending on platform)
    device.vm.provision :shell , :inline => $script

end

  ##### DEFINE VM for leaf36 #####
  config.vm.define "leaf36" do |device|

    device.vm.hostname = "leaf36"

    device.vm.box = "CumulusCommunity/cumulus-vx"
    device.vm.box_version = "3.5.0"

    device.vm.provider :libvirt do |v|
      v.memory = 768
    end
    #   see note here: https://github.com/pradels/vagrant-libvirt#synced-folders
    device.vm.synced_folder ".", "/vagrant", disabled: true



    # NETWORK INTERFACES
      # link for eth0 --> oob-mgmt-switch1:swp38
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:04",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10130',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8130',
            :libvirt__iface_name => 'eth0',
            auto_config: false
      # link for swp1 --> chassis01-lc2-1:swp4
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:0e",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10263',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8263',
            :libvirt__iface_name => 'swp1',
            auto_config: false
      # link for swp2 --> chassis02-lc2-1:swp4
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:cc",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10614',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8614',
            :libvirt__iface_name => 'swp2',
            auto_config: false
      # link for swp3 --> chassis03-lc2-1:swp4
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:48",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10548',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8548',
            :libvirt__iface_name => 'swp3',
            auto_config: false
      # link for swp4 --> chassis04-lc2-1:swp4
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:9a",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10205',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8205',
            :libvirt__iface_name => 'swp4',
            auto_config: false



    # Fixes "stdin: is not a tty" and "mesg: ttyname failed : Inappropriate ioctl for device"  messages --> https://github.com/mitchellh/vagrant/issues/1673
    device.vm.provision :shell , inline: "(sudo grep -q 'mesg n' /root/.profile 2>/dev/null && sudo sed -i '/mesg n/d' /root/.profile  2>/dev/null) || true;", privileged: false

    #Copy over Topology.dot File
    device.vm.provision "file", source: "topology.dot", destination: "~/topology.dot"
    device.vm.provision :shell, privileged: false, inline: "sudo mv ~/topology.dot /etc/ptm.d/topology.dot"


    # Run the Config specified in the Node Attributes
    device.vm.provision :shell , privileged: false, :inline => 'echo "$(whoami)" > /tmp/normal_user'
    device.vm.provision :shell , path: "./helper_scripts/extra_switch_config.sh"


    # Install Rules for the interface re-map
    device.vm.provision :shell , :inline => <<-delete_udev_directory
if [ -d "/etc/udev/rules.d/70-persistent-net.rules" ]; then
    rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
fi
rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
delete_udev_directory

device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:04 --> eth0"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:04", NAME="eth0", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:0e --> swp1"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:0e", NAME="swp1", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:cc --> swp2"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:cc", NAME="swp2", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:48 --> swp3"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:48", NAME="swp3", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:9a --> swp4"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:9a", NAME="swp4", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule

      device.vm.provision :shell , :inline => <<-vagrant_interface_rule
echo "  INFO: Adding UDEV Rule: Vagrant interface = vagrant"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{ifindex}=="2", NAME="vagrant", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
echo "#### UDEV Rules (/etc/udev/rules.d/70-persistent-net.rules) ####"
cat /etc/udev/rules.d/70-persistent-net.rules
vagrant_interface_rule

# Run Any Platform Specific Code and Apply the interface Re-map
    #   (may or may not perform a reboot depending on platform)
    device.vm.provision :shell , :inline => $script

end

  ##### DEFINE VM for leaf35 #####
  config.vm.define "leaf35" do |device|

    device.vm.hostname = "leaf35"

    device.vm.box = "CumulusCommunity/cumulus-vx"
    device.vm.box_version = "3.5.0"

    device.vm.provider :libvirt do |v|
      v.memory = 768
    end
    #   see note here: https://github.com/pradels/vagrant-libvirt#synced-folders
    device.vm.synced_folder ".", "/vagrant", disabled: true



    # NETWORK INTERFACES
      # link for eth0 --> oob-mgmt-switch1:swp37
      device.vm.network "private_network",
            :mac => "44:38:39:00:08:e2",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '11137',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '9137',
            :libvirt__iface_name => 'eth0',
            auto_config: false
      # link for swp1 --> chassis01-lc2-1:swp3
      device.vm.network "private_network",
            :mac => "44:38:39:00:07:2a",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10917',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8917',
            :libvirt__iface_name => 'swp1',
            auto_config: false
      # link for swp2 --> chassis02-lc2-1:swp3
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:1a",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10525',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8525',
            :libvirt__iface_name => 'swp2',
            auto_config: false
      # link for swp3 --> chassis03-lc2-1:swp3
      device.vm.network "private_network",
            :mac => "44:38:39:00:08:14",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '11034',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '9034',
            :libvirt__iface_name => 'swp3',
            auto_config: false
      # link for swp4 --> chassis04-lc2-1:swp3
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:0a",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10261',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8261',
            :libvirt__iface_name => 'swp4',
            auto_config: false



    # Fixes "stdin: is not a tty" and "mesg: ttyname failed : Inappropriate ioctl for device"  messages --> https://github.com/mitchellh/vagrant/issues/1673
    device.vm.provision :shell , inline: "(sudo grep -q 'mesg n' /root/.profile 2>/dev/null && sudo sed -i '/mesg n/d' /root/.profile  2>/dev/null) || true;", privileged: false

    #Copy over Topology.dot File
    device.vm.provision "file", source: "topology.dot", destination: "~/topology.dot"
    device.vm.provision :shell, privileged: false, inline: "sudo mv ~/topology.dot /etc/ptm.d/topology.dot"


    # Run the Config specified in the Node Attributes
    device.vm.provision :shell , privileged: false, :inline => 'echo "$(whoami)" > /tmp/normal_user'
    device.vm.provision :shell , path: "./helper_scripts/extra_switch_config.sh"


    # Install Rules for the interface re-map
    device.vm.provision :shell , :inline => <<-delete_udev_directory
if [ -d "/etc/udev/rules.d/70-persistent-net.rules" ]; then
    rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
fi
rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
delete_udev_directory

device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:08:e2 --> eth0"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:08:e2", NAME="eth0", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:07:2a --> swp1"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:07:2a", NAME="swp1", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:1a --> swp2"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:1a", NAME="swp2", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:08:14 --> swp3"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:08:14", NAME="swp3", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:0a --> swp4"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:0a", NAME="swp4", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule

      device.vm.provision :shell , :inline => <<-vagrant_interface_rule
echo "  INFO: Adding UDEV Rule: Vagrant interface = vagrant"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{ifindex}=="2", NAME="vagrant", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
echo "#### UDEV Rules (/etc/udev/rules.d/70-persistent-net.rules) ####"
cat /etc/udev/rules.d/70-persistent-net.rules
vagrant_interface_rule

# Run Any Platform Specific Code and Apply the interface Re-map
    #   (may or may not perform a reboot depending on platform)
    device.vm.provision :shell , :inline => $script

end

  ##### DEFINE VM for leaf34 #####
  config.vm.define "leaf34" do |device|

    device.vm.hostname = "leaf34"

    device.vm.box = "CumulusCommunity/cumulus-vx"
    device.vm.box_version = "3.5.0"

    device.vm.provider :libvirt do |v|
      v.memory = 768
    end
    #   see note here: https://github.com/pradels/vagrant-libvirt#synced-folders
    device.vm.synced_folder ".", "/vagrant", disabled: true



    # NETWORK INTERFACES
      # link for eth0 --> oob-mgmt-switch1:swp36
      device.vm.network "private_network",
            :mac => "44:38:39:00:07:b4",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10986',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8986',
            :libvirt__iface_name => 'eth0',
            auto_config: false
      # link for swp1 --> chassis01-lc2-1:swp2
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:5c",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10302',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8302',
            :libvirt__iface_name => 'swp1',
            auto_config: false
      # link for swp2 --> chassis02-lc2-1:swp2
      device.vm.network "private_network",
            :mac => "44:38:39:00:06:2c",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10790',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8790',
            :libvirt__iface_name => 'swp2',
            auto_config: false
      # link for swp3 --> chassis03-lc2-1:swp2
      device.vm.network "private_network",
            :mac => "44:38:39:00:05:22",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10657',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8657',
            :libvirt__iface_name => 'swp3',
            auto_config: false
      # link for swp4 --> chassis04-lc2-1:swp2
      device.vm.network "private_network",
            :mac => "44:38:39:00:08:80",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '11088',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '9088',
            :libvirt__iface_name => 'swp4',
            auto_config: false



    # Fixes "stdin: is not a tty" and "mesg: ttyname failed : Inappropriate ioctl for device"  messages --> https://github.com/mitchellh/vagrant/issues/1673
    device.vm.provision :shell , inline: "(sudo grep -q 'mesg n' /root/.profile 2>/dev/null && sudo sed -i '/mesg n/d' /root/.profile  2>/dev/null) || true;", privileged: false

    #Copy over Topology.dot File
    device.vm.provision "file", source: "topology.dot", destination: "~/topology.dot"
    device.vm.provision :shell, privileged: false, inline: "sudo mv ~/topology.dot /etc/ptm.d/topology.dot"


    # Run the Config specified in the Node Attributes
    device.vm.provision :shell , privileged: false, :inline => 'echo "$(whoami)" > /tmp/normal_user'
    device.vm.provision :shell , path: "./helper_scripts/extra_switch_config.sh"


    # Install Rules for the interface re-map
    device.vm.provision :shell , :inline => <<-delete_udev_directory
if [ -d "/etc/udev/rules.d/70-persistent-net.rules" ]; then
    rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
fi
rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
delete_udev_directory

device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:07:b4 --> eth0"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:07:b4", NAME="eth0", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:5c --> swp1"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:5c", NAME="swp1", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:06:2c --> swp2"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:06:2c", NAME="swp2", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:05:22 --> swp3"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:05:22", NAME="swp3", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:08:80 --> swp4"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:08:80", NAME="swp4", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule

      device.vm.provision :shell , :inline => <<-vagrant_interface_rule
echo "  INFO: Adding UDEV Rule: Vagrant interface = vagrant"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{ifindex}=="2", NAME="vagrant", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
echo "#### UDEV Rules (/etc/udev/rules.d/70-persistent-net.rules) ####"
cat /etc/udev/rules.d/70-persistent-net.rules
vagrant_interface_rule

# Run Any Platform Specific Code and Apply the interface Re-map
    #   (may or may not perform a reboot depending on platform)
    device.vm.provision :shell , :inline => $script

end

  ##### DEFINE VM for leaf33 #####
  config.vm.define "leaf33" do |device|

    device.vm.hostname = "leaf33"

    device.vm.box = "CumulusCommunity/cumulus-vx"
    device.vm.box_version = "3.5.0"

    device.vm.provider :libvirt do |v|
      v.memory = 768
    end
    #   see note here: https://github.com/pradels/vagrant-libvirt#synced-folders
    device.vm.synced_folder ".", "/vagrant", disabled: true



    # NETWORK INTERFACES
      # link for eth0 --> oob-mgmt-switch1:swp35
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:7e",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10319',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8319',
            :libvirt__iface_name => 'eth0',
            auto_config: false
      # link for swp1 --> chassis01-lc2-1:swp1
      device.vm.network "private_network",
            :mac => "44:38:39:00:09:02",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '11153',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '9153',
            :libvirt__iface_name => 'swp1',
            auto_config: false
      # link for swp2 --> chassis02-lc2-1:swp1
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:98",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10076',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8076',
            :libvirt__iface_name => 'swp2',
            auto_config: false
      # link for swp3 --> chassis03-lc2-1:swp1
      device.vm.network "private_network",
            :mac => "44:38:39:00:06:8e",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10839',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8839',
            :libvirt__iface_name => 'swp3',
            auto_config: false
      # link for swp4 --> chassis04-lc2-1:swp1
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:b6",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10091',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8091',
            :libvirt__iface_name => 'swp4',
            auto_config: false



    # Fixes "stdin: is not a tty" and "mesg: ttyname failed : Inappropriate ioctl for device"  messages --> https://github.com/mitchellh/vagrant/issues/1673
    device.vm.provision :shell , inline: "(sudo grep -q 'mesg n' /root/.profile 2>/dev/null && sudo sed -i '/mesg n/d' /root/.profile  2>/dev/null) || true;", privileged: false

    #Copy over Topology.dot File
    device.vm.provision "file", source: "topology.dot", destination: "~/topology.dot"
    device.vm.provision :shell, privileged: false, inline: "sudo mv ~/topology.dot /etc/ptm.d/topology.dot"


    # Run the Config specified in the Node Attributes
    device.vm.provision :shell , privileged: false, :inline => 'echo "$(whoami)" > /tmp/normal_user'
    device.vm.provision :shell , path: "./helper_scripts/extra_switch_config.sh"


    # Install Rules for the interface re-map
    device.vm.provision :shell , :inline => <<-delete_udev_directory
if [ -d "/etc/udev/rules.d/70-persistent-net.rules" ]; then
    rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
fi
rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
delete_udev_directory

device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:7e --> eth0"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:7e", NAME="eth0", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:09:02 --> swp1"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:09:02", NAME="swp1", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:98 --> swp2"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:98", NAME="swp2", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:06:8e --> swp3"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:06:8e", NAME="swp3", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:b6 --> swp4"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:b6", NAME="swp4", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule

      device.vm.provision :shell , :inline => <<-vagrant_interface_rule
echo "  INFO: Adding UDEV Rule: Vagrant interface = vagrant"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{ifindex}=="2", NAME="vagrant", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
echo "#### UDEV Rules (/etc/udev/rules.d/70-persistent-net.rules) ####"
cat /etc/udev/rules.d/70-persistent-net.rules
vagrant_interface_rule

# Run Any Platform Specific Code and Apply the interface Re-map
    #   (may or may not perform a reboot depending on platform)
    device.vm.provision :shell , :inline => $script

end

  ##### DEFINE VM for leaf32 #####
  config.vm.define "leaf32" do |device|

    device.vm.hostname = "leaf32"

    device.vm.box = "CumulusCommunity/cumulus-vx"
    device.vm.box_version = "3.5.0"

    device.vm.provider :libvirt do |v|
      v.memory = 768
    end
    #   see note here: https://github.com/pradels/vagrant-libvirt#synced-folders
    device.vm.synced_folder ".", "/vagrant", disabled: true



    # NETWORK INTERFACES
      # link for eth0 --> oob-mgmt-switch1:swp34
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:34",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10154',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8154',
            :libvirt__iface_name => 'eth0',
            auto_config: false
      # link for swp1 --> chassis01-lc1-2:swp16
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:40",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10160',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8160',
            :libvirt__iface_name => 'swp1',
            auto_config: false
      # link for swp2 --> chassis02-lc1-2:swp16
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:ee",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10375',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8375',
            :libvirt__iface_name => 'swp2',
            auto_config: false
      # link for swp3 --> chassis03-lc1-2:swp16
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:aa",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10341',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8341',
            :libvirt__iface_name => 'swp3',
            auto_config: false
      # link for swp4 --> chassis04-lc1-2:swp16
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:60",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10304',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8304',
            :libvirt__iface_name => 'swp4',
            auto_config: false



    # Fixes "stdin: is not a tty" and "mesg: ttyname failed : Inappropriate ioctl for device"  messages --> https://github.com/mitchellh/vagrant/issues/1673
    device.vm.provision :shell , inline: "(sudo grep -q 'mesg n' /root/.profile 2>/dev/null && sudo sed -i '/mesg n/d' /root/.profile  2>/dev/null) || true;", privileged: false

    #Copy over Topology.dot File
    device.vm.provision "file", source: "topology.dot", destination: "~/topology.dot"
    device.vm.provision :shell, privileged: false, inline: "sudo mv ~/topology.dot /etc/ptm.d/topology.dot"


    # Run the Config specified in the Node Attributes
    device.vm.provision :shell , privileged: false, :inline => 'echo "$(whoami)" > /tmp/normal_user'
    device.vm.provision :shell , path: "./helper_scripts/extra_switch_config.sh"


    # Install Rules for the interface re-map
    device.vm.provision :shell , :inline => <<-delete_udev_directory
if [ -d "/etc/udev/rules.d/70-persistent-net.rules" ]; then
    rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
fi
rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
delete_udev_directory

device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:34 --> eth0"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:34", NAME="eth0", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:40 --> swp1"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:40", NAME="swp1", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:ee --> swp2"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:ee", NAME="swp2", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:aa --> swp3"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:aa", NAME="swp3", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:60 --> swp4"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:60", NAME="swp4", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule

      device.vm.provision :shell , :inline => <<-vagrant_interface_rule
echo "  INFO: Adding UDEV Rule: Vagrant interface = vagrant"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{ifindex}=="2", NAME="vagrant", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
echo "#### UDEV Rules (/etc/udev/rules.d/70-persistent-net.rules) ####"
cat /etc/udev/rules.d/70-persistent-net.rules
vagrant_interface_rule

# Run Any Platform Specific Code and Apply the interface Re-map
    #   (may or may not perform a reboot depending on platform)
    device.vm.provision :shell , :inline => $script

end

  ##### DEFINE VM for leaf31 #####
  config.vm.define "leaf31" do |device|

    device.vm.hostname = "leaf31"

    device.vm.box = "CumulusCommunity/cumulus-vx"
    device.vm.box_version = "3.5.0"

    device.vm.provider :libvirt do |v|
      v.memory = 768
    end
    #   see note here: https://github.com/pradels/vagrant-libvirt#synced-folders
    device.vm.synced_folder ".", "/vagrant", disabled: true



    # NETWORK INTERFACES
      # link for eth0 --> oob-mgmt-switch1:swp33
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:6e",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10567',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8567',
            :libvirt__iface_name => 'eth0',
            auto_config: false
      # link for swp1 --> chassis01-lc1-2:swp15
      device.vm.network "private_network",
            :mac => "44:38:39:00:07:0a",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10901',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8901',
            :libvirt__iface_name => 'swp1',
            auto_config: false
      # link for swp2 --> chassis02-lc1-2:swp15
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:14",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10010',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8010',
            :libvirt__iface_name => 'swp2',
            auto_config: false
      # link for swp3 --> chassis03-lc1-2:swp15
      device.vm.network "private_network",
            :mac => "44:38:39:00:06:1a",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10781',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8781',
            :libvirt__iface_name => 'swp3',
            auto_config: false
      # link for swp4 --> chassis04-lc1-2:swp15
      device.vm.network "private_network",
            :mac => "44:38:39:00:08:5e",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '11071',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '9071',
            :libvirt__iface_name => 'swp4',
            auto_config: false



    # Fixes "stdin: is not a tty" and "mesg: ttyname failed : Inappropriate ioctl for device"  messages --> https://github.com/mitchellh/vagrant/issues/1673
    device.vm.provision :shell , inline: "(sudo grep -q 'mesg n' /root/.profile 2>/dev/null && sudo sed -i '/mesg n/d' /root/.profile  2>/dev/null) || true;", privileged: false

    #Copy over Topology.dot File
    device.vm.provision "file", source: "topology.dot", destination: "~/topology.dot"
    device.vm.provision :shell, privileged: false, inline: "sudo mv ~/topology.dot /etc/ptm.d/topology.dot"


    # Run the Config specified in the Node Attributes
    device.vm.provision :shell , privileged: false, :inline => 'echo "$(whoami)" > /tmp/normal_user'
    device.vm.provision :shell , path: "./helper_scripts/extra_switch_config.sh"


    # Install Rules for the interface re-map
    device.vm.provision :shell , :inline => <<-delete_udev_directory
if [ -d "/etc/udev/rules.d/70-persistent-net.rules" ]; then
    rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
fi
rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
delete_udev_directory

device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:6e --> eth0"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:6e", NAME="eth0", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:07:0a --> swp1"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:07:0a", NAME="swp1", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:14 --> swp2"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:14", NAME="swp2", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:06:1a --> swp3"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:06:1a", NAME="swp3", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:08:5e --> swp4"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:08:5e", NAME="swp4", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule

      device.vm.provision :shell , :inline => <<-vagrant_interface_rule
echo "  INFO: Adding UDEV Rule: Vagrant interface = vagrant"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{ifindex}=="2", NAME="vagrant", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
echo "#### UDEV Rules (/etc/udev/rules.d/70-persistent-net.rules) ####"
cat /etc/udev/rules.d/70-persistent-net.rules
vagrant_interface_rule

# Run Any Platform Specific Code and Apply the interface Re-map
    #   (may or may not perform a reboot depending on platform)
    device.vm.provision :shell , :inline => $script

end

  ##### DEFINE VM for leaf30 #####
  config.vm.define "leaf30" do |device|

    device.vm.hostname = "leaf30"

    device.vm.box = "CumulusCommunity/cumulus-vx"
    device.vm.box_version = "3.5.0"

    device.vm.provider :libvirt do |v|
      v.memory = 768
    end
    #   see note here: https://github.com/pradels/vagrant-libvirt#synced-folders
    device.vm.synced_folder ".", "/vagrant", disabled: true



    # NETWORK INTERFACES
      # link for eth0 --> oob-mgmt-switch1:swp32
      device.vm.network "private_network",
            :mac => "44:38:39:00:09:00",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '11152',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '9152',
            :libvirt__iface_name => 'eth0',
            auto_config: false
      # link for swp1 --> chassis01-lc1-2:swp14
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:20",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10144',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8144',
            :libvirt__iface_name => 'swp1',
            auto_config: false
      # link for swp2 --> chassis02-lc1-2:swp14
      device.vm.network "private_network",
            :mac => "44:38:39:00:05:54",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10682',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8682',
            :libvirt__iface_name => 'swp2',
            auto_config: false
      # link for swp3 --> chassis03-lc1-2:swp14
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:ca",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10229',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8229',
            :libvirt__iface_name => 'swp3',
            auto_config: false
      # link for swp4 --> chassis04-lc1-2:swp14
      device.vm.network "private_network",
            :mac => "44:38:39:00:05:9e",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10719',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8719',
            :libvirt__iface_name => 'swp4',
            auto_config: false



    # Fixes "stdin: is not a tty" and "mesg: ttyname failed : Inappropriate ioctl for device"  messages --> https://github.com/mitchellh/vagrant/issues/1673
    device.vm.provision :shell , inline: "(sudo grep -q 'mesg n' /root/.profile 2>/dev/null && sudo sed -i '/mesg n/d' /root/.profile  2>/dev/null) || true;", privileged: false

    #Copy over Topology.dot File
    device.vm.provision "file", source: "topology.dot", destination: "~/topology.dot"
    device.vm.provision :shell, privileged: false, inline: "sudo mv ~/topology.dot /etc/ptm.d/topology.dot"


    # Run the Config specified in the Node Attributes
    device.vm.provision :shell , privileged: false, :inline => 'echo "$(whoami)" > /tmp/normal_user'
    device.vm.provision :shell , path: "./helper_scripts/extra_switch_config.sh"


    # Install Rules for the interface re-map
    device.vm.provision :shell , :inline => <<-delete_udev_directory
if [ -d "/etc/udev/rules.d/70-persistent-net.rules" ]; then
    rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
fi
rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
delete_udev_directory

device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:09:00 --> eth0"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:09:00", NAME="eth0", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:20 --> swp1"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:20", NAME="swp1", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:05:54 --> swp2"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:05:54", NAME="swp2", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:ca --> swp3"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:ca", NAME="swp3", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:05:9e --> swp4"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:05:9e", NAME="swp4", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule

      device.vm.provision :shell , :inline => <<-vagrant_interface_rule
echo "  INFO: Adding UDEV Rule: Vagrant interface = vagrant"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{ifindex}=="2", NAME="vagrant", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
echo "#### UDEV Rules (/etc/udev/rules.d/70-persistent-net.rules) ####"
cat /etc/udev/rules.d/70-persistent-net.rules
vagrant_interface_rule

# Run Any Platform Specific Code and Apply the interface Re-map
    #   (may or may not perform a reboot depending on platform)
    device.vm.provision :shell , :inline => $script

end

  ##### DEFINE VM for leaf39 #####
  config.vm.define "leaf39" do |device|

    device.vm.hostname = "leaf39"

    device.vm.box = "CumulusCommunity/cumulus-vx"
    device.vm.box_version = "3.5.0"

    device.vm.provider :libvirt do |v|
      v.memory = 768
    end
    #   see note here: https://github.com/pradels/vagrant-libvirt#synced-folders
    device.vm.synced_folder ".", "/vagrant", disabled: true



    # NETWORK INTERFACES
      # link for eth0 --> oob-mgmt-switch1:swp41
      device.vm.network "private_network",
            :mac => "44:38:39:00:06:4a",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10805',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8805',
            :libvirt__iface_name => 'eth0',
            auto_config: false
      # link for swp1 --> chassis01-lc2-1:swp7
      device.vm.network "private_network",
            :mac => "44:38:39:00:05:38",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10668',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8668',
            :libvirt__iface_name => 'swp1',
            auto_config: false
      # link for swp2 --> chassis02-lc2-1:swp7
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:b4",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10602',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8602',
            :libvirt__iface_name => 'swp2',
            auto_config: false
      # link for swp3 --> chassis03-lc2-1:swp7
      device.vm.network "private_network",
            :mac => "44:38:39:00:08:3c",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '11054',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '9054',
            :libvirt__iface_name => 'swp3',
            auto_config: false
      # link for swp4 --> chassis04-lc2-1:swp7
      device.vm.network "private_network",
            :mac => "44:38:39:00:07:d2",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '11001',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '9001',
            :libvirt__iface_name => 'swp4',
            auto_config: false



    # Fixes "stdin: is not a tty" and "mesg: ttyname failed : Inappropriate ioctl for device"  messages --> https://github.com/mitchellh/vagrant/issues/1673
    device.vm.provision :shell , inline: "(sudo grep -q 'mesg n' /root/.profile 2>/dev/null && sudo sed -i '/mesg n/d' /root/.profile  2>/dev/null) || true;", privileged: false

    #Copy over Topology.dot File
    device.vm.provision "file", source: "topology.dot", destination: "~/topology.dot"
    device.vm.provision :shell, privileged: false, inline: "sudo mv ~/topology.dot /etc/ptm.d/topology.dot"


    # Run the Config specified in the Node Attributes
    device.vm.provision :shell , privileged: false, :inline => 'echo "$(whoami)" > /tmp/normal_user'
    device.vm.provision :shell , path: "./helper_scripts/extra_switch_config.sh"


    # Install Rules for the interface re-map
    device.vm.provision :shell , :inline => <<-delete_udev_directory
if [ -d "/etc/udev/rules.d/70-persistent-net.rules" ]; then
    rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
fi
rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
delete_udev_directory

device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:06:4a --> eth0"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:06:4a", NAME="eth0", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:05:38 --> swp1"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:05:38", NAME="swp1", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:b4 --> swp2"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:b4", NAME="swp2", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:08:3c --> swp3"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:08:3c", NAME="swp3", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:07:d2 --> swp4"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:07:d2", NAME="swp4", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule

      device.vm.provision :shell , :inline => <<-vagrant_interface_rule
echo "  INFO: Adding UDEV Rule: Vagrant interface = vagrant"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{ifindex}=="2", NAME="vagrant", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
echo "#### UDEV Rules (/etc/udev/rules.d/70-persistent-net.rules) ####"
cat /etc/udev/rules.d/70-persistent-net.rules
vagrant_interface_rule

# Run Any Platform Specific Code and Apply the interface Re-map
    #   (may or may not perform a reboot depending on platform)
    device.vm.provision :shell , :inline => $script

end

  ##### DEFINE VM for leaf48 #####
  config.vm.define "leaf48" do |device|

    device.vm.hostname = "leaf48"

    device.vm.box = "CumulusCommunity/cumulus-vx"
    device.vm.box_version = "3.5.0"

    device.vm.provider :libvirt do |v|
      v.memory = 768
    end
    #   see note here: https://github.com/pradels/vagrant-libvirt#synced-folders
    device.vm.synced_folder ".", "/vagrant", disabled: true



    # NETWORK INTERFACES
      # link for eth0 --> oob-mgmt-switch1:swp50
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:bc",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10222',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8222',
            :libvirt__iface_name => 'eth0',
            auto_config: false
      # link for swp1 --> chassis01-lc2-1:swp16
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:6a",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10181',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8181',
            :libvirt__iface_name => 'swp1',
            auto_config: false
      # link for swp2 --> chassis02-lc2-1:swp16
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:a4",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10210',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8210',
            :libvirt__iface_name => 'swp2',
            auto_config: false
      # link for swp3 --> chassis03-lc2-1:swp16
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:8e",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10327',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8327',
            :libvirt__iface_name => 'swp3',
            auto_config: false
      # link for swp4 --> chassis04-lc2-1:swp16
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:3a",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10285',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8285',
            :libvirt__iface_name => 'swp4',
            auto_config: false



    # Fixes "stdin: is not a tty" and "mesg: ttyname failed : Inappropriate ioctl for device"  messages --> https://github.com/mitchellh/vagrant/issues/1673
    device.vm.provision :shell , inline: "(sudo grep -q 'mesg n' /root/.profile 2>/dev/null && sudo sed -i '/mesg n/d' /root/.profile  2>/dev/null) || true;", privileged: false

    #Copy over Topology.dot File
    device.vm.provision "file", source: "topology.dot", destination: "~/topology.dot"
    device.vm.provision :shell, privileged: false, inline: "sudo mv ~/topology.dot /etc/ptm.d/topology.dot"


    # Run the Config specified in the Node Attributes
    device.vm.provision :shell , privileged: false, :inline => 'echo "$(whoami)" > /tmp/normal_user'
    device.vm.provision :shell , path: "./helper_scripts/extra_switch_config.sh"


    # Install Rules for the interface re-map
    device.vm.provision :shell , :inline => <<-delete_udev_directory
if [ -d "/etc/udev/rules.d/70-persistent-net.rules" ]; then
    rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
fi
rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
delete_udev_directory

device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:bc --> eth0"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:bc", NAME="eth0", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:6a --> swp1"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:6a", NAME="swp1", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:a4 --> swp2"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:a4", NAME="swp2", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:8e --> swp3"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:8e", NAME="swp3", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:3a --> swp4"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:3a", NAME="swp4", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule

      device.vm.provision :shell , :inline => <<-vagrant_interface_rule
echo "  INFO: Adding UDEV Rule: Vagrant interface = vagrant"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{ifindex}=="2", NAME="vagrant", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
echo "#### UDEV Rules (/etc/udev/rules.d/70-persistent-net.rules) ####"
cat /etc/udev/rules.d/70-persistent-net.rules
vagrant_interface_rule

# Run Any Platform Specific Code and Apply the interface Re-map
    #   (may or may not perform a reboot depending on platform)
    device.vm.provision :shell , :inline => $script

end

  ##### DEFINE VM for leaf49 #####
  config.vm.define "leaf49" do |device|

    device.vm.hostname = "leaf49"

    device.vm.box = "CumulusCommunity/cumulus-vx"
    device.vm.box_version = "3.5.0"

    device.vm.provider :libvirt do |v|
      v.memory = 768
    end
    #   see note here: https://github.com/pradels/vagrant-libvirt#synced-folders
    device.vm.synced_folder ".", "/vagrant", disabled: true



    # NETWORK INTERFACES
      # link for eth0 --> oob-mgmt-switch2:swp3
      device.vm.network "private_network",
            :mac => "44:38:39:00:05:12",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10649',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8649',
            :libvirt__iface_name => 'eth0',
            auto_config: false
      # link for swp1 --> chassis01-lc2-2:swp1
      device.vm.network "private_network",
            :mac => "44:38:39:00:05:7a",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10701',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8701',
            :libvirt__iface_name => 'swp1',
            auto_config: false
      # link for swp2 --> chassis02-lc2-2:swp1
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:76",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10571',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8571',
            :libvirt__iface_name => 'swp2',
            auto_config: false
      # link for swp3 --> chassis03-lc2-2:swp1
      device.vm.network "private_network",
            :mac => "44:38:39:00:05:82",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10705',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8705',
            :libvirt__iface_name => 'swp3',
            auto_config: false
      # link for swp4 --> chassis04-lc2-2:swp1
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:66",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10179',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8179',
            :libvirt__iface_name => 'swp4',
            auto_config: false



    # Fixes "stdin: is not a tty" and "mesg: ttyname failed : Inappropriate ioctl for device"  messages --> https://github.com/mitchellh/vagrant/issues/1673
    device.vm.provision :shell , inline: "(sudo grep -q 'mesg n' /root/.profile 2>/dev/null && sudo sed -i '/mesg n/d' /root/.profile  2>/dev/null) || true;", privileged: false

    #Copy over Topology.dot File
    device.vm.provision "file", source: "topology.dot", destination: "~/topology.dot"
    device.vm.provision :shell, privileged: false, inline: "sudo mv ~/topology.dot /etc/ptm.d/topology.dot"


    # Run the Config specified in the Node Attributes
    device.vm.provision :shell , privileged: false, :inline => 'echo "$(whoami)" > /tmp/normal_user'
    device.vm.provision :shell , path: "./helper_scripts/extra_switch_config.sh"


    # Install Rules for the interface re-map
    device.vm.provision :shell , :inline => <<-delete_udev_directory
if [ -d "/etc/udev/rules.d/70-persistent-net.rules" ]; then
    rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
fi
rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
delete_udev_directory

device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:05:12 --> eth0"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:05:12", NAME="eth0", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:05:7a --> swp1"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:05:7a", NAME="swp1", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:76 --> swp2"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:76", NAME="swp2", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:05:82 --> swp3"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:05:82", NAME="swp3", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:66 --> swp4"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:66", NAME="swp4", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule

      device.vm.provision :shell , :inline => <<-vagrant_interface_rule
echo "  INFO: Adding UDEV Rule: Vagrant interface = vagrant"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{ifindex}=="2", NAME="vagrant", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
echo "#### UDEV Rules (/etc/udev/rules.d/70-persistent-net.rules) ####"
cat /etc/udev/rules.d/70-persistent-net.rules
vagrant_interface_rule

# Run Any Platform Specific Code and Apply the interface Re-map
    #   (may or may not perform a reboot depending on platform)
    device.vm.provision :shell , :inline => $script

end

  ##### DEFINE VM for leaf42 #####
  config.vm.define "leaf42" do |device|

    device.vm.hostname = "leaf42"

    device.vm.box = "CumulusCommunity/cumulus-vx"
    device.vm.box_version = "3.5.0"

    device.vm.provider :libvirt do |v|
      v.memory = 768
    end
    #   see note here: https://github.com/pradels/vagrant-libvirt#synced-folders
    device.vm.synced_folder ".", "/vagrant", disabled: true



    # NETWORK INTERFACES
      # link for eth0 --> oob-mgmt-switch1:swp44
      device.vm.network "private_network",
            :mac => "44:38:39:00:05:b4",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10730',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8730',
            :libvirt__iface_name => 'eth0',
            auto_config: false
      # link for swp1 --> chassis01-lc2-1:swp10
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:b0",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10216',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8216',
            :libvirt__iface_name => 'swp1',
            auto_config: false
      # link for swp2 --> chassis02-lc2-1:swp10
      device.vm.network "private_network",
            :mac => "44:38:39:00:06:1c",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10782',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8782',
            :libvirt__iface_name => 'swp2',
            auto_config: false
      # link for swp3 --> chassis03-lc2-1:swp10
      device.vm.network "private_network",
            :mac => "44:38:39:00:05:30",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10664',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8664',
            :libvirt__iface_name => 'swp3',
            auto_config: false
      # link for swp4 --> chassis04-lc2-1:swp10
      device.vm.network "private_network",
            :mac => "44:38:39:00:08:70",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '11080',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '9080',
            :libvirt__iface_name => 'swp4',
            auto_config: false



    # Fixes "stdin: is not a tty" and "mesg: ttyname failed : Inappropriate ioctl for device"  messages --> https://github.com/mitchellh/vagrant/issues/1673
    device.vm.provision :shell , inline: "(sudo grep -q 'mesg n' /root/.profile 2>/dev/null && sudo sed -i '/mesg n/d' /root/.profile  2>/dev/null) || true;", privileged: false

    #Copy over Topology.dot File
    device.vm.provision "file", source: "topology.dot", destination: "~/topology.dot"
    device.vm.provision :shell, privileged: false, inline: "sudo mv ~/topology.dot /etc/ptm.d/topology.dot"


    # Run the Config specified in the Node Attributes
    device.vm.provision :shell , privileged: false, :inline => 'echo "$(whoami)" > /tmp/normal_user'
    device.vm.provision :shell , path: "./helper_scripts/extra_switch_config.sh"


    # Install Rules for the interface re-map
    device.vm.provision :shell , :inline => <<-delete_udev_directory
if [ -d "/etc/udev/rules.d/70-persistent-net.rules" ]; then
    rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
fi
rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
delete_udev_directory

device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:05:b4 --> eth0"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:05:b4", NAME="eth0", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:b0 --> swp1"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:b0", NAME="swp1", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:06:1c --> swp2"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:06:1c", NAME="swp2", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:05:30 --> swp3"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:05:30", NAME="swp3", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:08:70 --> swp4"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:08:70", NAME="swp4", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule

      device.vm.provision :shell , :inline => <<-vagrant_interface_rule
echo "  INFO: Adding UDEV Rule: Vagrant interface = vagrant"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{ifindex}=="2", NAME="vagrant", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
echo "#### UDEV Rules (/etc/udev/rules.d/70-persistent-net.rules) ####"
cat /etc/udev/rules.d/70-persistent-net.rules
vagrant_interface_rule

# Run Any Platform Specific Code and Apply the interface Re-map
    #   (may or may not perform a reboot depending on platform)
    device.vm.provision :shell , :inline => $script

end

  ##### DEFINE VM for leaf43 #####
  config.vm.define "leaf43" do |device|

    device.vm.hostname = "leaf43"

    device.vm.box = "CumulusCommunity/cumulus-vx"
    device.vm.box_version = "3.5.0"

    device.vm.provider :libvirt do |v|
      v.memory = 768
    end
    #   see note here: https://github.com/pradels/vagrant-libvirt#synced-folders
    device.vm.synced_folder ".", "/vagrant", disabled: true



    # NETWORK INTERFACES
      # link for eth0 --> oob-mgmt-switch1:swp45
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:02",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10129',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8129',
            :libvirt__iface_name => 'eth0',
            auto_config: false
      # link for swp1 --> chassis01-lc2-1:swp11
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:fe",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10639',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8639',
            :libvirt__iface_name => 'swp1',
            auto_config: false
      # link for swp2 --> chassis02-lc2-1:swp11
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:74",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10570',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8570',
            :libvirt__iface_name => 'swp2',
            auto_config: false
      # link for swp3 --> chassis03-lc2-1:swp11
      device.vm.network "private_network",
            :mac => "44:38:39:00:06:f0",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10888',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8888',
            :libvirt__iface_name => 'swp3',
            auto_config: false
      # link for swp4 --> chassis04-lc2-1:swp11
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:cc",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10486',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8486',
            :libvirt__iface_name => 'swp4',
            auto_config: false



    # Fixes "stdin: is not a tty" and "mesg: ttyname failed : Inappropriate ioctl for device"  messages --> https://github.com/mitchellh/vagrant/issues/1673
    device.vm.provision :shell , inline: "(sudo grep -q 'mesg n' /root/.profile 2>/dev/null && sudo sed -i '/mesg n/d' /root/.profile  2>/dev/null) || true;", privileged: false

    #Copy over Topology.dot File
    device.vm.provision "file", source: "topology.dot", destination: "~/topology.dot"
    device.vm.provision :shell, privileged: false, inline: "sudo mv ~/topology.dot /etc/ptm.d/topology.dot"


    # Run the Config specified in the Node Attributes
    device.vm.provision :shell , privileged: false, :inline => 'echo "$(whoami)" > /tmp/normal_user'
    device.vm.provision :shell , path: "./helper_scripts/extra_switch_config.sh"


    # Install Rules for the interface re-map
    device.vm.provision :shell , :inline => <<-delete_udev_directory
if [ -d "/etc/udev/rules.d/70-persistent-net.rules" ]; then
    rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
fi
rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
delete_udev_directory

device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:02 --> eth0"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:02", NAME="eth0", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:fe --> swp1"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:fe", NAME="swp1", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:74 --> swp2"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:74", NAME="swp2", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:06:f0 --> swp3"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:06:f0", NAME="swp3", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:cc --> swp4"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:cc", NAME="swp4", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule

      device.vm.provision :shell , :inline => <<-vagrant_interface_rule
echo "  INFO: Adding UDEV Rule: Vagrant interface = vagrant"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{ifindex}=="2", NAME="vagrant", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
echo "#### UDEV Rules (/etc/udev/rules.d/70-persistent-net.rules) ####"
cat /etc/udev/rules.d/70-persistent-net.rules
vagrant_interface_rule

# Run Any Platform Specific Code and Apply the interface Re-map
    #   (may or may not perform a reboot depending on platform)
    device.vm.provision :shell , :inline => $script

end

  ##### DEFINE VM for leaf40 #####
  config.vm.define "leaf40" do |device|

    device.vm.hostname = "leaf40"

    device.vm.box = "CumulusCommunity/cumulus-vx"
    device.vm.box_version = "3.5.0"

    device.vm.provider :libvirt do |v|
      v.memory = 768
    end
    #   see note here: https://github.com/pradels/vagrant-libvirt#synced-folders
    device.vm.synced_folder ".", "/vagrant", disabled: true



    # NETWORK INTERFACES
      # link for eth0 --> oob-mgmt-switch1:swp42
      device.vm.network "private_network",
            :mac => "44:38:39:00:08:40",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '11056',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '9056',
            :libvirt__iface_name => 'eth0',
            auto_config: false
      # link for swp1 --> chassis01-lc2-1:swp8
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:8a",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10069',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8069',
            :libvirt__iface_name => 'swp1',
            auto_config: false
      # link for swp2 --> chassis02-lc2-1:swp8
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:a2",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10209',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8209',
            :libvirt__iface_name => 'swp2',
            auto_config: false
      # link for swp3 --> chassis03-lc2-1:swp8
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:d4",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10362',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8362',
            :libvirt__iface_name => 'swp3',
            auto_config: false
      # link for swp4 --> chassis04-lc2-1:swp8
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:7c",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10446',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8446',
            :libvirt__iface_name => 'swp4',
            auto_config: false



    # Fixes "stdin: is not a tty" and "mesg: ttyname failed : Inappropriate ioctl for device"  messages --> https://github.com/mitchellh/vagrant/issues/1673
    device.vm.provision :shell , inline: "(sudo grep -q 'mesg n' /root/.profile 2>/dev/null && sudo sed -i '/mesg n/d' /root/.profile  2>/dev/null) || true;", privileged: false

    #Copy over Topology.dot File
    device.vm.provision "file", source: "topology.dot", destination: "~/topology.dot"
    device.vm.provision :shell, privileged: false, inline: "sudo mv ~/topology.dot /etc/ptm.d/topology.dot"


    # Run the Config specified in the Node Attributes
    device.vm.provision :shell , privileged: false, :inline => 'echo "$(whoami)" > /tmp/normal_user'
    device.vm.provision :shell , path: "./helper_scripts/extra_switch_config.sh"


    # Install Rules for the interface re-map
    device.vm.provision :shell , :inline => <<-delete_udev_directory
if [ -d "/etc/udev/rules.d/70-persistent-net.rules" ]; then
    rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
fi
rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
delete_udev_directory

device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:08:40 --> eth0"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:08:40", NAME="eth0", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:8a --> swp1"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:8a", NAME="swp1", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:a2 --> swp2"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:a2", NAME="swp2", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:d4 --> swp3"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:d4", NAME="swp3", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:7c --> swp4"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:7c", NAME="swp4", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule

      device.vm.provision :shell , :inline => <<-vagrant_interface_rule
echo "  INFO: Adding UDEV Rule: Vagrant interface = vagrant"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{ifindex}=="2", NAME="vagrant", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
echo "#### UDEV Rules (/etc/udev/rules.d/70-persistent-net.rules) ####"
cat /etc/udev/rules.d/70-persistent-net.rules
vagrant_interface_rule

# Run Any Platform Specific Code and Apply the interface Re-map
    #   (may or may not perform a reboot depending on platform)
    device.vm.provision :shell , :inline => $script

end

  ##### DEFINE VM for leaf41 #####
  config.vm.define "leaf41" do |device|

    device.vm.hostname = "leaf41"

    device.vm.box = "CumulusCommunity/cumulus-vx"
    device.vm.box_version = "3.5.0"

    device.vm.provider :libvirt do |v|
      v.memory = 768
    end
    #   see note here: https://github.com/pradels/vagrant-libvirt#synced-folders
    device.vm.synced_folder ".", "/vagrant", disabled: true



    # NETWORK INTERFACES
      # link for eth0 --> oob-mgmt-switch1:swp43
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:58",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10556',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8556',
            :libvirt__iface_name => 'eth0',
            auto_config: false
      # link for swp1 --> chassis01-lc2-1:swp9
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:2c",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10278',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8278',
            :libvirt__iface_name => 'swp1',
            auto_config: false
      # link for swp2 --> chassis02-lc2-1:swp9
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:e0",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10240',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8240',
            :libvirt__iface_name => 'swp2',
            auto_config: false
      # link for swp3 --> chassis03-lc2-1:swp9
      device.vm.network "private_network",
            :mac => "44:38:39:00:08:1a",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '11037',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '9037',
            :libvirt__iface_name => 'swp3',
            auto_config: false
      # link for swp4 --> chassis04-lc2-1:swp9
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:5c",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10430',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8430',
            :libvirt__iface_name => 'swp4',
            auto_config: false



    # Fixes "stdin: is not a tty" and "mesg: ttyname failed : Inappropriate ioctl for device"  messages --> https://github.com/mitchellh/vagrant/issues/1673
    device.vm.provision :shell , inline: "(sudo grep -q 'mesg n' /root/.profile 2>/dev/null && sudo sed -i '/mesg n/d' /root/.profile  2>/dev/null) || true;", privileged: false

    #Copy over Topology.dot File
    device.vm.provision "file", source: "topology.dot", destination: "~/topology.dot"
    device.vm.provision :shell, privileged: false, inline: "sudo mv ~/topology.dot /etc/ptm.d/topology.dot"


    # Run the Config specified in the Node Attributes
    device.vm.provision :shell , privileged: false, :inline => 'echo "$(whoami)" > /tmp/normal_user'
    device.vm.provision :shell , path: "./helper_scripts/extra_switch_config.sh"


    # Install Rules for the interface re-map
    device.vm.provision :shell , :inline => <<-delete_udev_directory
if [ -d "/etc/udev/rules.d/70-persistent-net.rules" ]; then
    rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
fi
rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
delete_udev_directory

device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:58 --> eth0"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:58", NAME="eth0", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:2c --> swp1"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:2c", NAME="swp1", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:e0 --> swp2"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:e0", NAME="swp2", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:08:1a --> swp3"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:08:1a", NAME="swp3", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:5c --> swp4"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:5c", NAME="swp4", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule

      device.vm.provision :shell , :inline => <<-vagrant_interface_rule
echo "  INFO: Adding UDEV Rule: Vagrant interface = vagrant"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{ifindex}=="2", NAME="vagrant", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
echo "#### UDEV Rules (/etc/udev/rules.d/70-persistent-net.rules) ####"
cat /etc/udev/rules.d/70-persistent-net.rules
vagrant_interface_rule

# Run Any Platform Specific Code and Apply the interface Re-map
    #   (may or may not perform a reboot depending on platform)
    device.vm.provision :shell , :inline => $script

end

  ##### DEFINE VM for leaf46 #####
  config.vm.define "leaf46" do |device|

    device.vm.hostname = "leaf46"

    device.vm.box = "CumulusCommunity/cumulus-vx"
    device.vm.box_version = "3.5.0"

    device.vm.provider :libvirt do |v|
      v.memory = 768
    end
    #   see note here: https://github.com/pradels/vagrant-libvirt#synced-folders
    device.vm.synced_folder ".", "/vagrant", disabled: true



    # NETWORK INTERFACES
      # link for eth0 --> oob-mgmt-switch1:swp48
      device.vm.network "private_network",
            :mac => "44:38:39:00:05:68",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10692',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8692',
            :libvirt__iface_name => 'eth0',
            auto_config: false
      # link for swp1 --> chassis01-lc2-1:swp14
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:b0",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10344',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8344',
            :libvirt__iface_name => 'swp1',
            auto_config: false
      # link for swp2 --> chassis02-lc2-1:swp14
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:e2",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10241',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8241',
            :libvirt__iface_name => 'swp2',
            auto_config: false
      # link for swp3 --> chassis03-lc2-1:swp14
      device.vm.network "private_network",
            :mac => "44:38:39:00:05:f8",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10764',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8764',
            :libvirt__iface_name => 'swp3',
            auto_config: false
      # link for swp4 --> chassis04-lc2-1:swp14
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:9c",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10590',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8590',
            :libvirt__iface_name => 'swp4',
            auto_config: false



    # Fixes "stdin: is not a tty" and "mesg: ttyname failed : Inappropriate ioctl for device"  messages --> https://github.com/mitchellh/vagrant/issues/1673
    device.vm.provision :shell , inline: "(sudo grep -q 'mesg n' /root/.profile 2>/dev/null && sudo sed -i '/mesg n/d' /root/.profile  2>/dev/null) || true;", privileged: false

    #Copy over Topology.dot File
    device.vm.provision "file", source: "topology.dot", destination: "~/topology.dot"
    device.vm.provision :shell, privileged: false, inline: "sudo mv ~/topology.dot /etc/ptm.d/topology.dot"


    # Run the Config specified in the Node Attributes
    device.vm.provision :shell , privileged: false, :inline => 'echo "$(whoami)" > /tmp/normal_user'
    device.vm.provision :shell , path: "./helper_scripts/extra_switch_config.sh"


    # Install Rules for the interface re-map
    device.vm.provision :shell , :inline => <<-delete_udev_directory
if [ -d "/etc/udev/rules.d/70-persistent-net.rules" ]; then
    rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
fi
rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
delete_udev_directory

device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:05:68 --> eth0"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:05:68", NAME="eth0", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:b0 --> swp1"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:b0", NAME="swp1", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:e2 --> swp2"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:e2", NAME="swp2", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:05:f8 --> swp3"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:05:f8", NAME="swp3", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:9c --> swp4"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:9c", NAME="swp4", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule

      device.vm.provision :shell , :inline => <<-vagrant_interface_rule
echo "  INFO: Adding UDEV Rule: Vagrant interface = vagrant"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{ifindex}=="2", NAME="vagrant", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
echo "#### UDEV Rules (/etc/udev/rules.d/70-persistent-net.rules) ####"
cat /etc/udev/rules.d/70-persistent-net.rules
vagrant_interface_rule

# Run Any Platform Specific Code and Apply the interface Re-map
    #   (may or may not perform a reboot depending on platform)
    device.vm.provision :shell , :inline => $script

end

  ##### DEFINE VM for leaf47 #####
  config.vm.define "leaf47" do |device|

    device.vm.hostname = "leaf47"

    device.vm.box = "CumulusCommunity/cumulus-vx"
    device.vm.box_version = "3.5.0"

    device.vm.provider :libvirt do |v|
      v.memory = 768
    end
    #   see note here: https://github.com/pradels/vagrant-libvirt#synced-folders
    device.vm.synced_folder ".", "/vagrant", disabled: true



    # NETWORK INTERFACES
      # link for eth0 --> oob-mgmt-switch1:swp49
      device.vm.network "private_network",
            :mac => "44:38:39:00:05:ec",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10758',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8758',
            :libvirt__iface_name => 'eth0',
            auto_config: false
      # link for swp1 --> chassis01-lc2-1:swp15
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:82",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10449',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8449',
            :libvirt__iface_name => 'swp1',
            auto_config: false
      # link for swp2 --> chassis02-lc2-1:swp15
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:f8",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10508',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8508',
            :libvirt__iface_name => 'swp2',
            auto_config: false
      # link for swp3 --> chassis03-lc2-1:swp15
      device.vm.network "private_network",
            :mac => "44:38:39:00:05:7c",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10702',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8702',
            :libvirt__iface_name => 'swp3',
            auto_config: false
      # link for swp4 --> chassis04-lc2-1:swp15
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:ca",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10357',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8357',
            :libvirt__iface_name => 'swp4',
            auto_config: false



    # Fixes "stdin: is not a tty" and "mesg: ttyname failed : Inappropriate ioctl for device"  messages --> https://github.com/mitchellh/vagrant/issues/1673
    device.vm.provision :shell , inline: "(sudo grep -q 'mesg n' /root/.profile 2>/dev/null && sudo sed -i '/mesg n/d' /root/.profile  2>/dev/null) || true;", privileged: false

    #Copy over Topology.dot File
    device.vm.provision "file", source: "topology.dot", destination: "~/topology.dot"
    device.vm.provision :shell, privileged: false, inline: "sudo mv ~/topology.dot /etc/ptm.d/topology.dot"


    # Run the Config specified in the Node Attributes
    device.vm.provision :shell , privileged: false, :inline => 'echo "$(whoami)" > /tmp/normal_user'
    device.vm.provision :shell , path: "./helper_scripts/extra_switch_config.sh"


    # Install Rules for the interface re-map
    device.vm.provision :shell , :inline => <<-delete_udev_directory
if [ -d "/etc/udev/rules.d/70-persistent-net.rules" ]; then
    rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
fi
rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
delete_udev_directory

device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:05:ec --> eth0"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:05:ec", NAME="eth0", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:82 --> swp1"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:82", NAME="swp1", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:f8 --> swp2"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:f8", NAME="swp2", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:05:7c --> swp3"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:05:7c", NAME="swp3", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:ca --> swp4"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:ca", NAME="swp4", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule

      device.vm.provision :shell , :inline => <<-vagrant_interface_rule
echo "  INFO: Adding UDEV Rule: Vagrant interface = vagrant"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{ifindex}=="2", NAME="vagrant", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
echo "#### UDEV Rules (/etc/udev/rules.d/70-persistent-net.rules) ####"
cat /etc/udev/rules.d/70-persistent-net.rules
vagrant_interface_rule

# Run Any Platform Specific Code and Apply the interface Re-map
    #   (may or may not perform a reboot depending on platform)
    device.vm.provision :shell , :inline => $script

end

  ##### DEFINE VM for leaf44 #####
  config.vm.define "leaf44" do |device|

    device.vm.hostname = "leaf44"

    device.vm.box = "CumulusCommunity/cumulus-vx"
    device.vm.box_version = "3.5.0"

    device.vm.provider :libvirt do |v|
      v.memory = 768
    end
    #   see note here: https://github.com/pradels/vagrant-libvirt#synced-folders
    device.vm.synced_folder ".", "/vagrant", disabled: true



    # NETWORK INTERFACES
      # link for eth0 --> oob-mgmt-switch1:swp46
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:7c",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10318',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8318',
            :libvirt__iface_name => 'eth0',
            auto_config: false
      # link for swp1 --> chassis01-lc2-1:swp12
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:26",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10019',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8019',
            :libvirt__iface_name => 'swp1',
            auto_config: false
      # link for swp2 --> chassis02-lc2-1:swp12
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:62",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10433',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8433',
            :libvirt__iface_name => 'swp2',
            auto_config: false
      # link for swp3 --> chassis03-lc2-1:swp12
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:90",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10200',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8200',
            :libvirt__iface_name => 'swp3',
            auto_config: false
      # link for swp4 --> chassis04-lc2-1:swp12
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:e4",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10114',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8114',
            :libvirt__iface_name => 'swp4',
            auto_config: false



    # Fixes "stdin: is not a tty" and "mesg: ttyname failed : Inappropriate ioctl for device"  messages --> https://github.com/mitchellh/vagrant/issues/1673
    device.vm.provision :shell , inline: "(sudo grep -q 'mesg n' /root/.profile 2>/dev/null && sudo sed -i '/mesg n/d' /root/.profile  2>/dev/null) || true;", privileged: false

    #Copy over Topology.dot File
    device.vm.provision "file", source: "topology.dot", destination: "~/topology.dot"
    device.vm.provision :shell, privileged: false, inline: "sudo mv ~/topology.dot /etc/ptm.d/topology.dot"


    # Run the Config specified in the Node Attributes
    device.vm.provision :shell , privileged: false, :inline => 'echo "$(whoami)" > /tmp/normal_user'
    device.vm.provision :shell , path: "./helper_scripts/extra_switch_config.sh"


    # Install Rules for the interface re-map
    device.vm.provision :shell , :inline => <<-delete_udev_directory
if [ -d "/etc/udev/rules.d/70-persistent-net.rules" ]; then
    rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
fi
rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
delete_udev_directory

device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:7c --> eth0"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:7c", NAME="eth0", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:26 --> swp1"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:26", NAME="swp1", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:62 --> swp2"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:62", NAME="swp2", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:90 --> swp3"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:90", NAME="swp3", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:e4 --> swp4"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:e4", NAME="swp4", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule

      device.vm.provision :shell , :inline => <<-vagrant_interface_rule
echo "  INFO: Adding UDEV Rule: Vagrant interface = vagrant"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{ifindex}=="2", NAME="vagrant", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
echo "#### UDEV Rules (/etc/udev/rules.d/70-persistent-net.rules) ####"
cat /etc/udev/rules.d/70-persistent-net.rules
vagrant_interface_rule

# Run Any Platform Specific Code and Apply the interface Re-map
    #   (may or may not perform a reboot depending on platform)
    device.vm.provision :shell , :inline => $script

end

  ##### DEFINE VM for leaf45 #####
  config.vm.define "leaf45" do |device|

    device.vm.hostname = "leaf45"

    device.vm.box = "CumulusCommunity/cumulus-vx"
    device.vm.box_version = "3.5.0"

    device.vm.provider :libvirt do |v|
      v.memory = 768
    end
    #   see note here: https://github.com/pradels/vagrant-libvirt#synced-folders
    device.vm.synced_folder ".", "/vagrant", disabled: true



    # NETWORK INTERFACES
      # link for eth0 --> oob-mgmt-switch1:swp47
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:00",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10128',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8128',
            :libvirt__iface_name => 'eth0',
            auto_config: false
      # link for swp1 --> chassis01-lc2-1:swp13
      device.vm.network "private_network",
            :mac => "44:38:39:00:07:1c",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10910',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8910',
            :libvirt__iface_name => 'swp1',
            auto_config: false
      # link for swp2 --> chassis02-lc2-1:swp13
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:fa",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10381',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8381',
            :libvirt__iface_name => 'swp2',
            auto_config: false
      # link for swp3 --> chassis03-lc2-1:swp13
      device.vm.network "private_network",
            :mac => "44:38:39:00:08:a0",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '11104',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '9104',
            :libvirt__iface_name => 'swp3',
            auto_config: false
      # link for swp4 --> chassis04-lc2-1:swp13
      device.vm.network "private_network",
            :mac => "44:38:39:00:09:04",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '11154',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '9154',
            :libvirt__iface_name => 'swp4',
            auto_config: false



    # Fixes "stdin: is not a tty" and "mesg: ttyname failed : Inappropriate ioctl for device"  messages --> https://github.com/mitchellh/vagrant/issues/1673
    device.vm.provision :shell , inline: "(sudo grep -q 'mesg n' /root/.profile 2>/dev/null && sudo sed -i '/mesg n/d' /root/.profile  2>/dev/null) || true;", privileged: false

    #Copy over Topology.dot File
    device.vm.provision "file", source: "topology.dot", destination: "~/topology.dot"
    device.vm.provision :shell, privileged: false, inline: "sudo mv ~/topology.dot /etc/ptm.d/topology.dot"


    # Run the Config specified in the Node Attributes
    device.vm.provision :shell , privileged: false, :inline => 'echo "$(whoami)" > /tmp/normal_user'
    device.vm.provision :shell , path: "./helper_scripts/extra_switch_config.sh"


    # Install Rules for the interface re-map
    device.vm.provision :shell , :inline => <<-delete_udev_directory
if [ -d "/etc/udev/rules.d/70-persistent-net.rules" ]; then
    rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
fi
rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
delete_udev_directory

device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:00 --> eth0"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:00", NAME="eth0", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:07:1c --> swp1"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:07:1c", NAME="swp1", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:fa --> swp2"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:fa", NAME="swp2", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:08:a0 --> swp3"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:08:a0", NAME="swp3", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:09:04 --> swp4"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:09:04", NAME="swp4", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule

      device.vm.provision :shell , :inline => <<-vagrant_interface_rule
echo "  INFO: Adding UDEV Rule: Vagrant interface = vagrant"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{ifindex}=="2", NAME="vagrant", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
echo "#### UDEV Rules (/etc/udev/rules.d/70-persistent-net.rules) ####"
cat /etc/udev/rules.d/70-persistent-net.rules
vagrant_interface_rule

# Run Any Platform Specific Code and Apply the interface Re-map
    #   (may or may not perform a reboot depending on platform)
    device.vm.provision :shell , :inline => $script

end

  ##### DEFINE VM for leaf87 #####
  config.vm.define "leaf87" do |device|

    device.vm.hostname = "leaf87"

    device.vm.box = "CumulusCommunity/cumulus-vx"
    device.vm.box_version = "3.5.0"

    device.vm.provider :libvirt do |v|
      v.memory = 768
    end
    #   see note here: https://github.com/pradels/vagrant-libvirt#synced-folders
    device.vm.synced_folder ".", "/vagrant", disabled: true



    # NETWORK INTERFACES
      # link for eth0 --> oob-mgmt-switch2:swp41
      device.vm.network "private_network",
            :mac => "44:38:39:00:07:54",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10938',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8938',
            :libvirt__iface_name => 'eth0',
            auto_config: false
      # link for swp1 --> chassis01-lc3-2:swp7
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:16",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10139',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8139',
            :libvirt__iface_name => 'swp1',
            auto_config: false
      # link for swp2 --> chassis02-lc3-2:swp7
      device.vm.network "private_network",
            :mac => "44:38:39:00:05:5c",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10686',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8686',
            :libvirt__iface_name => 'swp2',
            auto_config: false
      # link for swp3 --> chassis03-lc3-2:swp7
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:66",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10563',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8563',
            :libvirt__iface_name => 'swp3',
            auto_config: false
      # link for swp4 --> chassis04-lc3-2:swp7
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:60",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10048',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8048',
            :libvirt__iface_name => 'swp4',
            auto_config: false



    # Fixes "stdin: is not a tty" and "mesg: ttyname failed : Inappropriate ioctl for device"  messages --> https://github.com/mitchellh/vagrant/issues/1673
    device.vm.provision :shell , inline: "(sudo grep -q 'mesg n' /root/.profile 2>/dev/null && sudo sed -i '/mesg n/d' /root/.profile  2>/dev/null) || true;", privileged: false

    #Copy over Topology.dot File
    device.vm.provision "file", source: "topology.dot", destination: "~/topology.dot"
    device.vm.provision :shell, privileged: false, inline: "sudo mv ~/topology.dot /etc/ptm.d/topology.dot"


    # Run the Config specified in the Node Attributes
    device.vm.provision :shell , privileged: false, :inline => 'echo "$(whoami)" > /tmp/normal_user'
    device.vm.provision :shell , path: "./helper_scripts/extra_switch_config.sh"


    # Install Rules for the interface re-map
    device.vm.provision :shell , :inline => <<-delete_udev_directory
if [ -d "/etc/udev/rules.d/70-persistent-net.rules" ]; then
    rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
fi
rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
delete_udev_directory

device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:07:54 --> eth0"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:07:54", NAME="eth0", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:16 --> swp1"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:16", NAME="swp1", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:05:5c --> swp2"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:05:5c", NAME="swp2", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:66 --> swp3"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:66", NAME="swp3", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:60 --> swp4"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:60", NAME="swp4", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule

      device.vm.provision :shell , :inline => <<-vagrant_interface_rule
echo "  INFO: Adding UDEV Rule: Vagrant interface = vagrant"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{ifindex}=="2", NAME="vagrant", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
echo "#### UDEV Rules (/etc/udev/rules.d/70-persistent-net.rules) ####"
cat /etc/udev/rules.d/70-persistent-net.rules
vagrant_interface_rule

# Run Any Platform Specific Code and Apply the interface Re-map
    #   (may or may not perform a reboot depending on platform)
    device.vm.provision :shell , :inline => $script

end

  ##### DEFINE VM for leaf67 #####
  config.vm.define "leaf67" do |device|

    device.vm.hostname = "leaf67"

    device.vm.box = "CumulusCommunity/cumulus-vx"
    device.vm.box_version = "3.5.0"

    device.vm.provider :libvirt do |v|
      v.memory = 768
    end
    #   see note here: https://github.com/pradels/vagrant-libvirt#synced-folders
    device.vm.synced_folder ".", "/vagrant", disabled: true



    # NETWORK INTERFACES
      # link for eth0 --> oob-mgmt-switch2:swp21
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:68",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10052',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8052',
            :libvirt__iface_name => 'eth0',
            auto_config: false
      # link for swp1 --> chassis01-lc3-1:swp3
      device.vm.network "private_network",
            :mac => "44:38:39:00:09:1c",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '11166',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '9166',
            :libvirt__iface_name => 'swp1',
            auto_config: false
      # link for swp2 --> chassis02-lc3-1:swp3
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:ae",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10343',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8343',
            :libvirt__iface_name => 'swp2',
            auto_config: false
      # link for swp3 --> chassis03-lc3-1:swp3
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:ec",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10502',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8502',
            :libvirt__iface_name => 'swp3',
            auto_config: false
      # link for swp4 --> chassis04-lc3-1:swp3
      device.vm.network "private_network",
            :mac => "44:38:39:00:07:36",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10923',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8923',
            :libvirt__iface_name => 'swp4',
            auto_config: false



    # Fixes "stdin: is not a tty" and "mesg: ttyname failed : Inappropriate ioctl for device"  messages --> https://github.com/mitchellh/vagrant/issues/1673
    device.vm.provision :shell , inline: "(sudo grep -q 'mesg n' /root/.profile 2>/dev/null && sudo sed -i '/mesg n/d' /root/.profile  2>/dev/null) || true;", privileged: false

    #Copy over Topology.dot File
    device.vm.provision "file", source: "topology.dot", destination: "~/topology.dot"
    device.vm.provision :shell, privileged: false, inline: "sudo mv ~/topology.dot /etc/ptm.d/topology.dot"


    # Run the Config specified in the Node Attributes
    device.vm.provision :shell , privileged: false, :inline => 'echo "$(whoami)" > /tmp/normal_user'
    device.vm.provision :shell , path: "./helper_scripts/extra_switch_config.sh"


    # Install Rules for the interface re-map
    device.vm.provision :shell , :inline => <<-delete_udev_directory
if [ -d "/etc/udev/rules.d/70-persistent-net.rules" ]; then
    rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
fi
rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
delete_udev_directory

device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:68 --> eth0"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:68", NAME="eth0", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:09:1c --> swp1"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:09:1c", NAME="swp1", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:ae --> swp2"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:ae", NAME="swp2", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:ec --> swp3"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:ec", NAME="swp3", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:07:36 --> swp4"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:07:36", NAME="swp4", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule

      device.vm.provision :shell , :inline => <<-vagrant_interface_rule
echo "  INFO: Adding UDEV Rule: Vagrant interface = vagrant"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{ifindex}=="2", NAME="vagrant", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
echo "#### UDEV Rules (/etc/udev/rules.d/70-persistent-net.rules) ####"
cat /etc/udev/rules.d/70-persistent-net.rules
vagrant_interface_rule

# Run Any Platform Specific Code and Apply the interface Re-map
    #   (may or may not perform a reboot depending on platform)
    device.vm.provision :shell , :inline => $script

end

  ##### DEFINE VM for leaf59 #####
  config.vm.define "leaf59" do |device|

    device.vm.hostname = "leaf59"

    device.vm.box = "CumulusCommunity/cumulus-vx"
    device.vm.box_version = "3.5.0"

    device.vm.provider :libvirt do |v|
      v.memory = 768
    end
    #   see note here: https://github.com/pradels/vagrant-libvirt#synced-folders
    device.vm.synced_folder ".", "/vagrant", disabled: true



    # NETWORK INTERFACES
      # link for eth0 --> oob-mgmt-switch2:swp13
      device.vm.network "private_network",
            :mac => "44:38:39:00:06:ba",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10861',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8861',
            :libvirt__iface_name => 'eth0',
            auto_config: false
      # link for swp1 --> chassis01-lc2-2:swp11
      device.vm.network "private_network",
            :mac => "44:38:39:00:05:f4",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10762',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8762',
            :libvirt__iface_name => 'swp1',
            auto_config: false
      # link for swp2 --> chassis02-lc2-2:swp11
      device.vm.network "private_network",
            :mac => "44:38:39:00:08:aa",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '11109',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '9109',
            :libvirt__iface_name => 'swp2',
            auto_config: false
      # link for swp3 --> chassis03-lc2-2:swp11
      device.vm.network "private_network",
            :mac => "44:38:39:00:07:a2",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10977',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8977',
            :libvirt__iface_name => 'swp3',
            auto_config: false
      # link for swp4 --> chassis04-lc2-2:swp11
      device.vm.network "private_network",
            :mac => "44:38:39:00:07:e6",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '11011',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '9011',
            :libvirt__iface_name => 'swp4',
            auto_config: false



    # Fixes "stdin: is not a tty" and "mesg: ttyname failed : Inappropriate ioctl for device"  messages --> https://github.com/mitchellh/vagrant/issues/1673
    device.vm.provision :shell , inline: "(sudo grep -q 'mesg n' /root/.profile 2>/dev/null && sudo sed -i '/mesg n/d' /root/.profile  2>/dev/null) || true;", privileged: false

    #Copy over Topology.dot File
    device.vm.provision "file", source: "topology.dot", destination: "~/topology.dot"
    device.vm.provision :shell, privileged: false, inline: "sudo mv ~/topology.dot /etc/ptm.d/topology.dot"


    # Run the Config specified in the Node Attributes
    device.vm.provision :shell , privileged: false, :inline => 'echo "$(whoami)" > /tmp/normal_user'
    device.vm.provision :shell , path: "./helper_scripts/extra_switch_config.sh"


    # Install Rules for the interface re-map
    device.vm.provision :shell , :inline => <<-delete_udev_directory
if [ -d "/etc/udev/rules.d/70-persistent-net.rules" ]; then
    rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
fi
rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
delete_udev_directory

device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:06:ba --> eth0"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:06:ba", NAME="eth0", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:05:f4 --> swp1"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:05:f4", NAME="swp1", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:08:aa --> swp2"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:08:aa", NAME="swp2", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:07:a2 --> swp3"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:07:a2", NAME="swp3", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:07:e6 --> swp4"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:07:e6", NAME="swp4", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule

      device.vm.provision :shell , :inline => <<-vagrant_interface_rule
echo "  INFO: Adding UDEV Rule: Vagrant interface = vagrant"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{ifindex}=="2", NAME="vagrant", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
echo "#### UDEV Rules (/etc/udev/rules.d/70-persistent-net.rules) ####"
cat /etc/udev/rules.d/70-persistent-net.rules
vagrant_interface_rule

# Run Any Platform Specific Code and Apply the interface Re-map
    #   (may or may not perform a reboot depending on platform)
    device.vm.provision :shell , :inline => $script

end

  ##### DEFINE VM for leaf58 #####
  config.vm.define "leaf58" do |device|

    device.vm.hostname = "leaf58"

    device.vm.box = "CumulusCommunity/cumulus-vx"
    device.vm.box_version = "3.5.0"

    device.vm.provider :libvirt do |v|
      v.memory = 768
    end
    #   see note here: https://github.com/pradels/vagrant-libvirt#synced-folders
    device.vm.synced_folder ".", "/vagrant", disabled: true



    # NETWORK INTERFACES
      # link for eth0 --> oob-mgmt-switch2:swp12
      device.vm.network "private_network",
            :mac => "44:38:39:00:05:c4",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10738',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8738',
            :libvirt__iface_name => 'eth0',
            auto_config: false
      # link for swp1 --> chassis01-lc2-2:swp10
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:b2",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10217',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8217',
            :libvirt__iface_name => 'swp1',
            auto_config: false
      # link for swp2 --> chassis02-lc2-2:swp10
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:c2",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10609',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8609',
            :libvirt__iface_name => 'swp2',
            auto_config: false
      # link for swp3 --> chassis03-lc2-2:swp10
      device.vm.network "private_network",
            :mac => "44:38:39:00:05:00",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10640',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8640',
            :libvirt__iface_name => 'swp3',
            auto_config: false
      # link for swp4 --> chassis04-lc2-2:swp10
      device.vm.network "private_network",
            :mac => "44:38:39:00:06:00",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10768',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8768',
            :libvirt__iface_name => 'swp4',
            auto_config: false



    # Fixes "stdin: is not a tty" and "mesg: ttyname failed : Inappropriate ioctl for device"  messages --> https://github.com/mitchellh/vagrant/issues/1673
    device.vm.provision :shell , inline: "(sudo grep -q 'mesg n' /root/.profile 2>/dev/null && sudo sed -i '/mesg n/d' /root/.profile  2>/dev/null) || true;", privileged: false

    #Copy over Topology.dot File
    device.vm.provision "file", source: "topology.dot", destination: "~/topology.dot"
    device.vm.provision :shell, privileged: false, inline: "sudo mv ~/topology.dot /etc/ptm.d/topology.dot"


    # Run the Config specified in the Node Attributes
    device.vm.provision :shell , privileged: false, :inline => 'echo "$(whoami)" > /tmp/normal_user'
    device.vm.provision :shell , path: "./helper_scripts/extra_switch_config.sh"


    # Install Rules for the interface re-map
    device.vm.provision :shell , :inline => <<-delete_udev_directory
if [ -d "/etc/udev/rules.d/70-persistent-net.rules" ]; then
    rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
fi
rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
delete_udev_directory

device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:05:c4 --> eth0"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:05:c4", NAME="eth0", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:b2 --> swp1"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:b2", NAME="swp1", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:c2 --> swp2"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:c2", NAME="swp2", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:05:00 --> swp3"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:05:00", NAME="swp3", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:06:00 --> swp4"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:06:00", NAME="swp4", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule

      device.vm.provision :shell , :inline => <<-vagrant_interface_rule
echo "  INFO: Adding UDEV Rule: Vagrant interface = vagrant"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{ifindex}=="2", NAME="vagrant", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
echo "#### UDEV Rules (/etc/udev/rules.d/70-persistent-net.rules) ####"
cat /etc/udev/rules.d/70-persistent-net.rules
vagrant_interface_rule

# Run Any Platform Specific Code and Apply the interface Re-map
    #   (may or may not perform a reboot depending on platform)
    device.vm.provision :shell , :inline => $script

end

  ##### DEFINE VM for leaf51 #####
  config.vm.define "leaf51" do |device|

    device.vm.hostname = "leaf51"

    device.vm.box = "CumulusCommunity/cumulus-vx"
    device.vm.box_version = "3.5.0"

    device.vm.provider :libvirt do |v|
      v.memory = 768
    end
    #   see note here: https://github.com/pradels/vagrant-libvirt#synced-folders
    device.vm.synced_folder ".", "/vagrant", disabled: true



    # NETWORK INTERFACES
      # link for eth0 --> oob-mgmt-switch2:swp5
      device.vm.network "private_network",
            :mac => "44:38:39:00:07:5c",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10942',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8942',
            :libvirt__iface_name => 'eth0',
            auto_config: false
      # link for swp1 --> chassis01-lc2-2:swp3
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:26",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10403',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8403',
            :libvirt__iface_name => 'swp1',
            auto_config: false
      # link for swp2 --> chassis02-lc2-2:swp3
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:5a",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10045',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8045',
            :libvirt__iface_name => 'swp2',
            auto_config: false
      # link for swp3 --> chassis03-lc2-2:swp3
      device.vm.network "private_network",
            :mac => "44:38:39:00:09:40",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '11184',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '9184',
            :libvirt__iface_name => 'swp3',
            auto_config: false
      # link for swp4 --> chassis04-lc2-2:swp3
      device.vm.network "private_network",
            :mac => "44:38:39:00:07:30",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10920',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8920',
            :libvirt__iface_name => 'swp4',
            auto_config: false



    # Fixes "stdin: is not a tty" and "mesg: ttyname failed : Inappropriate ioctl for device"  messages --> https://github.com/mitchellh/vagrant/issues/1673
    device.vm.provision :shell , inline: "(sudo grep -q 'mesg n' /root/.profile 2>/dev/null && sudo sed -i '/mesg n/d' /root/.profile  2>/dev/null) || true;", privileged: false

    #Copy over Topology.dot File
    device.vm.provision "file", source: "topology.dot", destination: "~/topology.dot"
    device.vm.provision :shell, privileged: false, inline: "sudo mv ~/topology.dot /etc/ptm.d/topology.dot"


    # Run the Config specified in the Node Attributes
    device.vm.provision :shell , privileged: false, :inline => 'echo "$(whoami)" > /tmp/normal_user'
    device.vm.provision :shell , path: "./helper_scripts/extra_switch_config.sh"


    # Install Rules for the interface re-map
    device.vm.provision :shell , :inline => <<-delete_udev_directory
if [ -d "/etc/udev/rules.d/70-persistent-net.rules" ]; then
    rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
fi
rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
delete_udev_directory

device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:07:5c --> eth0"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:07:5c", NAME="eth0", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:26 --> swp1"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:26", NAME="swp1", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:5a --> swp2"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:5a", NAME="swp2", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:09:40 --> swp3"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:09:40", NAME="swp3", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:07:30 --> swp4"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:07:30", NAME="swp4", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule

      device.vm.provision :shell , :inline => <<-vagrant_interface_rule
echo "  INFO: Adding UDEV Rule: Vagrant interface = vagrant"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{ifindex}=="2", NAME="vagrant", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
echo "#### UDEV Rules (/etc/udev/rules.d/70-persistent-net.rules) ####"
cat /etc/udev/rules.d/70-persistent-net.rules
vagrant_interface_rule

# Run Any Platform Specific Code and Apply the interface Re-map
    #   (may or may not perform a reboot depending on platform)
    device.vm.provision :shell , :inline => $script

end

  ##### DEFINE VM for leaf50 #####
  config.vm.define "leaf50" do |device|

    device.vm.hostname = "leaf50"

    device.vm.box = "CumulusCommunity/cumulus-vx"
    device.vm.box_version = "3.5.0"

    device.vm.provider :libvirt do |v|
      v.memory = 768
    end
    #   see note here: https://github.com/pradels/vagrant-libvirt#synced-folders
    device.vm.synced_folder ".", "/vagrant", disabled: true



    # NETWORK INTERFACES
      # link for eth0 --> oob-mgmt-switch2:swp4
      device.vm.network "private_network",
            :mac => "44:38:39:00:06:46",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10803',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8803',
            :libvirt__iface_name => 'eth0',
            auto_config: false
      # link for swp1 --> chassis01-lc2-2:swp2
      device.vm.network "private_network",
            :mac => "44:38:39:00:07:60",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10944',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8944',
            :libvirt__iface_name => 'swp1',
            auto_config: false
      # link for swp2 --> chassis02-lc2-2:swp2
      device.vm.network "private_network",
            :mac => "44:38:39:00:08:4a",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '11061',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '9061',
            :libvirt__iface_name => 'swp2',
            auto_config: false
      # link for swp3 --> chassis03-lc2-2:swp2
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:86",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10067',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8067',
            :libvirt__iface_name => 'swp3',
            auto_config: false
      # link for swp4 --> chassis04-lc2-2:swp2
      device.vm.network "private_network",
            :mac => "44:38:39:00:08:0c",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '11030',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '9030',
            :libvirt__iface_name => 'swp4',
            auto_config: false



    # Fixes "stdin: is not a tty" and "mesg: ttyname failed : Inappropriate ioctl for device"  messages --> https://github.com/mitchellh/vagrant/issues/1673
    device.vm.provision :shell , inline: "(sudo grep -q 'mesg n' /root/.profile 2>/dev/null && sudo sed -i '/mesg n/d' /root/.profile  2>/dev/null) || true;", privileged: false

    #Copy over Topology.dot File
    device.vm.provision "file", source: "topology.dot", destination: "~/topology.dot"
    device.vm.provision :shell, privileged: false, inline: "sudo mv ~/topology.dot /etc/ptm.d/topology.dot"


    # Run the Config specified in the Node Attributes
    device.vm.provision :shell , privileged: false, :inline => 'echo "$(whoami)" > /tmp/normal_user'
    device.vm.provision :shell , path: "./helper_scripts/extra_switch_config.sh"


    # Install Rules for the interface re-map
    device.vm.provision :shell , :inline => <<-delete_udev_directory
if [ -d "/etc/udev/rules.d/70-persistent-net.rules" ]; then
    rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
fi
rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
delete_udev_directory

device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:06:46 --> eth0"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:06:46", NAME="eth0", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:07:60 --> swp1"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:07:60", NAME="swp1", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:08:4a --> swp2"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:08:4a", NAME="swp2", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:86 --> swp3"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:86", NAME="swp3", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:08:0c --> swp4"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:08:0c", NAME="swp4", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule

      device.vm.provision :shell , :inline => <<-vagrant_interface_rule
echo "  INFO: Adding UDEV Rule: Vagrant interface = vagrant"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{ifindex}=="2", NAME="vagrant", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
echo "#### UDEV Rules (/etc/udev/rules.d/70-persistent-net.rules) ####"
cat /etc/udev/rules.d/70-persistent-net.rules
vagrant_interface_rule

# Run Any Platform Specific Code and Apply the interface Re-map
    #   (may or may not perform a reboot depending on platform)
    device.vm.provision :shell , :inline => $script

end

  ##### DEFINE VM for leaf53 #####
  config.vm.define "leaf53" do |device|

    device.vm.hostname = "leaf53"

    device.vm.box = "CumulusCommunity/cumulus-vx"
    device.vm.box_version = "3.5.0"

    device.vm.provider :libvirt do |v|
      v.memory = 768
    end
    #   see note here: https://github.com/pradels/vagrant-libvirt#synced-folders
    device.vm.synced_folder ".", "/vagrant", disabled: true



    # NETWORK INTERFACES
      # link for eth0 --> oob-mgmt-switch2:swp7
      device.vm.network "private_network",
            :mac => "44:38:39:00:07:d8",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '11004',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '9004',
            :libvirt__iface_name => 'eth0',
            auto_config: false
      # link for swp1 --> chassis01-lc2-2:swp5
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:ec",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10118',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8118',
            :libvirt__iface_name => 'swp1',
            auto_config: false
      # link for swp2 --> chassis02-lc2-2:swp5
      device.vm.network "private_network",
            :mac => "44:38:39:00:09:5a",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '11197',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '9197',
            :libvirt__iface_name => 'swp2',
            auto_config: false
      # link for swp3 --> chassis03-lc2-2:swp5
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:36",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10027',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8027',
            :libvirt__iface_name => 'swp3',
            auto_config: false
      # link for swp4 --> chassis04-lc2-2:swp5
      device.vm.network "private_network",
            :mac => "44:38:39:00:05:76",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10699',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8699',
            :libvirt__iface_name => 'swp4',
            auto_config: false



    # Fixes "stdin: is not a tty" and "mesg: ttyname failed : Inappropriate ioctl for device"  messages --> https://github.com/mitchellh/vagrant/issues/1673
    device.vm.provision :shell , inline: "(sudo grep -q 'mesg n' /root/.profile 2>/dev/null && sudo sed -i '/mesg n/d' /root/.profile  2>/dev/null) || true;", privileged: false

    #Copy over Topology.dot File
    device.vm.provision "file", source: "topology.dot", destination: "~/topology.dot"
    device.vm.provision :shell, privileged: false, inline: "sudo mv ~/topology.dot /etc/ptm.d/topology.dot"


    # Run the Config specified in the Node Attributes
    device.vm.provision :shell , privileged: false, :inline => 'echo "$(whoami)" > /tmp/normal_user'
    device.vm.provision :shell , path: "./helper_scripts/extra_switch_config.sh"


    # Install Rules for the interface re-map
    device.vm.provision :shell , :inline => <<-delete_udev_directory
if [ -d "/etc/udev/rules.d/70-persistent-net.rules" ]; then
    rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
fi
rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
delete_udev_directory

device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:07:d8 --> eth0"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:07:d8", NAME="eth0", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:ec --> swp1"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:ec", NAME="swp1", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:09:5a --> swp2"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:09:5a", NAME="swp2", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:36 --> swp3"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:36", NAME="swp3", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:05:76 --> swp4"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:05:76", NAME="swp4", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule

      device.vm.provision :shell , :inline => <<-vagrant_interface_rule
echo "  INFO: Adding UDEV Rule: Vagrant interface = vagrant"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{ifindex}=="2", NAME="vagrant", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
echo "#### UDEV Rules (/etc/udev/rules.d/70-persistent-net.rules) ####"
cat /etc/udev/rules.d/70-persistent-net.rules
vagrant_interface_rule

# Run Any Platform Specific Code and Apply the interface Re-map
    #   (may or may not perform a reboot depending on platform)
    device.vm.provision :shell , :inline => $script

end

  ##### DEFINE VM for leaf52 #####
  config.vm.define "leaf52" do |device|

    device.vm.hostname = "leaf52"

    device.vm.box = "CumulusCommunity/cumulus-vx"
    device.vm.box_version = "3.5.0"

    device.vm.provider :libvirt do |v|
      v.memory = 768
    end
    #   see note here: https://github.com/pradels/vagrant-libvirt#synced-folders
    device.vm.synced_folder ".", "/vagrant", disabled: true



    # NETWORK INTERFACES
      # link for eth0 --> oob-mgmt-switch2:swp6
      device.vm.network "private_network",
            :mac => "44:38:39:00:05:5e",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10687',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8687',
            :libvirt__iface_name => 'eth0',
            auto_config: false
      # link for swp1 --> chassis01-lc2-2:swp4
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:ae",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10599',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8599',
            :libvirt__iface_name => 'swp1',
            auto_config: false
      # link for swp2 --> chassis02-lc2-2:swp4
      device.vm.network "private_network",
            :mac => "44:38:39:00:08:d2",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '11129',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '9129',
            :libvirt__iface_name => 'swp2',
            auto_config: false
      # link for swp3 --> chassis03-lc2-2:swp4
      device.vm.network "private_network",
            :mac => "44:38:39:00:07:7e",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10959',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8959',
            :libvirt__iface_name => 'swp3',
            auto_config: false
      # link for swp4 --> chassis04-lc2-2:swp4
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:a8",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10212',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8212',
            :libvirt__iface_name => 'swp4',
            auto_config: false



    # Fixes "stdin: is not a tty" and "mesg: ttyname failed : Inappropriate ioctl for device"  messages --> https://github.com/mitchellh/vagrant/issues/1673
    device.vm.provision :shell , inline: "(sudo grep -q 'mesg n' /root/.profile 2>/dev/null && sudo sed -i '/mesg n/d' /root/.profile  2>/dev/null) || true;", privileged: false

    #Copy over Topology.dot File
    device.vm.provision "file", source: "topology.dot", destination: "~/topology.dot"
    device.vm.provision :shell, privileged: false, inline: "sudo mv ~/topology.dot /etc/ptm.d/topology.dot"


    # Run the Config specified in the Node Attributes
    device.vm.provision :shell , privileged: false, :inline => 'echo "$(whoami)" > /tmp/normal_user'
    device.vm.provision :shell , path: "./helper_scripts/extra_switch_config.sh"


    # Install Rules for the interface re-map
    device.vm.provision :shell , :inline => <<-delete_udev_directory
if [ -d "/etc/udev/rules.d/70-persistent-net.rules" ]; then
    rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
fi
rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
delete_udev_directory

device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:05:5e --> eth0"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:05:5e", NAME="eth0", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:ae --> swp1"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:ae", NAME="swp1", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:08:d2 --> swp2"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:08:d2", NAME="swp2", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:07:7e --> swp3"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:07:7e", NAME="swp3", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:a8 --> swp4"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:a8", NAME="swp4", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule

      device.vm.provision :shell , :inline => <<-vagrant_interface_rule
echo "  INFO: Adding UDEV Rule: Vagrant interface = vagrant"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{ifindex}=="2", NAME="vagrant", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
echo "#### UDEV Rules (/etc/udev/rules.d/70-persistent-net.rules) ####"
cat /etc/udev/rules.d/70-persistent-net.rules
vagrant_interface_rule

# Run Any Platform Specific Code and Apply the interface Re-map
    #   (may or may not perform a reboot depending on platform)
    device.vm.provision :shell , :inline => $script

end

  ##### DEFINE VM for leaf54 #####
  config.vm.define "leaf54" do |device|

    device.vm.hostname = "leaf54"

    device.vm.box = "CumulusCommunity/cumulus-vx"
    device.vm.box_version = "3.5.0"

    device.vm.provider :libvirt do |v|
      v.memory = 768
    end
    #   see note here: https://github.com/pradels/vagrant-libvirt#synced-folders
    device.vm.synced_folder ".", "/vagrant", disabled: true



    # NETWORK INTERFACES
      # link for eth0 --> oob-mgmt-switch2:swp8
      device.vm.network "private_network",
            :mac => "44:38:39:00:08:f0",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '11144',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '9144',
            :libvirt__iface_name => 'eth0',
            auto_config: false
      # link for swp1 --> chassis01-lc2-2:swp6
      device.vm.network "private_network",
            :mac => "44:38:39:00:07:28",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10916',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8916',
            :libvirt__iface_name => 'swp1',
            auto_config: false
      # link for swp2 --> chassis02-lc2-2:swp6
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:32",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10025',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8025',
            :libvirt__iface_name => 'swp2',
            auto_config: false
      # link for swp3 --> chassis03-lc2-2:swp6
      device.vm.network "private_network",
            :mac => "44:38:39:00:07:be",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10991',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8991',
            :libvirt__iface_name => 'swp3',
            auto_config: false
      # link for swp4 --> chassis04-lc2-2:swp6
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:de",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10367',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8367',
            :libvirt__iface_name => 'swp4',
            auto_config: false



    # Fixes "stdin: is not a tty" and "mesg: ttyname failed : Inappropriate ioctl for device"  messages --> https://github.com/mitchellh/vagrant/issues/1673
    device.vm.provision :shell , inline: "(sudo grep -q 'mesg n' /root/.profile 2>/dev/null && sudo sed -i '/mesg n/d' /root/.profile  2>/dev/null) || true;", privileged: false

    #Copy over Topology.dot File
    device.vm.provision "file", source: "topology.dot", destination: "~/topology.dot"
    device.vm.provision :shell, privileged: false, inline: "sudo mv ~/topology.dot /etc/ptm.d/topology.dot"


    # Run the Config specified in the Node Attributes
    device.vm.provision :shell , privileged: false, :inline => 'echo "$(whoami)" > /tmp/normal_user'
    device.vm.provision :shell , path: "./helper_scripts/extra_switch_config.sh"


    # Install Rules for the interface re-map
    device.vm.provision :shell , :inline => <<-delete_udev_directory
if [ -d "/etc/udev/rules.d/70-persistent-net.rules" ]; then
    rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
fi
rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
delete_udev_directory

device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:08:f0 --> eth0"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:08:f0", NAME="eth0", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:07:28 --> swp1"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:07:28", NAME="swp1", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:32 --> swp2"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:32", NAME="swp2", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:07:be --> swp3"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:07:be", NAME="swp3", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:de --> swp4"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:de", NAME="swp4", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule

      device.vm.provision :shell , :inline => <<-vagrant_interface_rule
echo "  INFO: Adding UDEV Rule: Vagrant interface = vagrant"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{ifindex}=="2", NAME="vagrant", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
echo "#### UDEV Rules (/etc/udev/rules.d/70-persistent-net.rules) ####"
cat /etc/udev/rules.d/70-persistent-net.rules
vagrant_interface_rule

# Run Any Platform Specific Code and Apply the interface Re-map
    #   (may or may not perform a reboot depending on platform)
    device.vm.provision :shell , :inline => $script

end

  ##### DEFINE VM for leaf57 #####
  config.vm.define "leaf57" do |device|

    device.vm.hostname = "leaf57"

    device.vm.box = "CumulusCommunity/cumulus-vx"
    device.vm.box_version = "3.5.0"

    device.vm.provider :libvirt do |v|
      v.memory = 768
    end
    #   see note here: https://github.com/pradels/vagrant-libvirt#synced-folders
    device.vm.synced_folder ".", "/vagrant", disabled: true



    # NETWORK INTERFACES
      # link for eth0 --> oob-mgmt-switch2:swp11
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:de",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10111',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8111',
            :libvirt__iface_name => 'eth0',
            auto_config: false
      # link for swp1 --> chassis01-lc2-2:swp9
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:f2",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10633',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8633',
            :libvirt__iface_name => 'swp1',
            auto_config: false
      # link for swp2 --> chassis02-lc2-2:swp9
      device.vm.network "private_network",
            :mac => "44:38:39:00:06:8c",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10838',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8838',
            :libvirt__iface_name => 'swp2',
            auto_config: false
      # link for swp3 --> chassis03-lc2-2:swp9
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:d6",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10363',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8363',
            :libvirt__iface_name => 'swp3',
            auto_config: false
      # link for swp4 --> chassis04-lc2-2:swp9
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:80",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10320',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8320',
            :libvirt__iface_name => 'swp4',
            auto_config: false



    # Fixes "stdin: is not a tty" and "mesg: ttyname failed : Inappropriate ioctl for device"  messages --> https://github.com/mitchellh/vagrant/issues/1673
    device.vm.provision :shell , inline: "(sudo grep -q 'mesg n' /root/.profile 2>/dev/null && sudo sed -i '/mesg n/d' /root/.profile  2>/dev/null) || true;", privileged: false

    #Copy over Topology.dot File
    device.vm.provision "file", source: "topology.dot", destination: "~/topology.dot"
    device.vm.provision :shell, privileged: false, inline: "sudo mv ~/topology.dot /etc/ptm.d/topology.dot"


    # Run the Config specified in the Node Attributes
    device.vm.provision :shell , privileged: false, :inline => 'echo "$(whoami)" > /tmp/normal_user'
    device.vm.provision :shell , path: "./helper_scripts/extra_switch_config.sh"


    # Install Rules for the interface re-map
    device.vm.provision :shell , :inline => <<-delete_udev_directory
if [ -d "/etc/udev/rules.d/70-persistent-net.rules" ]; then
    rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
fi
rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
delete_udev_directory

device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:de --> eth0"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:de", NAME="eth0", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:f2 --> swp1"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:f2", NAME="swp1", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:06:8c --> swp2"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:06:8c", NAME="swp2", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:d6 --> swp3"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:d6", NAME="swp3", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:80 --> swp4"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:80", NAME="swp4", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule

      device.vm.provision :shell , :inline => <<-vagrant_interface_rule
echo "  INFO: Adding UDEV Rule: Vagrant interface = vagrant"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{ifindex}=="2", NAME="vagrant", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
echo "#### UDEV Rules (/etc/udev/rules.d/70-persistent-net.rules) ####"
cat /etc/udev/rules.d/70-persistent-net.rules
vagrant_interface_rule

# Run Any Platform Specific Code and Apply the interface Re-map
    #   (may or may not perform a reboot depending on platform)
    device.vm.provision :shell , :inline => $script

end

  ##### DEFINE VM for leaf75 #####
  config.vm.define "leaf75" do |device|

    device.vm.hostname = "leaf75"

    device.vm.box = "CumulusCommunity/cumulus-vx"
    device.vm.box_version = "3.5.0"

    device.vm.provider :libvirt do |v|
      v.memory = 768
    end
    #   see note here: https://github.com/pradels/vagrant-libvirt#synced-folders
    device.vm.synced_folder ".", "/vagrant", disabled: true



    # NETWORK INTERFACES
      # link for eth0 --> oob-mgmt-switch2:swp29
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:2c",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10022',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8022',
            :libvirt__iface_name => 'eth0',
            auto_config: false
      # link for swp1 --> chassis01-lc3-1:swp11
      device.vm.network "private_network",
            :mac => "44:38:39:00:05:e8",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10756',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8756',
            :libvirt__iface_name => 'swp1',
            auto_config: false
      # link for swp2 --> chassis02-lc3-1:swp11
      device.vm.network "private_network",
            :mac => "44:38:39:00:06:f2",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10889',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8889',
            :libvirt__iface_name => 'swp2',
            auto_config: false
      # link for swp3 --> chassis03-lc3-1:swp11
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:92",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10073',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8073',
            :libvirt__iface_name => 'swp3',
            auto_config: false
      # link for swp4 --> chassis04-lc3-1:swp11
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:6a",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10309',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8309',
            :libvirt__iface_name => 'swp4',
            auto_config: false



    # Fixes "stdin: is not a tty" and "mesg: ttyname failed : Inappropriate ioctl for device"  messages --> https://github.com/mitchellh/vagrant/issues/1673
    device.vm.provision :shell , inline: "(sudo grep -q 'mesg n' /root/.profile 2>/dev/null && sudo sed -i '/mesg n/d' /root/.profile  2>/dev/null) || true;", privileged: false

    #Copy over Topology.dot File
    device.vm.provision "file", source: "topology.dot", destination: "~/topology.dot"
    device.vm.provision :shell, privileged: false, inline: "sudo mv ~/topology.dot /etc/ptm.d/topology.dot"


    # Run the Config specified in the Node Attributes
    device.vm.provision :shell , privileged: false, :inline => 'echo "$(whoami)" > /tmp/normal_user'
    device.vm.provision :shell , path: "./helper_scripts/extra_switch_config.sh"


    # Install Rules for the interface re-map
    device.vm.provision :shell , :inline => <<-delete_udev_directory
if [ -d "/etc/udev/rules.d/70-persistent-net.rules" ]; then
    rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
fi
rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
delete_udev_directory

device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:2c --> eth0"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:2c", NAME="eth0", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:05:e8 --> swp1"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:05:e8", NAME="swp1", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:06:f2 --> swp2"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:06:f2", NAME="swp2", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:92 --> swp3"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:92", NAME="swp3", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:6a --> swp4"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:6a", NAME="swp4", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule

      device.vm.provision :shell , :inline => <<-vagrant_interface_rule
echo "  INFO: Adding UDEV Rule: Vagrant interface = vagrant"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{ifindex}=="2", NAME="vagrant", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
echo "#### UDEV Rules (/etc/udev/rules.d/70-persistent-net.rules) ####"
cat /etc/udev/rules.d/70-persistent-net.rules
vagrant_interface_rule

# Run Any Platform Specific Code and Apply the interface Re-map
    #   (may or may not perform a reboot depending on platform)
    device.vm.provision :shell , :inline => $script

end

  ##### DEFINE VM for leaf74 #####
  config.vm.define "leaf74" do |device|

    device.vm.hostname = "leaf74"

    device.vm.box = "CumulusCommunity/cumulus-vx"
    device.vm.box_version = "3.5.0"

    device.vm.provider :libvirt do |v|
      v.memory = 768
    end
    #   see note here: https://github.com/pradels/vagrant-libvirt#synced-folders
    device.vm.synced_folder ".", "/vagrant", disabled: true



    # NETWORK INTERFACES
      # link for eth0 --> oob-mgmt-switch2:swp28
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:72",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10313',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8313',
            :libvirt__iface_name => 'eth0',
            auto_config: false
      # link for swp1 --> chassis01-lc3-1:swp10
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:96",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10203',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8203',
            :libvirt__iface_name => 'swp1',
            auto_config: false
      # link for swp2 --> chassis02-lc3-1:swp10
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:00",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10256',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8256',
            :libvirt__iface_name => 'swp2',
            auto_config: false
      # link for swp3 --> chassis03-lc3-1:swp10
      device.vm.network "private_network",
            :mac => "44:38:39:00:08:76",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '11083',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '9083',
            :libvirt__iface_name => 'swp3',
            auto_config: false
      # link for swp4 --> chassis04-lc3-1:swp10
      device.vm.network "private_network",
            :mac => "44:38:39:00:08:90",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '11096',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '9096',
            :libvirt__iface_name => 'swp4',
            auto_config: false



    # Fixes "stdin: is not a tty" and "mesg: ttyname failed : Inappropriate ioctl for device"  messages --> https://github.com/mitchellh/vagrant/issues/1673
    device.vm.provision :shell , inline: "(sudo grep -q 'mesg n' /root/.profile 2>/dev/null && sudo sed -i '/mesg n/d' /root/.profile  2>/dev/null) || true;", privileged: false

    #Copy over Topology.dot File
    device.vm.provision "file", source: "topology.dot", destination: "~/topology.dot"
    device.vm.provision :shell, privileged: false, inline: "sudo mv ~/topology.dot /etc/ptm.d/topology.dot"


    # Run the Config specified in the Node Attributes
    device.vm.provision :shell , privileged: false, :inline => 'echo "$(whoami)" > /tmp/normal_user'
    device.vm.provision :shell , path: "./helper_scripts/extra_switch_config.sh"


    # Install Rules for the interface re-map
    device.vm.provision :shell , :inline => <<-delete_udev_directory
if [ -d "/etc/udev/rules.d/70-persistent-net.rules" ]; then
    rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
fi
rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
delete_udev_directory

device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:72 --> eth0"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:72", NAME="eth0", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:96 --> swp1"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:96", NAME="swp1", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:00 --> swp2"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:00", NAME="swp2", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:08:76 --> swp3"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:08:76", NAME="swp3", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:08:90 --> swp4"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:08:90", NAME="swp4", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule

      device.vm.provision :shell , :inline => <<-vagrant_interface_rule
echo "  INFO: Adding UDEV Rule: Vagrant interface = vagrant"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{ifindex}=="2", NAME="vagrant", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
echo "#### UDEV Rules (/etc/udev/rules.d/70-persistent-net.rules) ####"
cat /etc/udev/rules.d/70-persistent-net.rules
vagrant_interface_rule

# Run Any Platform Specific Code and Apply the interface Re-map
    #   (may or may not perform a reboot depending on platform)
    device.vm.provision :shell , :inline => $script

end

  ##### DEFINE VM for leaf79 #####
  config.vm.define "leaf79" do |device|

    device.vm.hostname = "leaf79"

    device.vm.box = "CumulusCommunity/cumulus-vx"
    device.vm.box_version = "3.5.0"

    device.vm.provider :libvirt do |v|
      v.memory = 768
    end
    #   see note here: https://github.com/pradels/vagrant-libvirt#synced-folders
    device.vm.synced_folder ".", "/vagrant", disabled: true



    # NETWORK INTERFACES
      # link for eth0 --> oob-mgmt-switch2:swp33
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:28",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10404',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8404',
            :libvirt__iface_name => 'eth0',
            auto_config: false
      # link for swp1 --> chassis01-lc3-1:swp15
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:0e",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10519',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8519',
            :libvirt__iface_name => 'swp1',
            auto_config: false
      # link for swp2 --> chassis02-lc3-1:swp15
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:16",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10011',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8011',
            :libvirt__iface_name => 'swp2',
            auto_config: false
      # link for swp3 --> chassis03-lc3-1:swp15
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:16",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10267',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8267',
            :libvirt__iface_name => 'swp3',
            auto_config: false
      # link for swp4 --> chassis04-lc3-1:swp15
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:d8",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10108',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8108',
            :libvirt__iface_name => 'swp4',
            auto_config: false



    # Fixes "stdin: is not a tty" and "mesg: ttyname failed : Inappropriate ioctl for device"  messages --> https://github.com/mitchellh/vagrant/issues/1673
    device.vm.provision :shell , inline: "(sudo grep -q 'mesg n' /root/.profile 2>/dev/null && sudo sed -i '/mesg n/d' /root/.profile  2>/dev/null) || true;", privileged: false

    #Copy over Topology.dot File
    device.vm.provision "file", source: "topology.dot", destination: "~/topology.dot"
    device.vm.provision :shell, privileged: false, inline: "sudo mv ~/topology.dot /etc/ptm.d/topology.dot"


    # Run the Config specified in the Node Attributes
    device.vm.provision :shell , privileged: false, :inline => 'echo "$(whoami)" > /tmp/normal_user'
    device.vm.provision :shell , path: "./helper_scripts/extra_switch_config.sh"


    # Install Rules for the interface re-map
    device.vm.provision :shell , :inline => <<-delete_udev_directory
if [ -d "/etc/udev/rules.d/70-persistent-net.rules" ]; then
    rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
fi
rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
delete_udev_directory

device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:28 --> eth0"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:28", NAME="eth0", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:0e --> swp1"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:0e", NAME="swp1", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:16 --> swp2"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:16", NAME="swp2", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:16 --> swp3"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:16", NAME="swp3", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:d8 --> swp4"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:d8", NAME="swp4", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule

      device.vm.provision :shell , :inline => <<-vagrant_interface_rule
echo "  INFO: Adding UDEV Rule: Vagrant interface = vagrant"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{ifindex}=="2", NAME="vagrant", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
echo "#### UDEV Rules (/etc/udev/rules.d/70-persistent-net.rules) ####"
cat /etc/udev/rules.d/70-persistent-net.rules
vagrant_interface_rule

# Run Any Platform Specific Code and Apply the interface Re-map
    #   (may or may not perform a reboot depending on platform)
    device.vm.provision :shell , :inline => $script

end

  ##### DEFINE VM for leaf78 #####
  config.vm.define "leaf78" do |device|

    device.vm.hostname = "leaf78"

    device.vm.box = "CumulusCommunity/cumulus-vx"
    device.vm.box_version = "3.5.0"

    device.vm.provider :libvirt do |v|
      v.memory = 768
    end
    #   see note here: https://github.com/pradels/vagrant-libvirt#synced-folders
    device.vm.synced_folder ".", "/vagrant", disabled: true



    # NETWORK INTERFACES
      # link for eth0 --> oob-mgmt-switch2:swp32
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:48",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10292',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8292',
            :libvirt__iface_name => 'eth0',
            auto_config: false
      # link for swp1 --> chassis01-lc3-1:swp14
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:a0",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10080',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8080',
            :libvirt__iface_name => 'swp1',
            auto_config: false
      # link for swp2 --> chassis02-lc3-1:swp14
      device.vm.network "private_network",
            :mac => "44:38:39:00:05:a8",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10724',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8724',
            :libvirt__iface_name => 'swp2',
            auto_config: false
      # link for swp3 --> chassis03-lc3-1:swp14
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:b8",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10604',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8604',
            :libvirt__iface_name => 'swp3',
            auto_config: false
      # link for swp4 --> chassis04-lc3-1:swp14
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:92",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10457',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8457',
            :libvirt__iface_name => 'swp4',
            auto_config: false



    # Fixes "stdin: is not a tty" and "mesg: ttyname failed : Inappropriate ioctl for device"  messages --> https://github.com/mitchellh/vagrant/issues/1673
    device.vm.provision :shell , inline: "(sudo grep -q 'mesg n' /root/.profile 2>/dev/null && sudo sed -i '/mesg n/d' /root/.profile  2>/dev/null) || true;", privileged: false

    #Copy over Topology.dot File
    device.vm.provision "file", source: "topology.dot", destination: "~/topology.dot"
    device.vm.provision :shell, privileged: false, inline: "sudo mv ~/topology.dot /etc/ptm.d/topology.dot"


    # Run the Config specified in the Node Attributes
    device.vm.provision :shell , privileged: false, :inline => 'echo "$(whoami)" > /tmp/normal_user'
    device.vm.provision :shell , path: "./helper_scripts/extra_switch_config.sh"


    # Install Rules for the interface re-map
    device.vm.provision :shell , :inline => <<-delete_udev_directory
if [ -d "/etc/udev/rules.d/70-persistent-net.rules" ]; then
    rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
fi
rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
delete_udev_directory

device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:48 --> eth0"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:48", NAME="eth0", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:a0 --> swp1"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:a0", NAME="swp1", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:05:a8 --> swp2"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:05:a8", NAME="swp2", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:b8 --> swp3"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:b8", NAME="swp3", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:92 --> swp4"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:92", NAME="swp4", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule

      device.vm.provision :shell , :inline => <<-vagrant_interface_rule
echo "  INFO: Adding UDEV Rule: Vagrant interface = vagrant"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{ifindex}=="2", NAME="vagrant", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
echo "#### UDEV Rules (/etc/udev/rules.d/70-persistent-net.rules) ####"
cat /etc/udev/rules.d/70-persistent-net.rules
vagrant_interface_rule

# Run Any Platform Specific Code and Apply the interface Re-map
    #   (may or may not perform a reboot depending on platform)
    device.vm.provision :shell , :inline => $script

end

  ##### DEFINE VM for leaf124 #####
  config.vm.define "leaf124" do |device|

    device.vm.hostname = "leaf124"

    device.vm.box = "CumulusCommunity/cumulus-vx"
    device.vm.box_version = "3.5.0"

    device.vm.provider :libvirt do |v|
      v.memory = 768
    end
    #   see note here: https://github.com/pradels/vagrant-libvirt#synced-folders
    device.vm.synced_folder ".", "/vagrant", disabled: true



    # NETWORK INTERFACES
      # link for eth0 --> oob-mgmt-switch3:swp30
      device.vm.network "private_network",
            :mac => "44:38:39:00:05:80",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10704',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8704',
            :libvirt__iface_name => 'eth0',
            auto_config: false
      # link for swp1 --> chassis01-lc4-2:swp12
      device.vm.network "private_network",
            :mac => "44:38:39:00:08:a6",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '11107',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '9107',
            :libvirt__iface_name => 'swp1',
            auto_config: false
      # link for swp2 --> chassis02-lc4-2:swp12
      device.vm.network "private_network",
            :mac => "44:38:39:00:07:66",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10947',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8947',
            :libvirt__iface_name => 'swp2',
            auto_config: false
      # link for swp3 --> chassis03-lc4-2:swp12
      device.vm.network "private_network",
            :mac => "44:38:39:00:06:d4",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10874',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8874',
            :libvirt__iface_name => 'swp3',
            auto_config: false
      # link for swp4 --> chassis04-lc4-2:swp12
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:a4",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10466',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8466',
            :libvirt__iface_name => 'swp4',
            auto_config: false



    # Fixes "stdin: is not a tty" and "mesg: ttyname failed : Inappropriate ioctl for device"  messages --> https://github.com/mitchellh/vagrant/issues/1673
    device.vm.provision :shell , inline: "(sudo grep -q 'mesg n' /root/.profile 2>/dev/null && sudo sed -i '/mesg n/d' /root/.profile  2>/dev/null) || true;", privileged: false

    #Copy over Topology.dot File
    device.vm.provision "file", source: "topology.dot", destination: "~/topology.dot"
    device.vm.provision :shell, privileged: false, inline: "sudo mv ~/topology.dot /etc/ptm.d/topology.dot"


    # Run the Config specified in the Node Attributes
    device.vm.provision :shell , privileged: false, :inline => 'echo "$(whoami)" > /tmp/normal_user'
    device.vm.provision :shell , path: "./helper_scripts/extra_switch_config.sh"


    # Install Rules for the interface re-map
    device.vm.provision :shell , :inline => <<-delete_udev_directory
if [ -d "/etc/udev/rules.d/70-persistent-net.rules" ]; then
    rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
fi
rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
delete_udev_directory

device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:05:80 --> eth0"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:05:80", NAME="eth0", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:08:a6 --> swp1"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:08:a6", NAME="swp1", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:07:66 --> swp2"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:07:66", NAME="swp2", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:06:d4 --> swp3"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:06:d4", NAME="swp3", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:a4 --> swp4"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:a4", NAME="swp4", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule

      device.vm.provision :shell , :inline => <<-vagrant_interface_rule
echo "  INFO: Adding UDEV Rule: Vagrant interface = vagrant"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{ifindex}=="2", NAME="vagrant", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
echo "#### UDEV Rules (/etc/udev/rules.d/70-persistent-net.rules) ####"
cat /etc/udev/rules.d/70-persistent-net.rules
vagrant_interface_rule

# Run Any Platform Specific Code and Apply the interface Re-map
    #   (may or may not perform a reboot depending on platform)
    device.vm.provision :shell , :inline => $script

end

  ##### DEFINE VM for leaf125 #####
  config.vm.define "leaf125" do |device|

    device.vm.hostname = "leaf125"

    device.vm.box = "CumulusCommunity/cumulus-vx"
    device.vm.box_version = "3.5.0"

    device.vm.provider :libvirt do |v|
      v.memory = 768
    end
    #   see note here: https://github.com/pradels/vagrant-libvirt#synced-folders
    device.vm.synced_folder ".", "/vagrant", disabled: true



    # NETWORK INTERFACES
      # link for eth0 --> oob-mgmt-switch3:swp31
      device.vm.network "private_network",
            :mac => "44:38:39:00:09:1a",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '11165',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '9165',
            :libvirt__iface_name => 'eth0',
            auto_config: false
      # link for swp1 --> chassis01-lc4-2:swp13
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:6a",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10053',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8053',
            :libvirt__iface_name => 'swp1',
            auto_config: false
      # link for swp2 --> chassis02-lc4-2:swp13
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:3c",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10542',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8542',
            :libvirt__iface_name => 'swp2',
            auto_config: false
      # link for swp3 --> chassis03-lc4-2:swp13
      device.vm.network "private_network",
            :mac => "44:38:39:00:07:ce",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10999',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8999',
            :libvirt__iface_name => 'swp3',
            auto_config: false
      # link for swp4 --> chassis04-lc4-2:swp13
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:26",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10147',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8147',
            :libvirt__iface_name => 'swp4',
            auto_config: false



    # Fixes "stdin: is not a tty" and "mesg: ttyname failed : Inappropriate ioctl for device"  messages --> https://github.com/mitchellh/vagrant/issues/1673
    device.vm.provision :shell , inline: "(sudo grep -q 'mesg n' /root/.profile 2>/dev/null && sudo sed -i '/mesg n/d' /root/.profile  2>/dev/null) || true;", privileged: false

    #Copy over Topology.dot File
    device.vm.provision "file", source: "topology.dot", destination: "~/topology.dot"
    device.vm.provision :shell, privileged: false, inline: "sudo mv ~/topology.dot /etc/ptm.d/topology.dot"


    # Run the Config specified in the Node Attributes
    device.vm.provision :shell , privileged: false, :inline => 'echo "$(whoami)" > /tmp/normal_user'
    device.vm.provision :shell , path: "./helper_scripts/extra_switch_config.sh"


    # Install Rules for the interface re-map
    device.vm.provision :shell , :inline => <<-delete_udev_directory
if [ -d "/etc/udev/rules.d/70-persistent-net.rules" ]; then
    rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
fi
rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
delete_udev_directory

device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:09:1a --> eth0"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:09:1a", NAME="eth0", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:6a --> swp1"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:6a", NAME="swp1", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:3c --> swp2"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:3c", NAME="swp2", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:07:ce --> swp3"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:07:ce", NAME="swp3", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:26 --> swp4"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:26", NAME="swp4", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule

      device.vm.provision :shell , :inline => <<-vagrant_interface_rule
echo "  INFO: Adding UDEV Rule: Vagrant interface = vagrant"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{ifindex}=="2", NAME="vagrant", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
echo "#### UDEV Rules (/etc/udev/rules.d/70-persistent-net.rules) ####"
cat /etc/udev/rules.d/70-persistent-net.rules
vagrant_interface_rule

# Run Any Platform Specific Code and Apply the interface Re-map
    #   (may or may not perform a reboot depending on platform)
    device.vm.provision :shell , :inline => $script

end

  ##### DEFINE VM for leaf126 #####
  config.vm.define "leaf126" do |device|

    device.vm.hostname = "leaf126"

    device.vm.box = "CumulusCommunity/cumulus-vx"
    device.vm.box_version = "3.5.0"

    device.vm.provider :libvirt do |v|
      v.memory = 768
    end
    #   see note here: https://github.com/pradels/vagrant-libvirt#synced-folders
    device.vm.synced_folder ".", "/vagrant", disabled: true



    # NETWORK INTERFACES
      # link for eth0 --> oob-mgmt-switch3:swp32
      device.vm.network "private_network",
            :mac => "44:38:39:00:07:08",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10900',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8900',
            :libvirt__iface_name => 'eth0',
            auto_config: false
      # link for swp1 --> chassis01-lc4-2:swp14
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:2a",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10277',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8277',
            :libvirt__iface_name => 'swp1',
            auto_config: false
      # link for swp2 --> chassis02-lc4-2:swp14
      device.vm.network "private_network",
            :mac => "44:38:39:00:08:9c",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '11102',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '9102',
            :libvirt__iface_name => 'swp2',
            auto_config: false
      # link for swp3 --> chassis03-lc4-2:swp14
      device.vm.network "private_network",
            :mac => "44:38:39:00:06:e8",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10884',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8884',
            :libvirt__iface_name => 'swp3',
            auto_config: false
      # link for swp4 --> chassis04-lc4-2:swp14
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:8e",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10455',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8455',
            :libvirt__iface_name => 'swp4',
            auto_config: false



    # Fixes "stdin: is not a tty" and "mesg: ttyname failed : Inappropriate ioctl for device"  messages --> https://github.com/mitchellh/vagrant/issues/1673
    device.vm.provision :shell , inline: "(sudo grep -q 'mesg n' /root/.profile 2>/dev/null && sudo sed -i '/mesg n/d' /root/.profile  2>/dev/null) || true;", privileged: false

    #Copy over Topology.dot File
    device.vm.provision "file", source: "topology.dot", destination: "~/topology.dot"
    device.vm.provision :shell, privileged: false, inline: "sudo mv ~/topology.dot /etc/ptm.d/topology.dot"


    # Run the Config specified in the Node Attributes
    device.vm.provision :shell , privileged: false, :inline => 'echo "$(whoami)" > /tmp/normal_user'
    device.vm.provision :shell , path: "./helper_scripts/extra_switch_config.sh"


    # Install Rules for the interface re-map
    device.vm.provision :shell , :inline => <<-delete_udev_directory
if [ -d "/etc/udev/rules.d/70-persistent-net.rules" ]; then
    rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
fi
rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
delete_udev_directory

device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:07:08 --> eth0"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:07:08", NAME="eth0", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:2a --> swp1"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:2a", NAME="swp1", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:08:9c --> swp2"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:08:9c", NAME="swp2", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:06:e8 --> swp3"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:06:e8", NAME="swp3", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:8e --> swp4"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:8e", NAME="swp4", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule

      device.vm.provision :shell , :inline => <<-vagrant_interface_rule
echo "  INFO: Adding UDEV Rule: Vagrant interface = vagrant"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{ifindex}=="2", NAME="vagrant", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
echo "#### UDEV Rules (/etc/udev/rules.d/70-persistent-net.rules) ####"
cat /etc/udev/rules.d/70-persistent-net.rules
vagrant_interface_rule

# Run Any Platform Specific Code and Apply the interface Re-map
    #   (may or may not perform a reboot depending on platform)
    device.vm.provision :shell , :inline => $script

end

  ##### DEFINE VM for leaf127 #####
  config.vm.define "leaf127" do |device|

    device.vm.hostname = "leaf127"

    device.vm.box = "CumulusCommunity/cumulus-vx"
    device.vm.box_version = "3.5.0"

    device.vm.provider :libvirt do |v|
      v.memory = 768
    end
    #   see note here: https://github.com/pradels/vagrant-libvirt#synced-folders
    device.vm.synced_folder ".", "/vagrant", disabled: true



    # NETWORK INTERFACES
      # link for eth0 --> oob-mgmt-switch3:swp33
      device.vm.network "private_network",
            :mac => "44:38:39:00:08:38",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '11052',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '9052',
            :libvirt__iface_name => 'eth0',
            auto_config: false
      # link for swp1 --> chassis01-lc4-2:swp15
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:ee",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10247',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8247',
            :libvirt__iface_name => 'swp1',
            auto_config: false
      # link for swp2 --> chassis02-lc4-2:swp15
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:ee",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10119',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8119',
            :libvirt__iface_name => 'swp2',
            auto_config: false
      # link for swp3 --> chassis03-lc4-2:swp15
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:06",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10515',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8515',
            :libvirt__iface_name => 'swp3',
            auto_config: false
      # link for swp4 --> chassis04-lc4-2:swp15
      device.vm.network "private_network",
            :mac => "44:38:39:00:08:1c",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '11038',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '9038',
            :libvirt__iface_name => 'swp4',
            auto_config: false



    # Fixes "stdin: is not a tty" and "mesg: ttyname failed : Inappropriate ioctl for device"  messages --> https://github.com/mitchellh/vagrant/issues/1673
    device.vm.provision :shell , inline: "(sudo grep -q 'mesg n' /root/.profile 2>/dev/null && sudo sed -i '/mesg n/d' /root/.profile  2>/dev/null) || true;", privileged: false

    #Copy over Topology.dot File
    device.vm.provision "file", source: "topology.dot", destination: "~/topology.dot"
    device.vm.provision :shell, privileged: false, inline: "sudo mv ~/topology.dot /etc/ptm.d/topology.dot"


    # Run the Config specified in the Node Attributes
    device.vm.provision :shell , privileged: false, :inline => 'echo "$(whoami)" > /tmp/normal_user'
    device.vm.provision :shell , path: "./helper_scripts/extra_switch_config.sh"


    # Install Rules for the interface re-map
    device.vm.provision :shell , :inline => <<-delete_udev_directory
if [ -d "/etc/udev/rules.d/70-persistent-net.rules" ]; then
    rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
fi
rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
delete_udev_directory

device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:08:38 --> eth0"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:08:38", NAME="eth0", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:ee --> swp1"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:ee", NAME="swp1", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:ee --> swp2"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:ee", NAME="swp2", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:06 --> swp3"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:06", NAME="swp3", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:08:1c --> swp4"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:08:1c", NAME="swp4", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule

      device.vm.provision :shell , :inline => <<-vagrant_interface_rule
echo "  INFO: Adding UDEV Rule: Vagrant interface = vagrant"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{ifindex}=="2", NAME="vagrant", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
echo "#### UDEV Rules (/etc/udev/rules.d/70-persistent-net.rules) ####"
cat /etc/udev/rules.d/70-persistent-net.rules
vagrant_interface_rule

# Run Any Platform Specific Code and Apply the interface Re-map
    #   (may or may not perform a reboot depending on platform)
    device.vm.provision :shell , :inline => $script

end

  ##### DEFINE VM for leaf120 #####
  config.vm.define "leaf120" do |device|

    device.vm.hostname = "leaf120"

    device.vm.box = "CumulusCommunity/cumulus-vx"
    device.vm.box_version = "3.5.0"

    device.vm.provider :libvirt do |v|
      v.memory = 768
    end
    #   see note here: https://github.com/pradels/vagrant-libvirt#synced-folders
    device.vm.synced_folder ".", "/vagrant", disabled: true



    # NETWORK INTERFACES
      # link for eth0 --> oob-mgmt-switch3:swp26
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:ac",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10086',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8086',
            :libvirt__iface_name => 'eth0',
            auto_config: false
      # link for swp1 --> chassis01-lc4-2:swp8
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:f4",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10634',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8634',
            :libvirt__iface_name => 'swp1',
            auto_config: false
      # link for swp2 --> chassis02-lc4-2:swp8
      device.vm.network "private_network",
            :mac => "44:38:39:00:05:10",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10648',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8648',
            :libvirt__iface_name => 'swp2',
            auto_config: false
      # link for swp3 --> chassis03-lc4-2:swp8
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:20",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10400',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8400',
            :libvirt__iface_name => 'swp3',
            auto_config: false
      # link for swp4 --> chassis04-lc4-2:swp8
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:74",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10186',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8186',
            :libvirt__iface_name => 'swp4',
            auto_config: false



    # Fixes "stdin: is not a tty" and "mesg: ttyname failed : Inappropriate ioctl for device"  messages --> https://github.com/mitchellh/vagrant/issues/1673
    device.vm.provision :shell , inline: "(sudo grep -q 'mesg n' /root/.profile 2>/dev/null && sudo sed -i '/mesg n/d' /root/.profile  2>/dev/null) || true;", privileged: false

    #Copy over Topology.dot File
    device.vm.provision "file", source: "topology.dot", destination: "~/topology.dot"
    device.vm.provision :shell, privileged: false, inline: "sudo mv ~/topology.dot /etc/ptm.d/topology.dot"


    # Run the Config specified in the Node Attributes
    device.vm.provision :shell , privileged: false, :inline => 'echo "$(whoami)" > /tmp/normal_user'
    device.vm.provision :shell , path: "./helper_scripts/extra_switch_config.sh"


    # Install Rules for the interface re-map
    device.vm.provision :shell , :inline => <<-delete_udev_directory
if [ -d "/etc/udev/rules.d/70-persistent-net.rules" ]; then
    rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
fi
rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
delete_udev_directory

device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:ac --> eth0"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:ac", NAME="eth0", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:f4 --> swp1"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:f4", NAME="swp1", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:05:10 --> swp2"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:05:10", NAME="swp2", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:20 --> swp3"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:20", NAME="swp3", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:74 --> swp4"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:74", NAME="swp4", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule

      device.vm.provision :shell , :inline => <<-vagrant_interface_rule
echo "  INFO: Adding UDEV Rule: Vagrant interface = vagrant"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{ifindex}=="2", NAME="vagrant", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
echo "#### UDEV Rules (/etc/udev/rules.d/70-persistent-net.rules) ####"
cat /etc/udev/rules.d/70-persistent-net.rules
vagrant_interface_rule

# Run Any Platform Specific Code and Apply the interface Re-map
    #   (may or may not perform a reboot depending on platform)
    device.vm.provision :shell , :inline => $script

end

  ##### DEFINE VM for leaf121 #####
  config.vm.define "leaf121" do |device|

    device.vm.hostname = "leaf121"

    device.vm.box = "CumulusCommunity/cumulus-vx"
    device.vm.box_version = "3.5.0"

    device.vm.provider :libvirt do |v|
      v.memory = 768
    end
    #   see note here: https://github.com/pradels/vagrant-libvirt#synced-folders
    device.vm.synced_folder ".", "/vagrant", disabled: true



    # NETWORK INTERFACES
      # link for eth0 --> oob-mgmt-switch3:swp27
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:b8",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10092',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8092',
            :libvirt__iface_name => 'eth0',
            auto_config: false
      # link for swp1 --> chassis01-lc4-2:swp9
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:cc",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10358',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8358',
            :libvirt__iface_name => 'swp1',
            auto_config: false
      # link for swp2 --> chassis02-lc4-2:swp9
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:60",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10560',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8560',
            :libvirt__iface_name => 'swp2',
            auto_config: false
      # link for swp3 --> chassis03-lc4-2:swp9
      device.vm.network "private_network",
            :mac => "44:38:39:00:09:16",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '11163',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '9163',
            :libvirt__iface_name => 'swp3',
            auto_config: false
      # link for swp4 --> chassis04-lc4-2:swp9
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:26",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10531',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8531',
            :libvirt__iface_name => 'swp4',
            auto_config: false



    # Fixes "stdin: is not a tty" and "mesg: ttyname failed : Inappropriate ioctl for device"  messages --> https://github.com/mitchellh/vagrant/issues/1673
    device.vm.provision :shell , inline: "(sudo grep -q 'mesg n' /root/.profile 2>/dev/null && sudo sed -i '/mesg n/d' /root/.profile  2>/dev/null) || true;", privileged: false

    #Copy over Topology.dot File
    device.vm.provision "file", source: "topology.dot", destination: "~/topology.dot"
    device.vm.provision :shell, privileged: false, inline: "sudo mv ~/topology.dot /etc/ptm.d/topology.dot"


    # Run the Config specified in the Node Attributes
    device.vm.provision :shell , privileged: false, :inline => 'echo "$(whoami)" > /tmp/normal_user'
    device.vm.provision :shell , path: "./helper_scripts/extra_switch_config.sh"


    # Install Rules for the interface re-map
    device.vm.provision :shell , :inline => <<-delete_udev_directory
if [ -d "/etc/udev/rules.d/70-persistent-net.rules" ]; then
    rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
fi
rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
delete_udev_directory

device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:b8 --> eth0"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:b8", NAME="eth0", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:cc --> swp1"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:cc", NAME="swp1", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:60 --> swp2"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:60", NAME="swp2", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:09:16 --> swp3"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:09:16", NAME="swp3", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:26 --> swp4"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:26", NAME="swp4", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule

      device.vm.provision :shell , :inline => <<-vagrant_interface_rule
echo "  INFO: Adding UDEV Rule: Vagrant interface = vagrant"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{ifindex}=="2", NAME="vagrant", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
echo "#### UDEV Rules (/etc/udev/rules.d/70-persistent-net.rules) ####"
cat /etc/udev/rules.d/70-persistent-net.rules
vagrant_interface_rule

# Run Any Platform Specific Code and Apply the interface Re-map
    #   (may or may not perform a reboot depending on platform)
    device.vm.provision :shell , :inline => $script

end

  ##### DEFINE VM for leaf122 #####
  config.vm.define "leaf122" do |device|

    device.vm.hostname = "leaf122"

    device.vm.box = "CumulusCommunity/cumulus-vx"
    device.vm.box_version = "3.5.0"

    device.vm.provider :libvirt do |v|
      v.memory = 768
    end
    #   see note here: https://github.com/pradels/vagrant-libvirt#synced-folders
    device.vm.synced_folder ".", "/vagrant", disabled: true



    # NETWORK INTERFACES
      # link for eth0 --> oob-mgmt-switch3:swp28
      device.vm.network "private_network",
            :mac => "44:38:39:00:07:3e",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10927',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8927',
            :libvirt__iface_name => 'eth0',
            auto_config: false
      # link for swp1 --> chassis01-lc4-2:swp10
      device.vm.network "private_network",
            :mac => "44:38:39:00:07:44",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10930',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8930',
            :libvirt__iface_name => 'swp1',
            auto_config: false
      # link for swp2 --> chassis02-lc4-2:swp10
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:f6",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10507',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8507',
            :libvirt__iface_name => 'swp2',
            auto_config: false
      # link for swp3 --> chassis03-lc4-2:swp10
      device.vm.network "private_network",
            :mac => "44:38:39:00:08:ac",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '11110',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '9110',
            :libvirt__iface_name => 'swp3',
            auto_config: false
      # link for swp4 --> chassis04-lc4-2:swp10
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:94",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10202',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8202',
            :libvirt__iface_name => 'swp4',
            auto_config: false



    # Fixes "stdin: is not a tty" and "mesg: ttyname failed : Inappropriate ioctl for device"  messages --> https://github.com/mitchellh/vagrant/issues/1673
    device.vm.provision :shell , inline: "(sudo grep -q 'mesg n' /root/.profile 2>/dev/null && sudo sed -i '/mesg n/d' /root/.profile  2>/dev/null) || true;", privileged: false

    #Copy over Topology.dot File
    device.vm.provision "file", source: "topology.dot", destination: "~/topology.dot"
    device.vm.provision :shell, privileged: false, inline: "sudo mv ~/topology.dot /etc/ptm.d/topology.dot"


    # Run the Config specified in the Node Attributes
    device.vm.provision :shell , privileged: false, :inline => 'echo "$(whoami)" > /tmp/normal_user'
    device.vm.provision :shell , path: "./helper_scripts/extra_switch_config.sh"


    # Install Rules for the interface re-map
    device.vm.provision :shell , :inline => <<-delete_udev_directory
if [ -d "/etc/udev/rules.d/70-persistent-net.rules" ]; then
    rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
fi
rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
delete_udev_directory

device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:07:3e --> eth0"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:07:3e", NAME="eth0", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:07:44 --> swp1"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:07:44", NAME="swp1", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:f6 --> swp2"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:f6", NAME="swp2", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:08:ac --> swp3"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:08:ac", NAME="swp3", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:94 --> swp4"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:94", NAME="swp4", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule

      device.vm.provision :shell , :inline => <<-vagrant_interface_rule
echo "  INFO: Adding UDEV Rule: Vagrant interface = vagrant"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{ifindex}=="2", NAME="vagrant", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
echo "#### UDEV Rules (/etc/udev/rules.d/70-persistent-net.rules) ####"
cat /etc/udev/rules.d/70-persistent-net.rules
vagrant_interface_rule

# Run Any Platform Specific Code and Apply the interface Re-map
    #   (may or may not perform a reboot depending on platform)
    device.vm.provision :shell , :inline => $script

end

  ##### DEFINE VM for leaf123 #####
  config.vm.define "leaf123" do |device|

    device.vm.hostname = "leaf123"

    device.vm.box = "CumulusCommunity/cumulus-vx"
    device.vm.box_version = "3.5.0"

    device.vm.provider :libvirt do |v|
      v.memory = 768
    end
    #   see note here: https://github.com/pradels/vagrant-libvirt#synced-folders
    device.vm.synced_folder ".", "/vagrant", disabled: true



    # NETWORK INTERFACES
      # link for eth0 --> oob-mgmt-switch3:swp29
      device.vm.network "private_network",
            :mac => "44:38:39:00:08:60",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '11072',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '9072',
            :libvirt__iface_name => 'eth0',
            auto_config: false
      # link for swp1 --> chassis01-lc4-2:swp11
      device.vm.network "private_network",
            :mac => "44:38:39:00:09:5e",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '11199',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '9199',
            :libvirt__iface_name => 'swp1',
            auto_config: false
      # link for swp2 --> chassis02-lc4-2:swp11
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:f8",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10252',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8252',
            :libvirt__iface_name => 'swp2',
            auto_config: false
      # link for swp3 --> chassis03-lc4-2:swp11
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:0c",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10390',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8390',
            :libvirt__iface_name => 'swp3',
            auto_config: false
      # link for swp4 --> chassis04-lc4-2:swp11
      device.vm.network "private_network",
            :mac => "44:38:39:00:09:3e",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '11183',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '9183',
            :libvirt__iface_name => 'swp4',
            auto_config: false



    # Fixes "stdin: is not a tty" and "mesg: ttyname failed : Inappropriate ioctl for device"  messages --> https://github.com/mitchellh/vagrant/issues/1673
    device.vm.provision :shell , inline: "(sudo grep -q 'mesg n' /root/.profile 2>/dev/null && sudo sed -i '/mesg n/d' /root/.profile  2>/dev/null) || true;", privileged: false

    #Copy over Topology.dot File
    device.vm.provision "file", source: "topology.dot", destination: "~/topology.dot"
    device.vm.provision :shell, privileged: false, inline: "sudo mv ~/topology.dot /etc/ptm.d/topology.dot"


    # Run the Config specified in the Node Attributes
    device.vm.provision :shell , privileged: false, :inline => 'echo "$(whoami)" > /tmp/normal_user'
    device.vm.provision :shell , path: "./helper_scripts/extra_switch_config.sh"


    # Install Rules for the interface re-map
    device.vm.provision :shell , :inline => <<-delete_udev_directory
if [ -d "/etc/udev/rules.d/70-persistent-net.rules" ]; then
    rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
fi
rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
delete_udev_directory

device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:08:60 --> eth0"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:08:60", NAME="eth0", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:09:5e --> swp1"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:09:5e", NAME="swp1", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:f8 --> swp2"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:f8", NAME="swp2", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:0c --> swp3"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:0c", NAME="swp3", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:09:3e --> swp4"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:09:3e", NAME="swp4", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule

      device.vm.provision :shell , :inline => <<-vagrant_interface_rule
echo "  INFO: Adding UDEV Rule: Vagrant interface = vagrant"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{ifindex}=="2", NAME="vagrant", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
echo "#### UDEV Rules (/etc/udev/rules.d/70-persistent-net.rules) ####"
cat /etc/udev/rules.d/70-persistent-net.rules
vagrant_interface_rule

# Run Any Platform Specific Code and Apply the interface Re-map
    #   (may or may not perform a reboot depending on platform)
    device.vm.provision :shell , :inline => $script

end

  ##### DEFINE VM for leaf128 #####
  config.vm.define "leaf128" do |device|

    device.vm.hostname = "leaf128"

    device.vm.box = "CumulusCommunity/cumulus-vx"
    device.vm.box_version = "3.5.0"

    device.vm.provider :libvirt do |v|
      v.memory = 768
    end
    #   see note here: https://github.com/pradels/vagrant-libvirt#synced-folders
    device.vm.synced_folder ".", "/vagrant", disabled: true



    # NETWORK INTERFACES
      # link for eth0 --> oob-mgmt-switch3:swp34
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:72",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10057',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8057',
            :libvirt__iface_name => 'eth0',
            auto_config: false
      # link for swp1 --> chassis01-lc4-2:swp16
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:64",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10050',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8050',
            :libvirt__iface_name => 'swp1',
            auto_config: false
      # link for swp2 --> chassis02-lc4-2:swp16
      device.vm.network "private_network",
            :mac => "44:38:39:00:05:4c",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10678',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8678',
            :libvirt__iface_name => 'swp2',
            auto_config: false
      # link for swp3 --> chassis03-lc4-2:swp16
      device.vm.network "private_network",
            :mac => "44:38:39:00:06:04",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10770',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8770',
            :libvirt__iface_name => 'swp3',
            auto_config: false
      # link for swp4 --> chassis04-lc4-2:swp16
      device.vm.network "private_network",
            :mac => "44:38:39:00:07:4e",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10935',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8935',
            :libvirt__iface_name => 'swp4',
            auto_config: false



    # Fixes "stdin: is not a tty" and "mesg: ttyname failed : Inappropriate ioctl for device"  messages --> https://github.com/mitchellh/vagrant/issues/1673
    device.vm.provision :shell , inline: "(sudo grep -q 'mesg n' /root/.profile 2>/dev/null && sudo sed -i '/mesg n/d' /root/.profile  2>/dev/null) || true;", privileged: false

    #Copy over Topology.dot File
    device.vm.provision "file", source: "topology.dot", destination: "~/topology.dot"
    device.vm.provision :shell, privileged: false, inline: "sudo mv ~/topology.dot /etc/ptm.d/topology.dot"


    # Run the Config specified in the Node Attributes
    device.vm.provision :shell , privileged: false, :inline => 'echo "$(whoami)" > /tmp/normal_user'
    device.vm.provision :shell , path: "./helper_scripts/extra_switch_config.sh"


    # Install Rules for the interface re-map
    device.vm.provision :shell , :inline => <<-delete_udev_directory
if [ -d "/etc/udev/rules.d/70-persistent-net.rules" ]; then
    rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
fi
rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
delete_udev_directory

device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:72 --> eth0"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:72", NAME="eth0", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:64 --> swp1"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:64", NAME="swp1", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:05:4c --> swp2"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:05:4c", NAME="swp2", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:06:04 --> swp3"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:06:04", NAME="swp3", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:07:4e --> swp4"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:07:4e", NAME="swp4", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule

      device.vm.provision :shell , :inline => <<-vagrant_interface_rule
echo "  INFO: Adding UDEV Rule: Vagrant interface = vagrant"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{ifindex}=="2", NAME="vagrant", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
echo "#### UDEV Rules (/etc/udev/rules.d/70-persistent-net.rules) ####"
cat /etc/udev/rules.d/70-persistent-net.rules
vagrant_interface_rule

# Run Any Platform Specific Code and Apply the interface Re-map
    #   (may or may not perform a reboot depending on platform)
    device.vm.provision :shell , :inline => $script

end

  ##### DEFINE VM for leaf111 #####
  config.vm.define "leaf111" do |device|

    device.vm.hostname = "leaf111"

    device.vm.box = "CumulusCommunity/cumulus-vx"
    device.vm.box_version = "3.5.0"

    device.vm.provider :libvirt do |v|
      v.memory = 768
    end
    #   see note here: https://github.com/pradels/vagrant-libvirt#synced-folders
    device.vm.synced_folder ".", "/vagrant", disabled: true



    # NETWORK INTERFACES
      # link for eth0 --> oob-mgmt-switch3:swp17
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:3c",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10286',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8286',
            :libvirt__iface_name => 'eth0',
            auto_config: false
      # link for swp1 --> chassis01-lc4-1:swp15
      device.vm.network "private_network",
            :mac => "44:38:39:00:09:64",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '11202',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '9202',
            :libvirt__iface_name => 'swp1',
            auto_config: false
      # link for swp2 --> chassis02-lc4-1:swp15
      device.vm.network "private_network",
            :mac => "44:38:39:00:08:44",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '11058',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '9058',
            :libvirt__iface_name => 'swp2',
            auto_config: false
      # link for swp3 --> chassis03-lc4-1:swp15
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:56",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10555',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8555',
            :libvirt__iface_name => 'swp3',
            auto_config: false
      # link for swp4 --> chassis04-lc4-1:swp15
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:96",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10331',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8331',
            :libvirt__iface_name => 'swp4',
            auto_config: false



    # Fixes "stdin: is not a tty" and "mesg: ttyname failed : Inappropriate ioctl for device"  messages --> https://github.com/mitchellh/vagrant/issues/1673
    device.vm.provision :shell , inline: "(sudo grep -q 'mesg n' /root/.profile 2>/dev/null && sudo sed -i '/mesg n/d' /root/.profile  2>/dev/null) || true;", privileged: false

    #Copy over Topology.dot File
    device.vm.provision "file", source: "topology.dot", destination: "~/topology.dot"
    device.vm.provision :shell, privileged: false, inline: "sudo mv ~/topology.dot /etc/ptm.d/topology.dot"


    # Run the Config specified in the Node Attributes
    device.vm.provision :shell , privileged: false, :inline => 'echo "$(whoami)" > /tmp/normal_user'
    device.vm.provision :shell , path: "./helper_scripts/extra_switch_config.sh"


    # Install Rules for the interface re-map
    device.vm.provision :shell , :inline => <<-delete_udev_directory
if [ -d "/etc/udev/rules.d/70-persistent-net.rules" ]; then
    rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
fi
rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
delete_udev_directory

device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:3c --> eth0"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:3c", NAME="eth0", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:09:64 --> swp1"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:09:64", NAME="swp1", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:08:44 --> swp2"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:08:44", NAME="swp2", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:56 --> swp3"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:56", NAME="swp3", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:96 --> swp4"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:96", NAME="swp4", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule

      device.vm.provision :shell , :inline => <<-vagrant_interface_rule
echo "  INFO: Adding UDEV Rule: Vagrant interface = vagrant"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{ifindex}=="2", NAME="vagrant", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
echo "#### UDEV Rules (/etc/udev/rules.d/70-persistent-net.rules) ####"
cat /etc/udev/rules.d/70-persistent-net.rules
vagrant_interface_rule

# Run Any Platform Specific Code and Apply the interface Re-map
    #   (may or may not perform a reboot depending on platform)
    device.vm.provision :shell , :inline => $script

end

  ##### DEFINE VM for leaf65 #####
  config.vm.define "leaf65" do |device|

    device.vm.hostname = "leaf65"

    device.vm.box = "CumulusCommunity/cumulus-vx"
    device.vm.box_version = "3.5.0"

    device.vm.provider :libvirt do |v|
      v.memory = 768
    end
    #   see note here: https://github.com/pradels/vagrant-libvirt#synced-folders
    device.vm.synced_folder ".", "/vagrant", disabled: true



    # NETWORK INTERFACES
      # link for eth0 --> oob-mgmt-switch2:swp19
      device.vm.network "private_network",
            :mac => "44:38:39:00:08:48",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '11060',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '9060',
            :libvirt__iface_name => 'eth0',
            auto_config: false
      # link for swp1 --> chassis01-lc3-1:swp1
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:02",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10257',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8257',
            :libvirt__iface_name => 'swp1',
            auto_config: false
      # link for swp2 --> chassis02-lc3-1:swp1
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:ca",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10101',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8101',
            :libvirt__iface_name => 'swp2',
            auto_config: false
      # link for swp3 --> chassis03-lc3-1:swp1
      device.vm.network "private_network",
            :mac => "44:38:39:00:06:1e",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10783',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8783',
            :libvirt__iface_name => 'swp3',
            auto_config: false
      # link for swp4 --> chassis04-lc3-1:swp1
      device.vm.network "private_network",
            :mac => "44:38:39:00:06:16",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10779',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8779',
            :libvirt__iface_name => 'swp4',
            auto_config: false



    # Fixes "stdin: is not a tty" and "mesg: ttyname failed : Inappropriate ioctl for device"  messages --> https://github.com/mitchellh/vagrant/issues/1673
    device.vm.provision :shell , inline: "(sudo grep -q 'mesg n' /root/.profile 2>/dev/null && sudo sed -i '/mesg n/d' /root/.profile  2>/dev/null) || true;", privileged: false

    #Copy over Topology.dot File
    device.vm.provision "file", source: "topology.dot", destination: "~/topology.dot"
    device.vm.provision :shell, privileged: false, inline: "sudo mv ~/topology.dot /etc/ptm.d/topology.dot"


    # Run the Config specified in the Node Attributes
    device.vm.provision :shell , privileged: false, :inline => 'echo "$(whoami)" > /tmp/normal_user'
    device.vm.provision :shell , path: "./helper_scripts/extra_switch_config.sh"


    # Install Rules for the interface re-map
    device.vm.provision :shell , :inline => <<-delete_udev_directory
if [ -d "/etc/udev/rules.d/70-persistent-net.rules" ]; then
    rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
fi
rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
delete_udev_directory

device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:08:48 --> eth0"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:08:48", NAME="eth0", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:02 --> swp1"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:02", NAME="swp1", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:ca --> swp2"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:ca", NAME="swp2", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:06:1e --> swp3"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:06:1e", NAME="swp3", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:06:16 --> swp4"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:06:16", NAME="swp4", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule

      device.vm.provision :shell , :inline => <<-vagrant_interface_rule
echo "  INFO: Adding UDEV Rule: Vagrant interface = vagrant"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{ifindex}=="2", NAME="vagrant", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
echo "#### UDEV Rules (/etc/udev/rules.d/70-persistent-net.rules) ####"
cat /etc/udev/rules.d/70-persistent-net.rules
vagrant_interface_rule

# Run Any Platform Specific Code and Apply the interface Re-map
    #   (may or may not perform a reboot depending on platform)
    device.vm.provision :shell , :inline => $script

end

  ##### DEFINE VM for leaf66 #####
  config.vm.define "leaf66" do |device|

    device.vm.hostname = "leaf66"

    device.vm.box = "CumulusCommunity/cumulus-vx"
    device.vm.box_version = "3.5.0"

    device.vm.provider :libvirt do |v|
      v.memory = 768
    end
    #   see note here: https://github.com/pradels/vagrant-libvirt#synced-folders
    device.vm.synced_folder ".", "/vagrant", disabled: true



    # NETWORK INTERFACES
      # link for eth0 --> oob-mgmt-switch2:swp20
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:ac",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10214',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8214',
            :libvirt__iface_name => 'eth0',
            auto_config: false
      # link for swp1 --> chassis01-lc3-1:swp2
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:10",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10520',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8520',
            :libvirt__iface_name => 'swp1',
            auto_config: false
      # link for swp2 --> chassis02-lc3-1:swp2
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:58",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10044',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8044',
            :libvirt__iface_name => 'swp2',
            auto_config: false
      # link for swp3 --> chassis03-lc3-1:swp2
      device.vm.network "private_network",
            :mac => "44:38:39:00:08:18",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '11036',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '9036',
            :libvirt__iface_name => 'swp3',
            auto_config: false
      # link for swp4 --> chassis04-lc3-1:swp2
      device.vm.network "private_network",
            :mac => "44:38:39:00:06:44",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10802',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8802',
            :libvirt__iface_name => 'swp4',
            auto_config: false



    # Fixes "stdin: is not a tty" and "mesg: ttyname failed : Inappropriate ioctl for device"  messages --> https://github.com/mitchellh/vagrant/issues/1673
    device.vm.provision :shell , inline: "(sudo grep -q 'mesg n' /root/.profile 2>/dev/null && sudo sed -i '/mesg n/d' /root/.profile  2>/dev/null) || true;", privileged: false

    #Copy over Topology.dot File
    device.vm.provision "file", source: "topology.dot", destination: "~/topology.dot"
    device.vm.provision :shell, privileged: false, inline: "sudo mv ~/topology.dot /etc/ptm.d/topology.dot"


    # Run the Config specified in the Node Attributes
    device.vm.provision :shell , privileged: false, :inline => 'echo "$(whoami)" > /tmp/normal_user'
    device.vm.provision :shell , path: "./helper_scripts/extra_switch_config.sh"


    # Install Rules for the interface re-map
    device.vm.provision :shell , :inline => <<-delete_udev_directory
if [ -d "/etc/udev/rules.d/70-persistent-net.rules" ]; then
    rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
fi
rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
delete_udev_directory

device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:ac --> eth0"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:ac", NAME="eth0", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:10 --> swp1"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:10", NAME="swp1", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:58 --> swp2"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:58", NAME="swp2", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:08:18 --> swp3"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:08:18", NAME="swp3", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:06:44 --> swp4"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:06:44", NAME="swp4", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule

      device.vm.provision :shell , :inline => <<-vagrant_interface_rule
echo "  INFO: Adding UDEV Rule: Vagrant interface = vagrant"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{ifindex}=="2", NAME="vagrant", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
echo "#### UDEV Rules (/etc/udev/rules.d/70-persistent-net.rules) ####"
cat /etc/udev/rules.d/70-persistent-net.rules
vagrant_interface_rule

# Run Any Platform Specific Code and Apply the interface Re-map
    #   (may or may not perform a reboot depending on platform)
    device.vm.provision :shell , :inline => $script

end

  ##### DEFINE VM for leaf64 #####
  config.vm.define "leaf64" do |device|

    device.vm.hostname = "leaf64"

    device.vm.box = "CumulusCommunity/cumulus-vx"
    device.vm.box_version = "3.5.0"

    device.vm.provider :libvirt do |v|
      v.memory = 768
    end
    #   see note here: https://github.com/pradels/vagrant-libvirt#synced-folders
    device.vm.synced_folder ".", "/vagrant", disabled: true



    # NETWORK INTERFACES
      # link for eth0 --> oob-mgmt-switch2:swp18
      device.vm.network "private_network",
            :mac => "44:38:39:00:06:7e",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10831',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8831',
            :libvirt__iface_name => 'eth0',
            auto_config: false
      # link for swp1 --> chassis01-lc2-2:swp16
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:b2",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10089',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8089',
            :libvirt__iface_name => 'swp1',
            auto_config: false
      # link for swp2 --> chassis02-lc2-2:swp16
      device.vm.network "private_network",
            :mac => "44:38:39:00:07:9a",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10973',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8973',
            :libvirt__iface_name => 'swp2',
            auto_config: false
      # link for swp3 --> chassis03-lc2-2:swp16
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:fc",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10510',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8510',
            :libvirt__iface_name => 'swp3',
            auto_config: false
      # link for swp4 --> chassis04-lc2-2:swp16
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:86",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10323',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8323',
            :libvirt__iface_name => 'swp4',
            auto_config: false



    # Fixes "stdin: is not a tty" and "mesg: ttyname failed : Inappropriate ioctl for device"  messages --> https://github.com/mitchellh/vagrant/issues/1673
    device.vm.provision :shell , inline: "(sudo grep -q 'mesg n' /root/.profile 2>/dev/null && sudo sed -i '/mesg n/d' /root/.profile  2>/dev/null) || true;", privileged: false

    #Copy over Topology.dot File
    device.vm.provision "file", source: "topology.dot", destination: "~/topology.dot"
    device.vm.provision :shell, privileged: false, inline: "sudo mv ~/topology.dot /etc/ptm.d/topology.dot"


    # Run the Config specified in the Node Attributes
    device.vm.provision :shell , privileged: false, :inline => 'echo "$(whoami)" > /tmp/normal_user'
    device.vm.provision :shell , path: "./helper_scripts/extra_switch_config.sh"


    # Install Rules for the interface re-map
    device.vm.provision :shell , :inline => <<-delete_udev_directory
if [ -d "/etc/udev/rules.d/70-persistent-net.rules" ]; then
    rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
fi
rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
delete_udev_directory

device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:06:7e --> eth0"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:06:7e", NAME="eth0", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:b2 --> swp1"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:b2", NAME="swp1", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:07:9a --> swp2"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:07:9a", NAME="swp2", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:fc --> swp3"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:fc", NAME="swp3", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:86 --> swp4"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:86", NAME="swp4", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule

      device.vm.provision :shell , :inline => <<-vagrant_interface_rule
echo "  INFO: Adding UDEV Rule: Vagrant interface = vagrant"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{ifindex}=="2", NAME="vagrant", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
echo "#### UDEV Rules (/etc/udev/rules.d/70-persistent-net.rules) ####"
cat /etc/udev/rules.d/70-persistent-net.rules
vagrant_interface_rule

# Run Any Platform Specific Code and Apply the interface Re-map
    #   (may or may not perform a reboot depending on platform)
    device.vm.provision :shell , :inline => $script

end

  ##### DEFINE VM for leaf110 #####
  config.vm.define "leaf110" do |device|

    device.vm.hostname = "leaf110"

    device.vm.box = "CumulusCommunity/cumulus-vx"
    device.vm.box_version = "3.5.0"

    device.vm.provider :libvirt do |v|
      v.memory = 768
    end
    #   see note here: https://github.com/pradels/vagrant-libvirt#synced-folders
    device.vm.synced_folder ".", "/vagrant", disabled: true



    # NETWORK INTERFACES
      # link for eth0 --> oob-mgmt-switch3:swp16
      device.vm.network "private_network",
            :mac => "44:38:39:00:06:aa",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10853',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8853',
            :libvirt__iface_name => 'eth0',
            auto_config: false
      # link for swp1 --> chassis01-lc4-1:swp14
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:be",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10479',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8479',
            :libvirt__iface_name => 'swp1',
            auto_config: false
      # link for swp2 --> chassis02-lc4-1:swp14
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:1a",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10141',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8141',
            :libvirt__iface_name => 'swp2',
            auto_config: false
      # link for swp3 --> chassis03-lc4-1:swp14
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:8c",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10326',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8326',
            :libvirt__iface_name => 'swp3',
            auto_config: false
      # link for swp4 --> chassis04-lc4-1:swp14
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:60",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10432',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8432',
            :libvirt__iface_name => 'swp4',
            auto_config: false



    # Fixes "stdin: is not a tty" and "mesg: ttyname failed : Inappropriate ioctl for device"  messages --> https://github.com/mitchellh/vagrant/issues/1673
    device.vm.provision :shell , inline: "(sudo grep -q 'mesg n' /root/.profile 2>/dev/null && sudo sed -i '/mesg n/d' /root/.profile  2>/dev/null) || true;", privileged: false

    #Copy over Topology.dot File
    device.vm.provision "file", source: "topology.dot", destination: "~/topology.dot"
    device.vm.provision :shell, privileged: false, inline: "sudo mv ~/topology.dot /etc/ptm.d/topology.dot"


    # Run the Config specified in the Node Attributes
    device.vm.provision :shell , privileged: false, :inline => 'echo "$(whoami)" > /tmp/normal_user'
    device.vm.provision :shell , path: "./helper_scripts/extra_switch_config.sh"


    # Install Rules for the interface re-map
    device.vm.provision :shell , :inline => <<-delete_udev_directory
if [ -d "/etc/udev/rules.d/70-persistent-net.rules" ]; then
    rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
fi
rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
delete_udev_directory

device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:06:aa --> eth0"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:06:aa", NAME="eth0", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:be --> swp1"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:be", NAME="swp1", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:1a --> swp2"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:1a", NAME="swp2", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:8c --> swp3"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:8c", NAME="swp3", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:60 --> swp4"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:60", NAME="swp4", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule

      device.vm.provision :shell , :inline => <<-vagrant_interface_rule
echo "  INFO: Adding UDEV Rule: Vagrant interface = vagrant"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{ifindex}=="2", NAME="vagrant", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
echo "#### UDEV Rules (/etc/udev/rules.d/70-persistent-net.rules) ####"
cat /etc/udev/rules.d/70-persistent-net.rules
vagrant_interface_rule

# Run Any Platform Specific Code and Apply the interface Re-map
    #   (may or may not perform a reboot depending on platform)
    device.vm.provision :shell , :inline => $script

end

  ##### DEFINE VM for leaf113 #####
  config.vm.define "leaf113" do |device|

    device.vm.hostname = "leaf113"

    device.vm.box = "CumulusCommunity/cumulus-vx"
    device.vm.box_version = "3.5.0"

    device.vm.provider :libvirt do |v|
      v.memory = 768
    end
    #   see note here: https://github.com/pradels/vagrant-libvirt#synced-folders
    device.vm.synced_folder ".", "/vagrant", disabled: true



    # NETWORK INTERFACES
      # link for eth0 --> oob-mgmt-switch3:swp19
      device.vm.network "private_network",
            :mac => "44:38:39:00:05:dc",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10750',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8750',
            :libvirt__iface_name => 'eth0',
            auto_config: false
      # link for swp1 --> chassis01-lc4-2:swp1
      device.vm.network "private_network",
            :mac => "44:38:39:00:08:fe",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '11151',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '9151',
            :libvirt__iface_name => 'swp1',
            auto_config: false
      # link for swp2 --> chassis02-lc4-2:swp1
      device.vm.network "private_network",
            :mac => "44:38:39:00:09:26",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '11171',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '9171',
            :libvirt__iface_name => 'swp2',
            auto_config: false
      # link for swp3 --> chassis03-lc4-2:swp1
      device.vm.network "private_network",
            :mac => "44:38:39:00:07:f0",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '11016',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '9016',
            :libvirt__iface_name => 'swp3',
            auto_config: false
      # link for swp4 --> chassis04-lc4-2:swp1
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:b8",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10348',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8348',
            :libvirt__iface_name => 'swp4',
            auto_config: false



    # Fixes "stdin: is not a tty" and "mesg: ttyname failed : Inappropriate ioctl for device"  messages --> https://github.com/mitchellh/vagrant/issues/1673
    device.vm.provision :shell , inline: "(sudo grep -q 'mesg n' /root/.profile 2>/dev/null && sudo sed -i '/mesg n/d' /root/.profile  2>/dev/null) || true;", privileged: false

    #Copy over Topology.dot File
    device.vm.provision "file", source: "topology.dot", destination: "~/topology.dot"
    device.vm.provision :shell, privileged: false, inline: "sudo mv ~/topology.dot /etc/ptm.d/topology.dot"


    # Run the Config specified in the Node Attributes
    device.vm.provision :shell , privileged: false, :inline => 'echo "$(whoami)" > /tmp/normal_user'
    device.vm.provision :shell , path: "./helper_scripts/extra_switch_config.sh"


    # Install Rules for the interface re-map
    device.vm.provision :shell , :inline => <<-delete_udev_directory
if [ -d "/etc/udev/rules.d/70-persistent-net.rules" ]; then
    rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
fi
rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
delete_udev_directory

device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:05:dc --> eth0"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:05:dc", NAME="eth0", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:08:fe --> swp1"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:08:fe", NAME="swp1", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:09:26 --> swp2"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:09:26", NAME="swp2", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:07:f0 --> swp3"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:07:f0", NAME="swp3", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:b8 --> swp4"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:b8", NAME="swp4", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule

      device.vm.provision :shell , :inline => <<-vagrant_interface_rule
echo "  INFO: Adding UDEV Rule: Vagrant interface = vagrant"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{ifindex}=="2", NAME="vagrant", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
echo "#### UDEV Rules (/etc/udev/rules.d/70-persistent-net.rules) ####"
cat /etc/udev/rules.d/70-persistent-net.rules
vagrant_interface_rule

# Run Any Platform Specific Code and Apply the interface Re-map
    #   (may or may not perform a reboot depending on platform)
    device.vm.provision :shell , :inline => $script

end

  ##### DEFINE VM for leaf112 #####
  config.vm.define "leaf112" do |device|

    device.vm.hostname = "leaf112"

    device.vm.box = "CumulusCommunity/cumulus-vx"
    device.vm.box_version = "3.5.0"

    device.vm.provider :libvirt do |v|
      v.memory = 768
    end
    #   see note here: https://github.com/pradels/vagrant-libvirt#synced-folders
    device.vm.synced_folder ".", "/vagrant", disabled: true



    # NETWORK INTERFACES
      # link for eth0 --> oob-mgmt-switch3:swp18
      device.vm.network "private_network",
            :mac => "44:38:39:00:08:4e",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '11063',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '9063',
            :libvirt__iface_name => 'eth0',
            auto_config: false
      # link for swp1 --> chassis01-lc4-1:swp16
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:ea",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10373',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8373',
            :libvirt__iface_name => 'swp1',
            auto_config: false
      # link for swp2 --> chassis02-lc4-1:swp16
      device.vm.network "private_network",
            :mac => "44:38:39:00:09:32",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '11177',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '9177',
            :libvirt__iface_name => 'swp2',
            auto_config: false
      # link for swp3 --> chassis03-lc4-1:swp16
      device.vm.network "private_network",
            :mac => "44:38:39:00:08:ee",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '11143',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '9143',
            :libvirt__iface_name => 'swp3',
            auto_config: false
      # link for swp4 --> chassis04-lc4-1:swp16
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:3c",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10414',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8414',
            :libvirt__iface_name => 'swp4',
            auto_config: false



    # Fixes "stdin: is not a tty" and "mesg: ttyname failed : Inappropriate ioctl for device"  messages --> https://github.com/mitchellh/vagrant/issues/1673
    device.vm.provision :shell , inline: "(sudo grep -q 'mesg n' /root/.profile 2>/dev/null && sudo sed -i '/mesg n/d' /root/.profile  2>/dev/null) || true;", privileged: false

    #Copy over Topology.dot File
    device.vm.provision "file", source: "topology.dot", destination: "~/topology.dot"
    device.vm.provision :shell, privileged: false, inline: "sudo mv ~/topology.dot /etc/ptm.d/topology.dot"


    # Run the Config specified in the Node Attributes
    device.vm.provision :shell , privileged: false, :inline => 'echo "$(whoami)" > /tmp/normal_user'
    device.vm.provision :shell , path: "./helper_scripts/extra_switch_config.sh"


    # Install Rules for the interface re-map
    device.vm.provision :shell , :inline => <<-delete_udev_directory
if [ -d "/etc/udev/rules.d/70-persistent-net.rules" ]; then
    rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
fi
rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
delete_udev_directory

device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:08:4e --> eth0"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:08:4e", NAME="eth0", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:ea --> swp1"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:ea", NAME="swp1", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:09:32 --> swp2"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:09:32", NAME="swp2", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:08:ee --> swp3"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:08:ee", NAME="swp3", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:3c --> swp4"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:3c", NAME="swp4", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule

      device.vm.provision :shell , :inline => <<-vagrant_interface_rule
echo "  INFO: Adding UDEV Rule: Vagrant interface = vagrant"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{ifindex}=="2", NAME="vagrant", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
echo "#### UDEV Rules (/etc/udev/rules.d/70-persistent-net.rules) ####"
cat /etc/udev/rules.d/70-persistent-net.rules
vagrant_interface_rule

# Run Any Platform Specific Code and Apply the interface Re-map
    #   (may or may not perform a reboot depending on platform)
    device.vm.provision :shell , :inline => $script

end

  ##### DEFINE VM for leaf60 #####
  config.vm.define "leaf60" do |device|

    device.vm.hostname = "leaf60"

    device.vm.box = "CumulusCommunity/cumulus-vx"
    device.vm.box_version = "3.5.0"

    device.vm.provider :libvirt do |v|
      v.memory = 768
    end
    #   see note here: https://github.com/pradels/vagrant-libvirt#synced-folders
    device.vm.synced_folder ".", "/vagrant", disabled: true



    # NETWORK INTERFACES
      # link for eth0 --> oob-mgmt-switch2:swp14
      device.vm.network "private_network",
            :mac => "44:38:39:00:08:7e",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '11087',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '9087',
            :libvirt__iface_name => 'eth0',
            auto_config: false
      # link for swp1 --> chassis01-lc2-2:swp12
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:0a",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10005',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8005',
            :libvirt__iface_name => 'swp1',
            auto_config: false
      # link for swp2 --> chassis02-lc2-2:swp12
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:52",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10553',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8553',
            :libvirt__iface_name => 'swp2',
            auto_config: false
      # link for swp3 --> chassis03-lc2-2:swp12
      device.vm.network "private_network",
            :mac => "44:38:39:00:08:64",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '11074',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '9074',
            :libvirt__iface_name => 'swp3',
            auto_config: false
      # link for swp4 --> chassis04-lc2-2:swp12
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:4a",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10165',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8165',
            :libvirt__iface_name => 'swp4',
            auto_config: false



    # Fixes "stdin: is not a tty" and "mesg: ttyname failed : Inappropriate ioctl for device"  messages --> https://github.com/mitchellh/vagrant/issues/1673
    device.vm.provision :shell , inline: "(sudo grep -q 'mesg n' /root/.profile 2>/dev/null && sudo sed -i '/mesg n/d' /root/.profile  2>/dev/null) || true;", privileged: false

    #Copy over Topology.dot File
    device.vm.provision "file", source: "topology.dot", destination: "~/topology.dot"
    device.vm.provision :shell, privileged: false, inline: "sudo mv ~/topology.dot /etc/ptm.d/topology.dot"


    # Run the Config specified in the Node Attributes
    device.vm.provision :shell , privileged: false, :inline => 'echo "$(whoami)" > /tmp/normal_user'
    device.vm.provision :shell , path: "./helper_scripts/extra_switch_config.sh"


    # Install Rules for the interface re-map
    device.vm.provision :shell , :inline => <<-delete_udev_directory
if [ -d "/etc/udev/rules.d/70-persistent-net.rules" ]; then
    rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
fi
rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
delete_udev_directory

device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:08:7e --> eth0"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:08:7e", NAME="eth0", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:0a --> swp1"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:0a", NAME="swp1", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:52 --> swp2"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:52", NAME="swp2", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:08:64 --> swp3"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:08:64", NAME="swp3", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:4a --> swp4"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:4a", NAME="swp4", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule

      device.vm.provision :shell , :inline => <<-vagrant_interface_rule
echo "  INFO: Adding UDEV Rule: Vagrant interface = vagrant"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{ifindex}=="2", NAME="vagrant", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
echo "#### UDEV Rules (/etc/udev/rules.d/70-persistent-net.rules) ####"
cat /etc/udev/rules.d/70-persistent-net.rules
vagrant_interface_rule

# Run Any Platform Specific Code and Apply the interface Re-map
    #   (may or may not perform a reboot depending on platform)
    device.vm.provision :shell , :inline => $script

end

  ##### DEFINE VM for leaf61 #####
  config.vm.define "leaf61" do |device|

    device.vm.hostname = "leaf61"

    device.vm.box = "CumulusCommunity/cumulus-vx"
    device.vm.box_version = "3.5.0"

    device.vm.provider :libvirt do |v|
      v.memory = 768
    end
    #   see note here: https://github.com/pradels/vagrant-libvirt#synced-folders
    device.vm.synced_folder ".", "/vagrant", disabled: true



    # NETWORK INTERFACES
      # link for eth0 --> oob-mgmt-switch2:swp15
      device.vm.network "private_network",
            :mac => "44:38:39:00:07:e8",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '11012',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '9012',
            :libvirt__iface_name => 'eth0',
            auto_config: false
      # link for swp1 --> chassis01-lc2-2:swp13
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:7a",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10317',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8317',
            :libvirt__iface_name => 'swp1',
            auto_config: false
      # link for swp2 --> chassis02-lc2-2:swp13
      device.vm.network "private_network",
            :mac => "44:38:39:00:07:ae",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10983',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8983',
            :libvirt__iface_name => 'swp2',
            auto_config: false
      # link for swp3 --> chassis03-lc2-2:swp13
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:7c",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10062',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8062',
            :libvirt__iface_name => 'swp3',
            auto_config: false
      # link for swp4 --> chassis04-lc2-2:swp13
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:86",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10195',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8195',
            :libvirt__iface_name => 'swp4',
            auto_config: false



    # Fixes "stdin: is not a tty" and "mesg: ttyname failed : Inappropriate ioctl for device"  messages --> https://github.com/mitchellh/vagrant/issues/1673
    device.vm.provision :shell , inline: "(sudo grep -q 'mesg n' /root/.profile 2>/dev/null && sudo sed -i '/mesg n/d' /root/.profile  2>/dev/null) || true;", privileged: false

    #Copy over Topology.dot File
    device.vm.provision "file", source: "topology.dot", destination: "~/topology.dot"
    device.vm.provision :shell, privileged: false, inline: "sudo mv ~/topology.dot /etc/ptm.d/topology.dot"


    # Run the Config specified in the Node Attributes
    device.vm.provision :shell , privileged: false, :inline => 'echo "$(whoami)" > /tmp/normal_user'
    device.vm.provision :shell , path: "./helper_scripts/extra_switch_config.sh"


    # Install Rules for the interface re-map
    device.vm.provision :shell , :inline => <<-delete_udev_directory
if [ -d "/etc/udev/rules.d/70-persistent-net.rules" ]; then
    rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
fi
rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
delete_udev_directory

device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:07:e8 --> eth0"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:07:e8", NAME="eth0", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:7a --> swp1"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:7a", NAME="swp1", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:07:ae --> swp2"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:07:ae", NAME="swp2", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:7c --> swp3"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:7c", NAME="swp3", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:86 --> swp4"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:86", NAME="swp4", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule

      device.vm.provision :shell , :inline => <<-vagrant_interface_rule
echo "  INFO: Adding UDEV Rule: Vagrant interface = vagrant"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{ifindex}=="2", NAME="vagrant", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
echo "#### UDEV Rules (/etc/udev/rules.d/70-persistent-net.rules) ####"
cat /etc/udev/rules.d/70-persistent-net.rules
vagrant_interface_rule

# Run Any Platform Specific Code and Apply the interface Re-map
    #   (may or may not perform a reboot depending on platform)
    device.vm.provision :shell , :inline => $script

end

  ##### DEFINE VM for leaf62 #####
  config.vm.define "leaf62" do |device|

    device.vm.hostname = "leaf62"

    device.vm.box = "CumulusCommunity/cumulus-vx"
    device.vm.box_version = "3.5.0"

    device.vm.provider :libvirt do |v|
      v.memory = 768
    end
    #   see note here: https://github.com/pradels/vagrant-libvirt#synced-folders
    device.vm.synced_folder ".", "/vagrant", disabled: true



    # NETWORK INTERFACES
      # link for eth0 --> oob-mgmt-switch2:swp16
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:9a",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10077',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8077',
            :libvirt__iface_name => 'eth0',
            auto_config: false
      # link for swp1 --> chassis01-lc2-2:swp14
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:42",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10417',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8417',
            :libvirt__iface_name => 'swp1',
            auto_config: false
      # link for swp2 --> chassis02-lc2-2:swp14
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:b0",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10600',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8600',
            :libvirt__iface_name => 'swp2',
            auto_config: false
      # link for swp3 --> chassis03-lc2-2:swp14
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:18",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10396',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8396',
            :libvirt__iface_name => 'swp3',
            auto_config: false
      # link for swp4 --> chassis04-lc2-2:swp14
      device.vm.network "private_network",
            :mac => "44:38:39:00:05:78",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10700',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8700',
            :libvirt__iface_name => 'swp4',
            auto_config: false



    # Fixes "stdin: is not a tty" and "mesg: ttyname failed : Inappropriate ioctl for device"  messages --> https://github.com/mitchellh/vagrant/issues/1673
    device.vm.provision :shell , inline: "(sudo grep -q 'mesg n' /root/.profile 2>/dev/null && sudo sed -i '/mesg n/d' /root/.profile  2>/dev/null) || true;", privileged: false

    #Copy over Topology.dot File
    device.vm.provision "file", source: "topology.dot", destination: "~/topology.dot"
    device.vm.provision :shell, privileged: false, inline: "sudo mv ~/topology.dot /etc/ptm.d/topology.dot"


    # Run the Config specified in the Node Attributes
    device.vm.provision :shell , privileged: false, :inline => 'echo "$(whoami)" > /tmp/normal_user'
    device.vm.provision :shell , path: "./helper_scripts/extra_switch_config.sh"


    # Install Rules for the interface re-map
    device.vm.provision :shell , :inline => <<-delete_udev_directory
if [ -d "/etc/udev/rules.d/70-persistent-net.rules" ]; then
    rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
fi
rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
delete_udev_directory

device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:9a --> eth0"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:9a", NAME="eth0", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:42 --> swp1"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:42", NAME="swp1", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:b0 --> swp2"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:b0", NAME="swp2", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:18 --> swp3"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:18", NAME="swp3", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:05:78 --> swp4"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:05:78", NAME="swp4", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule

      device.vm.provision :shell , :inline => <<-vagrant_interface_rule
echo "  INFO: Adding UDEV Rule: Vagrant interface = vagrant"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{ifindex}=="2", NAME="vagrant", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
echo "#### UDEV Rules (/etc/udev/rules.d/70-persistent-net.rules) ####"
cat /etc/udev/rules.d/70-persistent-net.rules
vagrant_interface_rule

# Run Any Platform Specific Code and Apply the interface Re-map
    #   (may or may not perform a reboot depending on platform)
    device.vm.provision :shell , :inline => $script

end

  ##### DEFINE VM for leaf116 #####
  config.vm.define "leaf116" do |device|

    device.vm.hostname = "leaf116"

    device.vm.box = "CumulusCommunity/cumulus-vx"
    device.vm.box_version = "3.5.0"

    device.vm.provider :libvirt do |v|
      v.memory = 768
    end
    #   see note here: https://github.com/pradels/vagrant-libvirt#synced-folders
    device.vm.synced_folder ".", "/vagrant", disabled: true



    # NETWORK INTERFACES
      # link for eth0 --> oob-mgmt-switch3:swp22
      device.vm.network "private_network",
            :mac => "44:38:39:00:07:ec",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '11014',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '9014',
            :libvirt__iface_name => 'eth0',
            auto_config: false
      # link for swp1 --> chassis01-lc4-2:swp4
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:b2",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10345',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8345',
            :libvirt__iface_name => 'swp1',
            auto_config: false
      # link for swp2 --> chassis02-lc4-2:swp4
      device.vm.network "private_network",
            :mac => "44:38:39:00:07:1e",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10911',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8911',
            :libvirt__iface_name => 'swp2',
            auto_config: false
      # link for swp3 --> chassis03-lc4-2:swp4
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:34",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10282',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8282',
            :libvirt__iface_name => 'swp3',
            auto_config: false
      # link for swp4 --> chassis04-lc4-2:swp4
      device.vm.network "private_network",
            :mac => "44:38:39:00:09:2a",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '11173',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '9173',
            :libvirt__iface_name => 'swp4',
            auto_config: false



    # Fixes "stdin: is not a tty" and "mesg: ttyname failed : Inappropriate ioctl for device"  messages --> https://github.com/mitchellh/vagrant/issues/1673
    device.vm.provision :shell , inline: "(sudo grep -q 'mesg n' /root/.profile 2>/dev/null && sudo sed -i '/mesg n/d' /root/.profile  2>/dev/null) || true;", privileged: false

    #Copy over Topology.dot File
    device.vm.provision "file", source: "topology.dot", destination: "~/topology.dot"
    device.vm.provision :shell, privileged: false, inline: "sudo mv ~/topology.dot /etc/ptm.d/topology.dot"


    # Run the Config specified in the Node Attributes
    device.vm.provision :shell , privileged: false, :inline => 'echo "$(whoami)" > /tmp/normal_user'
    device.vm.provision :shell , path: "./helper_scripts/extra_switch_config.sh"


    # Install Rules for the interface re-map
    device.vm.provision :shell , :inline => <<-delete_udev_directory
if [ -d "/etc/udev/rules.d/70-persistent-net.rules" ]; then
    rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
fi
rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
delete_udev_directory

device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:07:ec --> eth0"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:07:ec", NAME="eth0", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:b2 --> swp1"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:b2", NAME="swp1", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:07:1e --> swp2"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:07:1e", NAME="swp2", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:34 --> swp3"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:34", NAME="swp3", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:09:2a --> swp4"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:09:2a", NAME="swp4", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule

      device.vm.provision :shell , :inline => <<-vagrant_interface_rule
echo "  INFO: Adding UDEV Rule: Vagrant interface = vagrant"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{ifindex}=="2", NAME="vagrant", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
echo "#### UDEV Rules (/etc/udev/rules.d/70-persistent-net.rules) ####"
cat /etc/udev/rules.d/70-persistent-net.rules
vagrant_interface_rule

# Run Any Platform Specific Code and Apply the interface Re-map
    #   (may or may not perform a reboot depending on platform)
    device.vm.provision :shell , :inline => $script

end

  ##### DEFINE VM for leaf119 #####
  config.vm.define "leaf119" do |device|

    device.vm.hostname = "leaf119"

    device.vm.box = "CumulusCommunity/cumulus-vx"
    device.vm.box_version = "3.5.0"

    device.vm.provider :libvirt do |v|
      v.memory = 768
    end
    #   see note here: https://github.com/pradels/vagrant-libvirt#synced-folders
    device.vm.synced_folder ".", "/vagrant", disabled: true



    # NETWORK INTERFACES
      # link for eth0 --> oob-mgmt-switch3:swp25
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:04",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10258',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8258',
            :libvirt__iface_name => 'eth0',
            auto_config: false
      # link for swp1 --> chassis01-lc4-2:swp7
      device.vm.network "private_network",
            :mac => "44:38:39:00:06:cc",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10870',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8870',
            :libvirt__iface_name => 'swp1',
            auto_config: false
      # link for swp2 --> chassis02-lc4-2:swp7
      device.vm.network "private_network",
            :mac => "44:38:39:00:05:ae",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10727',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8727',
            :libvirt__iface_name => 'swp2',
            auto_config: false
      # link for swp3 --> chassis03-lc4-2:swp7
      device.vm.network "private_network",
            :mac => "44:38:39:00:07:e0",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '11008',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '9008',
            :libvirt__iface_name => 'swp3',
            auto_config: false
      # link for swp4 --> chassis04-lc4-2:swp7
      device.vm.network "private_network",
            :mac => "44:38:39:00:05:1c",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10654',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8654',
            :libvirt__iface_name => 'swp4',
            auto_config: false



    # Fixes "stdin: is not a tty" and "mesg: ttyname failed : Inappropriate ioctl for device"  messages --> https://github.com/mitchellh/vagrant/issues/1673
    device.vm.provision :shell , inline: "(sudo grep -q 'mesg n' /root/.profile 2>/dev/null && sudo sed -i '/mesg n/d' /root/.profile  2>/dev/null) || true;", privileged: false

    #Copy over Topology.dot File
    device.vm.provision "file", source: "topology.dot", destination: "~/topology.dot"
    device.vm.provision :shell, privileged: false, inline: "sudo mv ~/topology.dot /etc/ptm.d/topology.dot"


    # Run the Config specified in the Node Attributes
    device.vm.provision :shell , privileged: false, :inline => 'echo "$(whoami)" > /tmp/normal_user'
    device.vm.provision :shell , path: "./helper_scripts/extra_switch_config.sh"


    # Install Rules for the interface re-map
    device.vm.provision :shell , :inline => <<-delete_udev_directory
if [ -d "/etc/udev/rules.d/70-persistent-net.rules" ]; then
    rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
fi
rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
delete_udev_directory

device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:04 --> eth0"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:04", NAME="eth0", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:06:cc --> swp1"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:06:cc", NAME="swp1", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:05:ae --> swp2"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:05:ae", NAME="swp2", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:07:e0 --> swp3"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:07:e0", NAME="swp3", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:05:1c --> swp4"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:05:1c", NAME="swp4", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule

      device.vm.provision :shell , :inline => <<-vagrant_interface_rule
echo "  INFO: Adding UDEV Rule: Vagrant interface = vagrant"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{ifindex}=="2", NAME="vagrant", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
echo "#### UDEV Rules (/etc/udev/rules.d/70-persistent-net.rules) ####"
cat /etc/udev/rules.d/70-persistent-net.rules
vagrant_interface_rule

# Run Any Platform Specific Code and Apply the interface Re-map
    #   (may or may not perform a reboot depending on platform)
    device.vm.provision :shell , :inline => $script

end

  ##### DEFINE VM for leaf118 #####
  config.vm.define "leaf118" do |device|

    device.vm.hostname = "leaf118"

    device.vm.box = "CumulusCommunity/cumulus-vx"
    device.vm.box_version = "3.5.0"

    device.vm.provider :libvirt do |v|
      v.memory = 768
    end
    #   see note here: https://github.com/pradels/vagrant-libvirt#synced-folders
    device.vm.synced_folder ".", "/vagrant", disabled: true



    # NETWORK INTERFACES
      # link for eth0 --> oob-mgmt-switch3:swp24
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:58",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10428',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8428',
            :libvirt__iface_name => 'eth0',
            auto_config: false
      # link for swp1 --> chassis01-lc4-2:swp6
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:4e",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10167',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8167',
            :libvirt__iface_name => 'swp1',
            auto_config: false
      # link for swp2 --> chassis02-lc4-2:swp6
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:2c",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10150',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8150',
            :libvirt__iface_name => 'swp2',
            auto_config: false
      # link for swp3 --> chassis03-lc4-2:swp6
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:58",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10172',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8172',
            :libvirt__iface_name => 'swp3',
            auto_config: false
      # link for swp4 --> chassis04-lc4-2:swp6
      device.vm.network "private_network",
            :mac => "44:38:39:00:06:9e",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10847',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8847',
            :libvirt__iface_name => 'swp4',
            auto_config: false



    # Fixes "stdin: is not a tty" and "mesg: ttyname failed : Inappropriate ioctl for device"  messages --> https://github.com/mitchellh/vagrant/issues/1673
    device.vm.provision :shell , inline: "(sudo grep -q 'mesg n' /root/.profile 2>/dev/null && sudo sed -i '/mesg n/d' /root/.profile  2>/dev/null) || true;", privileged: false

    #Copy over Topology.dot File
    device.vm.provision "file", source: "topology.dot", destination: "~/topology.dot"
    device.vm.provision :shell, privileged: false, inline: "sudo mv ~/topology.dot /etc/ptm.d/topology.dot"


    # Run the Config specified in the Node Attributes
    device.vm.provision :shell , privileged: false, :inline => 'echo "$(whoami)" > /tmp/normal_user'
    device.vm.provision :shell , path: "./helper_scripts/extra_switch_config.sh"


    # Install Rules for the interface re-map
    device.vm.provision :shell , :inline => <<-delete_udev_directory
if [ -d "/etc/udev/rules.d/70-persistent-net.rules" ]; then
    rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
fi
rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
delete_udev_directory

device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:58 --> eth0"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:58", NAME="eth0", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:4e --> swp1"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:4e", NAME="swp1", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:2c --> swp2"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:2c", NAME="swp2", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:58 --> swp3"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:58", NAME="swp3", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:06:9e --> swp4"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:06:9e", NAME="swp4", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule

      device.vm.provision :shell , :inline => <<-vagrant_interface_rule
echo "  INFO: Adding UDEV Rule: Vagrant interface = vagrant"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{ifindex}=="2", NAME="vagrant", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
echo "#### UDEV Rules (/etc/udev/rules.d/70-persistent-net.rules) ####"
cat /etc/udev/rules.d/70-persistent-net.rules
vagrant_interface_rule

# Run Any Platform Specific Code and Apply the interface Re-map
    #   (may or may not perform a reboot depending on platform)
    device.vm.provision :shell , :inline => $script

end

  ##### DEFINE VM for leaf68 #####
  config.vm.define "leaf68" do |device|

    device.vm.hostname = "leaf68"

    device.vm.box = "CumulusCommunity/cumulus-vx"
    device.vm.box_version = "3.5.0"

    device.vm.provider :libvirt do |v|
      v.memory = 768
    end
    #   see note here: https://github.com/pradels/vagrant-libvirt#synced-folders
    device.vm.synced_folder ".", "/vagrant", disabled: true



    # NETWORK INTERFACES
      # link for eth0 --> oob-mgmt-switch2:swp22
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:b8",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10476',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8476',
            :libvirt__iface_name => 'eth0',
            auto_config: false
      # link for swp1 --> chassis01-lc3-1:swp4
      device.vm.network "private_network",
            :mac => "44:38:39:00:07:f6",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '11019',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '9019',
            :libvirt__iface_name => 'swp1',
            auto_config: false
      # link for swp2 --> chassis02-lc3-1:swp4
      device.vm.network "private_network",
            :mac => "44:38:39:00:08:ba",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '11117',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '9117',
            :libvirt__iface_name => 'swp2',
            auto_config: false
      # link for swp3 --> chassis03-lc3-1:swp4
      device.vm.network "private_network",
            :mac => "44:38:39:00:07:70",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10952',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8952',
            :libvirt__iface_name => 'swp3',
            auto_config: false
      # link for swp4 --> chassis04-lc3-1:swp4
      device.vm.network "private_network",
            :mac => "44:38:39:00:06:9c",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10846',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8846',
            :libvirt__iface_name => 'swp4',
            auto_config: false



    # Fixes "stdin: is not a tty" and "mesg: ttyname failed : Inappropriate ioctl for device"  messages --> https://github.com/mitchellh/vagrant/issues/1673
    device.vm.provision :shell , inline: "(sudo grep -q 'mesg n' /root/.profile 2>/dev/null && sudo sed -i '/mesg n/d' /root/.profile  2>/dev/null) || true;", privileged: false

    #Copy over Topology.dot File
    device.vm.provision "file", source: "topology.dot", destination: "~/topology.dot"
    device.vm.provision :shell, privileged: false, inline: "sudo mv ~/topology.dot /etc/ptm.d/topology.dot"


    # Run the Config specified in the Node Attributes
    device.vm.provision :shell , privileged: false, :inline => 'echo "$(whoami)" > /tmp/normal_user'
    device.vm.provision :shell , path: "./helper_scripts/extra_switch_config.sh"


    # Install Rules for the interface re-map
    device.vm.provision :shell , :inline => <<-delete_udev_directory
if [ -d "/etc/udev/rules.d/70-persistent-net.rules" ]; then
    rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
fi
rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
delete_udev_directory

device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:b8 --> eth0"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:b8", NAME="eth0", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:07:f6 --> swp1"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:07:f6", NAME="swp1", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:08:ba --> swp2"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:08:ba", NAME="swp2", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:07:70 --> swp3"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:07:70", NAME="swp3", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:06:9c --> swp4"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:06:9c", NAME="swp4", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule

      device.vm.provision :shell , :inline => <<-vagrant_interface_rule
echo "  INFO: Adding UDEV Rule: Vagrant interface = vagrant"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{ifindex}=="2", NAME="vagrant", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
echo "#### UDEV Rules (/etc/udev/rules.d/70-persistent-net.rules) ####"
cat /etc/udev/rules.d/70-persistent-net.rules
vagrant_interface_rule

# Run Any Platform Specific Code and Apply the interface Re-map
    #   (may or may not perform a reboot depending on platform)
    device.vm.provision :shell , :inline => $script

end

  ##### DEFINE VM for leaf69 #####
  config.vm.define "leaf69" do |device|

    device.vm.hostname = "leaf69"

    device.vm.box = "CumulusCommunity/cumulus-vx"
    device.vm.box_version = "3.5.0"

    device.vm.provider :libvirt do |v|
      v.memory = 768
    end
    #   see note here: https://github.com/pradels/vagrant-libvirt#synced-folders
    device.vm.synced_folder ".", "/vagrant", disabled: true



    # NETWORK INTERFACES
      # link for eth0 --> oob-mgmt-switch2:swp23
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:a2",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10081',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8081',
            :libvirt__iface_name => 'eth0',
            auto_config: false
      # link for swp1 --> chassis01-lc3-1:swp5
      device.vm.network "private_network",
            :mac => "44:38:39:00:06:f4",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10890',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8890',
            :libvirt__iface_name => 'swp1',
            auto_config: false
      # link for swp2 --> chassis02-lc3-1:swp5
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:5e",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10559',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8559',
            :libvirt__iface_name => 'swp2',
            auto_config: false
      # link for swp3 --> chassis03-lc3-1:swp5
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:b2",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10601',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8601',
            :libvirt__iface_name => 'swp3',
            auto_config: false
      # link for swp4 --> chassis04-lc3-1:swp5
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:34",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10026',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8026',
            :libvirt__iface_name => 'swp4',
            auto_config: false



    # Fixes "stdin: is not a tty" and "mesg: ttyname failed : Inappropriate ioctl for device"  messages --> https://github.com/mitchellh/vagrant/issues/1673
    device.vm.provision :shell , inline: "(sudo grep -q 'mesg n' /root/.profile 2>/dev/null && sudo sed -i '/mesg n/d' /root/.profile  2>/dev/null) || true;", privileged: false

    #Copy over Topology.dot File
    device.vm.provision "file", source: "topology.dot", destination: "~/topology.dot"
    device.vm.provision :shell, privileged: false, inline: "sudo mv ~/topology.dot /etc/ptm.d/topology.dot"


    # Run the Config specified in the Node Attributes
    device.vm.provision :shell , privileged: false, :inline => 'echo "$(whoami)" > /tmp/normal_user'
    device.vm.provision :shell , path: "./helper_scripts/extra_switch_config.sh"


    # Install Rules for the interface re-map
    device.vm.provision :shell , :inline => <<-delete_udev_directory
if [ -d "/etc/udev/rules.d/70-persistent-net.rules" ]; then
    rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
fi
rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
delete_udev_directory

device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:a2 --> eth0"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:a2", NAME="eth0", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:06:f4 --> swp1"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:06:f4", NAME="swp1", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:5e --> swp2"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:5e", NAME="swp2", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:b2 --> swp3"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:b2", NAME="swp3", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:34 --> swp4"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:34", NAME="swp4", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule

      device.vm.provision :shell , :inline => <<-vagrant_interface_rule
echo "  INFO: Adding UDEV Rule: Vagrant interface = vagrant"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{ifindex}=="2", NAME="vagrant", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
echo "#### UDEV Rules (/etc/udev/rules.d/70-persistent-net.rules) ####"
cat /etc/udev/rules.d/70-persistent-net.rules
vagrant_interface_rule

# Run Any Platform Specific Code and Apply the interface Re-map
    #   (may or may not perform a reboot depending on platform)
    device.vm.provision :shell , :inline => $script

end

  ##### DEFINE VM for leaf114 #####
  config.vm.define "leaf114" do |device|

    device.vm.hostname = "leaf114"

    device.vm.box = "CumulusCommunity/cumulus-vx"
    device.vm.box_version = "3.5.0"

    device.vm.provider :libvirt do |v|
      v.memory = 768
    end
    #   see note here: https://github.com/pradels/vagrant-libvirt#synced-folders
    device.vm.synced_folder ".", "/vagrant", disabled: true



    # NETWORK INTERFACES
      # link for eth0 --> oob-mgmt-switch3:swp20
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:84",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10578',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8578',
            :libvirt__iface_name => 'eth0',
            auto_config: false
      # link for swp1 --> chassis01-lc4-2:swp2
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:4e",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10423',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8423',
            :libvirt__iface_name => 'swp1',
            auto_config: false
      # link for swp2 --> chassis02-lc4-2:swp2
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:e4",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10370',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8370',
            :libvirt__iface_name => 'swp2',
            auto_config: false
      # link for swp3 --> chassis03-lc4-2:swp2
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:66",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10051',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8051',
            :libvirt__iface_name => 'swp3',
            auto_config: false
      # link for swp4 --> chassis04-lc4-2:swp2
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:3e",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10415',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8415',
            :libvirt__iface_name => 'swp4',
            auto_config: false



    # Fixes "stdin: is not a tty" and "mesg: ttyname failed : Inappropriate ioctl for device"  messages --> https://github.com/mitchellh/vagrant/issues/1673
    device.vm.provision :shell , inline: "(sudo grep -q 'mesg n' /root/.profile 2>/dev/null && sudo sed -i '/mesg n/d' /root/.profile  2>/dev/null) || true;", privileged: false

    #Copy over Topology.dot File
    device.vm.provision "file", source: "topology.dot", destination: "~/topology.dot"
    device.vm.provision :shell, privileged: false, inline: "sudo mv ~/topology.dot /etc/ptm.d/topology.dot"


    # Run the Config specified in the Node Attributes
    device.vm.provision :shell , privileged: false, :inline => 'echo "$(whoami)" > /tmp/normal_user'
    device.vm.provision :shell , path: "./helper_scripts/extra_switch_config.sh"


    # Install Rules for the interface re-map
    device.vm.provision :shell , :inline => <<-delete_udev_directory
if [ -d "/etc/udev/rules.d/70-persistent-net.rules" ]; then
    rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
fi
rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
delete_udev_directory

device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:84 --> eth0"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:84", NAME="eth0", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:4e --> swp1"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:4e", NAME="swp1", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:e4 --> swp2"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:e4", NAME="swp2", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:66 --> swp3"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:66", NAME="swp3", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:3e --> swp4"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:3e", NAME="swp4", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule

      device.vm.provision :shell , :inline => <<-vagrant_interface_rule
echo "  INFO: Adding UDEV Rule: Vagrant interface = vagrant"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{ifindex}=="2", NAME="vagrant", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
echo "#### UDEV Rules (/etc/udev/rules.d/70-persistent-net.rules) ####"
cat /etc/udev/rules.d/70-persistent-net.rules
vagrant_interface_rule

# Run Any Platform Specific Code and Apply the interface Re-map
    #   (may or may not perform a reboot depending on platform)
    device.vm.provision :shell , :inline => $script

end

  ##### DEFINE VM for leaf06 #####
  config.vm.define "leaf06" do |device|

    device.vm.hostname = "leaf06"

    device.vm.box = "CumulusCommunity/cumulus-vx"
    device.vm.box_version = "3.5.0"

    device.vm.provider :libvirt do |v|
      v.memory = 768
    end
    #   see note here: https://github.com/pradels/vagrant-libvirt#synced-folders
    device.vm.synced_folder ".", "/vagrant", disabled: true



    # NETWORK INTERFACES
      # link for eth0 --> oob-mgmt-switch1:swp8
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:d8",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10620',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8620',
            :libvirt__iface_name => 'eth0',
            auto_config: false
      # link for swp1 --> chassis01-lc1-1:swp6
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:44",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10162',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8162',
            :libvirt__iface_name => 'swp1',
            auto_config: false
      # link for swp2 --> chassis02-lc1-1:swp6
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:4a",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10293',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8293',
            :libvirt__iface_name => 'swp2',
            auto_config: false
      # link for swp3 --> chassis03-lc1-1:swp6
      device.vm.network "private_network",
            :mac => "44:38:39:00:09:28",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '11172',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '9172',
            :libvirt__iface_name => 'swp3',
            auto_config: false
      # link for swp4 --> chassis04-lc1-1:swp6
      device.vm.network "private_network",
            :mac => "44:38:39:00:07:02",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10897',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8897',
            :libvirt__iface_name => 'swp4',
            auto_config: false



    # Fixes "stdin: is not a tty" and "mesg: ttyname failed : Inappropriate ioctl for device"  messages --> https://github.com/mitchellh/vagrant/issues/1673
    device.vm.provision :shell , inline: "(sudo grep -q 'mesg n' /root/.profile 2>/dev/null && sudo sed -i '/mesg n/d' /root/.profile  2>/dev/null) || true;", privileged: false

    #Copy over Topology.dot File
    device.vm.provision "file", source: "topology.dot", destination: "~/topology.dot"
    device.vm.provision :shell, privileged: false, inline: "sudo mv ~/topology.dot /etc/ptm.d/topology.dot"


    # Run the Config specified in the Node Attributes
    device.vm.provision :shell , privileged: false, :inline => 'echo "$(whoami)" > /tmp/normal_user'
    device.vm.provision :shell , path: "./helper_scripts/extra_switch_config.sh"


    # Install Rules for the interface re-map
    device.vm.provision :shell , :inline => <<-delete_udev_directory
if [ -d "/etc/udev/rules.d/70-persistent-net.rules" ]; then
    rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
fi
rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
delete_udev_directory

device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:d8 --> eth0"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:d8", NAME="eth0", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:44 --> swp1"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:44", NAME="swp1", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:4a --> swp2"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:4a", NAME="swp2", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:09:28 --> swp3"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:09:28", NAME="swp3", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:07:02 --> swp4"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:07:02", NAME="swp4", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule

      device.vm.provision :shell , :inline => <<-vagrant_interface_rule
echo "  INFO: Adding UDEV Rule: Vagrant interface = vagrant"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{ifindex}=="2", NAME="vagrant", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
echo "#### UDEV Rules (/etc/udev/rules.d/70-persistent-net.rules) ####"
cat /etc/udev/rules.d/70-persistent-net.rules
vagrant_interface_rule

# Run Any Platform Specific Code and Apply the interface Re-map
    #   (may or may not perform a reboot depending on platform)
    device.vm.provision :shell , :inline => $script

end

  ##### DEFINE VM for leaf07 #####
  config.vm.define "leaf07" do |device|

    device.vm.hostname = "leaf07"

    device.vm.box = "CumulusCommunity/cumulus-vx"
    device.vm.box_version = "3.5.0"

    device.vm.provider :libvirt do |v|
      v.memory = 768
    end
    #   see note here: https://github.com/pradels/vagrant-libvirt#synced-folders
    device.vm.synced_folder ".", "/vagrant", disabled: true



    # NETWORK INTERFACES
      # link for eth0 --> oob-mgmt-switch1:swp9
      device.vm.network "private_network",
            :mac => "44:38:39:00:07:98",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10972',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8972',
            :libvirt__iface_name => 'eth0',
            auto_config: false
      # link for swp1 --> chassis01-lc1-1:swp7
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:ba",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10221',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8221',
            :libvirt__iface_name => 'swp1',
            auto_config: false
      # link for swp2 --> chassis02-lc1-1:swp7
      device.vm.network "private_network",
            :mac => "44:38:39:00:07:c6",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10995',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8995',
            :libvirt__iface_name => 'swp2',
            auto_config: false
      # link for swp3 --> chassis03-lc1-1:swp7
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:6c",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10310',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8310',
            :libvirt__iface_name => 'swp3',
            auto_config: false
      # link for swp4 --> chassis04-lc1-1:swp7
      device.vm.network "private_network",
            :mac => "44:38:39:00:09:58",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '11196',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '9196',
            :libvirt__iface_name => 'swp4',
            auto_config: false



    # Fixes "stdin: is not a tty" and "mesg: ttyname failed : Inappropriate ioctl for device"  messages --> https://github.com/mitchellh/vagrant/issues/1673
    device.vm.provision :shell , inline: "(sudo grep -q 'mesg n' /root/.profile 2>/dev/null && sudo sed -i '/mesg n/d' /root/.profile  2>/dev/null) || true;", privileged: false

    #Copy over Topology.dot File
    device.vm.provision "file", source: "topology.dot", destination: "~/topology.dot"
    device.vm.provision :shell, privileged: false, inline: "sudo mv ~/topology.dot /etc/ptm.d/topology.dot"


    # Run the Config specified in the Node Attributes
    device.vm.provision :shell , privileged: false, :inline => 'echo "$(whoami)" > /tmp/normal_user'
    device.vm.provision :shell , path: "./helper_scripts/extra_switch_config.sh"


    # Install Rules for the interface re-map
    device.vm.provision :shell , :inline => <<-delete_udev_directory
if [ -d "/etc/udev/rules.d/70-persistent-net.rules" ]; then
    rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
fi
rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
delete_udev_directory

device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:07:98 --> eth0"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:07:98", NAME="eth0", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:ba --> swp1"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:ba", NAME="swp1", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:07:c6 --> swp2"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:07:c6", NAME="swp2", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:6c --> swp3"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:6c", NAME="swp3", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:09:58 --> swp4"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:09:58", NAME="swp4", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule

      device.vm.provision :shell , :inline => <<-vagrant_interface_rule
echo "  INFO: Adding UDEV Rule: Vagrant interface = vagrant"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{ifindex}=="2", NAME="vagrant", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
echo "#### UDEV Rules (/etc/udev/rules.d/70-persistent-net.rules) ####"
cat /etc/udev/rules.d/70-persistent-net.rules
vagrant_interface_rule

# Run Any Platform Specific Code and Apply the interface Re-map
    #   (may or may not perform a reboot depending on platform)
    device.vm.provision :shell , :inline => $script

end

  ##### DEFINE VM for leaf04 #####
  config.vm.define "leaf04" do |device|

    device.vm.hostname = "leaf04"

    device.vm.box = "CumulusCommunity/cumulus-vx"
    device.vm.box_version = "3.5.0"

    device.vm.provider :libvirt do |v|
      v.memory = 768
    end
    #   see note here: https://github.com/pradels/vagrant-libvirt#synced-folders
    device.vm.synced_folder ".", "/vagrant", disabled: true



    # NETWORK INTERFACES
      # link for eth0 --> oob-mgmt-switch1:swp6
      device.vm.network "private_network",
            :mac => "44:38:39:00:08:12",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '11033',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '9033',
            :libvirt__iface_name => 'eth0',
            auto_config: false
      # link for swp1 --> chassis01-lc1-1:swp4
      device.vm.network "private_network",
            :mac => "44:38:39:00:07:de",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '11007',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '9007',
            :libvirt__iface_name => 'swp1',
            auto_config: false
      # link for swp2 --> chassis02-lc1-1:swp4
      device.vm.network "private_network",
            :mac => "44:38:39:00:07:12",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10905',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8905',
            :libvirt__iface_name => 'swp2',
            auto_config: false
      # link for swp3 --> chassis03-lc1-1:swp4
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:82",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10193',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8193',
            :libvirt__iface_name => 'swp3',
            auto_config: false
      # link for swp4 --> chassis04-lc1-1:swp4
      device.vm.network "private_network",
            :mac => "44:38:39:00:08:da",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '11133',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '9133',
            :libvirt__iface_name => 'swp4',
            auto_config: false



    # Fixes "stdin: is not a tty" and "mesg: ttyname failed : Inappropriate ioctl for device"  messages --> https://github.com/mitchellh/vagrant/issues/1673
    device.vm.provision :shell , inline: "(sudo grep -q 'mesg n' /root/.profile 2>/dev/null && sudo sed -i '/mesg n/d' /root/.profile  2>/dev/null) || true;", privileged: false

    #Copy over Topology.dot File
    device.vm.provision "file", source: "topology.dot", destination: "~/topology.dot"
    device.vm.provision :shell, privileged: false, inline: "sudo mv ~/topology.dot /etc/ptm.d/topology.dot"


    # Run the Config specified in the Node Attributes
    device.vm.provision :shell , privileged: false, :inline => 'echo "$(whoami)" > /tmp/normal_user'
    device.vm.provision :shell , path: "./helper_scripts/extra_switch_config.sh"


    # Install Rules for the interface re-map
    device.vm.provision :shell , :inline => <<-delete_udev_directory
if [ -d "/etc/udev/rules.d/70-persistent-net.rules" ]; then
    rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
fi
rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
delete_udev_directory

device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:08:12 --> eth0"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:08:12", NAME="eth0", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:07:de --> swp1"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:07:de", NAME="swp1", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:07:12 --> swp2"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:07:12", NAME="swp2", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:82 --> swp3"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:82", NAME="swp3", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:08:da --> swp4"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:08:da", NAME="swp4", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule

      device.vm.provision :shell , :inline => <<-vagrant_interface_rule
echo "  INFO: Adding UDEV Rule: Vagrant interface = vagrant"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{ifindex}=="2", NAME="vagrant", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
echo "#### UDEV Rules (/etc/udev/rules.d/70-persistent-net.rules) ####"
cat /etc/udev/rules.d/70-persistent-net.rules
vagrant_interface_rule

# Run Any Platform Specific Code and Apply the interface Re-map
    #   (may or may not perform a reboot depending on platform)
    device.vm.provision :shell , :inline => $script

end

  ##### DEFINE VM for leaf05 #####
  config.vm.define "leaf05" do |device|

    device.vm.hostname = "leaf05"

    device.vm.box = "CumulusCommunity/cumulus-vx"
    device.vm.box_version = "3.5.0"

    device.vm.provider :libvirt do |v|
      v.memory = 768
    end
    #   see note here: https://github.com/pradels/vagrant-libvirt#synced-folders
    device.vm.synced_folder ".", "/vagrant", disabled: true



    # NETWORK INTERFACES
      # link for eth0 --> oob-mgmt-switch1:swp7
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:d0",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10360',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8360',
            :libvirt__iface_name => 'eth0',
            auto_config: false
      # link for swp1 --> chassis01-lc1-1:swp5
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:2a",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10149',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8149',
            :libvirt__iface_name => 'swp1',
            auto_config: false
      # link for swp2 --> chassis02-lc1-1:swp5
      device.vm.network "private_network",
            :mac => "44:38:39:00:08:22",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '11041',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '9041',
            :libvirt__iface_name => 'swp2',
            auto_config: false
      # link for swp3 --> chassis03-lc1-1:swp5
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:20",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10016',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8016',
            :libvirt__iface_name => 'swp3',
            auto_config: false
      # link for swp4 --> chassis04-lc1-1:swp5
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:ce",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10359',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8359',
            :libvirt__iface_name => 'swp4',
            auto_config: false



    # Fixes "stdin: is not a tty" and "mesg: ttyname failed : Inappropriate ioctl for device"  messages --> https://github.com/mitchellh/vagrant/issues/1673
    device.vm.provision :shell , inline: "(sudo grep -q 'mesg n' /root/.profile 2>/dev/null && sudo sed -i '/mesg n/d' /root/.profile  2>/dev/null) || true;", privileged: false

    #Copy over Topology.dot File
    device.vm.provision "file", source: "topology.dot", destination: "~/topology.dot"
    device.vm.provision :shell, privileged: false, inline: "sudo mv ~/topology.dot /etc/ptm.d/topology.dot"


    # Run the Config specified in the Node Attributes
    device.vm.provision :shell , privileged: false, :inline => 'echo "$(whoami)" > /tmp/normal_user'
    device.vm.provision :shell , path: "./helper_scripts/extra_switch_config.sh"


    # Install Rules for the interface re-map
    device.vm.provision :shell , :inline => <<-delete_udev_directory
if [ -d "/etc/udev/rules.d/70-persistent-net.rules" ]; then
    rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
fi
rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
delete_udev_directory

device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:d0 --> eth0"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:d0", NAME="eth0", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:2a --> swp1"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:2a", NAME="swp1", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:08:22 --> swp2"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:08:22", NAME="swp2", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:20 --> swp3"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:20", NAME="swp3", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:ce --> swp4"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:ce", NAME="swp4", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule

      device.vm.provision :shell , :inline => <<-vagrant_interface_rule
echo "  INFO: Adding UDEV Rule: Vagrant interface = vagrant"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{ifindex}=="2", NAME="vagrant", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
echo "#### UDEV Rules (/etc/udev/rules.d/70-persistent-net.rules) ####"
cat /etc/udev/rules.d/70-persistent-net.rules
vagrant_interface_rule

# Run Any Platform Specific Code and Apply the interface Re-map
    #   (may or may not perform a reboot depending on platform)
    device.vm.provision :shell , :inline => $script

end

  ##### DEFINE VM for leaf02 #####
  config.vm.define "leaf02" do |device|

    device.vm.hostname = "leaf02"

    device.vm.box = "CumulusCommunity/cumulus-vx"
    device.vm.box_version = "3.5.0"

    device.vm.provider :libvirt do |v|
      v.memory = 768
    end
    #   see note here: https://github.com/pradels/vagrant-libvirt#synced-folders
    device.vm.synced_folder ".", "/vagrant", disabled: true



    # NETWORK INTERFACES
      # link for eth0 --> oob-mgmt-switch1:swp4
      device.vm.network "private_network",
            :mac => "44:38:39:00:06:3e",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10799',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8799',
            :libvirt__iface_name => 'eth0',
            auto_config: false
      # link for swp1 --> chassis01-lc1-1:swp2
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:e6",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10115',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8115',
            :libvirt__iface_name => 'swp1',
            auto_config: false
      # link for swp2 --> chassis02-lc1-1:swp2
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:9a",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10333',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8333',
            :libvirt__iface_name => 'swp2',
            auto_config: false
      # link for swp3 --> chassis03-lc1-1:swp2
      device.vm.network "private_network",
            :mac => "44:38:39:00:06:70",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10824',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8824',
            :libvirt__iface_name => 'swp3',
            auto_config: false
      # link for swp4 --> chassis04-lc1-1:swp2
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:ca",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10485',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8485',
            :libvirt__iface_name => 'swp4',
            auto_config: false



    # Fixes "stdin: is not a tty" and "mesg: ttyname failed : Inappropriate ioctl for device"  messages --> https://github.com/mitchellh/vagrant/issues/1673
    device.vm.provision :shell , inline: "(sudo grep -q 'mesg n' /root/.profile 2>/dev/null && sudo sed -i '/mesg n/d' /root/.profile  2>/dev/null) || true;", privileged: false

    #Copy over Topology.dot File
    device.vm.provision "file", source: "topology.dot", destination: "~/topology.dot"
    device.vm.provision :shell, privileged: false, inline: "sudo mv ~/topology.dot /etc/ptm.d/topology.dot"


    # Run the Config specified in the Node Attributes
    device.vm.provision :shell , privileged: false, :inline => 'echo "$(whoami)" > /tmp/normal_user'
    device.vm.provision :shell , path: "./helper_scripts/extra_switch_config.sh"


    # Install Rules for the interface re-map
    device.vm.provision :shell , :inline => <<-delete_udev_directory
if [ -d "/etc/udev/rules.d/70-persistent-net.rules" ]; then
    rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
fi
rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
delete_udev_directory

device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:06:3e --> eth0"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:06:3e", NAME="eth0", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:e6 --> swp1"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:e6", NAME="swp1", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:9a --> swp2"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:9a", NAME="swp2", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:06:70 --> swp3"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:06:70", NAME="swp3", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:ca --> swp4"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:ca", NAME="swp4", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule

      device.vm.provision :shell , :inline => <<-vagrant_interface_rule
echo "  INFO: Adding UDEV Rule: Vagrant interface = vagrant"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{ifindex}=="2", NAME="vagrant", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
echo "#### UDEV Rules (/etc/udev/rules.d/70-persistent-net.rules) ####"
cat /etc/udev/rules.d/70-persistent-net.rules
vagrant_interface_rule

# Run Any Platform Specific Code and Apply the interface Re-map
    #   (may or may not perform a reboot depending on platform)
    device.vm.provision :shell , :inline => $script

end

  ##### DEFINE VM for leaf03 #####
  config.vm.define "leaf03" do |device|

    device.vm.hostname = "leaf03"

    device.vm.box = "CumulusCommunity/cumulus-vx"
    device.vm.box_version = "3.5.0"

    device.vm.provider :libvirt do |v|
      v.memory = 768
    end
    #   see note here: https://github.com/pradels/vagrant-libvirt#synced-folders
    device.vm.synced_folder ".", "/vagrant", disabled: true



    # NETWORK INTERFACES
      # link for eth0 --> oob-mgmt-switch1:swp5
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:48",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10420',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8420',
            :libvirt__iface_name => 'eth0',
            auto_config: false
      # link for swp1 --> chassis01-lc1-1:swp3
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:a6",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10467',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8467',
            :libvirt__iface_name => 'swp1',
            auto_config: false
      # link for swp2 --> chassis02-lc1-1:swp3
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:3a",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10029',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8029',
            :libvirt__iface_name => 'swp2',
            auto_config: false
      # link for swp3 --> chassis03-lc1-1:swp3
      device.vm.network "private_network",
            :mac => "44:38:39:00:09:24",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '11170',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '9170',
            :libvirt__iface_name => 'swp3',
            auto_config: false
      # link for swp4 --> chassis04-lc1-1:swp3
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:38",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10540',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8540',
            :libvirt__iface_name => 'swp4',
            auto_config: false



    # Fixes "stdin: is not a tty" and "mesg: ttyname failed : Inappropriate ioctl for device"  messages --> https://github.com/mitchellh/vagrant/issues/1673
    device.vm.provision :shell , inline: "(sudo grep -q 'mesg n' /root/.profile 2>/dev/null && sudo sed -i '/mesg n/d' /root/.profile  2>/dev/null) || true;", privileged: false

    #Copy over Topology.dot File
    device.vm.provision "file", source: "topology.dot", destination: "~/topology.dot"
    device.vm.provision :shell, privileged: false, inline: "sudo mv ~/topology.dot /etc/ptm.d/topology.dot"


    # Run the Config specified in the Node Attributes
    device.vm.provision :shell , privileged: false, :inline => 'echo "$(whoami)" > /tmp/normal_user'
    device.vm.provision :shell , path: "./helper_scripts/extra_switch_config.sh"


    # Install Rules for the interface re-map
    device.vm.provision :shell , :inline => <<-delete_udev_directory
if [ -d "/etc/udev/rules.d/70-persistent-net.rules" ]; then
    rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
fi
rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
delete_udev_directory

device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:48 --> eth0"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:48", NAME="eth0", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:a6 --> swp1"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:a6", NAME="swp1", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:3a --> swp2"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:3a", NAME="swp2", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:09:24 --> swp3"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:09:24", NAME="swp3", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:38 --> swp4"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:38", NAME="swp4", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule

      device.vm.provision :shell , :inline => <<-vagrant_interface_rule
echo "  INFO: Adding UDEV Rule: Vagrant interface = vagrant"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{ifindex}=="2", NAME="vagrant", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
echo "#### UDEV Rules (/etc/udev/rules.d/70-persistent-net.rules) ####"
cat /etc/udev/rules.d/70-persistent-net.rules
vagrant_interface_rule

# Run Any Platform Specific Code and Apply the interface Re-map
    #   (may or may not perform a reboot depending on platform)
    device.vm.provision :shell , :inline => $script

end

  ##### DEFINE VM for leaf01 #####
  config.vm.define "leaf01" do |device|

    device.vm.hostname = "leaf01"

    device.vm.box = "CumulusCommunity/cumulus-vx"
    device.vm.box_version = "3.5.0"

    device.vm.provider :libvirt do |v|
      v.memory = 768
    end
    #   see note here: https://github.com/pradels/vagrant-libvirt#synced-folders
    device.vm.synced_folder ".", "/vagrant", disabled: true



    # NETWORK INTERFACES
      # link for eth0 --> oob-mgmt-switch1:swp3
      device.vm.network "private_network",
            :mac => "44:38:39:00:08:8c",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '11094',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '9094',
            :libvirt__iface_name => 'eth0',
            auto_config: false
      # link for swp1 --> chassis01-lc1-1:swp1
      device.vm.network "private_network",
            :mac => "44:38:39:00:07:8c",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10966',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8966',
            :libvirt__iface_name => 'swp1',
            auto_config: false
      # link for swp2 --> chassis02-lc1-1:swp1
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:10",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10136',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8136',
            :libvirt__iface_name => 'swp2',
            auto_config: false
      # link for swp3 --> chassis03-lc1-1:swp1
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:5c",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10046',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8046',
            :libvirt__iface_name => 'swp3',
            auto_config: false
      # link for swp4 --> chassis04-lc1-1:swp1
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:88",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10580',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8580',
            :libvirt__iface_name => 'swp4',
            auto_config: false



    # Fixes "stdin: is not a tty" and "mesg: ttyname failed : Inappropriate ioctl for device"  messages --> https://github.com/mitchellh/vagrant/issues/1673
    device.vm.provision :shell , inline: "(sudo grep -q 'mesg n' /root/.profile 2>/dev/null && sudo sed -i '/mesg n/d' /root/.profile  2>/dev/null) || true;", privileged: false

    #Copy over Topology.dot File
    device.vm.provision "file", source: "topology.dot", destination: "~/topology.dot"
    device.vm.provision :shell, privileged: false, inline: "sudo mv ~/topology.dot /etc/ptm.d/topology.dot"


    # Run the Config specified in the Node Attributes
    device.vm.provision :shell , privileged: false, :inline => 'echo "$(whoami)" > /tmp/normal_user'
    device.vm.provision :shell , path: "./helper_scripts/extra_switch_config.sh"


    # Install Rules for the interface re-map
    device.vm.provision :shell , :inline => <<-delete_udev_directory
if [ -d "/etc/udev/rules.d/70-persistent-net.rules" ]; then
    rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
fi
rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
delete_udev_directory

device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:08:8c --> eth0"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:08:8c", NAME="eth0", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:07:8c --> swp1"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:07:8c", NAME="swp1", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:10 --> swp2"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:10", NAME="swp2", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:5c --> swp3"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:5c", NAME="swp3", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:88 --> swp4"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:88", NAME="swp4", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule

      device.vm.provision :shell , :inline => <<-vagrant_interface_rule
echo "  INFO: Adding UDEV Rule: Vagrant interface = vagrant"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{ifindex}=="2", NAME="vagrant", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
echo "#### UDEV Rules (/etc/udev/rules.d/70-persistent-net.rules) ####"
cat /etc/udev/rules.d/70-persistent-net.rules
vagrant_interface_rule

# Run Any Platform Specific Code and Apply the interface Re-map
    #   (may or may not perform a reboot depending on platform)
    device.vm.provision :shell , :inline => $script

end

  ##### DEFINE VM for leaf55 #####
  config.vm.define "leaf55" do |device|

    device.vm.hostname = "leaf55"

    device.vm.box = "CumulusCommunity/cumulus-vx"
    device.vm.box_version = "3.5.0"

    device.vm.provider :libvirt do |v|
      v.memory = 768
    end
    #   see note here: https://github.com/pradels/vagrant-libvirt#synced-folders
    device.vm.synced_folder ".", "/vagrant", disabled: true



    # NETWORK INTERFACES
      # link for eth0 --> oob-mgmt-switch2:swp9
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:a8",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10596',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8596',
            :libvirt__iface_name => 'eth0',
            auto_config: false
      # link for swp1 --> chassis01-lc2-2:swp7
      device.vm.network "private_network",
            :mac => "44:38:39:00:07:b6",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10987',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8987',
            :libvirt__iface_name => 'swp1',
            auto_config: false
      # link for swp2 --> chassis02-lc2-2:swp7
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:b6",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10603',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8603',
            :libvirt__iface_name => 'swp2',
            auto_config: false
      # link for swp3 --> chassis03-lc2-2:swp7
      device.vm.network "private_network",
            :mac => "44:38:39:00:07:58",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10940',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8940',
            :libvirt__iface_name => 'swp3',
            auto_config: false
      # link for swp4 --> chassis04-lc2-2:swp7
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:ce",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10487',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8487',
            :libvirt__iface_name => 'swp4',
            auto_config: false



    # Fixes "stdin: is not a tty" and "mesg: ttyname failed : Inappropriate ioctl for device"  messages --> https://github.com/mitchellh/vagrant/issues/1673
    device.vm.provision :shell , inline: "(sudo grep -q 'mesg n' /root/.profile 2>/dev/null && sudo sed -i '/mesg n/d' /root/.profile  2>/dev/null) || true;", privileged: false

    #Copy over Topology.dot File
    device.vm.provision "file", source: "topology.dot", destination: "~/topology.dot"
    device.vm.provision :shell, privileged: false, inline: "sudo mv ~/topology.dot /etc/ptm.d/topology.dot"


    # Run the Config specified in the Node Attributes
    device.vm.provision :shell , privileged: false, :inline => 'echo "$(whoami)" > /tmp/normal_user'
    device.vm.provision :shell , path: "./helper_scripts/extra_switch_config.sh"


    # Install Rules for the interface re-map
    device.vm.provision :shell , :inline => <<-delete_udev_directory
if [ -d "/etc/udev/rules.d/70-persistent-net.rules" ]; then
    rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
fi
rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
delete_udev_directory

device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:a8 --> eth0"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:a8", NAME="eth0", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:07:b6 --> swp1"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:07:b6", NAME="swp1", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:b6 --> swp2"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:b6", NAME="swp2", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:07:58 --> swp3"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:07:58", NAME="swp3", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:ce --> swp4"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:ce", NAME="swp4", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule

      device.vm.provision :shell , :inline => <<-vagrant_interface_rule
echo "  INFO: Adding UDEV Rule: Vagrant interface = vagrant"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{ifindex}=="2", NAME="vagrant", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
echo "#### UDEV Rules (/etc/udev/rules.d/70-persistent-net.rules) ####"
cat /etc/udev/rules.d/70-persistent-net.rules
vagrant_interface_rule

# Run Any Platform Specific Code and Apply the interface Re-map
    #   (may or may not perform a reboot depending on platform)
    device.vm.provision :shell , :inline => $script

end

  ##### DEFINE VM for leaf63 #####
  config.vm.define "leaf63" do |device|

    device.vm.hostname = "leaf63"

    device.vm.box = "CumulusCommunity/cumulus-vx"
    device.vm.box_version = "3.5.0"

    device.vm.provider :libvirt do |v|
      v.memory = 768
    end
    #   see note here: https://github.com/pradels/vagrant-libvirt#synced-folders
    device.vm.synced_folder ".", "/vagrant", disabled: true



    # NETWORK INTERFACES
      # link for eth0 --> oob-mgmt-switch2:swp17
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:30",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10024',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8024',
            :libvirt__iface_name => 'eth0',
            auto_config: false
      # link for swp1 --> chassis01-lc2-2:swp15
      device.vm.network "private_network",
            :mac => "44:38:39:00:06:fa",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10893',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8893',
            :libvirt__iface_name => 'swp1',
            auto_config: false
      # link for swp2 --> chassis02-lc2-2:swp15
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:fc",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10382',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8382',
            :libvirt__iface_name => 'swp2',
            auto_config: false
      # link for swp3 --> chassis03-lc2-2:swp15
      device.vm.network "private_network",
            :mac => "44:38:39:00:08:92",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '11097',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '9097',
            :libvirt__iface_name => 'swp3',
            auto_config: false
      # link for swp4 --> chassis04-lc2-2:swp15
      device.vm.network "private_network",
            :mac => "44:38:39:00:09:54",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '11194',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '9194',
            :libvirt__iface_name => 'swp4',
            auto_config: false



    # Fixes "stdin: is not a tty" and "mesg: ttyname failed : Inappropriate ioctl for device"  messages --> https://github.com/mitchellh/vagrant/issues/1673
    device.vm.provision :shell , inline: "(sudo grep -q 'mesg n' /root/.profile 2>/dev/null && sudo sed -i '/mesg n/d' /root/.profile  2>/dev/null) || true;", privileged: false

    #Copy over Topology.dot File
    device.vm.provision "file", source: "topology.dot", destination: "~/topology.dot"
    device.vm.provision :shell, privileged: false, inline: "sudo mv ~/topology.dot /etc/ptm.d/topology.dot"


    # Run the Config specified in the Node Attributes
    device.vm.provision :shell , privileged: false, :inline => 'echo "$(whoami)" > /tmp/normal_user'
    device.vm.provision :shell , path: "./helper_scripts/extra_switch_config.sh"


    # Install Rules for the interface re-map
    device.vm.provision :shell , :inline => <<-delete_udev_directory
if [ -d "/etc/udev/rules.d/70-persistent-net.rules" ]; then
    rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
fi
rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
delete_udev_directory

device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:30 --> eth0"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:30", NAME="eth0", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:06:fa --> swp1"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:06:fa", NAME="swp1", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:fc --> swp2"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:fc", NAME="swp2", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:08:92 --> swp3"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:08:92", NAME="swp3", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:09:54 --> swp4"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:09:54", NAME="swp4", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule

      device.vm.provision :shell , :inline => <<-vagrant_interface_rule
echo "  INFO: Adding UDEV Rule: Vagrant interface = vagrant"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{ifindex}=="2", NAME="vagrant", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
echo "#### UDEV Rules (/etc/udev/rules.d/70-persistent-net.rules) ####"
cat /etc/udev/rules.d/70-persistent-net.rules
vagrant_interface_rule

# Run Any Platform Specific Code and Apply the interface Re-map
    #   (may or may not perform a reboot depending on platform)
    device.vm.provision :shell , :inline => $script

end

  ##### DEFINE VM for leaf08 #####
  config.vm.define "leaf08" do |device|

    device.vm.hostname = "leaf08"

    device.vm.box = "CumulusCommunity/cumulus-vx"
    device.vm.box_version = "3.5.0"

    device.vm.provider :libvirt do |v|
      v.memory = 768
    end
    #   see note here: https://github.com/pradels/vagrant-libvirt#synced-folders
    device.vm.synced_folder ".", "/vagrant", disabled: true



    # NETWORK INTERFACES
      # link for eth0 --> oob-mgmt-switch1:swp10
      device.vm.network "private_network",
            :mac => "44:38:39:00:05:d4",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10746',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8746',
            :libvirt__iface_name => 'eth0',
            auto_config: false
      # link for swp1 --> chassis01-lc1-1:swp8
      device.vm.network "private_network",
            :mac => "44:38:39:00:09:14",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '11162',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '9162',
            :libvirt__iface_name => 'swp1',
            auto_config: false
      # link for swp2 --> chassis02-lc1-1:swp8
      device.vm.network "private_network",
            :mac => "44:38:39:00:07:4a",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10933',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8933',
            :libvirt__iface_name => 'swp2',
            auto_config: false
      # link for swp3 --> chassis03-lc1-1:swp8
      device.vm.network "private_network",
            :mac => "44:38:39:00:09:4c",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '11190',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '9190',
            :libvirt__iface_name => 'swp3',
            auto_config: false
      # link for swp4 --> chassis04-lc1-1:swp8
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:d2",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10489',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8489',
            :libvirt__iface_name => 'swp4',
            auto_config: false



    # Fixes "stdin: is not a tty" and "mesg: ttyname failed : Inappropriate ioctl for device"  messages --> https://github.com/mitchellh/vagrant/issues/1673
    device.vm.provision :shell , inline: "(sudo grep -q 'mesg n' /root/.profile 2>/dev/null && sudo sed -i '/mesg n/d' /root/.profile  2>/dev/null) || true;", privileged: false

    #Copy over Topology.dot File
    device.vm.provision "file", source: "topology.dot", destination: "~/topology.dot"
    device.vm.provision :shell, privileged: false, inline: "sudo mv ~/topology.dot /etc/ptm.d/topology.dot"


    # Run the Config specified in the Node Attributes
    device.vm.provision :shell , privileged: false, :inline => 'echo "$(whoami)" > /tmp/normal_user'
    device.vm.provision :shell , path: "./helper_scripts/extra_switch_config.sh"


    # Install Rules for the interface re-map
    device.vm.provision :shell , :inline => <<-delete_udev_directory
if [ -d "/etc/udev/rules.d/70-persistent-net.rules" ]; then
    rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
fi
rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
delete_udev_directory

device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:05:d4 --> eth0"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:05:d4", NAME="eth0", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:09:14 --> swp1"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:09:14", NAME="swp1", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:07:4a --> swp2"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:07:4a", NAME="swp2", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:09:4c --> swp3"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:09:4c", NAME="swp3", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:d2 --> swp4"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:d2", NAME="swp4", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule

      device.vm.provision :shell , :inline => <<-vagrant_interface_rule
echo "  INFO: Adding UDEV Rule: Vagrant interface = vagrant"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{ifindex}=="2", NAME="vagrant", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
echo "#### UDEV Rules (/etc/udev/rules.d/70-persistent-net.rules) ####"
cat /etc/udev/rules.d/70-persistent-net.rules
vagrant_interface_rule

# Run Any Platform Specific Code and Apply the interface Re-map
    #   (may or may not perform a reboot depending on platform)
    device.vm.provision :shell , :inline => $script

end

  ##### DEFINE VM for leaf09 #####
  config.vm.define "leaf09" do |device|

    device.vm.hostname = "leaf09"

    device.vm.box = "CumulusCommunity/cumulus-vx"
    device.vm.box_version = "3.5.0"

    device.vm.provider :libvirt do |v|
      v.memory = 768
    end
    #   see note here: https://github.com/pradels/vagrant-libvirt#synced-folders
    device.vm.synced_folder ".", "/vagrant", disabled: true



    # NETWORK INTERFACES
      # link for eth0 --> oob-mgmt-switch1:swp11
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:a4",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10594',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8594',
            :libvirt__iface_name => 'eth0',
            auto_config: false
      # link for swp1 --> chassis01-lc1-1:swp9
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:08",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10132',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8132',
            :libvirt__iface_name => 'swp1',
            auto_config: false
      # link for swp2 --> chassis02-lc1-1:swp9
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:58",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10300',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8300',
            :libvirt__iface_name => 'swp2',
            auto_config: false
      # link for swp3 --> chassis03-lc1-1:swp9
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:04",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10002',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8002',
            :libvirt__iface_name => 'swp3',
            auto_config: false
      # link for swp4 --> chassis04-lc1-1:swp9
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:34",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10410',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8410',
            :libvirt__iface_name => 'swp4',
            auto_config: false



    # Fixes "stdin: is not a tty" and "mesg: ttyname failed : Inappropriate ioctl for device"  messages --> https://github.com/mitchellh/vagrant/issues/1673
    device.vm.provision :shell , inline: "(sudo grep -q 'mesg n' /root/.profile 2>/dev/null && sudo sed -i '/mesg n/d' /root/.profile  2>/dev/null) || true;", privileged: false

    #Copy over Topology.dot File
    device.vm.provision "file", source: "topology.dot", destination: "~/topology.dot"
    device.vm.provision :shell, privileged: false, inline: "sudo mv ~/topology.dot /etc/ptm.d/topology.dot"


    # Run the Config specified in the Node Attributes
    device.vm.provision :shell , privileged: false, :inline => 'echo "$(whoami)" > /tmp/normal_user'
    device.vm.provision :shell , path: "./helper_scripts/extra_switch_config.sh"


    # Install Rules for the interface re-map
    device.vm.provision :shell , :inline => <<-delete_udev_directory
if [ -d "/etc/udev/rules.d/70-persistent-net.rules" ]; then
    rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
fi
rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
delete_udev_directory

device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:a4 --> eth0"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:a4", NAME="eth0", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:08 --> swp1"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:08", NAME="swp1", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:58 --> swp2"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:58", NAME="swp2", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:04 --> swp3"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:04", NAME="swp3", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:34 --> swp4"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:34", NAME="swp4", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule

      device.vm.provision :shell , :inline => <<-vagrant_interface_rule
echo "  INFO: Adding UDEV Rule: Vagrant interface = vagrant"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{ifindex}=="2", NAME="vagrant", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
echo "#### UDEV Rules (/etc/udev/rules.d/70-persistent-net.rules) ####"
cat /etc/udev/rules.d/70-persistent-net.rules
vagrant_interface_rule

# Run Any Platform Specific Code and Apply the interface Re-map
    #   (may or may not perform a reboot depending on platform)
    device.vm.provision :shell , :inline => $script

end

  ##### DEFINE VM for leaf56 #####
  config.vm.define "leaf56" do |device|

    device.vm.hostname = "leaf56"

    device.vm.box = "CumulusCommunity/cumulus-vx"
    device.vm.box_version = "3.5.0"

    device.vm.provider :libvirt do |v|
      v.memory = 768
    end
    #   see note here: https://github.com/pradels/vagrant-libvirt#synced-folders
    device.vm.synced_folder ".", "/vagrant", disabled: true



    # NETWORK INTERFACES
      # link for eth0 --> oob-mgmt-switch2:swp10
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:7a",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10573',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8573',
            :libvirt__iface_name => 'eth0',
            auto_config: false
      # link for swp1 --> chassis01-lc2-2:swp8
      device.vm.network "private_network",
            :mac => "44:38:39:00:09:0e",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '11159',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '9159',
            :libvirt__iface_name => 'swp1',
            auto_config: false
      # link for swp2 --> chassis02-lc2-2:swp8
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:70",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10440',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8440',
            :libvirt__iface_name => 'swp2',
            auto_config: false
      # link for swp3 --> chassis03-lc2-2:swp8
      device.vm.network "private_network",
            :mac => "44:38:39:00:07:38",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10924',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8924',
            :libvirt__iface_name => 'swp3',
            auto_config: false
      # link for swp4 --> chassis04-lc2-2:swp8
      device.vm.network "private_network",
            :mac => "44:38:39:00:06:18",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10780',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8780',
            :libvirt__iface_name => 'swp4',
            auto_config: false



    # Fixes "stdin: is not a tty" and "mesg: ttyname failed : Inappropriate ioctl for device"  messages --> https://github.com/mitchellh/vagrant/issues/1673
    device.vm.provision :shell , inline: "(sudo grep -q 'mesg n' /root/.profile 2>/dev/null && sudo sed -i '/mesg n/d' /root/.profile  2>/dev/null) || true;", privileged: false

    #Copy over Topology.dot File
    device.vm.provision "file", source: "topology.dot", destination: "~/topology.dot"
    device.vm.provision :shell, privileged: false, inline: "sudo mv ~/topology.dot /etc/ptm.d/topology.dot"


    # Run the Config specified in the Node Attributes
    device.vm.provision :shell , privileged: false, :inline => 'echo "$(whoami)" > /tmp/normal_user'
    device.vm.provision :shell , path: "./helper_scripts/extra_switch_config.sh"


    # Install Rules for the interface re-map
    device.vm.provision :shell , :inline => <<-delete_udev_directory
if [ -d "/etc/udev/rules.d/70-persistent-net.rules" ]; then
    rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
fi
rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
delete_udev_directory

device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:7a --> eth0"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:7a", NAME="eth0", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:09:0e --> swp1"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:09:0e", NAME="swp1", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:70 --> swp2"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:70", NAME="swp2", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:07:38 --> swp3"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:07:38", NAME="swp3", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:06:18 --> swp4"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:06:18", NAME="swp4", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule

      device.vm.provision :shell , :inline => <<-vagrant_interface_rule
echo "  INFO: Adding UDEV Rule: Vagrant interface = vagrant"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{ifindex}=="2", NAME="vagrant", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
echo "#### UDEV Rules (/etc/udev/rules.d/70-persistent-net.rules) ####"
cat /etc/udev/rules.d/70-persistent-net.rules
vagrant_interface_rule

# Run Any Platform Specific Code and Apply the interface Re-map
    #   (may or may not perform a reboot depending on platform)
    device.vm.provision :shell , :inline => $script

end

  ##### DEFINE VM for leaf115 #####
  config.vm.define "leaf115" do |device|

    device.vm.hostname = "leaf115"

    device.vm.box = "CumulusCommunity/cumulus-vx"
    device.vm.box_version = "3.5.0"

    device.vm.provider :libvirt do |v|
      v.memory = 768
    end
    #   see note here: https://github.com/pradels/vagrant-libvirt#synced-folders
    device.vm.synced_folder ".", "/vagrant", disabled: true



    # NETWORK INTERFACES
      # link for eth0 --> oob-mgmt-switch3:swp21
      device.vm.network "private_network",
            :mac => "44:38:39:00:05:a4",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10722',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8722',
            :libvirt__iface_name => 'eth0',
            auto_config: false
      # link for swp1 --> chassis01-lc4-2:swp3
      device.vm.network "private_network",
            :mac => "44:38:39:00:08:78",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '11084',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '9084',
            :libvirt__iface_name => 'swp1',
            auto_config: false
      # link for swp2 --> chassis02-lc4-2:swp3
      device.vm.network "private_network",
            :mac => "44:38:39:00:05:c2",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10737',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8737',
            :libvirt__iface_name => 'swp2',
            auto_config: false
      # link for swp3 --> chassis03-lc4-2:swp3
      device.vm.network "private_network",
            :mac => "44:38:39:00:08:6c",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '11078',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '9078',
            :libvirt__iface_name => 'swp3',
            auto_config: false
      # link for swp4 --> chassis04-lc4-2:swp3
      device.vm.network "private_network",
            :mac => "44:38:39:00:07:34",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10922',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8922',
            :libvirt__iface_name => 'swp4',
            auto_config: false



    # Fixes "stdin: is not a tty" and "mesg: ttyname failed : Inappropriate ioctl for device"  messages --> https://github.com/mitchellh/vagrant/issues/1673
    device.vm.provision :shell , inline: "(sudo grep -q 'mesg n' /root/.profile 2>/dev/null && sudo sed -i '/mesg n/d' /root/.profile  2>/dev/null) || true;", privileged: false

    #Copy over Topology.dot File
    device.vm.provision "file", source: "topology.dot", destination: "~/topology.dot"
    device.vm.provision :shell, privileged: false, inline: "sudo mv ~/topology.dot /etc/ptm.d/topology.dot"


    # Run the Config specified in the Node Attributes
    device.vm.provision :shell , privileged: false, :inline => 'echo "$(whoami)" > /tmp/normal_user'
    device.vm.provision :shell , path: "./helper_scripts/extra_switch_config.sh"


    # Install Rules for the interface re-map
    device.vm.provision :shell , :inline => <<-delete_udev_directory
if [ -d "/etc/udev/rules.d/70-persistent-net.rules" ]; then
    rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
fi
rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
delete_udev_directory

device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:05:a4 --> eth0"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:05:a4", NAME="eth0", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:08:78 --> swp1"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:08:78", NAME="swp1", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:05:c2 --> swp2"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:05:c2", NAME="swp2", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:08:6c --> swp3"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:08:6c", NAME="swp3", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:07:34 --> swp4"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:07:34", NAME="swp4", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule

      device.vm.provision :shell , :inline => <<-vagrant_interface_rule
echo "  INFO: Adding UDEV Rule: Vagrant interface = vagrant"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{ifindex}=="2", NAME="vagrant", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
echo "#### UDEV Rules (/etc/udev/rules.d/70-persistent-net.rules) ####"
cat /etc/udev/rules.d/70-persistent-net.rules
vagrant_interface_rule

# Run Any Platform Specific Code and Apply the interface Re-map
    #   (may or may not perform a reboot depending on platform)
    device.vm.provision :shell , :inline => $script

end

  ##### DEFINE VM for leaf73 #####
  config.vm.define "leaf73" do |device|

    device.vm.hostname = "leaf73"

    device.vm.box = "CumulusCommunity/cumulus-vx"
    device.vm.box_version = "3.5.0"

    device.vm.provider :libvirt do |v|
      v.memory = 768
    end
    #   see note here: https://github.com/pradels/vagrant-libvirt#synced-folders
    device.vm.synced_folder ".", "/vagrant", disabled: true



    # NETWORK INTERFACES
      # link for eth0 --> oob-mgmt-switch2:swp27
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:d6",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10491',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8491',
            :libvirt__iface_name => 'eth0',
            auto_config: false
      # link for swp1 --> chassis01-lc3-1:swp9
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:a6",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10339',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8339',
            :libvirt__iface_name => 'swp1',
            auto_config: false
      # link for swp2 --> chassis02-lc3-1:swp9
      device.vm.network "private_network",
            :mac => "44:38:39:00:08:b0",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '11112',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '9112',
            :libvirt__iface_name => 'swp2',
            auto_config: false
      # link for swp3 --> chassis03-lc3-1:swp9
      device.vm.network "private_network",
            :mac => "44:38:39:00:08:5c",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '11070',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '9070',
            :libvirt__iface_name => 'swp3',
            auto_config: false
      # link for swp4 --> chassis04-lc3-1:swp9
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:46",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10547',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8547',
            :libvirt__iface_name => 'swp4',
            auto_config: false



    # Fixes "stdin: is not a tty" and "mesg: ttyname failed : Inappropriate ioctl for device"  messages --> https://github.com/mitchellh/vagrant/issues/1673
    device.vm.provision :shell , inline: "(sudo grep -q 'mesg n' /root/.profile 2>/dev/null && sudo sed -i '/mesg n/d' /root/.profile  2>/dev/null) || true;", privileged: false

    #Copy over Topology.dot File
    device.vm.provision "file", source: "topology.dot", destination: "~/topology.dot"
    device.vm.provision :shell, privileged: false, inline: "sudo mv ~/topology.dot /etc/ptm.d/topology.dot"


    # Run the Config specified in the Node Attributes
    device.vm.provision :shell , privileged: false, :inline => 'echo "$(whoami)" > /tmp/normal_user'
    device.vm.provision :shell , path: "./helper_scripts/extra_switch_config.sh"


    # Install Rules for the interface re-map
    device.vm.provision :shell , :inline => <<-delete_udev_directory
if [ -d "/etc/udev/rules.d/70-persistent-net.rules" ]; then
    rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
fi
rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
delete_udev_directory

device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:d6 --> eth0"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:d6", NAME="eth0", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:a6 --> swp1"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:a6", NAME="swp1", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:08:b0 --> swp2"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:08:b0", NAME="swp2", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:08:5c --> swp3"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:08:5c", NAME="swp3", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:46 --> swp4"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:46", NAME="swp4", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule

      device.vm.provision :shell , :inline => <<-vagrant_interface_rule
echo "  INFO: Adding UDEV Rule: Vagrant interface = vagrant"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{ifindex}=="2", NAME="vagrant", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
echo "#### UDEV Rules (/etc/udev/rules.d/70-persistent-net.rules) ####"
cat /etc/udev/rules.d/70-persistent-net.rules
vagrant_interface_rule

# Run Any Platform Specific Code and Apply the interface Re-map
    #   (may or may not perform a reboot depending on platform)
    device.vm.provision :shell , :inline => $script

end

  ##### DEFINE VM for leaf72 #####
  config.vm.define "leaf72" do |device|

    device.vm.hostname = "leaf72"

    device.vm.box = "CumulusCommunity/cumulus-vx"
    device.vm.box_version = "3.5.0"

    device.vm.provider :libvirt do |v|
      v.memory = 768
    end
    #   see note here: https://github.com/pradels/vagrant-libvirt#synced-folders
    device.vm.synced_folder ".", "/vagrant", disabled: true



    # NETWORK INTERFACES
      # link for eth0 --> oob-mgmt-switch2:swp26
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:ee",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10503',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8503',
            :libvirt__iface_name => 'eth0',
            auto_config: false
      # link for swp1 --> chassis01-lc3-1:swp8
      device.vm.network "private_network",
            :mac => "44:38:39:00:07:c8",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10996',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8996',
            :libvirt__iface_name => 'swp1',
            auto_config: false
      # link for swp2 --> chassis02-lc3-1:swp8
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:42",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10545',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8545',
            :libvirt__iface_name => 'swp2',
            auto_config: false
      # link for swp3 --> chassis03-lc3-1:swp8
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:36",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10283',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8283',
            :libvirt__iface_name => 'swp3',
            auto_config: false
      # link for swp4 --> chassis04-lc3-1:swp8
      device.vm.network "private_network",
            :mac => "44:38:39:00:05:0e",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10647',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8647',
            :libvirt__iface_name => 'swp4',
            auto_config: false



    # Fixes "stdin: is not a tty" and "mesg: ttyname failed : Inappropriate ioctl for device"  messages --> https://github.com/mitchellh/vagrant/issues/1673
    device.vm.provision :shell , inline: "(sudo grep -q 'mesg n' /root/.profile 2>/dev/null && sudo sed -i '/mesg n/d' /root/.profile  2>/dev/null) || true;", privileged: false

    #Copy over Topology.dot File
    device.vm.provision "file", source: "topology.dot", destination: "~/topology.dot"
    device.vm.provision :shell, privileged: false, inline: "sudo mv ~/topology.dot /etc/ptm.d/topology.dot"


    # Run the Config specified in the Node Attributes
    device.vm.provision :shell , privileged: false, :inline => 'echo "$(whoami)" > /tmp/normal_user'
    device.vm.provision :shell , path: "./helper_scripts/extra_switch_config.sh"


    # Install Rules for the interface re-map
    device.vm.provision :shell , :inline => <<-delete_udev_directory
if [ -d "/etc/udev/rules.d/70-persistent-net.rules" ]; then
    rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
fi
rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
delete_udev_directory

device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:ee --> eth0"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:ee", NAME="eth0", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:07:c8 --> swp1"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:07:c8", NAME="swp1", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:42 --> swp2"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:42", NAME="swp2", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:36 --> swp3"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:36", NAME="swp3", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:05:0e --> swp4"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:05:0e", NAME="swp4", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule

      device.vm.provision :shell , :inline => <<-vagrant_interface_rule
echo "  INFO: Adding UDEV Rule: Vagrant interface = vagrant"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{ifindex}=="2", NAME="vagrant", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
echo "#### UDEV Rules (/etc/udev/rules.d/70-persistent-net.rules) ####"
cat /etc/udev/rules.d/70-persistent-net.rules
vagrant_interface_rule

# Run Any Platform Specific Code and Apply the interface Re-map
    #   (may or may not perform a reboot depending on platform)
    device.vm.provision :shell , :inline => $script

end

  ##### DEFINE VM for leaf71 #####
  config.vm.define "leaf71" do |device|

    device.vm.hostname = "leaf71"

    device.vm.box = "CumulusCommunity/cumulus-vx"
    device.vm.box_version = "3.5.0"

    device.vm.provider :libvirt do |v|
      v.memory = 768
    end
    #   see note here: https://github.com/pradels/vagrant-libvirt#synced-folders
    device.vm.synced_folder ".", "/vagrant", disabled: true



    # NETWORK INTERFACES
      # link for eth0 --> oob-mgmt-switch2:swp25
      device.vm.network "private_network",
            :mac => "44:38:39:00:08:ec",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '11142',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '9142',
            :libvirt__iface_name => 'eth0',
            auto_config: false
      # link for swp1 --> chassis01-lc3-1:swp7
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:5a",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10301',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8301',
            :libvirt__iface_name => 'swp1',
            auto_config: false
      # link for swp2 --> chassis02-lc3-1:swp7
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:a2",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10593',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8593',
            :libvirt__iface_name => 'swp2',
            auto_config: false
      # link for swp3 --> chassis03-lc3-1:swp7
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:c4",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10482',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8482',
            :libvirt__iface_name => 'swp3',
            auto_config: false
      # link for swp4 --> chassis04-lc3-1:swp7
      device.vm.network "private_network",
            :mac => "44:38:39:00:06:f6",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10891',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8891',
            :libvirt__iface_name => 'swp4',
            auto_config: false



    # Fixes "stdin: is not a tty" and "mesg: ttyname failed : Inappropriate ioctl for device"  messages --> https://github.com/mitchellh/vagrant/issues/1673
    device.vm.provision :shell , inline: "(sudo grep -q 'mesg n' /root/.profile 2>/dev/null && sudo sed -i '/mesg n/d' /root/.profile  2>/dev/null) || true;", privileged: false

    #Copy over Topology.dot File
    device.vm.provision "file", source: "topology.dot", destination: "~/topology.dot"
    device.vm.provision :shell, privileged: false, inline: "sudo mv ~/topology.dot /etc/ptm.d/topology.dot"


    # Run the Config specified in the Node Attributes
    device.vm.provision :shell , privileged: false, :inline => 'echo "$(whoami)" > /tmp/normal_user'
    device.vm.provision :shell , path: "./helper_scripts/extra_switch_config.sh"


    # Install Rules for the interface re-map
    device.vm.provision :shell , :inline => <<-delete_udev_directory
if [ -d "/etc/udev/rules.d/70-persistent-net.rules" ]; then
    rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
fi
rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
delete_udev_directory

device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:08:ec --> eth0"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:08:ec", NAME="eth0", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:5a --> swp1"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:5a", NAME="swp1", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:a2 --> swp2"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:a2", NAME="swp2", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:c4 --> swp3"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:c4", NAME="swp3", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:06:f6 --> swp4"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:06:f6", NAME="swp4", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule

      device.vm.provision :shell , :inline => <<-vagrant_interface_rule
echo "  INFO: Adding UDEV Rule: Vagrant interface = vagrant"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{ifindex}=="2", NAME="vagrant", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
echo "#### UDEV Rules (/etc/udev/rules.d/70-persistent-net.rules) ####"
cat /etc/udev/rules.d/70-persistent-net.rules
vagrant_interface_rule

# Run Any Platform Specific Code and Apply the interface Re-map
    #   (may or may not perform a reboot depending on platform)
    device.vm.provision :shell , :inline => $script

end

  ##### DEFINE VM for leaf70 #####
  config.vm.define "leaf70" do |device|

    device.vm.hostname = "leaf70"

    device.vm.box = "CumulusCommunity/cumulus-vx"
    device.vm.box_version = "3.5.0"

    device.vm.provider :libvirt do |v|
      v.memory = 768
    end
    #   see note here: https://github.com/pradels/vagrant-libvirt#synced-folders
    device.vm.synced_folder ".", "/vagrant", disabled: true



    # NETWORK INTERFACES
      # link for eth0 --> oob-mgmt-switch2:swp24
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:0e",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10007',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8007',
            :libvirt__iface_name => 'eth0',
            auto_config: false
      # link for swp1 --> chassis01-lc3-1:swp6
      device.vm.network "private_network",
            :mac => "44:38:39:00:08:06",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '11027',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '9027',
            :libvirt__iface_name => 'swp1',
            auto_config: false
      # link for swp2 --> chassis02-lc3-1:swp6
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:56",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10171',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8171',
            :libvirt__iface_name => 'swp2',
            auto_config: false
      # link for swp3 --> chassis03-lc3-1:swp6
      device.vm.network "private_network",
            :mac => "44:38:39:00:09:1e",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '11167',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '9167',
            :libvirt__iface_name => 'swp3',
            auto_config: false
      # link for swp4 --> chassis04-lc3-1:swp6
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:b0",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10472',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8472',
            :libvirt__iface_name => 'swp4',
            auto_config: false



    # Fixes "stdin: is not a tty" and "mesg: ttyname failed : Inappropriate ioctl for device"  messages --> https://github.com/mitchellh/vagrant/issues/1673
    device.vm.provision :shell , inline: "(sudo grep -q 'mesg n' /root/.profile 2>/dev/null && sudo sed -i '/mesg n/d' /root/.profile  2>/dev/null) || true;", privileged: false

    #Copy over Topology.dot File
    device.vm.provision "file", source: "topology.dot", destination: "~/topology.dot"
    device.vm.provision :shell, privileged: false, inline: "sudo mv ~/topology.dot /etc/ptm.d/topology.dot"


    # Run the Config specified in the Node Attributes
    device.vm.provision :shell , privileged: false, :inline => 'echo "$(whoami)" > /tmp/normal_user'
    device.vm.provision :shell , path: "./helper_scripts/extra_switch_config.sh"


    # Install Rules for the interface re-map
    device.vm.provision :shell , :inline => <<-delete_udev_directory
if [ -d "/etc/udev/rules.d/70-persistent-net.rules" ]; then
    rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
fi
rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
delete_udev_directory

device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:0e --> eth0"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:0e", NAME="eth0", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:08:06 --> swp1"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:08:06", NAME="swp1", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:56 --> swp2"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:56", NAME="swp2", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:09:1e --> swp3"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:09:1e", NAME="swp3", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:b0 --> swp4"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:b0", NAME="swp4", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule

      device.vm.provision :shell , :inline => <<-vagrant_interface_rule
echo "  INFO: Adding UDEV Rule: Vagrant interface = vagrant"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{ifindex}=="2", NAME="vagrant", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
echo "#### UDEV Rules (/etc/udev/rules.d/70-persistent-net.rules) ####"
cat /etc/udev/rules.d/70-persistent-net.rules
vagrant_interface_rule

# Run Any Platform Specific Code and Apply the interface Re-map
    #   (may or may not perform a reboot depending on platform)
    device.vm.provision :shell , :inline => $script

end

  ##### DEFINE VM for leaf77 #####
  config.vm.define "leaf77" do |device|

    device.vm.hostname = "leaf77"

    device.vm.box = "CumulusCommunity/cumulus-vx"
    device.vm.box_version = "3.5.0"

    device.vm.provider :libvirt do |v|
      v.memory = 768
    end
    #   see note here: https://github.com/pradels/vagrant-libvirt#synced-folders
    device.vm.synced_folder ".", "/vagrant", disabled: true



    # NETWORK INTERFACES
      # link for eth0 --> oob-mgmt-switch2:swp31
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:40",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10416',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8416',
            :libvirt__iface_name => 'eth0',
            auto_config: false
      # link for swp1 --> chassis01-lc3-1:swp13
      device.vm.network "private_network",
            :mac => "44:38:39:00:06:ae",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10855',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8855',
            :libvirt__iface_name => 'swp1',
            auto_config: false
      # link for swp2 --> chassis02-lc3-1:swp13
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:1e",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10143',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8143',
            :libvirt__iface_name => 'swp2',
            auto_config: false
      # link for swp3 --> chassis03-lc3-1:swp13
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:e6",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10499',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8499',
            :libvirt__iface_name => 'swp3',
            auto_config: false
      # link for swp4 --> chassis04-lc3-1:swp13
      device.vm.network "private_network",
            :mac => "44:38:39:00:07:92",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10969',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8969',
            :libvirt__iface_name => 'swp4',
            auto_config: false



    # Fixes "stdin: is not a tty" and "mesg: ttyname failed : Inappropriate ioctl for device"  messages --> https://github.com/mitchellh/vagrant/issues/1673
    device.vm.provision :shell , inline: "(sudo grep -q 'mesg n' /root/.profile 2>/dev/null && sudo sed -i '/mesg n/d' /root/.profile  2>/dev/null) || true;", privileged: false

    #Copy over Topology.dot File
    device.vm.provision "file", source: "topology.dot", destination: "~/topology.dot"
    device.vm.provision :shell, privileged: false, inline: "sudo mv ~/topology.dot /etc/ptm.d/topology.dot"


    # Run the Config specified in the Node Attributes
    device.vm.provision :shell , privileged: false, :inline => 'echo "$(whoami)" > /tmp/normal_user'
    device.vm.provision :shell , path: "./helper_scripts/extra_switch_config.sh"


    # Install Rules for the interface re-map
    device.vm.provision :shell , :inline => <<-delete_udev_directory
if [ -d "/etc/udev/rules.d/70-persistent-net.rules" ]; then
    rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
fi
rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
delete_udev_directory

device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:40 --> eth0"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:40", NAME="eth0", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:06:ae --> swp1"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:06:ae", NAME="swp1", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:1e --> swp2"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:1e", NAME="swp2", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:e6 --> swp3"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:e6", NAME="swp3", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:07:92 --> swp4"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:07:92", NAME="swp4", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule

      device.vm.provision :shell , :inline => <<-vagrant_interface_rule
echo "  INFO: Adding UDEV Rule: Vagrant interface = vagrant"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{ifindex}=="2", NAME="vagrant", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
echo "#### UDEV Rules (/etc/udev/rules.d/70-persistent-net.rules) ####"
cat /etc/udev/rules.d/70-persistent-net.rules
vagrant_interface_rule

# Run Any Platform Specific Code and Apply the interface Re-map
    #   (may or may not perform a reboot depending on platform)
    device.vm.provision :shell , :inline => $script

end

  ##### DEFINE VM for leaf76 #####
  config.vm.define "leaf76" do |device|

    device.vm.hostname = "leaf76"

    device.vm.box = "CumulusCommunity/cumulus-vx"
    device.vm.box_version = "3.5.0"

    device.vm.provider :libvirt do |v|
      v.memory = 768
    end
    #   see note here: https://github.com/pradels/vagrant-libvirt#synced-folders
    device.vm.synced_folder ".", "/vagrant", disabled: true



    # NETWORK INTERFACES
      # link for eth0 --> oob-mgmt-switch2:swp30
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:bc",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10606',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8606',
            :libvirt__iface_name => 'eth0',
            auto_config: false
      # link for swp1 --> chassis01-lc3-1:swp12
      device.vm.network "private_network",
            :mac => "44:38:39:00:07:dc",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '11006',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '9006',
            :libvirt__iface_name => 'swp1',
            auto_config: false
      # link for swp2 --> chassis02-lc3-1:swp12
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:a2",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10465',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8465',
            :libvirt__iface_name => 'swp2',
            auto_config: false
      # link for swp3 --> chassis03-lc3-1:swp12
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:86",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10451',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8451',
            :libvirt__iface_name => 'swp3',
            auto_config: false
      # link for swp4 --> chassis04-lc3-1:swp12
      device.vm.network "private_network",
            :mac => "44:38:39:00:05:ee",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10759',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8759',
            :libvirt__iface_name => 'swp4',
            auto_config: false



    # Fixes "stdin: is not a tty" and "mesg: ttyname failed : Inappropriate ioctl for device"  messages --> https://github.com/mitchellh/vagrant/issues/1673
    device.vm.provision :shell , inline: "(sudo grep -q 'mesg n' /root/.profile 2>/dev/null && sudo sed -i '/mesg n/d' /root/.profile  2>/dev/null) || true;", privileged: false

    #Copy over Topology.dot File
    device.vm.provision "file", source: "topology.dot", destination: "~/topology.dot"
    device.vm.provision :shell, privileged: false, inline: "sudo mv ~/topology.dot /etc/ptm.d/topology.dot"


    # Run the Config specified in the Node Attributes
    device.vm.provision :shell , privileged: false, :inline => 'echo "$(whoami)" > /tmp/normal_user'
    device.vm.provision :shell , path: "./helper_scripts/extra_switch_config.sh"


    # Install Rules for the interface re-map
    device.vm.provision :shell , :inline => <<-delete_udev_directory
if [ -d "/etc/udev/rules.d/70-persistent-net.rules" ]; then
    rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
fi
rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
delete_udev_directory

device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:bc --> eth0"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:bc", NAME="eth0", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:07:dc --> swp1"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:07:dc", NAME="swp1", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:a2 --> swp2"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:a2", NAME="swp2", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:86 --> swp3"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:86", NAME="swp3", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:05:ee --> swp4"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:05:ee", NAME="swp4", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule

      device.vm.provision :shell , :inline => <<-vagrant_interface_rule
echo "  INFO: Adding UDEV Rule: Vagrant interface = vagrant"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{ifindex}=="2", NAME="vagrant", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
echo "#### UDEV Rules (/etc/udev/rules.d/70-persistent-net.rules) ####"
cat /etc/udev/rules.d/70-persistent-net.rules
vagrant_interface_rule

# Run Any Platform Specific Code and Apply the interface Re-map
    #   (may or may not perform a reboot depending on platform)
    device.vm.provision :shell , :inline => $script

end

  ##### DEFINE VM for leaf108 #####
  config.vm.define "leaf108" do |device|

    device.vm.hostname = "leaf108"

    device.vm.box = "CumulusCommunity/cumulus-vx"
    device.vm.box_version = "3.5.0"

    device.vm.provider :libvirt do |v|
      v.memory = 768
    end
    #   see note here: https://github.com/pradels/vagrant-libvirt#synced-folders
    device.vm.synced_folder ".", "/vagrant", disabled: true



    # NETWORK INTERFACES
      # link for eth0 --> oob-mgmt-switch3:swp14
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:9c",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10334',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8334',
            :libvirt__iface_name => 'eth0',
            auto_config: false
      # link for swp1 --> chassis01-lc4-1:swp12
      device.vm.network "private_network",
            :mac => "44:38:39:00:07:fa",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '11021',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '9021',
            :libvirt__iface_name => 'swp1',
            auto_config: false
      # link for swp2 --> chassis02-lc4-1:swp12
      device.vm.network "private_network",
            :mac => "44:38:39:00:08:46",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '11059',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '9059',
            :libvirt__iface_name => 'swp2',
            auto_config: false
      # link for swp3 --> chassis03-lc4-1:swp12
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:b4",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10474',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8474',
            :libvirt__iface_name => 'swp3',
            auto_config: false
      # link for swp4 --> chassis04-lc4-1:swp12
      device.vm.network "private_network",
            :mac => "44:38:39:00:05:b2",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10729',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8729',
            :libvirt__iface_name => 'swp4',
            auto_config: false



    # Fixes "stdin: is not a tty" and "mesg: ttyname failed : Inappropriate ioctl for device"  messages --> https://github.com/mitchellh/vagrant/issues/1673
    device.vm.provision :shell , inline: "(sudo grep -q 'mesg n' /root/.profile 2>/dev/null && sudo sed -i '/mesg n/d' /root/.profile  2>/dev/null) || true;", privileged: false

    #Copy over Topology.dot File
    device.vm.provision "file", source: "topology.dot", destination: "~/topology.dot"
    device.vm.provision :shell, privileged: false, inline: "sudo mv ~/topology.dot /etc/ptm.d/topology.dot"


    # Run the Config specified in the Node Attributes
    device.vm.provision :shell , privileged: false, :inline => 'echo "$(whoami)" > /tmp/normal_user'
    device.vm.provision :shell , path: "./helper_scripts/extra_switch_config.sh"


    # Install Rules for the interface re-map
    device.vm.provision :shell , :inline => <<-delete_udev_directory
if [ -d "/etc/udev/rules.d/70-persistent-net.rules" ]; then
    rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
fi
rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
delete_udev_directory

device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:9c --> eth0"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:9c", NAME="eth0", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:07:fa --> swp1"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:07:fa", NAME="swp1", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:08:46 --> swp2"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:08:46", NAME="swp2", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:b4 --> swp3"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:b4", NAME="swp3", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:05:b2 --> swp4"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:05:b2", NAME="swp4", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule

      device.vm.provision :shell , :inline => <<-vagrant_interface_rule
echo "  INFO: Adding UDEV Rule: Vagrant interface = vagrant"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{ifindex}=="2", NAME="vagrant", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
echo "#### UDEV Rules (/etc/udev/rules.d/70-persistent-net.rules) ####"
cat /etc/udev/rules.d/70-persistent-net.rules
vagrant_interface_rule

# Run Any Platform Specific Code and Apply the interface Re-map
    #   (may or may not perform a reboot depending on platform)
    device.vm.provision :shell , :inline => $script

end

  ##### DEFINE VM for leaf109 #####
  config.vm.define "leaf109" do |device|

    device.vm.hostname = "leaf109"

    device.vm.box = "CumulusCommunity/cumulus-vx"
    device.vm.box_version = "3.5.0"

    device.vm.provider :libvirt do |v|
      v.memory = 768
    end
    #   see note here: https://github.com/pradels/vagrant-libvirt#synced-folders
    device.vm.synced_folder ".", "/vagrant", disabled: true



    # NETWORK INTERFACES
      # link for eth0 --> oob-mgmt-switch3:swp15
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:da",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10493',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8493',
            :libvirt__iface_name => 'eth0',
            auto_config: false
      # link for swp1 --> chassis01-lc4-1:swp13
      device.vm.network "private_network",
            :mac => "44:38:39:00:09:3c",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '11182',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '9182',
            :libvirt__iface_name => 'swp1',
            auto_config: false
      # link for swp2 --> chassis02-lc4-1:swp13
      device.vm.network "private_network",
            :mac => "44:38:39:00:05:98",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10716',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8716',
            :libvirt__iface_name => 'swp2',
            auto_config: false
      # link for swp3 --> chassis03-lc4-1:swp13
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:0c",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10006',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8006',
            :libvirt__iface_name => 'swp3',
            auto_config: false
      # link for swp4 --> chassis04-lc4-1:swp13
      device.vm.network "private_network",
            :mac => "44:38:39:00:07:c4",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10994',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8994',
            :libvirt__iface_name => 'swp4',
            auto_config: false



    # Fixes "stdin: is not a tty" and "mesg: ttyname failed : Inappropriate ioctl for device"  messages --> https://github.com/mitchellh/vagrant/issues/1673
    device.vm.provision :shell , inline: "(sudo grep -q 'mesg n' /root/.profile 2>/dev/null && sudo sed -i '/mesg n/d' /root/.profile  2>/dev/null) || true;", privileged: false

    #Copy over Topology.dot File
    device.vm.provision "file", source: "topology.dot", destination: "~/topology.dot"
    device.vm.provision :shell, privileged: false, inline: "sudo mv ~/topology.dot /etc/ptm.d/topology.dot"


    # Run the Config specified in the Node Attributes
    device.vm.provision :shell , privileged: false, :inline => 'echo "$(whoami)" > /tmp/normal_user'
    device.vm.provision :shell , path: "./helper_scripts/extra_switch_config.sh"


    # Install Rules for the interface re-map
    device.vm.provision :shell , :inline => <<-delete_udev_directory
if [ -d "/etc/udev/rules.d/70-persistent-net.rules" ]; then
    rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
fi
rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
delete_udev_directory

device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:da --> eth0"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:da", NAME="eth0", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:09:3c --> swp1"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:09:3c", NAME="swp1", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:05:98 --> swp2"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:05:98", NAME="swp2", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:0c --> swp3"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:0c", NAME="swp3", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:07:c4 --> swp4"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:07:c4", NAME="swp4", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule

      device.vm.provision :shell , :inline => <<-vagrant_interface_rule
echo "  INFO: Adding UDEV Rule: Vagrant interface = vagrant"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{ifindex}=="2", NAME="vagrant", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
echo "#### UDEV Rules (/etc/udev/rules.d/70-persistent-net.rules) ####"
cat /etc/udev/rules.d/70-persistent-net.rules
vagrant_interface_rule

# Run Any Platform Specific Code and Apply the interface Re-map
    #   (may or may not perform a reboot depending on platform)
    device.vm.provision :shell , :inline => $script

end

  ##### DEFINE VM for leaf106 #####
  config.vm.define "leaf106" do |device|

    device.vm.hostname = "leaf106"

    device.vm.box = "CumulusCommunity/cumulus-vx"
    device.vm.box_version = "3.5.0"

    device.vm.provider :libvirt do |v|
      v.memory = 768
    end
    #   see note here: https://github.com/pradels/vagrant-libvirt#synced-folders
    device.vm.synced_folder ".", "/vagrant", disabled: true



    # NETWORK INTERFACES
      # link for eth0 --> oob-mgmt-switch3:swp12
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:50",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10168',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8168',
            :libvirt__iface_name => 'eth0',
            auto_config: false
      # link for swp1 --> chassis01-lc4-1:swp10
      device.vm.network "private_network",
            :mac => "44:38:39:00:08:a8",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '11108',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '9108',
            :libvirt__iface_name => 'swp1',
            auto_config: false
      # link for swp2 --> chassis02-lc4-1:swp10
      device.vm.network "private_network",
            :mac => "44:38:39:00:08:b8",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '11116',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '9116',
            :libvirt__iface_name => 'swp2',
            auto_config: false
      # link for swp3 --> chassis03-lc4-1:swp10
      device.vm.network "private_network",
            :mac => "44:38:39:00:08:f8",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '11148',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '9148',
            :libvirt__iface_name => 'swp3',
            auto_config: false
      # link for swp4 --> chassis04-lc4-1:swp10
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:de",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10495',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8495',
            :libvirt__iface_name => 'swp4',
            auto_config: false



    # Fixes "stdin: is not a tty" and "mesg: ttyname failed : Inappropriate ioctl for device"  messages --> https://github.com/mitchellh/vagrant/issues/1673
    device.vm.provision :shell , inline: "(sudo grep -q 'mesg n' /root/.profile 2>/dev/null && sudo sed -i '/mesg n/d' /root/.profile  2>/dev/null) || true;", privileged: false

    #Copy over Topology.dot File
    device.vm.provision "file", source: "topology.dot", destination: "~/topology.dot"
    device.vm.provision :shell, privileged: false, inline: "sudo mv ~/topology.dot /etc/ptm.d/topology.dot"


    # Run the Config specified in the Node Attributes
    device.vm.provision :shell , privileged: false, :inline => 'echo "$(whoami)" > /tmp/normal_user'
    device.vm.provision :shell , path: "./helper_scripts/extra_switch_config.sh"


    # Install Rules for the interface re-map
    device.vm.provision :shell , :inline => <<-delete_udev_directory
if [ -d "/etc/udev/rules.d/70-persistent-net.rules" ]; then
    rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
fi
rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
delete_udev_directory

device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:50 --> eth0"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:50", NAME="eth0", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:08:a8 --> swp1"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:08:a8", NAME="swp1", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:08:b8 --> swp2"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:08:b8", NAME="swp2", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:08:f8 --> swp3"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:08:f8", NAME="swp3", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:de --> swp4"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:de", NAME="swp4", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule

      device.vm.provision :shell , :inline => <<-vagrant_interface_rule
echo "  INFO: Adding UDEV Rule: Vagrant interface = vagrant"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{ifindex}=="2", NAME="vagrant", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
echo "#### UDEV Rules (/etc/udev/rules.d/70-persistent-net.rules) ####"
cat /etc/udev/rules.d/70-persistent-net.rules
vagrant_interface_rule

# Run Any Platform Specific Code and Apply the interface Re-map
    #   (may or may not perform a reboot depending on platform)
    device.vm.provision :shell , :inline => $script

end

  ##### DEFINE VM for leaf107 #####
  config.vm.define "leaf107" do |device|

    device.vm.hostname = "leaf107"

    device.vm.box = "CumulusCommunity/cumulus-vx"
    device.vm.box_version = "3.5.0"

    device.vm.provider :libvirt do |v|
      v.memory = 768
    end
    #   see note here: https://github.com/pradels/vagrant-libvirt#synced-folders
    device.vm.synced_folder ".", "/vagrant", disabled: true



    # NETWORK INTERFACES
      # link for eth0 --> oob-mgmt-switch3:swp13
      device.vm.network "private_network",
            :mac => "44:38:39:00:09:12",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '11161',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '9161',
            :libvirt__iface_name => 'eth0',
            auto_config: false
      # link for swp1 --> chassis01-lc4-1:swp11
      device.vm.network "private_network",
            :mac => "44:38:39:00:08:66",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '11075',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '9075',
            :libvirt__iface_name => 'swp1',
            auto_config: false
      # link for swp2 --> chassis02-lc4-1:swp11
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:fc",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10254',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8254',
            :libvirt__iface_name => 'swp2',
            auto_config: false
      # link for swp3 --> chassis03-lc4-1:swp11
      device.vm.network "private_network",
            :mac => "44:38:39:00:06:d6",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10875',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8875',
            :libvirt__iface_name => 'swp3',
            auto_config: false
      # link for swp4 --> chassis04-lc4-1:swp11
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:96",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10459',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8459',
            :libvirt__iface_name => 'swp4',
            auto_config: false



    # Fixes "stdin: is not a tty" and "mesg: ttyname failed : Inappropriate ioctl for device"  messages --> https://github.com/mitchellh/vagrant/issues/1673
    device.vm.provision :shell , inline: "(sudo grep -q 'mesg n' /root/.profile 2>/dev/null && sudo sed -i '/mesg n/d' /root/.profile  2>/dev/null) || true;", privileged: false

    #Copy over Topology.dot File
    device.vm.provision "file", source: "topology.dot", destination: "~/topology.dot"
    device.vm.provision :shell, privileged: false, inline: "sudo mv ~/topology.dot /etc/ptm.d/topology.dot"


    # Run the Config specified in the Node Attributes
    device.vm.provision :shell , privileged: false, :inline => 'echo "$(whoami)" > /tmp/normal_user'
    device.vm.provision :shell , path: "./helper_scripts/extra_switch_config.sh"


    # Install Rules for the interface re-map
    device.vm.provision :shell , :inline => <<-delete_udev_directory
if [ -d "/etc/udev/rules.d/70-persistent-net.rules" ]; then
    rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
fi
rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
delete_udev_directory

device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:09:12 --> eth0"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:09:12", NAME="eth0", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:08:66 --> swp1"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:08:66", NAME="swp1", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:fc --> swp2"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:fc", NAME="swp2", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:06:d6 --> swp3"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:06:d6", NAME="swp3", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:96 --> swp4"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:96", NAME="swp4", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule

      device.vm.provision :shell , :inline => <<-vagrant_interface_rule
echo "  INFO: Adding UDEV Rule: Vagrant interface = vagrant"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{ifindex}=="2", NAME="vagrant", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
echo "#### UDEV Rules (/etc/udev/rules.d/70-persistent-net.rules) ####"
cat /etc/udev/rules.d/70-persistent-net.rules
vagrant_interface_rule

# Run Any Platform Specific Code and Apply the interface Re-map
    #   (may or may not perform a reboot depending on platform)
    device.vm.provision :shell , :inline => $script

end

  ##### DEFINE VM for leaf104 #####
  config.vm.define "leaf104" do |device|

    device.vm.hostname = "leaf104"

    device.vm.box = "CumulusCommunity/cumulus-vx"
    device.vm.box_version = "3.5.0"

    device.vm.provider :libvirt do |v|
      v.memory = 768
    end
    #   see note here: https://github.com/pradels/vagrant-libvirt#synced-folders
    device.vm.synced_folder ".", "/vagrant", disabled: true



    # NETWORK INTERFACES
      # link for eth0 --> oob-mgmt-switch3:swp10
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:18",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10140',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8140',
            :libvirt__iface_name => 'eth0',
            auto_config: false
      # link for swp1 --> chassis01-lc4-1:swp8
      device.vm.network "private_network",
            :mac => "44:38:39:00:08:36",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '11051',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '9051',
            :libvirt__iface_name => 'swp1',
            auto_config: false
      # link for swp2 --> chassis02-lc4-1:swp8
      device.vm.network "private_network",
            :mac => "44:38:39:00:07:8a",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10965',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8965',
            :libvirt__iface_name => 'swp2',
            auto_config: false
      # link for swp3 --> chassis03-lc4-1:swp8
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:72",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10569',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8569',
            :libvirt__iface_name => 'swp3',
            auto_config: false
      # link for swp4 --> chassis04-lc4-1:swp8
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:84",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10194',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8194',
            :libvirt__iface_name => 'swp4',
            auto_config: false



    # Fixes "stdin: is not a tty" and "mesg: ttyname failed : Inappropriate ioctl for device"  messages --> https://github.com/mitchellh/vagrant/issues/1673
    device.vm.provision :shell , inline: "(sudo grep -q 'mesg n' /root/.profile 2>/dev/null && sudo sed -i '/mesg n/d' /root/.profile  2>/dev/null) || true;", privileged: false

    #Copy over Topology.dot File
    device.vm.provision "file", source: "topology.dot", destination: "~/topology.dot"
    device.vm.provision :shell, privileged: false, inline: "sudo mv ~/topology.dot /etc/ptm.d/topology.dot"


    # Run the Config specified in the Node Attributes
    device.vm.provision :shell , privileged: false, :inline => 'echo "$(whoami)" > /tmp/normal_user'
    device.vm.provision :shell , path: "./helper_scripts/extra_switch_config.sh"


    # Install Rules for the interface re-map
    device.vm.provision :shell , :inline => <<-delete_udev_directory
if [ -d "/etc/udev/rules.d/70-persistent-net.rules" ]; then
    rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
fi
rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
delete_udev_directory

device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:18 --> eth0"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:18", NAME="eth0", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:08:36 --> swp1"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:08:36", NAME="swp1", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:07:8a --> swp2"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:07:8a", NAME="swp2", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:72 --> swp3"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:72", NAME="swp3", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:84 --> swp4"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:84", NAME="swp4", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule

      device.vm.provision :shell , :inline => <<-vagrant_interface_rule
echo "  INFO: Adding UDEV Rule: Vagrant interface = vagrant"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{ifindex}=="2", NAME="vagrant", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
echo "#### UDEV Rules (/etc/udev/rules.d/70-persistent-net.rules) ####"
cat /etc/udev/rules.d/70-persistent-net.rules
vagrant_interface_rule

# Run Any Platform Specific Code and Apply the interface Re-map
    #   (may or may not perform a reboot depending on platform)
    device.vm.provision :shell , :inline => $script

end

  ##### DEFINE VM for leaf105 #####
  config.vm.define "leaf105" do |device|

    device.vm.hostname = "leaf105"

    device.vm.box = "CumulusCommunity/cumulus-vx"
    device.vm.box_version = "3.5.0"

    device.vm.provider :libvirt do |v|
      v.memory = 768
    end
    #   see note here: https://github.com/pradels/vagrant-libvirt#synced-folders
    device.vm.synced_folder ".", "/vagrant", disabled: true



    # NETWORK INTERFACES
      # link for eth0 --> oob-mgmt-switch3:swp11
      device.vm.network "private_network",
            :mac => "44:38:39:00:05:c6",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10739',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8739',
            :libvirt__iface_name => 'eth0',
            auto_config: false
      # link for swp1 --> chassis01-lc4-1:swp9
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:60",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10176',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8176',
            :libvirt__iface_name => 'swp1',
            auto_config: false
      # link for swp2 --> chassis02-lc4-1:swp9
      device.vm.network "private_network",
            :mac => "44:38:39:00:08:9a",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '11101',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '9101',
            :libvirt__iface_name => 'swp2',
            auto_config: false
      # link for swp3 --> chassis03-lc4-1:swp9
      device.vm.network "private_network",
            :mac => "44:38:39:00:05:04",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10642',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8642',
            :libvirt__iface_name => 'swp3',
            auto_config: false
      # link for swp4 --> chassis04-lc4-1:swp9
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:2e",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10535',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8535',
            :libvirt__iface_name => 'swp4',
            auto_config: false



    # Fixes "stdin: is not a tty" and "mesg: ttyname failed : Inappropriate ioctl for device"  messages --> https://github.com/mitchellh/vagrant/issues/1673
    device.vm.provision :shell , inline: "(sudo grep -q 'mesg n' /root/.profile 2>/dev/null && sudo sed -i '/mesg n/d' /root/.profile  2>/dev/null) || true;", privileged: false

    #Copy over Topology.dot File
    device.vm.provision "file", source: "topology.dot", destination: "~/topology.dot"
    device.vm.provision :shell, privileged: false, inline: "sudo mv ~/topology.dot /etc/ptm.d/topology.dot"


    # Run the Config specified in the Node Attributes
    device.vm.provision :shell , privileged: false, :inline => 'echo "$(whoami)" > /tmp/normal_user'
    device.vm.provision :shell , path: "./helper_scripts/extra_switch_config.sh"


    # Install Rules for the interface re-map
    device.vm.provision :shell , :inline => <<-delete_udev_directory
if [ -d "/etc/udev/rules.d/70-persistent-net.rules" ]; then
    rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
fi
rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
delete_udev_directory

device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:05:c6 --> eth0"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:05:c6", NAME="eth0", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:60 --> swp1"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:60", NAME="swp1", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:08:9a --> swp2"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:08:9a", NAME="swp2", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:05:04 --> swp3"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:05:04", NAME="swp3", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:2e --> swp4"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:2e", NAME="swp4", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule

      device.vm.provision :shell , :inline => <<-vagrant_interface_rule
echo "  INFO: Adding UDEV Rule: Vagrant interface = vagrant"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{ifindex}=="2", NAME="vagrant", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
echo "#### UDEV Rules (/etc/udev/rules.d/70-persistent-net.rules) ####"
cat /etc/udev/rules.d/70-persistent-net.rules
vagrant_interface_rule

# Run Any Platform Specific Code and Apply the interface Re-map
    #   (may or may not perform a reboot depending on platform)
    device.vm.provision :shell , :inline => $script

end

  ##### DEFINE VM for leaf102 #####
  config.vm.define "leaf102" do |device|

    device.vm.hostname = "leaf102"

    device.vm.box = "CumulusCommunity/cumulus-vx"
    device.vm.box_version = "3.5.0"

    device.vm.provider :libvirt do |v|
      v.memory = 768
    end
    #   see note here: https://github.com/pradels/vagrant-libvirt#synced-folders
    device.vm.synced_folder ".", "/vagrant", disabled: true



    # NETWORK INTERFACES
      # link for eth0 --> oob-mgmt-switch3:swp8
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:c2",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10353',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8353',
            :libvirt__iface_name => 'eth0',
            auto_config: false
      # link for swp1 --> chassis01-lc4-1:swp6
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:12",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10009',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8009',
            :libvirt__iface_name => 'swp1',
            auto_config: false
      # link for swp2 --> chassis02-lc4-1:swp6
      device.vm.network "private_network",
            :mac => "44:38:39:00:07:24",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10914',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8914',
            :libvirt__iface_name => 'swp2',
            auto_config: false
      # link for swp3 --> chassis03-lc4-1:swp6
      device.vm.network "private_network",
            :mac => "44:38:39:00:05:36",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10667',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8667',
            :libvirt__iface_name => 'swp3',
            auto_config: false
      # link for swp4 --> chassis04-lc4-1:swp6
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:4c",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10038',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8038',
            :libvirt__iface_name => 'swp4',
            auto_config: false



    # Fixes "stdin: is not a tty" and "mesg: ttyname failed : Inappropriate ioctl for device"  messages --> https://github.com/mitchellh/vagrant/issues/1673
    device.vm.provision :shell , inline: "(sudo grep -q 'mesg n' /root/.profile 2>/dev/null && sudo sed -i '/mesg n/d' /root/.profile  2>/dev/null) || true;", privileged: false

    #Copy over Topology.dot File
    device.vm.provision "file", source: "topology.dot", destination: "~/topology.dot"
    device.vm.provision :shell, privileged: false, inline: "sudo mv ~/topology.dot /etc/ptm.d/topology.dot"


    # Run the Config specified in the Node Attributes
    device.vm.provision :shell , privileged: false, :inline => 'echo "$(whoami)" > /tmp/normal_user'
    device.vm.provision :shell , path: "./helper_scripts/extra_switch_config.sh"


    # Install Rules for the interface re-map
    device.vm.provision :shell , :inline => <<-delete_udev_directory
if [ -d "/etc/udev/rules.d/70-persistent-net.rules" ]; then
    rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
fi
rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
delete_udev_directory

device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:c2 --> eth0"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:c2", NAME="eth0", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:12 --> swp1"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:12", NAME="swp1", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:07:24 --> swp2"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:07:24", NAME="swp2", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:05:36 --> swp3"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:05:36", NAME="swp3", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:4c --> swp4"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:4c", NAME="swp4", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule

      device.vm.provision :shell , :inline => <<-vagrant_interface_rule
echo "  INFO: Adding UDEV Rule: Vagrant interface = vagrant"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{ifindex}=="2", NAME="vagrant", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
echo "#### UDEV Rules (/etc/udev/rules.d/70-persistent-net.rules) ####"
cat /etc/udev/rules.d/70-persistent-net.rules
vagrant_interface_rule

# Run Any Platform Specific Code and Apply the interface Re-map
    #   (may or may not perform a reboot depending on platform)
    device.vm.provision :shell , :inline => $script

end

  ##### DEFINE VM for leaf103 #####
  config.vm.define "leaf103" do |device|

    device.vm.hostname = "leaf103"

    device.vm.box = "CumulusCommunity/cumulus-vx"
    device.vm.box_version = "3.5.0"

    device.vm.provider :libvirt do |v|
      v.memory = 768
    end
    #   see note here: https://github.com/pradels/vagrant-libvirt#synced-folders
    device.vm.synced_folder ".", "/vagrant", disabled: true



    # NETWORK INTERFACES
      # link for eth0 --> oob-mgmt-switch3:swp9
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:38",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10284',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8284',
            :libvirt__iface_name => 'eth0',
            auto_config: false
      # link for swp1 --> chassis01-lc4-1:swp7
      device.vm.network "private_network",
            :mac => "44:38:39:00:06:5e",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10815',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8815',
            :libvirt__iface_name => 'swp1',
            auto_config: false
      # link for swp2 --> chassis02-lc4-1:swp7
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:f2",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10505',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8505',
            :libvirt__iface_name => 'swp2',
            auto_config: false
      # link for swp3 --> chassis03-lc4-1:swp7
      device.vm.network "private_network",
            :mac => "44:38:39:00:08:ca",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '11125',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '9125',
            :libvirt__iface_name => 'swp3',
            auto_config: false
      # link for swp4 --> chassis04-lc4-1:swp7
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:66",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10435',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8435',
            :libvirt__iface_name => 'swp4',
            auto_config: false



    # Fixes "stdin: is not a tty" and "mesg: ttyname failed : Inappropriate ioctl for device"  messages --> https://github.com/mitchellh/vagrant/issues/1673
    device.vm.provision :shell , inline: "(sudo grep -q 'mesg n' /root/.profile 2>/dev/null && sudo sed -i '/mesg n/d' /root/.profile  2>/dev/null) || true;", privileged: false

    #Copy over Topology.dot File
    device.vm.provision "file", source: "topology.dot", destination: "~/topology.dot"
    device.vm.provision :shell, privileged: false, inline: "sudo mv ~/topology.dot /etc/ptm.d/topology.dot"


    # Run the Config specified in the Node Attributes
    device.vm.provision :shell , privileged: false, :inline => 'echo "$(whoami)" > /tmp/normal_user'
    device.vm.provision :shell , path: "./helper_scripts/extra_switch_config.sh"


    # Install Rules for the interface re-map
    device.vm.provision :shell , :inline => <<-delete_udev_directory
if [ -d "/etc/udev/rules.d/70-persistent-net.rules" ]; then
    rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
fi
rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
delete_udev_directory

device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:38 --> eth0"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:38", NAME="eth0", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:06:5e --> swp1"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:06:5e", NAME="swp1", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:f2 --> swp2"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:f2", NAME="swp2", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:08:ca --> swp3"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:08:ca", NAME="swp3", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:66 --> swp4"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:66", NAME="swp4", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule

      device.vm.provision :shell , :inline => <<-vagrant_interface_rule
echo "  INFO: Adding UDEV Rule: Vagrant interface = vagrant"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{ifindex}=="2", NAME="vagrant", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
echo "#### UDEV Rules (/etc/udev/rules.d/70-persistent-net.rules) ####"
cat /etc/udev/rules.d/70-persistent-net.rules
vagrant_interface_rule

# Run Any Platform Specific Code and Apply the interface Re-map
    #   (may or may not perform a reboot depending on platform)
    device.vm.provision :shell , :inline => $script

end

  ##### DEFINE VM for leaf100 #####
  config.vm.define "leaf100" do |device|

    device.vm.hostname = "leaf100"

    device.vm.box = "CumulusCommunity/cumulus-vx"
    device.vm.box_version = "3.5.0"

    device.vm.provider :libvirt do |v|
      v.memory = 768
    end
    #   see note here: https://github.com/pradels/vagrant-libvirt#synced-folders
    device.vm.synced_folder ".", "/vagrant", disabled: true



    # NETWORK INTERFACES
      # link for eth0 --> oob-mgmt-switch3:swp6
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:4c",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10550',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8550',
            :libvirt__iface_name => 'eth0',
            auto_config: false
      # link for swp1 --> chassis01-lc4-1:swp4
      device.vm.network "private_network",
            :mac => "44:38:39:00:06:da",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10877',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8877',
            :libvirt__iface_name => 'swp1',
            auto_config: false
      # link for swp2 --> chassis02-lc4-1:swp4
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:cc",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10102',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8102',
            :libvirt__iface_name => 'swp2',
            auto_config: false
      # link for swp3 --> chassis03-lc4-1:swp4
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:b4",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10090',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8090',
            :libvirt__iface_name => 'swp3',
            auto_config: false
      # link for swp4 --> chassis04-lc4-1:swp4
      device.vm.network "private_network",
            :mac => "44:38:39:00:05:60",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10688',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8688',
            :libvirt__iface_name => 'swp4',
            auto_config: false



    # Fixes "stdin: is not a tty" and "mesg: ttyname failed : Inappropriate ioctl for device"  messages --> https://github.com/mitchellh/vagrant/issues/1673
    device.vm.provision :shell , inline: "(sudo grep -q 'mesg n' /root/.profile 2>/dev/null && sudo sed -i '/mesg n/d' /root/.profile  2>/dev/null) || true;", privileged: false

    #Copy over Topology.dot File
    device.vm.provision "file", source: "topology.dot", destination: "~/topology.dot"
    device.vm.provision :shell, privileged: false, inline: "sudo mv ~/topology.dot /etc/ptm.d/topology.dot"


    # Run the Config specified in the Node Attributes
    device.vm.provision :shell , privileged: false, :inline => 'echo "$(whoami)" > /tmp/normal_user'
    device.vm.provision :shell , path: "./helper_scripts/extra_switch_config.sh"


    # Install Rules for the interface re-map
    device.vm.provision :shell , :inline => <<-delete_udev_directory
if [ -d "/etc/udev/rules.d/70-persistent-net.rules" ]; then
    rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
fi
rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
delete_udev_directory

device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:4c --> eth0"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:4c", NAME="eth0", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:06:da --> swp1"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:06:da", NAME="swp1", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:cc --> swp2"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:cc", NAME="swp2", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:b4 --> swp3"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:b4", NAME="swp3", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:05:60 --> swp4"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:05:60", NAME="swp4", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule

      device.vm.provision :shell , :inline => <<-vagrant_interface_rule
echo "  INFO: Adding UDEV Rule: Vagrant interface = vagrant"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{ifindex}=="2", NAME="vagrant", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
echo "#### UDEV Rules (/etc/udev/rules.d/70-persistent-net.rules) ####"
cat /etc/udev/rules.d/70-persistent-net.rules
vagrant_interface_rule

# Run Any Platform Specific Code and Apply the interface Re-map
    #   (may or may not perform a reboot depending on platform)
    device.vm.provision :shell , :inline => $script

end

  ##### DEFINE VM for leaf101 #####
  config.vm.define "leaf101" do |device|

    device.vm.hostname = "leaf101"

    device.vm.box = "CumulusCommunity/cumulus-vx"
    device.vm.box_version = "3.5.0"

    device.vm.provider :libvirt do |v|
      v.memory = 768
    end
    #   see note here: https://github.com/pradels/vagrant-libvirt#synced-folders
    device.vm.synced_folder ".", "/vagrant", disabled: true



    # NETWORK INTERFACES
      # link for eth0 --> oob-mgmt-switch3:swp7
      device.vm.network "private_network",
            :mac => "44:38:39:00:06:0e",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10775',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8775',
            :libvirt__iface_name => 'eth0',
            auto_config: false
      # link for swp1 --> chassis01-lc4-1:swp5
      device.vm.network "private_network",
            :mac => "44:38:39:00:07:bc",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10990',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8990',
            :libvirt__iface_name => 'swp1',
            auto_config: false
      # link for swp2 --> chassis02-lc4-1:swp5
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:d8",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10236',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8236',
            :libvirt__iface_name => 'swp2',
            auto_config: false
      # link for swp3 --> chassis03-lc4-1:swp5
      device.vm.network "private_network",
            :mac => "44:38:39:00:07:88",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10964',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8964',
            :libvirt__iface_name => 'swp3',
            auto_config: false
      # link for swp4 --> chassis04-lc4-1:swp5
      device.vm.network "private_network",
            :mac => "44:38:39:00:06:84",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10834',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8834',
            :libvirt__iface_name => 'swp4',
            auto_config: false



    # Fixes "stdin: is not a tty" and "mesg: ttyname failed : Inappropriate ioctl for device"  messages --> https://github.com/mitchellh/vagrant/issues/1673
    device.vm.provision :shell , inline: "(sudo grep -q 'mesg n' /root/.profile 2>/dev/null && sudo sed -i '/mesg n/d' /root/.profile  2>/dev/null) || true;", privileged: false

    #Copy over Topology.dot File
    device.vm.provision "file", source: "topology.dot", destination: "~/topology.dot"
    device.vm.provision :shell, privileged: false, inline: "sudo mv ~/topology.dot /etc/ptm.d/topology.dot"


    # Run the Config specified in the Node Attributes
    device.vm.provision :shell , privileged: false, :inline => 'echo "$(whoami)" > /tmp/normal_user'
    device.vm.provision :shell , path: "./helper_scripts/extra_switch_config.sh"


    # Install Rules for the interface re-map
    device.vm.provision :shell , :inline => <<-delete_udev_directory
if [ -d "/etc/udev/rules.d/70-persistent-net.rules" ]; then
    rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
fi
rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
delete_udev_directory

device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:06:0e --> eth0"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:06:0e", NAME="eth0", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:07:bc --> swp1"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:07:bc", NAME="swp1", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:d8 --> swp2"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:d8", NAME="swp2", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:07:88 --> swp3"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:07:88", NAME="swp3", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:06:84 --> swp4"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:06:84", NAME="swp4", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule

      device.vm.provision :shell , :inline => <<-vagrant_interface_rule
echo "  INFO: Adding UDEV Rule: Vagrant interface = vagrant"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{ifindex}=="2", NAME="vagrant", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
echo "#### UDEV Rules (/etc/udev/rules.d/70-persistent-net.rules) ####"
cat /etc/udev/rules.d/70-persistent-net.rules
vagrant_interface_rule

# Run Any Platform Specific Code and Apply the interface Re-map
    #   (may or may not perform a reboot depending on platform)
    device.vm.provision :shell , :inline => $script

end

  ##### DEFINE VM for leaf15 #####
  config.vm.define "leaf15" do |device|

    device.vm.hostname = "leaf15"

    device.vm.box = "CumulusCommunity/cumulus-vx"
    device.vm.box_version = "3.5.0"

    device.vm.provider :libvirt do |v|
      v.memory = 768
    end
    #   see note here: https://github.com/pradels/vagrant-libvirt#synced-folders
    device.vm.synced_folder ".", "/vagrant", disabled: true



    # NETWORK INTERFACES
      # link for eth0 --> oob-mgmt-switch1:swp17
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:b6",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10219',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8219',
            :libvirt__iface_name => 'eth0',
            auto_config: false
      # link for swp1 --> chassis01-lc1-1:swp15
      device.vm.network "private_network",
            :mac => "44:38:39:00:08:a2",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '11105',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '9105',
            :libvirt__iface_name => 'swp1',
            auto_config: false
      # link for swp2 --> chassis02-lc1-1:swp15
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:d0",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10616',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8616',
            :libvirt__iface_name => 'swp2',
            auto_config: false
      # link for swp3 --> chassis03-lc1-1:swp15
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:1c",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10142',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8142',
            :libvirt__iface_name => 'swp3',
            auto_config: false
      # link for swp4 --> chassis04-lc1-1:swp15
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:3a",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10157',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8157',
            :libvirt__iface_name => 'swp4',
            auto_config: false



    # Fixes "stdin: is not a tty" and "mesg: ttyname failed : Inappropriate ioctl for device"  messages --> https://github.com/mitchellh/vagrant/issues/1673
    device.vm.provision :shell , inline: "(sudo grep -q 'mesg n' /root/.profile 2>/dev/null && sudo sed -i '/mesg n/d' /root/.profile  2>/dev/null) || true;", privileged: false

    #Copy over Topology.dot File
    device.vm.provision "file", source: "topology.dot", destination: "~/topology.dot"
    device.vm.provision :shell, privileged: false, inline: "sudo mv ~/topology.dot /etc/ptm.d/topology.dot"


    # Run the Config specified in the Node Attributes
    device.vm.provision :shell , privileged: false, :inline => 'echo "$(whoami)" > /tmp/normal_user'
    device.vm.provision :shell , path: "./helper_scripts/extra_switch_config.sh"


    # Install Rules for the interface re-map
    device.vm.provision :shell , :inline => <<-delete_udev_directory
if [ -d "/etc/udev/rules.d/70-persistent-net.rules" ]; then
    rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
fi
rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
delete_udev_directory

device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:b6 --> eth0"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:b6", NAME="eth0", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:08:a2 --> swp1"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:08:a2", NAME="swp1", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:d0 --> swp2"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:d0", NAME="swp2", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:1c --> swp3"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:1c", NAME="swp3", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:3a --> swp4"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:3a", NAME="swp4", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule

      device.vm.provision :shell , :inline => <<-vagrant_interface_rule
echo "  INFO: Adding UDEV Rule: Vagrant interface = vagrant"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{ifindex}=="2", NAME="vagrant", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
echo "#### UDEV Rules (/etc/udev/rules.d/70-persistent-net.rules) ####"
cat /etc/udev/rules.d/70-persistent-net.rules
vagrant_interface_rule

# Run Any Platform Specific Code and Apply the interface Re-map
    #   (may or may not perform a reboot depending on platform)
    device.vm.provision :shell , :inline => $script

end

  ##### DEFINE VM for leaf14 #####
  config.vm.define "leaf14" do |device|

    device.vm.hostname = "leaf14"

    device.vm.box = "CumulusCommunity/cumulus-vx"
    device.vm.box_version = "3.5.0"

    device.vm.provider :libvirt do |v|
      v.memory = 768
    end
    #   see note here: https://github.com/pradels/vagrant-libvirt#synced-folders
    device.vm.synced_folder ".", "/vagrant", disabled: true



    # NETWORK INTERFACES
      # link for eth0 --> oob-mgmt-switch1:swp16
      device.vm.network "private_network",
            :mac => "44:38:39:00:06:e4",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10882',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8882',
            :libvirt__iface_name => 'eth0',
            auto_config: false
      # link for swp1 --> chassis01-lc1-1:swp14
      device.vm.network "private_network",
            :mac => "44:38:39:00:06:68",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10820',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8820',
            :libvirt__iface_name => 'swp1',
            auto_config: false
      # link for swp2 --> chassis02-lc1-1:swp14
      device.vm.network "private_network",
            :mac => "44:38:39:00:07:aa",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10981',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8981',
            :libvirt__iface_name => 'swp2',
            auto_config: false
      # link for swp3 --> chassis03-lc1-1:swp14
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:22",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10401',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8401',
            :libvirt__iface_name => 'swp3',
            auto_config: false
      # link for swp4 --> chassis04-lc1-1:swp14
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:d4",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10490',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8490',
            :libvirt__iface_name => 'swp4',
            auto_config: false



    # Fixes "stdin: is not a tty" and "mesg: ttyname failed : Inappropriate ioctl for device"  messages --> https://github.com/mitchellh/vagrant/issues/1673
    device.vm.provision :shell , inline: "(sudo grep -q 'mesg n' /root/.profile 2>/dev/null && sudo sed -i '/mesg n/d' /root/.profile  2>/dev/null) || true;", privileged: false

    #Copy over Topology.dot File
    device.vm.provision "file", source: "topology.dot", destination: "~/topology.dot"
    device.vm.provision :shell, privileged: false, inline: "sudo mv ~/topology.dot /etc/ptm.d/topology.dot"


    # Run the Config specified in the Node Attributes
    device.vm.provision :shell , privileged: false, :inline => 'echo "$(whoami)" > /tmp/normal_user'
    device.vm.provision :shell , path: "./helper_scripts/extra_switch_config.sh"


    # Install Rules for the interface re-map
    device.vm.provision :shell , :inline => <<-delete_udev_directory
if [ -d "/etc/udev/rules.d/70-persistent-net.rules" ]; then
    rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
fi
rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
delete_udev_directory

device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:06:e4 --> eth0"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:06:e4", NAME="eth0", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:06:68 --> swp1"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:06:68", NAME="swp1", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:07:aa --> swp2"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:07:aa", NAME="swp2", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:22 --> swp3"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:22", NAME="swp3", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:d4 --> swp4"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:d4", NAME="swp4", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule

      device.vm.provision :shell , :inline => <<-vagrant_interface_rule
echo "  INFO: Adding UDEV Rule: Vagrant interface = vagrant"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{ifindex}=="2", NAME="vagrant", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
echo "#### UDEV Rules (/etc/udev/rules.d/70-persistent-net.rules) ####"
cat /etc/udev/rules.d/70-persistent-net.rules
vagrant_interface_rule

# Run Any Platform Specific Code and Apply the interface Re-map
    #   (may or may not perform a reboot depending on platform)
    device.vm.provision :shell , :inline => $script

end

  ##### DEFINE VM for leaf17 #####
  config.vm.define "leaf17" do |device|

    device.vm.hostname = "leaf17"

    device.vm.box = "CumulusCommunity/cumulus-vx"
    device.vm.box_version = "3.5.0"

    device.vm.provider :libvirt do |v|
      v.memory = 768
    end
    #   see note here: https://github.com/pradels/vagrant-libvirt#synced-folders
    device.vm.synced_folder ".", "/vagrant", disabled: true



    # NETWORK INTERFACES
      # link for eth0 --> oob-mgmt-switch1:swp19
      device.vm.network "private_network",
            :mac => "44:38:39:00:06:b0",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10856',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8856',
            :libvirt__iface_name => 'eth0',
            auto_config: false
      # link for swp1 --> chassis01-lc1-2:swp1
      device.vm.network "private_network",
            :mac => "44:38:39:00:05:64",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10690',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8690',
            :libvirt__iface_name => 'swp1',
            auto_config: false
      # link for swp2 --> chassis02-lc1-2:swp1
      device.vm.network "private_network",
            :mac => "44:38:39:00:06:4c",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10806',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8806',
            :libvirt__iface_name => 'swp2',
            auto_config: false
      # link for swp3 --> chassis03-lc1-2:swp1
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:fc",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10638',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8638',
            :libvirt__iface_name => 'swp3',
            auto_config: false
      # link for swp4 --> chassis04-lc1-2:swp1
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:38",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10156',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8156',
            :libvirt__iface_name => 'swp4',
            auto_config: false



    # Fixes "stdin: is not a tty" and "mesg: ttyname failed : Inappropriate ioctl for device"  messages --> https://github.com/mitchellh/vagrant/issues/1673
    device.vm.provision :shell , inline: "(sudo grep -q 'mesg n' /root/.profile 2>/dev/null && sudo sed -i '/mesg n/d' /root/.profile  2>/dev/null) || true;", privileged: false

    #Copy over Topology.dot File
    device.vm.provision "file", source: "topology.dot", destination: "~/topology.dot"
    device.vm.provision :shell, privileged: false, inline: "sudo mv ~/topology.dot /etc/ptm.d/topology.dot"


    # Run the Config specified in the Node Attributes
    device.vm.provision :shell , privileged: false, :inline => 'echo "$(whoami)" > /tmp/normal_user'
    device.vm.provision :shell , path: "./helper_scripts/extra_switch_config.sh"


    # Install Rules for the interface re-map
    device.vm.provision :shell , :inline => <<-delete_udev_directory
if [ -d "/etc/udev/rules.d/70-persistent-net.rules" ]; then
    rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
fi
rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
delete_udev_directory

device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:06:b0 --> eth0"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:06:b0", NAME="eth0", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:05:64 --> swp1"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:05:64", NAME="swp1", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:06:4c --> swp2"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:06:4c", NAME="swp2", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:fc --> swp3"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:fc", NAME="swp3", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:38 --> swp4"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:38", NAME="swp4", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule

      device.vm.provision :shell , :inline => <<-vagrant_interface_rule
echo "  INFO: Adding UDEV Rule: Vagrant interface = vagrant"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{ifindex}=="2", NAME="vagrant", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
echo "#### UDEV Rules (/etc/udev/rules.d/70-persistent-net.rules) ####"
cat /etc/udev/rules.d/70-persistent-net.rules
vagrant_interface_rule

# Run Any Platform Specific Code and Apply the interface Re-map
    #   (may or may not perform a reboot depending on platform)
    device.vm.provision :shell , :inline => $script

end

  ##### DEFINE VM for leaf16 #####
  config.vm.define "leaf16" do |device|

    device.vm.hostname = "leaf16"

    device.vm.box = "CumulusCommunity/cumulus-vx"
    device.vm.box_version = "3.5.0"

    device.vm.provider :libvirt do |v|
      v.memory = 768
    end
    #   see note here: https://github.com/pradels/vagrant-libvirt#synced-folders
    device.vm.synced_folder ".", "/vagrant", disabled: true



    # NETWORK INTERFACES
      # link for eth0 --> oob-mgmt-switch1:swp18
      device.vm.network "private_network",
            :mac => "44:38:39:00:08:84",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '11090',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '9090',
            :libvirt__iface_name => 'eth0',
            auto_config: false
      # link for swp1 --> chassis01-lc1-1:swp16
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:b4",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10346',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8346',
            :libvirt__iface_name => 'swp1',
            auto_config: false
      # link for swp2 --> chassis02-lc1-1:swp16
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:6c",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10054',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8054',
            :libvirt__iface_name => 'swp2',
            auto_config: false
      # link for swp3 --> chassis03-lc1-1:swp16
      device.vm.network "private_network",
            :mac => "44:38:39:00:09:0a",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '11157',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '9157',
            :libvirt__iface_name => 'swp3',
            auto_config: false
      # link for swp4 --> chassis04-lc1-1:swp16
      device.vm.network "private_network",
            :mac => "44:38:39:00:05:e6",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10755',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8755',
            :libvirt__iface_name => 'swp4',
            auto_config: false



    # Fixes "stdin: is not a tty" and "mesg: ttyname failed : Inappropriate ioctl for device"  messages --> https://github.com/mitchellh/vagrant/issues/1673
    device.vm.provision :shell , inline: "(sudo grep -q 'mesg n' /root/.profile 2>/dev/null && sudo sed -i '/mesg n/d' /root/.profile  2>/dev/null) || true;", privileged: false

    #Copy over Topology.dot File
    device.vm.provision "file", source: "topology.dot", destination: "~/topology.dot"
    device.vm.provision :shell, privileged: false, inline: "sudo mv ~/topology.dot /etc/ptm.d/topology.dot"


    # Run the Config specified in the Node Attributes
    device.vm.provision :shell , privileged: false, :inline => 'echo "$(whoami)" > /tmp/normal_user'
    device.vm.provision :shell , path: "./helper_scripts/extra_switch_config.sh"


    # Install Rules for the interface re-map
    device.vm.provision :shell , :inline => <<-delete_udev_directory
if [ -d "/etc/udev/rules.d/70-persistent-net.rules" ]; then
    rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
fi
rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
delete_udev_directory

device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:08:84 --> eth0"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:08:84", NAME="eth0", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:b4 --> swp1"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:b4", NAME="swp1", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:6c --> swp2"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:6c", NAME="swp2", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:09:0a --> swp3"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:09:0a", NAME="swp3", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:05:e6 --> swp4"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:05:e6", NAME="swp4", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule

      device.vm.provision :shell , :inline => <<-vagrant_interface_rule
echo "  INFO: Adding UDEV Rule: Vagrant interface = vagrant"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{ifindex}=="2", NAME="vagrant", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
echo "#### UDEV Rules (/etc/udev/rules.d/70-persistent-net.rules) ####"
cat /etc/udev/rules.d/70-persistent-net.rules
vagrant_interface_rule

# Run Any Platform Specific Code and Apply the interface Re-map
    #   (may or may not perform a reboot depending on platform)
    device.vm.provision :shell , :inline => $script

end

  ##### DEFINE VM for leaf11 #####
  config.vm.define "leaf11" do |device|

    device.vm.hostname = "leaf11"

    device.vm.box = "CumulusCommunity/cumulus-vx"
    device.vm.box_version = "3.5.0"

    device.vm.provider :libvirt do |v|
      v.memory = 768
    end
    #   see note here: https://github.com/pradels/vagrant-libvirt#synced-folders
    device.vm.synced_folder ".", "/vagrant", disabled: true



    # NETWORK INTERFACES
      # link for eth0 --> oob-mgmt-switch1:swp13
      device.vm.network "private_network",
            :mac => "44:38:39:00:06:62",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10817',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8817',
            :libvirt__iface_name => 'eth0',
            auto_config: false
      # link for swp1 --> chassis01-lc1-1:swp11
      device.vm.network "private_network",
            :mac => "44:38:39:00:09:10",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '11160',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '9160',
            :libvirt__iface_name => 'swp1',
            auto_config: false
      # link for swp2 --> chassis02-lc1-1:swp11
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:e8",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10628',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8628',
            :libvirt__iface_name => 'swp2',
            auto_config: false
      # link for swp3 --> chassis03-lc1-1:swp11
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:7e",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10447',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8447',
            :libvirt__iface_name => 'swp3',
            auto_config: false
      # link for swp4 --> chassis04-lc1-1:swp11
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:fa",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10125',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8125',
            :libvirt__iface_name => 'swp4',
            auto_config: false



    # Fixes "stdin: is not a tty" and "mesg: ttyname failed : Inappropriate ioctl for device"  messages --> https://github.com/mitchellh/vagrant/issues/1673
    device.vm.provision :shell , inline: "(sudo grep -q 'mesg n' /root/.profile 2>/dev/null && sudo sed -i '/mesg n/d' /root/.profile  2>/dev/null) || true;", privileged: false

    #Copy over Topology.dot File
    device.vm.provision "file", source: "topology.dot", destination: "~/topology.dot"
    device.vm.provision :shell, privileged: false, inline: "sudo mv ~/topology.dot /etc/ptm.d/topology.dot"


    # Run the Config specified in the Node Attributes
    device.vm.provision :shell , privileged: false, :inline => 'echo "$(whoami)" > /tmp/normal_user'
    device.vm.provision :shell , path: "./helper_scripts/extra_switch_config.sh"


    # Install Rules for the interface re-map
    device.vm.provision :shell , :inline => <<-delete_udev_directory
if [ -d "/etc/udev/rules.d/70-persistent-net.rules" ]; then
    rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
fi
rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
delete_udev_directory

device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:06:62 --> eth0"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:06:62", NAME="eth0", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:09:10 --> swp1"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:09:10", NAME="swp1", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:e8 --> swp2"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:e8", NAME="swp2", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:7e --> swp3"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:7e", NAME="swp3", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:fa --> swp4"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:fa", NAME="swp4", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule

      device.vm.provision :shell , :inline => <<-vagrant_interface_rule
echo "  INFO: Adding UDEV Rule: Vagrant interface = vagrant"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{ifindex}=="2", NAME="vagrant", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
echo "#### UDEV Rules (/etc/udev/rules.d/70-persistent-net.rules) ####"
cat /etc/udev/rules.d/70-persistent-net.rules
vagrant_interface_rule

# Run Any Platform Specific Code and Apply the interface Re-map
    #   (may or may not perform a reboot depending on platform)
    device.vm.provision :shell , :inline => $script

end

  ##### DEFINE VM for leaf10 #####
  config.vm.define "leaf10" do |device|

    device.vm.hostname = "leaf10"

    device.vm.box = "CumulusCommunity/cumulus-vx"
    device.vm.box_version = "3.5.0"

    device.vm.provider :libvirt do |v|
      v.memory = 768
    end
    #   see note here: https://github.com/pradels/vagrant-libvirt#synced-folders
    device.vm.synced_folder ".", "/vagrant", disabled: true



    # NETWORK INTERFACES
      # link for eth0 --> oob-mgmt-switch1:swp12
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:ec",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10630',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8630',
            :libvirt__iface_name => 'eth0',
            auto_config: false
      # link for swp1 --> chassis01-lc1-1:swp10
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:80",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10192',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8192',
            :libvirt__iface_name => 'swp1',
            auto_config: false
      # link for swp2 --> chassis02-lc1-1:swp10
      device.vm.network "private_network",
            :mac => "44:38:39:00:05:84",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10706',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8706',
            :libvirt__iface_name => 'swp2',
            auto_config: false
      # link for swp3 --> chassis03-lc1-1:swp10
      device.vm.network "private_network",
            :mac => "44:38:39:00:07:9e",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10975',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8975',
            :libvirt__iface_name => 'swp3',
            auto_config: false
      # link for swp4 --> chassis04-lc1-1:swp10
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:0a",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10133',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8133',
            :libvirt__iface_name => 'swp4',
            auto_config: false



    # Fixes "stdin: is not a tty" and "mesg: ttyname failed : Inappropriate ioctl for device"  messages --> https://github.com/mitchellh/vagrant/issues/1673
    device.vm.provision :shell , inline: "(sudo grep -q 'mesg n' /root/.profile 2>/dev/null && sudo sed -i '/mesg n/d' /root/.profile  2>/dev/null) || true;", privileged: false

    #Copy over Topology.dot File
    device.vm.provision "file", source: "topology.dot", destination: "~/topology.dot"
    device.vm.provision :shell, privileged: false, inline: "sudo mv ~/topology.dot /etc/ptm.d/topology.dot"


    # Run the Config specified in the Node Attributes
    device.vm.provision :shell , privileged: false, :inline => 'echo "$(whoami)" > /tmp/normal_user'
    device.vm.provision :shell , path: "./helper_scripts/extra_switch_config.sh"


    # Install Rules for the interface re-map
    device.vm.provision :shell , :inline => <<-delete_udev_directory
if [ -d "/etc/udev/rules.d/70-persistent-net.rules" ]; then
    rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
fi
rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
delete_udev_directory

device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:ec --> eth0"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:ec", NAME="eth0", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:80 --> swp1"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:80", NAME="swp1", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:05:84 --> swp2"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:05:84", NAME="swp2", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:07:9e --> swp3"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:07:9e", NAME="swp3", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:0a --> swp4"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:0a", NAME="swp4", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule

      device.vm.provision :shell , :inline => <<-vagrant_interface_rule
echo "  INFO: Adding UDEV Rule: Vagrant interface = vagrant"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{ifindex}=="2", NAME="vagrant", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
echo "#### UDEV Rules (/etc/udev/rules.d/70-persistent-net.rules) ####"
cat /etc/udev/rules.d/70-persistent-net.rules
vagrant_interface_rule

# Run Any Platform Specific Code and Apply the interface Re-map
    #   (may or may not perform a reboot depending on platform)
    device.vm.provision :shell , :inline => $script

end

  ##### DEFINE VM for leaf13 #####
  config.vm.define "leaf13" do |device|

    device.vm.hostname = "leaf13"

    device.vm.box = "CumulusCommunity/cumulus-vx"
    device.vm.box_version = "3.5.0"

    device.vm.provider :libvirt do |v|
      v.memory = 768
    end
    #   see note here: https://github.com/pradels/vagrant-libvirt#synced-folders
    device.vm.synced_folder ".", "/vagrant", disabled: true



    # NETWORK INTERFACES
      # link for eth0 --> oob-mgmt-switch1:swp15
      device.vm.network "private_network",
            :mac => "44:38:39:00:08:3a",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '11053',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '9053',
            :libvirt__iface_name => 'eth0',
            auto_config: false
      # link for swp1 --> chassis01-lc1-1:swp13
      device.vm.network "private_network",
            :mac => "44:38:39:00:05:52",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10681',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8681',
            :libvirt__iface_name => 'swp1',
            auto_config: false
      # link for swp2 --> chassis02-lc1-1:swp13
      device.vm.network "private_network",
            :mac => "44:38:39:00:08:2c",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '11046',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '9046',
            :libvirt__iface_name => 'swp2',
            auto_config: false
      # link for swp3 --> chassis03-lc1-1:swp13
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:64",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10178',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8178',
            :libvirt__iface_name => 'swp3',
            auto_config: false
      # link for swp4 --> chassis04-lc1-1:swp13
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:5e",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10047',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8047',
            :libvirt__iface_name => 'swp4',
            auto_config: false



    # Fixes "stdin: is not a tty" and "mesg: ttyname failed : Inappropriate ioctl for device"  messages --> https://github.com/mitchellh/vagrant/issues/1673
    device.vm.provision :shell , inline: "(sudo grep -q 'mesg n' /root/.profile 2>/dev/null && sudo sed -i '/mesg n/d' /root/.profile  2>/dev/null) || true;", privileged: false

    #Copy over Topology.dot File
    device.vm.provision "file", source: "topology.dot", destination: "~/topology.dot"
    device.vm.provision :shell, privileged: false, inline: "sudo mv ~/topology.dot /etc/ptm.d/topology.dot"


    # Run the Config specified in the Node Attributes
    device.vm.provision :shell , privileged: false, :inline => 'echo "$(whoami)" > /tmp/normal_user'
    device.vm.provision :shell , path: "./helper_scripts/extra_switch_config.sh"


    # Install Rules for the interface re-map
    device.vm.provision :shell , :inline => <<-delete_udev_directory
if [ -d "/etc/udev/rules.d/70-persistent-net.rules" ]; then
    rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
fi
rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
delete_udev_directory

device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:08:3a --> eth0"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:08:3a", NAME="eth0", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:05:52 --> swp1"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:05:52", NAME="swp1", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:08:2c --> swp2"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:08:2c", NAME="swp2", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:64 --> swp3"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:64", NAME="swp3", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:5e --> swp4"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:5e", NAME="swp4", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule

      device.vm.provision :shell , :inline => <<-vagrant_interface_rule
echo "  INFO: Adding UDEV Rule: Vagrant interface = vagrant"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{ifindex}=="2", NAME="vagrant", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
echo "#### UDEV Rules (/etc/udev/rules.d/70-persistent-net.rules) ####"
cat /etc/udev/rules.d/70-persistent-net.rules
vagrant_interface_rule

# Run Any Platform Specific Code and Apply the interface Re-map
    #   (may or may not perform a reboot depending on platform)
    device.vm.provision :shell , :inline => $script

end

  ##### DEFINE VM for leaf12 #####
  config.vm.define "leaf12" do |device|

    device.vm.hostname = "leaf12"

    device.vm.box = "CumulusCommunity/cumulus-vx"
    device.vm.box_version = "3.5.0"

    device.vm.provider :libvirt do |v|
      v.memory = 768
    end
    #   see note here: https://github.com/pradels/vagrant-libvirt#synced-folders
    device.vm.synced_folder ".", "/vagrant", disabled: true



    # NETWORK INTERFACES
      # link for eth0 --> oob-mgmt-switch1:swp14
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:d0",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10232',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8232',
            :libvirt__iface_name => 'eth0',
            auto_config: false
      # link for swp1 --> chassis01-lc1-1:swp12
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:d4",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10618',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8618',
            :libvirt__iface_name => 'swp1',
            auto_config: false
      # link for swp2 --> chassis02-lc1-1:swp12
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:96",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10075',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8075',
            :libvirt__iface_name => 'swp2',
            auto_config: false
      # link for swp3 --> chassis03-lc1-1:swp12
      device.vm.network "private_network",
            :mac => "44:38:39:00:05:90",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10712',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8712',
            :libvirt__iface_name => 'swp3',
            auto_config: false
      # link for swp4 --> chassis04-lc1-1:swp12
      device.vm.network "private_network",
            :mac => "44:38:39:00:05:0a",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10645',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8645',
            :libvirt__iface_name => 'swp4',
            auto_config: false



    # Fixes "stdin: is not a tty" and "mesg: ttyname failed : Inappropriate ioctl for device"  messages --> https://github.com/mitchellh/vagrant/issues/1673
    device.vm.provision :shell , inline: "(sudo grep -q 'mesg n' /root/.profile 2>/dev/null && sudo sed -i '/mesg n/d' /root/.profile  2>/dev/null) || true;", privileged: false

    #Copy over Topology.dot File
    device.vm.provision "file", source: "topology.dot", destination: "~/topology.dot"
    device.vm.provision :shell, privileged: false, inline: "sudo mv ~/topology.dot /etc/ptm.d/topology.dot"


    # Run the Config specified in the Node Attributes
    device.vm.provision :shell , privileged: false, :inline => 'echo "$(whoami)" > /tmp/normal_user'
    device.vm.provision :shell , path: "./helper_scripts/extra_switch_config.sh"


    # Install Rules for the interface re-map
    device.vm.provision :shell , :inline => <<-delete_udev_directory
if [ -d "/etc/udev/rules.d/70-persistent-net.rules" ]; then
    rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
fi
rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
delete_udev_directory

device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:d0 --> eth0"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:d0", NAME="eth0", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:d4 --> swp1"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:d4", NAME="swp1", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:96 --> swp2"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:96", NAME="swp2", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:05:90 --> swp3"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:05:90", NAME="swp3", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:05:0a --> swp4"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:05:0a", NAME="swp4", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule

      device.vm.provision :shell , :inline => <<-vagrant_interface_rule
echo "  INFO: Adding UDEV Rule: Vagrant interface = vagrant"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{ifindex}=="2", NAME="vagrant", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
echo "#### UDEV Rules (/etc/udev/rules.d/70-persistent-net.rules) ####"
cat /etc/udev/rules.d/70-persistent-net.rules
vagrant_interface_rule

# Run Any Platform Specific Code and Apply the interface Re-map
    #   (may or may not perform a reboot depending on platform)
    device.vm.provision :shell , :inline => $script

end

  ##### DEFINE VM for leaf19 #####
  config.vm.define "leaf19" do |device|

    device.vm.hostname = "leaf19"

    device.vm.box = "CumulusCommunity/cumulus-vx"
    device.vm.box_version = "3.5.0"

    device.vm.provider :libvirt do |v|
      v.memory = 768
    end
    #   see note here: https://github.com/pradels/vagrant-libvirt#synced-folders
    device.vm.synced_folder ".", "/vagrant", disabled: true



    # NETWORK INTERFACES
      # link for eth0 --> oob-mgmt-switch1:swp21
      device.vm.network "private_network",
            :mac => "44:38:39:00:05:4e",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10679',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8679',
            :libvirt__iface_name => 'eth0',
            auto_config: false
      # link for swp1 --> chassis01-lc1-2:swp3
      device.vm.network "private_network",
            :mac => "44:38:39:00:06:bc",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10862',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8862',
            :libvirt__iface_name => 'swp1',
            auto_config: false
      # link for swp2 --> chassis02-lc1-2:swp3
      device.vm.network "private_network",
            :mac => "44:38:39:00:07:6a",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10949',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8949',
            :libvirt__iface_name => 'swp2',
            auto_config: false
      # link for swp3 --> chassis03-lc1-2:swp3
      device.vm.network "private_network",
            :mac => "44:38:39:00:08:d0",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '11128',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '9128',
            :libvirt__iface_name => 'swp3',
            auto_config: false
      # link for swp4 --> chassis04-lc1-2:swp3
      device.vm.network "private_network",
            :mac => "44:38:39:00:06:ea",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10885',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8885',
            :libvirt__iface_name => 'swp4',
            auto_config: false



    # Fixes "stdin: is not a tty" and "mesg: ttyname failed : Inappropriate ioctl for device"  messages --> https://github.com/mitchellh/vagrant/issues/1673
    device.vm.provision :shell , inline: "(sudo grep -q 'mesg n' /root/.profile 2>/dev/null && sudo sed -i '/mesg n/d' /root/.profile  2>/dev/null) || true;", privileged: false

    #Copy over Topology.dot File
    device.vm.provision "file", source: "topology.dot", destination: "~/topology.dot"
    device.vm.provision :shell, privileged: false, inline: "sudo mv ~/topology.dot /etc/ptm.d/topology.dot"


    # Run the Config specified in the Node Attributes
    device.vm.provision :shell , privileged: false, :inline => 'echo "$(whoami)" > /tmp/normal_user'
    device.vm.provision :shell , path: "./helper_scripts/extra_switch_config.sh"


    # Install Rules for the interface re-map
    device.vm.provision :shell , :inline => <<-delete_udev_directory
if [ -d "/etc/udev/rules.d/70-persistent-net.rules" ]; then
    rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
fi
rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
delete_udev_directory

device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:05:4e --> eth0"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:05:4e", NAME="eth0", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:06:bc --> swp1"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:06:bc", NAME="swp1", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:07:6a --> swp2"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:07:6a", NAME="swp2", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:08:d0 --> swp3"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:08:d0", NAME="swp3", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:06:ea --> swp4"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:06:ea", NAME="swp4", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule

      device.vm.provision :shell , :inline => <<-vagrant_interface_rule
echo "  INFO: Adding UDEV Rule: Vagrant interface = vagrant"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{ifindex}=="2", NAME="vagrant", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
echo "#### UDEV Rules (/etc/udev/rules.d/70-persistent-net.rules) ####"
cat /etc/udev/rules.d/70-persistent-net.rules
vagrant_interface_rule

# Run Any Platform Specific Code and Apply the interface Re-map
    #   (may or may not perform a reboot depending on platform)
    device.vm.provision :shell , :inline => $script

end

  ##### DEFINE VM for leaf18 #####
  config.vm.define "leaf18" do |device|

    device.vm.hostname = "leaf18"

    device.vm.box = "CumulusCommunity/cumulus-vx"
    device.vm.box_version = "3.5.0"

    device.vm.provider :libvirt do |v|
      v.memory = 768
    end
    #   see note here: https://github.com/pradels/vagrant-libvirt#synced-folders
    device.vm.synced_folder ".", "/vagrant", disabled: true



    # NETWORK INTERFACES
      # link for eth0 --> oob-mgmt-switch1:swp20
      device.vm.network "private_network",
            :mac => "44:38:39:00:08:2e",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '11047',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '9047',
            :libvirt__iface_name => 'eth0',
            auto_config: false
      # link for swp1 --> chassis01-lc1-2:swp2
      device.vm.network "private_network",
            :mac => "44:38:39:00:05:0c",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10646',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8646',
            :libvirt__iface_name => 'swp1',
            auto_config: false
      # link for swp2 --> chassis02-lc1-2:swp2
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:94",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10074',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8074',
            :libvirt__iface_name => 'swp2',
            auto_config: false
      # link for swp3 --> chassis03-lc1-2:swp2
      device.vm.network "private_network",
            :mac => "44:38:39:00:05:b6",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10731',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8731',
            :libvirt__iface_name => 'swp3',
            auto_config: false
      # link for swp4 --> chassis04-lc1-2:swp2
      device.vm.network "private_network",
            :mac => "44:38:39:00:08:d4",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '11130',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '9130',
            :libvirt__iface_name => 'swp4',
            auto_config: false



    # Fixes "stdin: is not a tty" and "mesg: ttyname failed : Inappropriate ioctl for device"  messages --> https://github.com/mitchellh/vagrant/issues/1673
    device.vm.provision :shell , inline: "(sudo grep -q 'mesg n' /root/.profile 2>/dev/null && sudo sed -i '/mesg n/d' /root/.profile  2>/dev/null) || true;", privileged: false

    #Copy over Topology.dot File
    device.vm.provision "file", source: "topology.dot", destination: "~/topology.dot"
    device.vm.provision :shell, privileged: false, inline: "sudo mv ~/topology.dot /etc/ptm.d/topology.dot"


    # Run the Config specified in the Node Attributes
    device.vm.provision :shell , privileged: false, :inline => 'echo "$(whoami)" > /tmp/normal_user'
    device.vm.provision :shell , path: "./helper_scripts/extra_switch_config.sh"


    # Install Rules for the interface re-map
    device.vm.provision :shell , :inline => <<-delete_udev_directory
if [ -d "/etc/udev/rules.d/70-persistent-net.rules" ]; then
    rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
fi
rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
delete_udev_directory

device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:08:2e --> eth0"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:08:2e", NAME="eth0", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:05:0c --> swp1"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:05:0c", NAME="swp1", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:94 --> swp2"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:94", NAME="swp2", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:05:b6 --> swp3"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:05:b6", NAME="swp3", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:08:d4 --> swp4"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:08:d4", NAME="swp4", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule

      device.vm.provision :shell , :inline => <<-vagrant_interface_rule
echo "  INFO: Adding UDEV Rule: Vagrant interface = vagrant"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{ifindex}=="2", NAME="vagrant", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
echo "#### UDEV Rules (/etc/udev/rules.d/70-persistent-net.rules) ####"
cat /etc/udev/rules.d/70-persistent-net.rules
vagrant_interface_rule

# Run Any Platform Specific Code and Apply the interface Re-map
    #   (may or may not perform a reboot depending on platform)
    device.vm.provision :shell , :inline => $script

end

  ##### DEFINE VM for leaf117 #####
  config.vm.define "leaf117" do |device|

    device.vm.hostname = "leaf117"

    device.vm.box = "CumulusCommunity/cumulus-vx"
    device.vm.box_version = "3.5.0"

    device.vm.provider :libvirt do |v|
      v.memory = 768
    end
    #   see note here: https://github.com/pradels/vagrant-libvirt#synced-folders
    device.vm.synced_folder ".", "/vagrant", disabled: true



    # NETWORK INTERFACES
      # link for eth0 --> oob-mgmt-switch3:swp23
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:0a",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10517',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8517',
            :libvirt__iface_name => 'eth0',
            auto_config: false
      # link for swp1 --> chassis01-lc4-2:swp5
      device.vm.network "private_network",
            :mac => "44:38:39:00:08:20",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '11040',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '9040',
            :libvirt__iface_name => 'swp1',
            auto_config: false
      # link for swp2 --> chassis02-lc4-2:swp5
      device.vm.network "private_network",
            :mac => "44:38:39:00:08:50",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '11064',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '9064',
            :libvirt__iface_name => 'swp2',
            auto_config: false
      # link for swp3 --> chassis03-lc4-2:swp5
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:c0",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10352',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8352',
            :libvirt__iface_name => 'swp3',
            auto_config: false
      # link for swp4 --> chassis04-lc4-2:swp5
      device.vm.network "private_network",
            :mac => "44:38:39:00:06:fc",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10894',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8894',
            :libvirt__iface_name => 'swp4',
            auto_config: false



    # Fixes "stdin: is not a tty" and "mesg: ttyname failed : Inappropriate ioctl for device"  messages --> https://github.com/mitchellh/vagrant/issues/1673
    device.vm.provision :shell , inline: "(sudo grep -q 'mesg n' /root/.profile 2>/dev/null && sudo sed -i '/mesg n/d' /root/.profile  2>/dev/null) || true;", privileged: false

    #Copy over Topology.dot File
    device.vm.provision "file", source: "topology.dot", destination: "~/topology.dot"
    device.vm.provision :shell, privileged: false, inline: "sudo mv ~/topology.dot /etc/ptm.d/topology.dot"


    # Run the Config specified in the Node Attributes
    device.vm.provision :shell , privileged: false, :inline => 'echo "$(whoami)" > /tmp/normal_user'
    device.vm.provision :shell , path: "./helper_scripts/extra_switch_config.sh"


    # Install Rules for the interface re-map
    device.vm.provision :shell , :inline => <<-delete_udev_directory
if [ -d "/etc/udev/rules.d/70-persistent-net.rules" ]; then
    rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
fi
rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
delete_udev_directory

device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:0a --> eth0"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:0a", NAME="eth0", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:08:20 --> swp1"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:08:20", NAME="swp1", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:08:50 --> swp2"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:08:50", NAME="swp2", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:c0 --> swp3"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:c0", NAME="swp3", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:06:fc --> swp4"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:06:fc", NAME="swp4", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule

      device.vm.provision :shell , :inline => <<-vagrant_interface_rule
echo "  INFO: Adding UDEV Rule: Vagrant interface = vagrant"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{ifindex}=="2", NAME="vagrant", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
echo "#### UDEV Rules (/etc/udev/rules.d/70-persistent-net.rules) ####"
cat /etc/udev/rules.d/70-persistent-net.rules
vagrant_interface_rule

# Run Any Platform Specific Code and Apply the interface Re-map
    #   (may or may not perform a reboot depending on platform)
    device.vm.provision :shell , :inline => $script

end

  ##### DEFINE VM for leaf88 #####
  config.vm.define "leaf88" do |device|

    device.vm.hostname = "leaf88"

    device.vm.box = "CumulusCommunity/cumulus-vx"
    device.vm.box_version = "3.5.0"

    device.vm.provider :libvirt do |v|
      v.memory = 768
    end
    #   see note here: https://github.com/pradels/vagrant-libvirt#synced-folders
    device.vm.synced_folder ".", "/vagrant", disabled: true



    # NETWORK INTERFACES
      # link for eth0 --> oob-mgmt-switch2:swp42
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:2c",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10534',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8534',
            :libvirt__iface_name => 'eth0',
            auto_config: false
      # link for swp1 --> chassis01-lc3-2:swp8
      device.vm.network "private_network",
            :mac => "44:38:39:00:06:74",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10826',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8826',
            :libvirt__iface_name => 'swp1',
            auto_config: false
      # link for swp2 --> chassis02-lc3-2:swp8
      device.vm.network "private_network",
            :mac => "44:38:39:00:06:90",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10840',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8840',
            :libvirt__iface_name => 'swp2',
            auto_config: false
      # link for swp3 --> chassis03-lc3-2:swp8
      device.vm.network "private_network",
            :mac => "44:38:39:00:09:4a",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '11189',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '9189',
            :libvirt__iface_name => 'swp3',
            auto_config: false
      # link for swp4 --> chassis04-lc3-2:swp8
      device.vm.network "private_network",
            :mac => "44:38:39:00:08:f6",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '11147',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '9147',
            :libvirt__iface_name => 'swp4',
            auto_config: false



    # Fixes "stdin: is not a tty" and "mesg: ttyname failed : Inappropriate ioctl for device"  messages --> https://github.com/mitchellh/vagrant/issues/1673
    device.vm.provision :shell , inline: "(sudo grep -q 'mesg n' /root/.profile 2>/dev/null && sudo sed -i '/mesg n/d' /root/.profile  2>/dev/null) || true;", privileged: false

    #Copy over Topology.dot File
    device.vm.provision "file", source: "topology.dot", destination: "~/topology.dot"
    device.vm.provision :shell, privileged: false, inline: "sudo mv ~/topology.dot /etc/ptm.d/topology.dot"


    # Run the Config specified in the Node Attributes
    device.vm.provision :shell , privileged: false, :inline => 'echo "$(whoami)" > /tmp/normal_user'
    device.vm.provision :shell , path: "./helper_scripts/extra_switch_config.sh"


    # Install Rules for the interface re-map
    device.vm.provision :shell , :inline => <<-delete_udev_directory
if [ -d "/etc/udev/rules.d/70-persistent-net.rules" ]; then
    rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
fi
rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
delete_udev_directory

device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:2c --> eth0"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:2c", NAME="eth0", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:06:74 --> swp1"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:06:74", NAME="swp1", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:06:90 --> swp2"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:06:90", NAME="swp2", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:09:4a --> swp3"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:09:4a", NAME="swp3", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:08:f6 --> swp4"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:08:f6", NAME="swp4", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule

      device.vm.provision :shell , :inline => <<-vagrant_interface_rule
echo "  INFO: Adding UDEV Rule: Vagrant interface = vagrant"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{ifindex}=="2", NAME="vagrant", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
echo "#### UDEV Rules (/etc/udev/rules.d/70-persistent-net.rules) ####"
cat /etc/udev/rules.d/70-persistent-net.rules
vagrant_interface_rule

# Run Any Platform Specific Code and Apply the interface Re-map
    #   (may or may not perform a reboot depending on platform)
    device.vm.provision :shell , :inline => $script

end

  ##### DEFINE VM for leaf89 #####
  config.vm.define "leaf89" do |device|

    device.vm.hostname = "leaf89"

    device.vm.box = "CumulusCommunity/cumulus-vx"
    device.vm.box_version = "3.5.0"

    device.vm.provider :libvirt do |v|
      v.memory = 768
    end
    #   see note here: https://github.com/pradels/vagrant-libvirt#synced-folders
    device.vm.synced_folder ".", "/vagrant", disabled: true



    # NETWORK INTERFACES
      # link for eth0 --> oob-mgmt-switch2:swp43
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:24",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10018',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8018',
            :libvirt__iface_name => 'eth0',
            auto_config: false
      # link for swp1 --> chassis01-lc3-2:swp9
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:da",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10365',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8365',
            :libvirt__iface_name => 'swp1',
            auto_config: false
      # link for swp2 --> chassis02-lc3-2:swp9
      device.vm.network "private_network",
            :mac => "44:38:39:00:06:b6",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10859',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8859',
            :libvirt__iface_name => 'swp2',
            auto_config: false
      # link for swp3 --> chassis03-lc3-2:swp9
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:c8",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10612',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8612',
            :libvirt__iface_name => 'swp3',
            auto_config: false
      # link for swp4 --> chassis04-lc3-2:swp9
      device.vm.network "private_network",
            :mac => "44:38:39:00:07:d4",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '11002',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '9002',
            :libvirt__iface_name => 'swp4',
            auto_config: false



    # Fixes "stdin: is not a tty" and "mesg: ttyname failed : Inappropriate ioctl for device"  messages --> https://github.com/mitchellh/vagrant/issues/1673
    device.vm.provision :shell , inline: "(sudo grep -q 'mesg n' /root/.profile 2>/dev/null && sudo sed -i '/mesg n/d' /root/.profile  2>/dev/null) || true;", privileged: false

    #Copy over Topology.dot File
    device.vm.provision "file", source: "topology.dot", destination: "~/topology.dot"
    device.vm.provision :shell, privileged: false, inline: "sudo mv ~/topology.dot /etc/ptm.d/topology.dot"


    # Run the Config specified in the Node Attributes
    device.vm.provision :shell , privileged: false, :inline => 'echo "$(whoami)" > /tmp/normal_user'
    device.vm.provision :shell , path: "./helper_scripts/extra_switch_config.sh"


    # Install Rules for the interface re-map
    device.vm.provision :shell , :inline => <<-delete_udev_directory
if [ -d "/etc/udev/rules.d/70-persistent-net.rules" ]; then
    rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
fi
rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
delete_udev_directory

device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:24 --> eth0"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:24", NAME="eth0", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:da --> swp1"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:da", NAME="swp1", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:06:b6 --> swp2"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:06:b6", NAME="swp2", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:c8 --> swp3"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:c8", NAME="swp3", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:07:d4 --> swp4"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:07:d4", NAME="swp4", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule

      device.vm.provision :shell , :inline => <<-vagrant_interface_rule
echo "  INFO: Adding UDEV Rule: Vagrant interface = vagrant"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{ifindex}=="2", NAME="vagrant", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
echo "#### UDEV Rules (/etc/udev/rules.d/70-persistent-net.rules) ####"
cat /etc/udev/rules.d/70-persistent-net.rules
vagrant_interface_rule

# Run Any Platform Specific Code and Apply the interface Re-map
    #   (may or may not perform a reboot depending on platform)
    device.vm.provision :shell , :inline => $script

end

  ##### DEFINE VM for leaf86 #####
  config.vm.define "leaf86" do |device|

    device.vm.hostname = "leaf86"

    device.vm.box = "CumulusCommunity/cumulus-vx"
    device.vm.box_version = "3.5.0"

    device.vm.provider :libvirt do |v|
      v.memory = 768
    end
    #   see note here: https://github.com/pradels/vagrant-libvirt#synced-folders
    device.vm.synced_folder ".", "/vagrant", disabled: true



    # NETWORK INTERFACES
      # link for eth0 --> oob-mgmt-switch2:swp40
      device.vm.network "private_network",
            :mac => "44:38:39:00:07:a8",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10980',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8980',
            :libvirt__iface_name => 'eth0',
            auto_config: false
      # link for swp1 --> chassis01-lc3-2:swp6
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:1c",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10526',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8526',
            :libvirt__iface_name => 'swp1',
            auto_config: false
      # link for swp2 --> chassis02-lc3-2:swp6
      device.vm.network "private_network",
            :mac => "44:38:39:00:07:14",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10906',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8906',
            :libvirt__iface_name => 'swp2',
            auto_config: false
      # link for swp3 --> chassis03-lc3-2:swp6
      device.vm.network "private_network",
            :mac => "44:38:39:00:08:fa",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '11149',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '9149',
            :libvirt__iface_name => 'swp3',
            auto_config: false
      # link for swp4 --> chassis04-lc3-2:swp6
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:94",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10586',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8586',
            :libvirt__iface_name => 'swp4',
            auto_config: false



    # Fixes "stdin: is not a tty" and "mesg: ttyname failed : Inappropriate ioctl for device"  messages --> https://github.com/mitchellh/vagrant/issues/1673
    device.vm.provision :shell , inline: "(sudo grep -q 'mesg n' /root/.profile 2>/dev/null && sudo sed -i '/mesg n/d' /root/.profile  2>/dev/null) || true;", privileged: false

    #Copy over Topology.dot File
    device.vm.provision "file", source: "topology.dot", destination: "~/topology.dot"
    device.vm.provision :shell, privileged: false, inline: "sudo mv ~/topology.dot /etc/ptm.d/topology.dot"


    # Run the Config specified in the Node Attributes
    device.vm.provision :shell , privileged: false, :inline => 'echo "$(whoami)" > /tmp/normal_user'
    device.vm.provision :shell , path: "./helper_scripts/extra_switch_config.sh"


    # Install Rules for the interface re-map
    device.vm.provision :shell , :inline => <<-delete_udev_directory
if [ -d "/etc/udev/rules.d/70-persistent-net.rules" ]; then
    rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
fi
rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
delete_udev_directory

device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:07:a8 --> eth0"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:07:a8", NAME="eth0", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:1c --> swp1"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:1c", NAME="swp1", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:07:14 --> swp2"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:07:14", NAME="swp2", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:08:fa --> swp3"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:08:fa", NAME="swp3", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:94 --> swp4"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:94", NAME="swp4", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule

      device.vm.provision :shell , :inline => <<-vagrant_interface_rule
echo "  INFO: Adding UDEV Rule: Vagrant interface = vagrant"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{ifindex}=="2", NAME="vagrant", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
echo "#### UDEV Rules (/etc/udev/rules.d/70-persistent-net.rules) ####"
cat /etc/udev/rules.d/70-persistent-net.rules
vagrant_interface_rule

# Run Any Platform Specific Code and Apply the interface Re-map
    #   (may or may not perform a reboot depending on platform)
    device.vm.provision :shell , :inline => $script

end

  ##### DEFINE VM for leaf84 #####
  config.vm.define "leaf84" do |device|

    device.vm.hostname = "leaf84"

    device.vm.box = "CumulusCommunity/cumulus-vx"
    device.vm.box_version = "3.5.0"

    device.vm.provider :libvirt do |v|
      v.memory = 768
    end
    #   see note here: https://github.com/pradels/vagrant-libvirt#synced-folders
    device.vm.synced_folder ".", "/vagrant", disabled: true



    # NETWORK INTERFACES
      # link for eth0 --> oob-mgmt-switch2:swp38
      device.vm.network "private_network",
            :mac => "44:38:39:00:09:3a",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '11181',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '9181',
            :libvirt__iface_name => 'eth0',
            auto_config: false
      # link for swp1 --> chassis01-lc3-2:swp4
      device.vm.network "private_network",
            :mac => "44:38:39:00:05:2a",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10661',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8661',
            :libvirt__iface_name => 'swp1',
            auto_config: false
      # link for swp2 --> chassis02-lc3-2:swp4
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:76",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10059',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8059',
            :libvirt__iface_name => 'swp2',
            auto_config: false
      # link for swp3 --> chassis03-lc3-2:swp4
      device.vm.network "private_network",
            :mac => "44:38:39:00:08:16",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '11035',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '9035',
            :libvirt__iface_name => 'swp3',
            auto_config: false
      # link for swp4 --> chassis04-lc3-2:swp4
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:62",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10561',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8561',
            :libvirt__iface_name => 'swp4',
            auto_config: false



    # Fixes "stdin: is not a tty" and "mesg: ttyname failed : Inappropriate ioctl for device"  messages --> https://github.com/mitchellh/vagrant/issues/1673
    device.vm.provision :shell , inline: "(sudo grep -q 'mesg n' /root/.profile 2>/dev/null && sudo sed -i '/mesg n/d' /root/.profile  2>/dev/null) || true;", privileged: false

    #Copy over Topology.dot File
    device.vm.provision "file", source: "topology.dot", destination: "~/topology.dot"
    device.vm.provision :shell, privileged: false, inline: "sudo mv ~/topology.dot /etc/ptm.d/topology.dot"


    # Run the Config specified in the Node Attributes
    device.vm.provision :shell , privileged: false, :inline => 'echo "$(whoami)" > /tmp/normal_user'
    device.vm.provision :shell , path: "./helper_scripts/extra_switch_config.sh"


    # Install Rules for the interface re-map
    device.vm.provision :shell , :inline => <<-delete_udev_directory
if [ -d "/etc/udev/rules.d/70-persistent-net.rules" ]; then
    rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
fi
rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
delete_udev_directory

device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:09:3a --> eth0"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:09:3a", NAME="eth0", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:05:2a --> swp1"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:05:2a", NAME="swp1", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:76 --> swp2"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:76", NAME="swp2", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:08:16 --> swp3"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:08:16", NAME="swp3", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:62 --> swp4"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:62", NAME="swp4", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule

      device.vm.provision :shell , :inline => <<-vagrant_interface_rule
echo "  INFO: Adding UDEV Rule: Vagrant interface = vagrant"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{ifindex}=="2", NAME="vagrant", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
echo "#### UDEV Rules (/etc/udev/rules.d/70-persistent-net.rules) ####"
cat /etc/udev/rules.d/70-persistent-net.rules
vagrant_interface_rule

# Run Any Platform Specific Code and Apply the interface Re-map
    #   (may or may not perform a reboot depending on platform)
    device.vm.provision :shell , :inline => $script

end

  ##### DEFINE VM for leaf85 #####
  config.vm.define "leaf85" do |device|

    device.vm.hostname = "leaf85"

    device.vm.box = "CumulusCommunity/cumulus-vx"
    device.vm.box_version = "3.5.0"

    device.vm.provider :libvirt do |v|
      v.memory = 768
    end
    #   see note here: https://github.com/pradels/vagrant-libvirt#synced-folders
    device.vm.synced_folder ".", "/vagrant", disabled: true



    # NETWORK INTERFACES
      # link for eth0 --> oob-mgmt-switch2:swp39
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:64",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10562',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8562',
            :libvirt__iface_name => 'eth0',
            auto_config: false
      # link for swp1 --> chassis01-lc3-2:swp5
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:14",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10266',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8266',
            :libvirt__iface_name => 'swp1',
            auto_config: false
      # link for swp2 --> chassis02-lc3-2:swp5
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:6e",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10183',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8183',
            :libvirt__iface_name => 'swp2',
            auto_config: false
      # link for swp3 --> chassis03-lc3-2:swp5
      device.vm.network "private_network",
            :mac => "44:38:39:00:06:60",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10816',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8816',
            :libvirt__iface_name => 'swp3',
            auto_config: false
      # link for swp4 --> chassis04-lc3-2:swp5
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:78",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10316',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8316',
            :libvirt__iface_name => 'swp4',
            auto_config: false



    # Fixes "stdin: is not a tty" and "mesg: ttyname failed : Inappropriate ioctl for device"  messages --> https://github.com/mitchellh/vagrant/issues/1673
    device.vm.provision :shell , inline: "(sudo grep -q 'mesg n' /root/.profile 2>/dev/null && sudo sed -i '/mesg n/d' /root/.profile  2>/dev/null) || true;", privileged: false

    #Copy over Topology.dot File
    device.vm.provision "file", source: "topology.dot", destination: "~/topology.dot"
    device.vm.provision :shell, privileged: false, inline: "sudo mv ~/topology.dot /etc/ptm.d/topology.dot"


    # Run the Config specified in the Node Attributes
    device.vm.provision :shell , privileged: false, :inline => 'echo "$(whoami)" > /tmp/normal_user'
    device.vm.provision :shell , path: "./helper_scripts/extra_switch_config.sh"


    # Install Rules for the interface re-map
    device.vm.provision :shell , :inline => <<-delete_udev_directory
if [ -d "/etc/udev/rules.d/70-persistent-net.rules" ]; then
    rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
fi
rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
delete_udev_directory

device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:64 --> eth0"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:64", NAME="eth0", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:14 --> swp1"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:14", NAME="swp1", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:6e --> swp2"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:6e", NAME="swp2", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:06:60 --> swp3"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:06:60", NAME="swp3", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:78 --> swp4"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:78", NAME="swp4", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule

      device.vm.provision :shell , :inline => <<-vagrant_interface_rule
echo "  INFO: Adding UDEV Rule: Vagrant interface = vagrant"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{ifindex}=="2", NAME="vagrant", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
echo "#### UDEV Rules (/etc/udev/rules.d/70-persistent-net.rules) ####"
cat /etc/udev/rules.d/70-persistent-net.rules
vagrant_interface_rule

# Run Any Platform Specific Code and Apply the interface Re-map
    #   (may or may not perform a reboot depending on platform)
    device.vm.provision :shell , :inline => $script

end

  ##### DEFINE VM for leaf82 #####
  config.vm.define "leaf82" do |device|

    device.vm.hostname = "leaf82"

    device.vm.box = "CumulusCommunity/cumulus-vx"
    device.vm.box_version = "3.5.0"

    device.vm.provider :libvirt do |v|
      v.memory = 768
    end
    #   see note here: https://github.com/pradels/vagrant-libvirt#synced-folders
    device.vm.synced_folder ".", "/vagrant", disabled: true



    # NETWORK INTERFACES
      # link for eth0 --> oob-mgmt-switch2:swp36
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:44",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10546',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8546',
            :libvirt__iface_name => 'eth0',
            auto_config: false
      # link for swp1 --> chassis01-lc3-2:swp2
      device.vm.network "private_network",
            :mac => "44:38:39:00:08:86",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '11091',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '9091',
            :libvirt__iface_name => 'swp1',
            auto_config: false
      # link for swp2 --> chassis02-lc3-2:swp2
      device.vm.network "private_network",
            :mac => "44:38:39:00:05:cc",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10742',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8742',
            :libvirt__iface_name => 'swp2',
            auto_config: false
      # link for swp3 --> chassis03-lc3-2:swp2
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:ce",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10103',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8103',
            :libvirt__iface_name => 'swp3',
            auto_config: false
      # link for swp4 --> chassis04-lc3-2:swp2
      device.vm.network "private_network",
            :mac => "44:38:39:00:07:84",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10962',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8962',
            :libvirt__iface_name => 'swp4',
            auto_config: false



    # Fixes "stdin: is not a tty" and "mesg: ttyname failed : Inappropriate ioctl for device"  messages --> https://github.com/mitchellh/vagrant/issues/1673
    device.vm.provision :shell , inline: "(sudo grep -q 'mesg n' /root/.profile 2>/dev/null && sudo sed -i '/mesg n/d' /root/.profile  2>/dev/null) || true;", privileged: false

    #Copy over Topology.dot File
    device.vm.provision "file", source: "topology.dot", destination: "~/topology.dot"
    device.vm.provision :shell, privileged: false, inline: "sudo mv ~/topology.dot /etc/ptm.d/topology.dot"


    # Run the Config specified in the Node Attributes
    device.vm.provision :shell , privileged: false, :inline => 'echo "$(whoami)" > /tmp/normal_user'
    device.vm.provision :shell , path: "./helper_scripts/extra_switch_config.sh"


    # Install Rules for the interface re-map
    device.vm.provision :shell , :inline => <<-delete_udev_directory
if [ -d "/etc/udev/rules.d/70-persistent-net.rules" ]; then
    rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
fi
rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
delete_udev_directory

device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:44 --> eth0"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:44", NAME="eth0", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:08:86 --> swp1"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:08:86", NAME="swp1", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:05:cc --> swp2"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:05:cc", NAME="swp2", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:ce --> swp3"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:ce", NAME="swp3", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:07:84 --> swp4"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:07:84", NAME="swp4", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule

      device.vm.provision :shell , :inline => <<-vagrant_interface_rule
echo "  INFO: Adding UDEV Rule: Vagrant interface = vagrant"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{ifindex}=="2", NAME="vagrant", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
echo "#### UDEV Rules (/etc/udev/rules.d/70-persistent-net.rules) ####"
cat /etc/udev/rules.d/70-persistent-net.rules
vagrant_interface_rule

# Run Any Platform Specific Code and Apply the interface Re-map
    #   (may or may not perform a reboot depending on platform)
    device.vm.provision :shell , :inline => $script

end

  ##### DEFINE VM for leaf83 #####
  config.vm.define "leaf83" do |device|

    device.vm.hostname = "leaf83"

    device.vm.box = "CumulusCommunity/cumulus-vx"
    device.vm.box_version = "3.5.0"

    device.vm.provider :libvirt do |v|
      v.memory = 768
    end
    #   see note here: https://github.com/pradels/vagrant-libvirt#synced-folders
    device.vm.synced_folder ".", "/vagrant", disabled: true



    # NETWORK INTERFACES
      # link for eth0 --> oob-mgmt-switch2:swp37
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:8c",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10454',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8454',
            :libvirt__iface_name => 'eth0',
            auto_config: false
      # link for swp1 --> chassis01-lc3-2:swp3
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:00",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10512',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8512',
            :libvirt__iface_name => 'swp1',
            auto_config: false
      # link for swp2 --> chassis02-lc3-2:swp3
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:3e",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10543',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8543',
            :libvirt__iface_name => 'swp2',
            auto_config: false
      # link for swp3 --> chassis03-lc3-2:swp3
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:4c",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10166',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8166',
            :libvirt__iface_name => 'swp3',
            auto_config: false
      # link for swp4 --> chassis04-lc3-2:swp3
      device.vm.network "private_network",
            :mac => "44:38:39:00:07:c0",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10992',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8992',
            :libvirt__iface_name => 'swp4',
            auto_config: false



    # Fixes "stdin: is not a tty" and "mesg: ttyname failed : Inappropriate ioctl for device"  messages --> https://github.com/mitchellh/vagrant/issues/1673
    device.vm.provision :shell , inline: "(sudo grep -q 'mesg n' /root/.profile 2>/dev/null && sudo sed -i '/mesg n/d' /root/.profile  2>/dev/null) || true;", privileged: false

    #Copy over Topology.dot File
    device.vm.provision "file", source: "topology.dot", destination: "~/topology.dot"
    device.vm.provision :shell, privileged: false, inline: "sudo mv ~/topology.dot /etc/ptm.d/topology.dot"


    # Run the Config specified in the Node Attributes
    device.vm.provision :shell , privileged: false, :inline => 'echo "$(whoami)" > /tmp/normal_user'
    device.vm.provision :shell , path: "./helper_scripts/extra_switch_config.sh"


    # Install Rules for the interface re-map
    device.vm.provision :shell , :inline => <<-delete_udev_directory
if [ -d "/etc/udev/rules.d/70-persistent-net.rules" ]; then
    rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
fi
rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
delete_udev_directory

device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:8c --> eth0"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:8c", NAME="eth0", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:00 --> swp1"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:00", NAME="swp1", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:3e --> swp2"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:3e", NAME="swp2", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:4c --> swp3"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:4c", NAME="swp3", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:07:c0 --> swp4"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:07:c0", NAME="swp4", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule

      device.vm.provision :shell , :inline => <<-vagrant_interface_rule
echo "  INFO: Adding UDEV Rule: Vagrant interface = vagrant"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{ifindex}=="2", NAME="vagrant", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
echo "#### UDEV Rules (/etc/udev/rules.d/70-persistent-net.rules) ####"
cat /etc/udev/rules.d/70-persistent-net.rules
vagrant_interface_rule

# Run Any Platform Specific Code and Apply the interface Re-map
    #   (may or may not perform a reboot depending on platform)
    device.vm.provision :shell , :inline => $script

end

  ##### DEFINE VM for leaf80 #####
  config.vm.define "leaf80" do |device|

    device.vm.hostname = "leaf80"

    device.vm.box = "CumulusCommunity/cumulus-vx"
    device.vm.box_version = "3.5.0"

    device.vm.provider :libvirt do |v|
      v.memory = 768
    end
    #   see note here: https://github.com/pradels/vagrant-libvirt#synced-folders
    device.vm.synced_folder ".", "/vagrant", disabled: true



    # NETWORK INTERFACES
      # link for eth0 --> oob-mgmt-switch2:swp34
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:e4",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10242',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8242',
            :libvirt__iface_name => 'eth0',
            auto_config: false
      # link for swp1 --> chassis01-lc3-1:swp16
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:94",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10330',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8330',
            :libvirt__iface_name => 'swp1',
            auto_config: false
      # link for swp2 --> chassis02-lc3-1:swp16
      device.vm.network "private_network",
            :mac => "44:38:39:00:05:86",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10707',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8707',
            :libvirt__iface_name => 'swp2',
            auto_config: false
      # link for swp3 --> chassis03-lc3-1:swp16
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:d8",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10492',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8492',
            :libvirt__iface_name => 'swp3',
            auto_config: false
      # link for swp4 --> chassis04-lc3-1:swp16
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:72",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10441',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8441',
            :libvirt__iface_name => 'swp4',
            auto_config: false



    # Fixes "stdin: is not a tty" and "mesg: ttyname failed : Inappropriate ioctl for device"  messages --> https://github.com/mitchellh/vagrant/issues/1673
    device.vm.provision :shell , inline: "(sudo grep -q 'mesg n' /root/.profile 2>/dev/null && sudo sed -i '/mesg n/d' /root/.profile  2>/dev/null) || true;", privileged: false

    #Copy over Topology.dot File
    device.vm.provision "file", source: "topology.dot", destination: "~/topology.dot"
    device.vm.provision :shell, privileged: false, inline: "sudo mv ~/topology.dot /etc/ptm.d/topology.dot"


    # Run the Config specified in the Node Attributes
    device.vm.provision :shell , privileged: false, :inline => 'echo "$(whoami)" > /tmp/normal_user'
    device.vm.provision :shell , path: "./helper_scripts/extra_switch_config.sh"


    # Install Rules for the interface re-map
    device.vm.provision :shell , :inline => <<-delete_udev_directory
if [ -d "/etc/udev/rules.d/70-persistent-net.rules" ]; then
    rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
fi
rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
delete_udev_directory

device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:e4 --> eth0"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:e4", NAME="eth0", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:94 --> swp1"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:94", NAME="swp1", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:05:86 --> swp2"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:05:86", NAME="swp2", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:d8 --> swp3"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:d8", NAME="swp3", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:72 --> swp4"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:72", NAME="swp4", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule

      device.vm.provision :shell , :inline => <<-vagrant_interface_rule
echo "  INFO: Adding UDEV Rule: Vagrant interface = vagrant"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{ifindex}=="2", NAME="vagrant", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
echo "#### UDEV Rules (/etc/udev/rules.d/70-persistent-net.rules) ####"
cat /etc/udev/rules.d/70-persistent-net.rules
vagrant_interface_rule

# Run Any Platform Specific Code and Apply the interface Re-map
    #   (may or may not perform a reboot depending on platform)
    device.vm.provision :shell , :inline => $script

end

  ##### DEFINE VM for leaf81 #####
  config.vm.define "leaf81" do |device|

    device.vm.hostname = "leaf81"

    device.vm.box = "CumulusCommunity/cumulus-vx"
    device.vm.box_version = "3.5.0"

    device.vm.provider :libvirt do |v|
      v.memory = 768
    end
    #   see note here: https://github.com/pradels/vagrant-libvirt#synced-folders
    device.vm.synced_folder ".", "/vagrant", disabled: true



    # NETWORK INTERFACES
      # link for eth0 --> oob-mgmt-switch2:swp35
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:bc",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10350',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8350',
            :libvirt__iface_name => 'eth0',
            auto_config: false
      # link for swp1 --> chassis01-lc3-2:swp1
      device.vm.network "private_network",
            :mac => "44:38:39:00:06:5a",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10813',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8813',
            :libvirt__iface_name => 'swp1',
            auto_config: false
      # link for swp2 --> chassis02-lc3-2:swp1
      device.vm.network "private_network",
            :mac => "44:38:39:00:07:cc",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10998',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8998',
            :libvirt__iface_name => 'swp2',
            auto_config: false
      # link for swp3 --> chassis03-lc3-2:swp1
      device.vm.network "private_network",
            :mac => "44:38:39:00:09:2c",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '11174',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '9174',
            :libvirt__iface_name => 'swp3',
            auto_config: false
      # link for swp4 --> chassis04-lc3-2:swp1
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:dc",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10110',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8110',
            :libvirt__iface_name => 'swp4',
            auto_config: false



    # Fixes "stdin: is not a tty" and "mesg: ttyname failed : Inappropriate ioctl for device"  messages --> https://github.com/mitchellh/vagrant/issues/1673
    device.vm.provision :shell , inline: "(sudo grep -q 'mesg n' /root/.profile 2>/dev/null && sudo sed -i '/mesg n/d' /root/.profile  2>/dev/null) || true;", privileged: false

    #Copy over Topology.dot File
    device.vm.provision "file", source: "topology.dot", destination: "~/topology.dot"
    device.vm.provision :shell, privileged: false, inline: "sudo mv ~/topology.dot /etc/ptm.d/topology.dot"


    # Run the Config specified in the Node Attributes
    device.vm.provision :shell , privileged: false, :inline => 'echo "$(whoami)" > /tmp/normal_user'
    device.vm.provision :shell , path: "./helper_scripts/extra_switch_config.sh"


    # Install Rules for the interface re-map
    device.vm.provision :shell , :inline => <<-delete_udev_directory
if [ -d "/etc/udev/rules.d/70-persistent-net.rules" ]; then
    rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
fi
rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
delete_udev_directory

device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:bc --> eth0"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:bc", NAME="eth0", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:06:5a --> swp1"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:06:5a", NAME="swp1", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:07:cc --> swp2"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:07:cc", NAME="swp2", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:09:2c --> swp3"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:09:2c", NAME="swp3", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:dc --> swp4"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:dc", NAME="swp4", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule

      device.vm.provision :shell , :inline => <<-vagrant_interface_rule
echo "  INFO: Adding UDEV Rule: Vagrant interface = vagrant"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{ifindex}=="2", NAME="vagrant", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
echo "#### UDEV Rules (/etc/udev/rules.d/70-persistent-net.rules) ####"
cat /etc/udev/rules.d/70-persistent-net.rules
vagrant_interface_rule

# Run Any Platform Specific Code and Apply the interface Re-map
    #   (may or may not perform a reboot depending on platform)
    device.vm.provision :shell , :inline => $script

end

  ##### DEFINE VM for leaf20 #####
  config.vm.define "leaf20" do |device|

    device.vm.hostname = "leaf20"

    device.vm.box = "CumulusCommunity/cumulus-vx"
    device.vm.box_version = "3.5.0"

    device.vm.provider :libvirt do |v|
      v.memory = 768
    end
    #   see note here: https://github.com/pradels/vagrant-libvirt#synced-folders
    device.vm.synced_folder ".", "/vagrant", disabled: true



    # NETWORK INTERFACES
      # link for eth0 --> oob-mgmt-switch1:swp22
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:cc",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10230',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8230',
            :libvirt__iface_name => 'eth0',
            auto_config: false
      # link for swp1 --> chassis01-lc1-2:swp4
      device.vm.network "private_network",
            :mac => "44:38:39:00:05:ea",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10757',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8757',
            :libvirt__iface_name => 'swp1',
            auto_config: false
      # link for swp2 --> chassis02-lc1-2:swp4
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:c4",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10354',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8354',
            :libvirt__iface_name => 'swp2',
            auto_config: false
      # link for swp3 --> chassis03-lc1-2:swp4
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:ce",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10231',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8231',
            :libvirt__iface_name => 'swp3',
            auto_config: false
      # link for swp4 --> chassis04-lc1-2:swp4
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:2e",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10407',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8407',
            :libvirt__iface_name => 'swp4',
            auto_config: false



    # Fixes "stdin: is not a tty" and "mesg: ttyname failed : Inappropriate ioctl for device"  messages --> https://github.com/mitchellh/vagrant/issues/1673
    device.vm.provision :shell , inline: "(sudo grep -q 'mesg n' /root/.profile 2>/dev/null && sudo sed -i '/mesg n/d' /root/.profile  2>/dev/null) || true;", privileged: false

    #Copy over Topology.dot File
    device.vm.provision "file", source: "topology.dot", destination: "~/topology.dot"
    device.vm.provision :shell, privileged: false, inline: "sudo mv ~/topology.dot /etc/ptm.d/topology.dot"


    # Run the Config specified in the Node Attributes
    device.vm.provision :shell , privileged: false, :inline => 'echo "$(whoami)" > /tmp/normal_user'
    device.vm.provision :shell , path: "./helper_scripts/extra_switch_config.sh"


    # Install Rules for the interface re-map
    device.vm.provision :shell , :inline => <<-delete_udev_directory
if [ -d "/etc/udev/rules.d/70-persistent-net.rules" ]; then
    rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
fi
rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
delete_udev_directory

device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:cc --> eth0"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:cc", NAME="eth0", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:05:ea --> swp1"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:05:ea", NAME="swp1", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:c4 --> swp2"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:c4", NAME="swp2", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:ce --> swp3"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:ce", NAME="swp3", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:2e --> swp4"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:2e", NAME="swp4", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule

      device.vm.provision :shell , :inline => <<-vagrant_interface_rule
echo "  INFO: Adding UDEV Rule: Vagrant interface = vagrant"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{ifindex}=="2", NAME="vagrant", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
echo "#### UDEV Rules (/etc/udev/rules.d/70-persistent-net.rules) ####"
cat /etc/udev/rules.d/70-persistent-net.rules
vagrant_interface_rule

# Run Any Platform Specific Code and Apply the interface Re-map
    #   (may or may not perform a reboot depending on platform)
    device.vm.provision :shell , :inline => $script

end

  ##### DEFINE VM for leaf21 #####
  config.vm.define "leaf21" do |device|

    device.vm.hostname = "leaf21"

    device.vm.box = "CumulusCommunity/cumulus-vx"
    device.vm.box_version = "3.5.0"

    device.vm.provider :libvirt do |v|
      v.memory = 768
    end
    #   see note here: https://github.com/pradels/vagrant-libvirt#synced-folders
    device.vm.synced_folder ".", "/vagrant", disabled: true



    # NETWORK INTERFACES
      # link for eth0 --> oob-mgmt-switch1:swp23
      device.vm.network "private_network",
            :mac => "44:38:39:00:07:48",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10932',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8932',
            :libvirt__iface_name => 'eth0',
            auto_config: false
      # link for swp1 --> chassis01-lc1-2:swp5
      device.vm.network "private_network",
            :mac => "44:38:39:00:05:66",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10691',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8691',
            :libvirt__iface_name => 'swp1',
            auto_config: false
      # link for swp2 --> chassis02-lc1-2:swp5
      device.vm.network "private_network",
            :mac => "44:38:39:00:07:f4",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '11018',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '9018',
            :libvirt__iface_name => 'swp2',
            auto_config: false
      # link for swp3 --> chassis03-lc1-2:swp5
      device.vm.network "private_network",
            :mac => "44:38:39:00:09:44",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '11186',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '9186',
            :libvirt__iface_name => 'swp3',
            auto_config: false
      # link for swp4 --> chassis04-lc1-2:swp5
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:30",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10152',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8152',
            :libvirt__iface_name => 'swp4',
            auto_config: false



    # Fixes "stdin: is not a tty" and "mesg: ttyname failed : Inappropriate ioctl for device"  messages --> https://github.com/mitchellh/vagrant/issues/1673
    device.vm.provision :shell , inline: "(sudo grep -q 'mesg n' /root/.profile 2>/dev/null && sudo sed -i '/mesg n/d' /root/.profile  2>/dev/null) || true;", privileged: false

    #Copy over Topology.dot File
    device.vm.provision "file", source: "topology.dot", destination: "~/topology.dot"
    device.vm.provision :shell, privileged: false, inline: "sudo mv ~/topology.dot /etc/ptm.d/topology.dot"


    # Run the Config specified in the Node Attributes
    device.vm.provision :shell , privileged: false, :inline => 'echo "$(whoami)" > /tmp/normal_user'
    device.vm.provision :shell , path: "./helper_scripts/extra_switch_config.sh"


    # Install Rules for the interface re-map
    device.vm.provision :shell , :inline => <<-delete_udev_directory
if [ -d "/etc/udev/rules.d/70-persistent-net.rules" ]; then
    rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
fi
rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
delete_udev_directory

device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:07:48 --> eth0"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:07:48", NAME="eth0", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:05:66 --> swp1"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:05:66", NAME="swp1", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:07:f4 --> swp2"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:07:f4", NAME="swp2", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:09:44 --> swp3"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:09:44", NAME="swp3", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:30 --> swp4"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:30", NAME="swp4", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule

      device.vm.provision :shell , :inline => <<-vagrant_interface_rule
echo "  INFO: Adding UDEV Rule: Vagrant interface = vagrant"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{ifindex}=="2", NAME="vagrant", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
echo "#### UDEV Rules (/etc/udev/rules.d/70-persistent-net.rules) ####"
cat /etc/udev/rules.d/70-persistent-net.rules
vagrant_interface_rule

# Run Any Platform Specific Code and Apply the interface Re-map
    #   (may or may not perform a reboot depending on platform)
    device.vm.provision :shell , :inline => $script

end

  ##### DEFINE VM for leaf22 #####
  config.vm.define "leaf22" do |device|

    device.vm.hostname = "leaf22"

    device.vm.box = "CumulusCommunity/cumulus-vx"
    device.vm.box_version = "3.5.0"

    device.vm.provider :libvirt do |v|
      v.memory = 768
    end
    #   see note here: https://github.com/pradels/vagrant-libvirt#synced-folders
    device.vm.synced_folder ".", "/vagrant", disabled: true



    # NETWORK INTERFACES
      # link for eth0 --> oob-mgmt-switch1:swp24
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:32",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10409',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8409',
            :libvirt__iface_name => 'eth0',
            auto_config: false
      # link for swp1 --> chassis01-lc1-2:swp6
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:dc",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10238',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8238',
            :libvirt__iface_name => 'swp1',
            auto_config: false
      # link for swp2 --> chassis02-lc1-2:swp6
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:f2",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10121',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8121',
            :libvirt__iface_name => 'swp2',
            auto_config: false
      # link for swp3 --> chassis03-lc1-2:swp6
      device.vm.network "private_network",
            :mac => "44:38:39:00:06:dc",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10878',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8878',
            :libvirt__iface_name => 'swp3',
            auto_config: false
      # link for swp4 --> chassis04-lc1-2:swp6
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:8c",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10198',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8198',
            :libvirt__iface_name => 'swp4',
            auto_config: false



    # Fixes "stdin: is not a tty" and "mesg: ttyname failed : Inappropriate ioctl for device"  messages --> https://github.com/mitchellh/vagrant/issues/1673
    device.vm.provision :shell , inline: "(sudo grep -q 'mesg n' /root/.profile 2>/dev/null && sudo sed -i '/mesg n/d' /root/.profile  2>/dev/null) || true;", privileged: false

    #Copy over Topology.dot File
    device.vm.provision "file", source: "topology.dot", destination: "~/topology.dot"
    device.vm.provision :shell, privileged: false, inline: "sudo mv ~/topology.dot /etc/ptm.d/topology.dot"


    # Run the Config specified in the Node Attributes
    device.vm.provision :shell , privileged: false, :inline => 'echo "$(whoami)" > /tmp/normal_user'
    device.vm.provision :shell , path: "./helper_scripts/extra_switch_config.sh"


    # Install Rules for the interface re-map
    device.vm.provision :shell , :inline => <<-delete_udev_directory
if [ -d "/etc/udev/rules.d/70-persistent-net.rules" ]; then
    rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
fi
rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
delete_udev_directory

device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:32 --> eth0"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:32", NAME="eth0", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:dc --> swp1"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:dc", NAME="swp1", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:f2 --> swp2"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:f2", NAME="swp2", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:06:dc --> swp3"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:06:dc", NAME="swp3", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:8c --> swp4"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:8c", NAME="swp4", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule

      device.vm.provision :shell , :inline => <<-vagrant_interface_rule
echo "  INFO: Adding UDEV Rule: Vagrant interface = vagrant"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{ifindex}=="2", NAME="vagrant", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
echo "#### UDEV Rules (/etc/udev/rules.d/70-persistent-net.rules) ####"
cat /etc/udev/rules.d/70-persistent-net.rules
vagrant_interface_rule

# Run Any Platform Specific Code and Apply the interface Re-map
    #   (may or may not perform a reboot depending on platform)
    device.vm.provision :shell , :inline => $script

end

  ##### DEFINE VM for leaf23 #####
  config.vm.define "leaf23" do |device|

    device.vm.hostname = "leaf23"

    device.vm.box = "CumulusCommunity/cumulus-vx"
    device.vm.box_version = "3.5.0"

    device.vm.provider :libvirt do |v|
      v.memory = 768
    end
    #   see note here: https://github.com/pradels/vagrant-libvirt#synced-folders
    device.vm.synced_folder ".", "/vagrant", disabled: true



    # NETWORK INTERFACES
      # link for eth0 --> oob-mgmt-switch1:swp25
      device.vm.network "private_network",
            :mac => "44:38:39:00:07:96",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10971',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8971',
            :libvirt__iface_name => 'eth0',
            auto_config: false
      # link for swp1 --> chassis01-lc1-2:swp7
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:c8",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10228',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8228',
            :libvirt__iface_name => 'swp1',
            auto_config: false
      # link for swp2 --> chassis02-lc1-2:swp7
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:56",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10299',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8299',
            :libvirt__iface_name => 'swp2',
            auto_config: false
      # link for swp3 --> chassis03-lc1-2:swp7
      device.vm.network "private_network",
            :mac => "44:38:39:00:05:24",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10658',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8658',
            :libvirt__iface_name => 'swp3',
            auto_config: false
      # link for swp4 --> chassis04-lc1-2:swp7
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:32",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10153',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8153',
            :libvirt__iface_name => 'swp4',
            auto_config: false



    # Fixes "stdin: is not a tty" and "mesg: ttyname failed : Inappropriate ioctl for device"  messages --> https://github.com/mitchellh/vagrant/issues/1673
    device.vm.provision :shell , inline: "(sudo grep -q 'mesg n' /root/.profile 2>/dev/null && sudo sed -i '/mesg n/d' /root/.profile  2>/dev/null) || true;", privileged: false

    #Copy over Topology.dot File
    device.vm.provision "file", source: "topology.dot", destination: "~/topology.dot"
    device.vm.provision :shell, privileged: false, inline: "sudo mv ~/topology.dot /etc/ptm.d/topology.dot"


    # Run the Config specified in the Node Attributes
    device.vm.provision :shell , privileged: false, :inline => 'echo "$(whoami)" > /tmp/normal_user'
    device.vm.provision :shell , path: "./helper_scripts/extra_switch_config.sh"


    # Install Rules for the interface re-map
    device.vm.provision :shell , :inline => <<-delete_udev_directory
if [ -d "/etc/udev/rules.d/70-persistent-net.rules" ]; then
    rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
fi
rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
delete_udev_directory

device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:07:96 --> eth0"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:07:96", NAME="eth0", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:c8 --> swp1"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:c8", NAME="swp1", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:56 --> swp2"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:56", NAME="swp2", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:05:24 --> swp3"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:05:24", NAME="swp3", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:32 --> swp4"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:32", NAME="swp4", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule

      device.vm.provision :shell , :inline => <<-vagrant_interface_rule
echo "  INFO: Adding UDEV Rule: Vagrant interface = vagrant"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{ifindex}=="2", NAME="vagrant", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
echo "#### UDEV Rules (/etc/udev/rules.d/70-persistent-net.rules) ####"
cat /etc/udev/rules.d/70-persistent-net.rules
vagrant_interface_rule

# Run Any Platform Specific Code and Apply the interface Re-map
    #   (may or may not perform a reboot depending on platform)
    device.vm.provision :shell , :inline => $script

end

  ##### DEFINE VM for leaf24 #####
  config.vm.define "leaf24" do |device|

    device.vm.hostname = "leaf24"

    device.vm.box = "CumulusCommunity/cumulus-vx"
    device.vm.box_version = "3.5.0"

    device.vm.provider :libvirt do |v|
      v.memory = 768
    end
    #   see note here: https://github.com/pradels/vagrant-libvirt#synced-folders
    device.vm.synced_folder ".", "/vagrant", disabled: true



    # NETWORK INTERFACES
      # link for eth0 --> oob-mgmt-switch1:swp26
      device.vm.network "private_network",
            :mac => "44:38:39:00:08:c2",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '11121',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '9121',
            :libvirt__iface_name => 'eth0',
            auto_config: false
      # link for swp1 --> chassis01-lc1-2:swp8
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:5e",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10303',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8303',
            :libvirt__iface_name => 'swp1',
            auto_config: false
      # link for swp2 --> chassis02-lc1-2:swp8
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:30",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10280',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8280',
            :libvirt__iface_name => 'swp2',
            auto_config: false
      # link for swp3 --> chassis03-lc1-2:swp8
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:28",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10276',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8276',
            :libvirt__iface_name => 'swp3',
            auto_config: false
      # link for swp4 --> chassis04-lc1-2:swp8
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:92",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10201',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8201',
            :libvirt__iface_name => 'swp4',
            auto_config: false



    # Fixes "stdin: is not a tty" and "mesg: ttyname failed : Inappropriate ioctl for device"  messages --> https://github.com/mitchellh/vagrant/issues/1673
    device.vm.provision :shell , inline: "(sudo grep -q 'mesg n' /root/.profile 2>/dev/null && sudo sed -i '/mesg n/d' /root/.profile  2>/dev/null) || true;", privileged: false

    #Copy over Topology.dot File
    device.vm.provision "file", source: "topology.dot", destination: "~/topology.dot"
    device.vm.provision :shell, privileged: false, inline: "sudo mv ~/topology.dot /etc/ptm.d/topology.dot"


    # Run the Config specified in the Node Attributes
    device.vm.provision :shell , privileged: false, :inline => 'echo "$(whoami)" > /tmp/normal_user'
    device.vm.provision :shell , path: "./helper_scripts/extra_switch_config.sh"


    # Install Rules for the interface re-map
    device.vm.provision :shell , :inline => <<-delete_udev_directory
if [ -d "/etc/udev/rules.d/70-persistent-net.rules" ]; then
    rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
fi
rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
delete_udev_directory

device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:08:c2 --> eth0"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:08:c2", NAME="eth0", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:5e --> swp1"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:5e", NAME="swp1", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:30 --> swp2"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:30", NAME="swp2", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:28 --> swp3"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:28", NAME="swp3", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:92 --> swp4"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:92", NAME="swp4", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule

      device.vm.provision :shell , :inline => <<-vagrant_interface_rule
echo "  INFO: Adding UDEV Rule: Vagrant interface = vagrant"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{ifindex}=="2", NAME="vagrant", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
echo "#### UDEV Rules (/etc/udev/rules.d/70-persistent-net.rules) ####"
cat /etc/udev/rules.d/70-persistent-net.rules
vagrant_interface_rule

# Run Any Platform Specific Code and Apply the interface Re-map
    #   (may or may not perform a reboot depending on platform)
    device.vm.provision :shell , :inline => $script

end

  ##### DEFINE VM for leaf25 #####
  config.vm.define "leaf25" do |device|

    device.vm.hostname = "leaf25"

    device.vm.box = "CumulusCommunity/cumulus-vx"
    device.vm.box_version = "3.5.0"

    device.vm.provider :libvirt do |v|
      v.memory = 768
    end
    #   see note here: https://github.com/pradels/vagrant-libvirt#synced-folders
    device.vm.synced_folder ".", "/vagrant", disabled: true



    # NETWORK INTERFACES
      # link for eth0 --> oob-mgmt-switch1:swp27
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:50",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10552',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8552',
            :libvirt__iface_name => 'eth0',
            auto_config: false
      # link for swp1 --> chassis01-lc1-2:swp9
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:54",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10554',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8554',
            :libvirt__iface_name => 'swp1',
            auto_config: false
      # link for swp2 --> chassis02-lc1-2:swp9
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:b0",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10088',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8088',
            :libvirt__iface_name => 'swp2',
            auto_config: false
      # link for swp3 --> chassis03-lc1-2:swp9
      device.vm.network "private_network",
            :mac => "44:38:39:00:05:62",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10689',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8689',
            :libvirt__iface_name => 'swp3',
            auto_config: false
      # link for swp4 --> chassis04-lc1-2:swp9
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:aa",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10597',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8597',
            :libvirt__iface_name => 'swp4',
            auto_config: false



    # Fixes "stdin: is not a tty" and "mesg: ttyname failed : Inappropriate ioctl for device"  messages --> https://github.com/mitchellh/vagrant/issues/1673
    device.vm.provision :shell , inline: "(sudo grep -q 'mesg n' /root/.profile 2>/dev/null && sudo sed -i '/mesg n/d' /root/.profile  2>/dev/null) || true;", privileged: false

    #Copy over Topology.dot File
    device.vm.provision "file", source: "topology.dot", destination: "~/topology.dot"
    device.vm.provision :shell, privileged: false, inline: "sudo mv ~/topology.dot /etc/ptm.d/topology.dot"


    # Run the Config specified in the Node Attributes
    device.vm.provision :shell , privileged: false, :inline => 'echo "$(whoami)" > /tmp/normal_user'
    device.vm.provision :shell , path: "./helper_scripts/extra_switch_config.sh"


    # Install Rules for the interface re-map
    device.vm.provision :shell , :inline => <<-delete_udev_directory
if [ -d "/etc/udev/rules.d/70-persistent-net.rules" ]; then
    rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
fi
rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
delete_udev_directory

device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:50 --> eth0"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:50", NAME="eth0", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:54 --> swp1"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:54", NAME="swp1", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:b0 --> swp2"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:b0", NAME="swp2", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:05:62 --> swp3"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:05:62", NAME="swp3", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:aa --> swp4"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:aa", NAME="swp4", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule

      device.vm.provision :shell , :inline => <<-vagrant_interface_rule
echo "  INFO: Adding UDEV Rule: Vagrant interface = vagrant"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{ifindex}=="2", NAME="vagrant", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
echo "#### UDEV Rules (/etc/udev/rules.d/70-persistent-net.rules) ####"
cat /etc/udev/rules.d/70-persistent-net.rules
vagrant_interface_rule

# Run Any Platform Specific Code and Apply the interface Re-map
    #   (may or may not perform a reboot depending on platform)
    device.vm.provision :shell , :inline => $script

end

  ##### DEFINE VM for leaf26 #####
  config.vm.define "leaf26" do |device|

    device.vm.hostname = "leaf26"

    device.vm.box = "CumulusCommunity/cumulus-vx"
    device.vm.box_version = "3.5.0"

    device.vm.provider :libvirt do |v|
      v.memory = 768
    end
    #   see note here: https://github.com/pradels/vagrant-libvirt#synced-folders
    device.vm.synced_folder ".", "/vagrant", disabled: true



    # NETWORK INTERFACES
      # link for eth0 --> oob-mgmt-switch1:swp28
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:1c",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10398',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8398',
            :libvirt__iface_name => 'eth0',
            auto_config: false
      # link for swp1 --> chassis01-lc1-2:swp10
      device.vm.network "private_network",
            :mac => "44:38:39:00:05:92",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10713',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8713',
            :libvirt__iface_name => 'swp1',
            auto_config: false
      # link for swp2 --> chassis02-lc1-2:swp10
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:4c",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10294',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8294',
            :libvirt__iface_name => 'swp2',
            auto_config: false
      # link for swp3 --> chassis03-lc1-2:swp10
      device.vm.network "private_network",
            :mac => "44:38:39:00:06:88",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10836',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8836',
            :libvirt__iface_name => 'swp3',
            auto_config: false
      # link for swp4 --> chassis04-lc1-2:swp10
      device.vm.network "private_network",
            :mac => "44:38:39:00:06:72",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10825',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8825',
            :libvirt__iface_name => 'swp4',
            auto_config: false



    # Fixes "stdin: is not a tty" and "mesg: ttyname failed : Inappropriate ioctl for device"  messages --> https://github.com/mitchellh/vagrant/issues/1673
    device.vm.provision :shell , inline: "(sudo grep -q 'mesg n' /root/.profile 2>/dev/null && sudo sed -i '/mesg n/d' /root/.profile  2>/dev/null) || true;", privileged: false

    #Copy over Topology.dot File
    device.vm.provision "file", source: "topology.dot", destination: "~/topology.dot"
    device.vm.provision :shell, privileged: false, inline: "sudo mv ~/topology.dot /etc/ptm.d/topology.dot"


    # Run the Config specified in the Node Attributes
    device.vm.provision :shell , privileged: false, :inline => 'echo "$(whoami)" > /tmp/normal_user'
    device.vm.provision :shell , path: "./helper_scripts/extra_switch_config.sh"


    # Install Rules for the interface re-map
    device.vm.provision :shell , :inline => <<-delete_udev_directory
if [ -d "/etc/udev/rules.d/70-persistent-net.rules" ]; then
    rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
fi
rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
delete_udev_directory

device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:1c --> eth0"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:1c", NAME="eth0", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:05:92 --> swp1"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:05:92", NAME="swp1", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:4c --> swp2"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:4c", NAME="swp2", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:06:88 --> swp3"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:06:88", NAME="swp3", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:06:72 --> swp4"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:06:72", NAME="swp4", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule

      device.vm.provision :shell , :inline => <<-vagrant_interface_rule
echo "  INFO: Adding UDEV Rule: Vagrant interface = vagrant"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{ifindex}=="2", NAME="vagrant", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
echo "#### UDEV Rules (/etc/udev/rules.d/70-persistent-net.rules) ####"
cat /etc/udev/rules.d/70-persistent-net.rules
vagrant_interface_rule

# Run Any Platform Specific Code and Apply the interface Re-map
    #   (may or may not perform a reboot depending on platform)
    device.vm.provision :shell , :inline => $script

end

  ##### DEFINE VM for leaf27 #####
  config.vm.define "leaf27" do |device|

    device.vm.hostname = "leaf27"

    device.vm.box = "CumulusCommunity/cumulus-vx"
    device.vm.box_version = "3.5.0"

    device.vm.provider :libvirt do |v|
      v.memory = 768
    end
    #   see note here: https://github.com/pradels/vagrant-libvirt#synced-folders
    device.vm.synced_folder ".", "/vagrant", disabled: true



    # NETWORK INTERFACES
      # link for eth0 --> oob-mgmt-switch1:swp29
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:f8",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10124',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8124',
            :libvirt__iface_name => 'eth0',
            auto_config: false
      # link for swp1 --> chassis01-lc1-2:swp11
      device.vm.network "private_network",
            :mac => "44:38:39:00:06:be",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10863',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8863',
            :libvirt__iface_name => 'swp1',
            auto_config: false
      # link for swp2 --> chassis02-lc1-2:swp11
      device.vm.network "private_network",
            :mac => "44:38:39:00:09:46",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '11187',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '9187',
            :libvirt__iface_name => 'swp2',
            auto_config: false
      # link for swp3 --> chassis03-lc1-2:swp11
      device.vm.network "private_network",
            :mac => "44:38:39:00:07:ba",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10989',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8989',
            :libvirt__iface_name => 'swp3',
            auto_config: false
      # link for swp4 --> chassis04-lc1-2:swp11
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:80",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10576',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8576',
            :libvirt__iface_name => 'swp4',
            auto_config: false



    # Fixes "stdin: is not a tty" and "mesg: ttyname failed : Inappropriate ioctl for device"  messages --> https://github.com/mitchellh/vagrant/issues/1673
    device.vm.provision :shell , inline: "(sudo grep -q 'mesg n' /root/.profile 2>/dev/null && sudo sed -i '/mesg n/d' /root/.profile  2>/dev/null) || true;", privileged: false

    #Copy over Topology.dot File
    device.vm.provision "file", source: "topology.dot", destination: "~/topology.dot"
    device.vm.provision :shell, privileged: false, inline: "sudo mv ~/topology.dot /etc/ptm.d/topology.dot"


    # Run the Config specified in the Node Attributes
    device.vm.provision :shell , privileged: false, :inline => 'echo "$(whoami)" > /tmp/normal_user'
    device.vm.provision :shell , path: "./helper_scripts/extra_switch_config.sh"


    # Install Rules for the interface re-map
    device.vm.provision :shell , :inline => <<-delete_udev_directory
if [ -d "/etc/udev/rules.d/70-persistent-net.rules" ]; then
    rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
fi
rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
delete_udev_directory

device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:f8 --> eth0"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:f8", NAME="eth0", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:06:be --> swp1"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:06:be", NAME="swp1", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:09:46 --> swp2"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:09:46", NAME="swp2", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:07:ba --> swp3"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:07:ba", NAME="swp3", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:80 --> swp4"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:80", NAME="swp4", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule

      device.vm.provision :shell , :inline => <<-vagrant_interface_rule
echo "  INFO: Adding UDEV Rule: Vagrant interface = vagrant"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{ifindex}=="2", NAME="vagrant", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
echo "#### UDEV Rules (/etc/udev/rules.d/70-persistent-net.rules) ####"
cat /etc/udev/rules.d/70-persistent-net.rules
vagrant_interface_rule

# Run Any Platform Specific Code and Apply the interface Re-map
    #   (may or may not perform a reboot depending on platform)
    device.vm.provision :shell , :inline => $script

end

  ##### DEFINE VM for leaf28 #####
  config.vm.define "leaf28" do |device|

    device.vm.hostname = "leaf28"

    device.vm.box = "CumulusCommunity/cumulus-vx"
    device.vm.box_version = "3.5.0"

    device.vm.provider :libvirt do |v|
      v.memory = 768
    end
    #   see note here: https://github.com/pradels/vagrant-libvirt#synced-folders
    device.vm.synced_folder ".", "/vagrant", disabled: true



    # NETWORK INTERFACES
      # link for eth0 --> oob-mgmt-switch1:swp30
      device.vm.network "private_network",
            :mac => "44:38:39:00:06:10",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10776',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8776',
            :libvirt__iface_name => 'eth0',
            auto_config: false
      # link for swp1 --> chassis01-lc1-2:swp12
      device.vm.network "private_network",
            :mac => "44:38:39:00:05:88",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10708',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8708',
            :libvirt__iface_name => 'swp1',
            auto_config: false
      # link for swp2 --> chassis02-lc1-2:swp12
      device.vm.network "private_network",
            :mac => "44:38:39:00:07:fe",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '11023',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '9023',
            :libvirt__iface_name => 'swp2',
            auto_config: false
      # link for swp3 --> chassis03-lc1-2:swp12
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:da",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10621',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8621',
            :libvirt__iface_name => 'swp3',
            auto_config: false
      # link for swp4 --> chassis04-lc1-2:swp12
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:02",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10001',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8001',
            :libvirt__iface_name => 'swp4',
            auto_config: false



    # Fixes "stdin: is not a tty" and "mesg: ttyname failed : Inappropriate ioctl for device"  messages --> https://github.com/mitchellh/vagrant/issues/1673
    device.vm.provision :shell , inline: "(sudo grep -q 'mesg n' /root/.profile 2>/dev/null && sudo sed -i '/mesg n/d' /root/.profile  2>/dev/null) || true;", privileged: false

    #Copy over Topology.dot File
    device.vm.provision "file", source: "topology.dot", destination: "~/topology.dot"
    device.vm.provision :shell, privileged: false, inline: "sudo mv ~/topology.dot /etc/ptm.d/topology.dot"


    # Run the Config specified in the Node Attributes
    device.vm.provision :shell , privileged: false, :inline => 'echo "$(whoami)" > /tmp/normal_user'
    device.vm.provision :shell , path: "./helper_scripts/extra_switch_config.sh"


    # Install Rules for the interface re-map
    device.vm.provision :shell , :inline => <<-delete_udev_directory
if [ -d "/etc/udev/rules.d/70-persistent-net.rules" ]; then
    rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
fi
rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
delete_udev_directory

device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:06:10 --> eth0"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:06:10", NAME="eth0", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:05:88 --> swp1"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:05:88", NAME="swp1", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:07:fe --> swp2"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:07:fe", NAME="swp2", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:da --> swp3"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:da", NAME="swp3", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:02 --> swp4"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:02", NAME="swp4", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule

      device.vm.provision :shell , :inline => <<-vagrant_interface_rule
echo "  INFO: Adding UDEV Rule: Vagrant interface = vagrant"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{ifindex}=="2", NAME="vagrant", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
echo "#### UDEV Rules (/etc/udev/rules.d/70-persistent-net.rules) ####"
cat /etc/udev/rules.d/70-persistent-net.rules
vagrant_interface_rule

# Run Any Platform Specific Code and Apply the interface Re-map
    #   (may or may not perform a reboot depending on platform)
    device.vm.provision :shell , :inline => $script

end

  ##### DEFINE VM for leaf29 #####
  config.vm.define "leaf29" do |device|

    device.vm.hostname = "leaf29"

    device.vm.box = "CumulusCommunity/cumulus-vx"
    device.vm.box_version = "3.5.0"

    device.vm.provider :libvirt do |v|
      v.memory = 768
    end
    #   see note here: https://github.com/pradels/vagrant-libvirt#synced-folders
    device.vm.synced_folder ".", "/vagrant", disabled: true



    # NETWORK INTERFACES
      # link for eth0 --> oob-mgmt-switch1:swp31
      device.vm.network "private_network",
            :mac => "44:38:39:00:05:f0",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10760',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8760',
            :libvirt__iface_name => 'eth0',
            auto_config: false
      # link for swp1 --> chassis01-lc1-2:swp13
      device.vm.network "private_network",
            :mac => "44:38:39:00:06:6e",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10823',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8823',
            :libvirt__iface_name => 'swp1',
            auto_config: false
      # link for swp2 --> chassis02-lc1-2:swp13
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:1c",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10014',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8014',
            :libvirt__iface_name => 'swp2',
            auto_config: false
      # link for swp3 --> chassis03-lc1-2:swp13
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:c4",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10098',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8098',
            :libvirt__iface_name => 'swp3',
            auto_config: false
      # link for swp4 --> chassis04-lc1-2:swp13
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:88",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10068',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8068',
            :libvirt__iface_name => 'swp4',
            auto_config: false



    # Fixes "stdin: is not a tty" and "mesg: ttyname failed : Inappropriate ioctl for device"  messages --> https://github.com/mitchellh/vagrant/issues/1673
    device.vm.provision :shell , inline: "(sudo grep -q 'mesg n' /root/.profile 2>/dev/null && sudo sed -i '/mesg n/d' /root/.profile  2>/dev/null) || true;", privileged: false

    #Copy over Topology.dot File
    device.vm.provision "file", source: "topology.dot", destination: "~/topology.dot"
    device.vm.provision :shell, privileged: false, inline: "sudo mv ~/topology.dot /etc/ptm.d/topology.dot"


    # Run the Config specified in the Node Attributes
    device.vm.provision :shell , privileged: false, :inline => 'echo "$(whoami)" > /tmp/normal_user'
    device.vm.provision :shell , path: "./helper_scripts/extra_switch_config.sh"


    # Install Rules for the interface re-map
    device.vm.provision :shell , :inline => <<-delete_udev_directory
if [ -d "/etc/udev/rules.d/70-persistent-net.rules" ]; then
    rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
fi
rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
delete_udev_directory

device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:05:f0 --> eth0"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:05:f0", NAME="eth0", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:06:6e --> swp1"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:06:6e", NAME="swp1", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:1c --> swp2"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:1c", NAME="swp2", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:c4 --> swp3"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:c4", NAME="swp3", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:88 --> swp4"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:88", NAME="swp4", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule

      device.vm.provision :shell , :inline => <<-vagrant_interface_rule
echo "  INFO: Adding UDEV Rule: Vagrant interface = vagrant"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{ifindex}=="2", NAME="vagrant", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
echo "#### UDEV Rules (/etc/udev/rules.d/70-persistent-net.rules) ####"
cat /etc/udev/rules.d/70-persistent-net.rules
vagrant_interface_rule

# Run Any Platform Specific Code and Apply the interface Re-map
    #   (may or may not perform a reboot depending on platform)
    device.vm.provision :shell , :inline => $script

end

  ##### DEFINE VM for leaf99 #####
  config.vm.define "leaf99" do |device|

    device.vm.hostname = "leaf99"

    device.vm.box = "CumulusCommunity/cumulus-vx"
    device.vm.box_version = "3.5.0"

    device.vm.provider :libvirt do |v|
      v.memory = 768
    end
    #   see note here: https://github.com/pradels/vagrant-libvirt#synced-folders
    device.vm.synced_folder ".", "/vagrant", disabled: true



    # NETWORK INTERFACES
      # link for eth0 --> oob-mgmt-switch3:swp5
      device.vm.network "private_network",
            :mac => "44:38:39:00:05:2e",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10663',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8663',
            :libvirt__iface_name => 'eth0',
            auto_config: false
      # link for swp1 --> chassis01-lc4-1:swp3
      device.vm.network "private_network",
            :mac => "44:38:39:00:06:ac",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10854',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8854',
            :libvirt__iface_name => 'swp1',
            auto_config: false
      # link for swp2 --> chassis02-lc4-1:swp3
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:72",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10185',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8185',
            :libvirt__iface_name => 'swp2',
            auto_config: false
      # link for swp3 --> chassis03-lc4-1:swp3
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:26",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10275',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8275',
            :libvirt__iface_name => 'swp3',
            auto_config: false
      # link for swp4 --> chassis04-lc4-1:swp3
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:e6",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10627',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8627',
            :libvirt__iface_name => 'swp4',
            auto_config: false



    # Fixes "stdin: is not a tty" and "mesg: ttyname failed : Inappropriate ioctl for device"  messages --> https://github.com/mitchellh/vagrant/issues/1673
    device.vm.provision :shell , inline: "(sudo grep -q 'mesg n' /root/.profile 2>/dev/null && sudo sed -i '/mesg n/d' /root/.profile  2>/dev/null) || true;", privileged: false

    #Copy over Topology.dot File
    device.vm.provision "file", source: "topology.dot", destination: "~/topology.dot"
    device.vm.provision :shell, privileged: false, inline: "sudo mv ~/topology.dot /etc/ptm.d/topology.dot"


    # Run the Config specified in the Node Attributes
    device.vm.provision :shell , privileged: false, :inline => 'echo "$(whoami)" > /tmp/normal_user'
    device.vm.provision :shell , path: "./helper_scripts/extra_switch_config.sh"


    # Install Rules for the interface re-map
    device.vm.provision :shell , :inline => <<-delete_udev_directory
if [ -d "/etc/udev/rules.d/70-persistent-net.rules" ]; then
    rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
fi
rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
delete_udev_directory

device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:05:2e --> eth0"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:05:2e", NAME="eth0", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:06:ac --> swp1"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:06:ac", NAME="swp1", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:72 --> swp2"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:72", NAME="swp2", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:26 --> swp3"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:26", NAME="swp3", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:e6 --> swp4"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:e6", NAME="swp4", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule

      device.vm.provision :shell , :inline => <<-vagrant_interface_rule
echo "  INFO: Adding UDEV Rule: Vagrant interface = vagrant"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{ifindex}=="2", NAME="vagrant", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
echo "#### UDEV Rules (/etc/udev/rules.d/70-persistent-net.rules) ####"
cat /etc/udev/rules.d/70-persistent-net.rules
vagrant_interface_rule

# Run Any Platform Specific Code and Apply the interface Re-map
    #   (may or may not perform a reboot depending on platform)
    device.vm.provision :shell , :inline => $script

end

  ##### DEFINE VM for leaf98 #####
  config.vm.define "leaf98" do |device|

    device.vm.hostname = "leaf98"

    device.vm.box = "CumulusCommunity/cumulus-vx"
    device.vm.box_version = "3.5.0"

    device.vm.provider :libvirt do |v|
      v.memory = 768
    end
    #   see note here: https://github.com/pradels/vagrant-libvirt#synced-folders
    device.vm.synced_folder ".", "/vagrant", disabled: true



    # NETWORK INTERFACES
      # link for eth0 --> oob-mgmt-switch3:swp4
      device.vm.network "private_network",
            :mac => "44:38:39:00:06:d2",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10873',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8873',
            :libvirt__iface_name => 'eth0',
            auto_config: false
      # link for swp1 --> chassis01-lc4-1:swp2
      device.vm.network "private_network",
            :mac => "44:38:39:00:08:68",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '11076',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '9076',
            :libvirt__iface_name => 'swp1',
            auto_config: false
      # link for swp2 --> chassis02-lc4-1:swp2
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:f6",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10379',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8379',
            :libvirt__iface_name => 'swp2',
            auto_config: false
      # link for swp3 --> chassis03-lc4-1:swp2
      device.vm.network "private_network",
            :mac => "44:38:39:00:08:0e",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '11031',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '9031',
            :libvirt__iface_name => 'swp3',
            auto_config: false
      # link for swp4 --> chassis04-lc4-1:swp2
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:d2",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10233',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8233',
            :libvirt__iface_name => 'swp4',
            auto_config: false



    # Fixes "stdin: is not a tty" and "mesg: ttyname failed : Inappropriate ioctl for device"  messages --> https://github.com/mitchellh/vagrant/issues/1673
    device.vm.provision :shell , inline: "(sudo grep -q 'mesg n' /root/.profile 2>/dev/null && sudo sed -i '/mesg n/d' /root/.profile  2>/dev/null) || true;", privileged: false

    #Copy over Topology.dot File
    device.vm.provision "file", source: "topology.dot", destination: "~/topology.dot"
    device.vm.provision :shell, privileged: false, inline: "sudo mv ~/topology.dot /etc/ptm.d/topology.dot"


    # Run the Config specified in the Node Attributes
    device.vm.provision :shell , privileged: false, :inline => 'echo "$(whoami)" > /tmp/normal_user'
    device.vm.provision :shell , path: "./helper_scripts/extra_switch_config.sh"


    # Install Rules for the interface re-map
    device.vm.provision :shell , :inline => <<-delete_udev_directory
if [ -d "/etc/udev/rules.d/70-persistent-net.rules" ]; then
    rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
fi
rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
delete_udev_directory

device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:06:d2 --> eth0"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:06:d2", NAME="eth0", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:08:68 --> swp1"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:08:68", NAME="swp1", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:f6 --> swp2"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:f6", NAME="swp2", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:08:0e --> swp3"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:08:0e", NAME="swp3", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:d2 --> swp4"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:d2", NAME="swp4", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule

      device.vm.provision :shell , :inline => <<-vagrant_interface_rule
echo "  INFO: Adding UDEV Rule: Vagrant interface = vagrant"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{ifindex}=="2", NAME="vagrant", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
echo "#### UDEV Rules (/etc/udev/rules.d/70-persistent-net.rules) ####"
cat /etc/udev/rules.d/70-persistent-net.rules
vagrant_interface_rule

# Run Any Platform Specific Code and Apply the interface Re-map
    #   (may or may not perform a reboot depending on platform)
    device.vm.provision :shell , :inline => $script

end

  ##### DEFINE VM for leaf95 #####
  config.vm.define "leaf95" do |device|

    device.vm.hostname = "leaf95"

    device.vm.box = "CumulusCommunity/cumulus-vx"
    device.vm.box_version = "3.5.0"

    device.vm.provider :libvirt do |v|
      v.memory = 768
    end
    #   see note here: https://github.com/pradels/vagrant-libvirt#synced-folders
    device.vm.synced_folder ".", "/vagrant", disabled: true



    # NETWORK INTERFACES
      # link for eth0 --> oob-mgmt-switch2:swp49
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:00",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10384',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8384',
            :libvirt__iface_name => 'eth0',
            auto_config: false
      # link for swp1 --> chassis01-lc3-2:swp15
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:8a",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10325',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8325',
            :libvirt__iface_name => 'swp1',
            auto_config: false
      # link for swp2 --> chassis02-lc3-2:swp15
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:e4",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10626',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8626',
            :libvirt__iface_name => 'swp2',
            auto_config: false
      # link for swp3 --> chassis03-lc3-2:swp15
      device.vm.network "private_network",
            :mac => "44:38:39:00:07:82",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10961',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8961',
            :libvirt__iface_name => 'swp3',
            auto_config: false
      # link for swp4 --> chassis04-lc3-2:swp15
      device.vm.network "private_network",
            :mac => "44:38:39:00:08:ae",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '11111',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '9111',
            :libvirt__iface_name => 'swp4',
            auto_config: false



    # Fixes "stdin: is not a tty" and "mesg: ttyname failed : Inappropriate ioctl for device"  messages --> https://github.com/mitchellh/vagrant/issues/1673
    device.vm.provision :shell , inline: "(sudo grep -q 'mesg n' /root/.profile 2>/dev/null && sudo sed -i '/mesg n/d' /root/.profile  2>/dev/null) || true;", privileged: false

    #Copy over Topology.dot File
    device.vm.provision "file", source: "topology.dot", destination: "~/topology.dot"
    device.vm.provision :shell, privileged: false, inline: "sudo mv ~/topology.dot /etc/ptm.d/topology.dot"


    # Run the Config specified in the Node Attributes
    device.vm.provision :shell , privileged: false, :inline => 'echo "$(whoami)" > /tmp/normal_user'
    device.vm.provision :shell , path: "./helper_scripts/extra_switch_config.sh"


    # Install Rules for the interface re-map
    device.vm.provision :shell , :inline => <<-delete_udev_directory
if [ -d "/etc/udev/rules.d/70-persistent-net.rules" ]; then
    rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
fi
rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
delete_udev_directory

device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:00 --> eth0"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:00", NAME="eth0", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:8a --> swp1"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:8a", NAME="swp1", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:e4 --> swp2"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:e4", NAME="swp2", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:07:82 --> swp3"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:07:82", NAME="swp3", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:08:ae --> swp4"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:08:ae", NAME="swp4", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule

      device.vm.provision :shell , :inline => <<-vagrant_interface_rule
echo "  INFO: Adding UDEV Rule: Vagrant interface = vagrant"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{ifindex}=="2", NAME="vagrant", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
echo "#### UDEV Rules (/etc/udev/rules.d/70-persistent-net.rules) ####"
cat /etc/udev/rules.d/70-persistent-net.rules
vagrant_interface_rule

# Run Any Platform Specific Code and Apply the interface Re-map
    #   (may or may not perform a reboot depending on platform)
    device.vm.provision :shell , :inline => $script

end

  ##### DEFINE VM for leaf94 #####
  config.vm.define "leaf94" do |device|

    device.vm.hostname = "leaf94"

    device.vm.box = "CumulusCommunity/cumulus-vx"
    device.vm.box_version = "3.5.0"

    device.vm.provider :libvirt do |v|
      v.memory = 768
    end
    #   see note here: https://github.com/pradels/vagrant-libvirt#synced-folders
    device.vm.synced_folder ".", "/vagrant", disabled: true



    # NETWORK INTERFACES
      # link for eth0 --> oob-mgmt-switch2:swp48
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:64",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10306',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8306',
            :libvirt__iface_name => 'eth0',
            auto_config: false
      # link for swp1 --> chassis01-lc3-2:swp14
      device.vm.network "private_network",
            :mac => "44:38:39:00:07:a6",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10979',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8979',
            :libvirt__iface_name => 'swp1',
            auto_config: false
      # link for swp2 --> chassis02-lc3-2:swp14
      device.vm.network "private_network",
            :mac => "44:38:39:00:06:36",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10795',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8795',
            :libvirt__iface_name => 'swp2',
            auto_config: false
      # link for swp3 --> chassis03-lc3-2:swp14
      device.vm.network "private_network",
            :mac => "44:38:39:00:09:20",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '11168',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '9168',
            :libvirt__iface_name => 'swp3',
            auto_config: false
      # link for swp4 --> chassis04-lc3-2:swp14
      device.vm.network "private_network",
            :mac => "44:38:39:00:05:f6",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10763',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8763',
            :libvirt__iface_name => 'swp4',
            auto_config: false



    # Fixes "stdin: is not a tty" and "mesg: ttyname failed : Inappropriate ioctl for device"  messages --> https://github.com/mitchellh/vagrant/issues/1673
    device.vm.provision :shell , inline: "(sudo grep -q 'mesg n' /root/.profile 2>/dev/null && sudo sed -i '/mesg n/d' /root/.profile  2>/dev/null) || true;", privileged: false

    #Copy over Topology.dot File
    device.vm.provision "file", source: "topology.dot", destination: "~/topology.dot"
    device.vm.provision :shell, privileged: false, inline: "sudo mv ~/topology.dot /etc/ptm.d/topology.dot"


    # Run the Config specified in the Node Attributes
    device.vm.provision :shell , privileged: false, :inline => 'echo "$(whoami)" > /tmp/normal_user'
    device.vm.provision :shell , path: "./helper_scripts/extra_switch_config.sh"


    # Install Rules for the interface re-map
    device.vm.provision :shell , :inline => <<-delete_udev_directory
if [ -d "/etc/udev/rules.d/70-persistent-net.rules" ]; then
    rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
fi
rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
delete_udev_directory

device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:64 --> eth0"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:64", NAME="eth0", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:07:a6 --> swp1"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:07:a6", NAME="swp1", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:06:36 --> swp2"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:06:36", NAME="swp2", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:09:20 --> swp3"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:09:20", NAME="swp3", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:05:f6 --> swp4"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:05:f6", NAME="swp4", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule

      device.vm.provision :shell , :inline => <<-vagrant_interface_rule
echo "  INFO: Adding UDEV Rule: Vagrant interface = vagrant"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{ifindex}=="2", NAME="vagrant", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
echo "#### UDEV Rules (/etc/udev/rules.d/70-persistent-net.rules) ####"
cat /etc/udev/rules.d/70-persistent-net.rules
vagrant_interface_rule

# Run Any Platform Specific Code and Apply the interface Re-map
    #   (may or may not perform a reboot depending on platform)
    device.vm.provision :shell , :inline => $script

end

  ##### DEFINE VM for leaf97 #####
  config.vm.define "leaf97" do |device|

    device.vm.hostname = "leaf97"

    device.vm.box = "CumulusCommunity/cumulus-vx"
    device.vm.box_version = "3.5.0"

    device.vm.provider :libvirt do |v|
      v.memory = 768
    end
    #   see note here: https://github.com/pradels/vagrant-libvirt#synced-folders
    device.vm.synced_folder ".", "/vagrant", disabled: true



    # NETWORK INTERFACES
      # link for eth0 --> oob-mgmt-switch3:swp3
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:ae",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10471',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8471',
            :libvirt__iface_name => 'eth0',
            auto_config: false
      # link for swp1 --> chassis01-lc4-1:swp1
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:2e",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10279',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8279',
            :libvirt__iface_name => 'swp1',
            auto_config: false
      # link for swp2 --> chassis02-lc4-1:swp1
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:f0",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10632',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8632',
            :libvirt__iface_name => 'swp2',
            auto_config: false
      # link for swp3 --> chassis03-lc4-1:swp1
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:94",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10458',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8458',
            :libvirt__iface_name => 'swp3',
            auto_config: false
      # link for swp4 --> chassis04-lc4-1:swp1
      device.vm.network "private_network",
            :mac => "44:38:39:00:08:08",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '11028',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '9028',
            :libvirt__iface_name => 'swp4',
            auto_config: false



    # Fixes "stdin: is not a tty" and "mesg: ttyname failed : Inappropriate ioctl for device"  messages --> https://github.com/mitchellh/vagrant/issues/1673
    device.vm.provision :shell , inline: "(sudo grep -q 'mesg n' /root/.profile 2>/dev/null && sudo sed -i '/mesg n/d' /root/.profile  2>/dev/null) || true;", privileged: false

    #Copy over Topology.dot File
    device.vm.provision "file", source: "topology.dot", destination: "~/topology.dot"
    device.vm.provision :shell, privileged: false, inline: "sudo mv ~/topology.dot /etc/ptm.d/topology.dot"


    # Run the Config specified in the Node Attributes
    device.vm.provision :shell , privileged: false, :inline => 'echo "$(whoami)" > /tmp/normal_user'
    device.vm.provision :shell , path: "./helper_scripts/extra_switch_config.sh"


    # Install Rules for the interface re-map
    device.vm.provision :shell , :inline => <<-delete_udev_directory
if [ -d "/etc/udev/rules.d/70-persistent-net.rules" ]; then
    rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
fi
rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
delete_udev_directory

device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:ae --> eth0"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:ae", NAME="eth0", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:2e --> swp1"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:2e", NAME="swp1", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:f0 --> swp2"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:f0", NAME="swp2", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:94 --> swp3"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:94", NAME="swp3", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:08:08 --> swp4"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:08:08", NAME="swp4", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule

      device.vm.provision :shell , :inline => <<-vagrant_interface_rule
echo "  INFO: Adding UDEV Rule: Vagrant interface = vagrant"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{ifindex}=="2", NAME="vagrant", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
echo "#### UDEV Rules (/etc/udev/rules.d/70-persistent-net.rules) ####"
cat /etc/udev/rules.d/70-persistent-net.rules
vagrant_interface_rule

# Run Any Platform Specific Code and Apply the interface Re-map
    #   (may or may not perform a reboot depending on platform)
    device.vm.provision :shell , :inline => $script

end

  ##### DEFINE VM for leaf96 #####
  config.vm.define "leaf96" do |device|

    device.vm.hostname = "leaf96"

    device.vm.box = "CumulusCommunity/cumulus-vx"
    device.vm.box_version = "3.5.0"

    device.vm.provider :libvirt do |v|
      v.memory = 768
    end
    #   see note here: https://github.com/pradels/vagrant-libvirt#synced-folders
    device.vm.synced_folder ".", "/vagrant", disabled: true



    # NETWORK INTERFACES
      # link for eth0 --> oob-mgmt-switch2:swp50
      device.vm.network "private_network",
            :mac => "44:38:39:00:05:2c",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10662',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8662',
            :libvirt__iface_name => 'eth0',
            auto_config: false
      # link for swp1 --> chassis01-lc3-2:swp16
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:c0",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10608',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8608',
            :libvirt__iface_name => 'swp1',
            auto_config: false
      # link for swp2 --> chassis02-lc3-2:swp16
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:4a",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10549',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8549',
            :libvirt__iface_name => 'swp2',
            auto_config: false
      # link for swp3 --> chassis03-lc3-2:swp16
      device.vm.network "private_network",
            :mac => "44:38:39:00:06:0a",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10773',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8773',
            :libvirt__iface_name => 'swp3',
            auto_config: false
      # link for swp4 --> chassis04-lc3-2:swp16
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:f8",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10636',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8636',
            :libvirt__iface_name => 'swp4',
            auto_config: false



    # Fixes "stdin: is not a tty" and "mesg: ttyname failed : Inappropriate ioctl for device"  messages --> https://github.com/mitchellh/vagrant/issues/1673
    device.vm.provision :shell , inline: "(sudo grep -q 'mesg n' /root/.profile 2>/dev/null && sudo sed -i '/mesg n/d' /root/.profile  2>/dev/null) || true;", privileged: false

    #Copy over Topology.dot File
    device.vm.provision "file", source: "topology.dot", destination: "~/topology.dot"
    device.vm.provision :shell, privileged: false, inline: "sudo mv ~/topology.dot /etc/ptm.d/topology.dot"


    # Run the Config specified in the Node Attributes
    device.vm.provision :shell , privileged: false, :inline => 'echo "$(whoami)" > /tmp/normal_user'
    device.vm.provision :shell , path: "./helper_scripts/extra_switch_config.sh"


    # Install Rules for the interface re-map
    device.vm.provision :shell , :inline => <<-delete_udev_directory
if [ -d "/etc/udev/rules.d/70-persistent-net.rules" ]; then
    rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
fi
rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
delete_udev_directory

device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:05:2c --> eth0"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:05:2c", NAME="eth0", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:c0 --> swp1"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:c0", NAME="swp1", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:4a --> swp2"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:4a", NAME="swp2", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:06:0a --> swp3"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:06:0a", NAME="swp3", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:f8 --> swp4"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:f8", NAME="swp4", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule

      device.vm.provision :shell , :inline => <<-vagrant_interface_rule
echo "  INFO: Adding UDEV Rule: Vagrant interface = vagrant"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{ifindex}=="2", NAME="vagrant", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
echo "#### UDEV Rules (/etc/udev/rules.d/70-persistent-net.rules) ####"
cat /etc/udev/rules.d/70-persistent-net.rules
vagrant_interface_rule

# Run Any Platform Specific Code and Apply the interface Re-map
    #   (may or may not perform a reboot depending on platform)
    device.vm.provision :shell , :inline => $script

end

  ##### DEFINE VM for leaf91 #####
  config.vm.define "leaf91" do |device|

    device.vm.hostname = "leaf91"

    device.vm.box = "CumulusCommunity/cumulus-vx"
    device.vm.box_version = "3.5.0"

    device.vm.provider :libvirt do |v|
      v.memory = 768
    end
    #   see note here: https://github.com/pradels/vagrant-libvirt#synced-folders
    device.vm.synced_folder ".", "/vagrant", disabled: true



    # NETWORK INTERFACES
      # link for eth0 --> oob-mgmt-switch2:swp45
      device.vm.network "private_network",
            :mac => "44:38:39:00:06:a2",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10849',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8849',
            :libvirt__iface_name => 'eth0',
            auto_config: false
      # link for swp1 --> chassis01-lc3-2:swp11
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:18",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10012',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8012',
            :libvirt__iface_name => 'swp1',
            auto_config: false
      # link for swp2 --> chassis02-lc3-2:swp11
      device.vm.network "private_network",
            :mac => "44:38:39:00:07:50",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10936',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8936',
            :libvirt__iface_name => 'swp2',
            auto_config: false
      # link for swp3 --> chassis03-lc3-2:swp11
      device.vm.network "private_network",
            :mac => "44:38:39:00:06:9a",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10845',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8845',
            :libvirt__iface_name => 'swp3',
            auto_config: false
      # link for swp4 --> chassis04-lc3-2:swp11
      device.vm.network "private_network",
            :mac => "44:38:39:00:08:ea",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '11141',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '9141',
            :libvirt__iface_name => 'swp4',
            auto_config: false



    # Fixes "stdin: is not a tty" and "mesg: ttyname failed : Inappropriate ioctl for device"  messages --> https://github.com/mitchellh/vagrant/issues/1673
    device.vm.provision :shell , inline: "(sudo grep -q 'mesg n' /root/.profile 2>/dev/null && sudo sed -i '/mesg n/d' /root/.profile  2>/dev/null) || true;", privileged: false

    #Copy over Topology.dot File
    device.vm.provision "file", source: "topology.dot", destination: "~/topology.dot"
    device.vm.provision :shell, privileged: false, inline: "sudo mv ~/topology.dot /etc/ptm.d/topology.dot"


    # Run the Config specified in the Node Attributes
    device.vm.provision :shell , privileged: false, :inline => 'echo "$(whoami)" > /tmp/normal_user'
    device.vm.provision :shell , path: "./helper_scripts/extra_switch_config.sh"


    # Install Rules for the interface re-map
    device.vm.provision :shell , :inline => <<-delete_udev_directory
if [ -d "/etc/udev/rules.d/70-persistent-net.rules" ]; then
    rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
fi
rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
delete_udev_directory

device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:06:a2 --> eth0"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:06:a2", NAME="eth0", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:18 --> swp1"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:18", NAME="swp1", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:07:50 --> swp2"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:07:50", NAME="swp2", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:06:9a --> swp3"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:06:9a", NAME="swp3", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:08:ea --> swp4"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:08:ea", NAME="swp4", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule

      device.vm.provision :shell , :inline => <<-vagrant_interface_rule
echo "  INFO: Adding UDEV Rule: Vagrant interface = vagrant"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{ifindex}=="2", NAME="vagrant", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
echo "#### UDEV Rules (/etc/udev/rules.d/70-persistent-net.rules) ####"
cat /etc/udev/rules.d/70-persistent-net.rules
vagrant_interface_rule

# Run Any Platform Specific Code and Apply the interface Re-map
    #   (may or may not perform a reboot depending on platform)
    device.vm.provision :shell , :inline => $script

end

  ##### DEFINE VM for leaf90 #####
  config.vm.define "leaf90" do |device|

    device.vm.hostname = "leaf90"

    device.vm.box = "CumulusCommunity/cumulus-vx"
    device.vm.box_version = "3.5.0"

    device.vm.provider :libvirt do |v|
      v.memory = 768
    end
    #   see note here: https://github.com/pradels/vagrant-libvirt#synced-folders
    device.vm.synced_folder ".", "/vagrant", disabled: true



    # NETWORK INTERFACES
      # link for eth0 --> oob-mgmt-switch2:swp44
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:a0",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10592',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8592',
            :libvirt__iface_name => 'eth0',
            auto_config: false
      # link for swp1 --> chassis01-lc3-2:swp10
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:76",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10315',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8315',
            :libvirt__iface_name => 'swp1',
            auto_config: false
      # link for swp2 --> chassis02-lc3-2:swp10
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:d0",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10104',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8104',
            :libvirt__iface_name => 'swp2',
            auto_config: false
      # link for swp3 --> chassis03-lc3-2:swp10
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:14",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10138',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8138',
            :libvirt__iface_name => 'swp3',
            auto_config: false
      # link for swp4 --> chassis04-lc3-2:swp10
      device.vm.network "private_network",
            :mac => "44:38:39:00:05:9a",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10717',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8717',
            :libvirt__iface_name => 'swp4',
            auto_config: false



    # Fixes "stdin: is not a tty" and "mesg: ttyname failed : Inappropriate ioctl for device"  messages --> https://github.com/mitchellh/vagrant/issues/1673
    device.vm.provision :shell , inline: "(sudo grep -q 'mesg n' /root/.profile 2>/dev/null && sudo sed -i '/mesg n/d' /root/.profile  2>/dev/null) || true;", privileged: false

    #Copy over Topology.dot File
    device.vm.provision "file", source: "topology.dot", destination: "~/topology.dot"
    device.vm.provision :shell, privileged: false, inline: "sudo mv ~/topology.dot /etc/ptm.d/topology.dot"


    # Run the Config specified in the Node Attributes
    device.vm.provision :shell , privileged: false, :inline => 'echo "$(whoami)" > /tmp/normal_user'
    device.vm.provision :shell , path: "./helper_scripts/extra_switch_config.sh"


    # Install Rules for the interface re-map
    device.vm.provision :shell , :inline => <<-delete_udev_directory
if [ -d "/etc/udev/rules.d/70-persistent-net.rules" ]; then
    rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
fi
rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
delete_udev_directory

device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:a0 --> eth0"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:a0", NAME="eth0", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:76 --> swp1"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:76", NAME="swp1", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:d0 --> swp2"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:d0", NAME="swp2", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:14 --> swp3"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:14", NAME="swp3", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:05:9a --> swp4"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:05:9a", NAME="swp4", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule

      device.vm.provision :shell , :inline => <<-vagrant_interface_rule
echo "  INFO: Adding UDEV Rule: Vagrant interface = vagrant"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{ifindex}=="2", NAME="vagrant", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
echo "#### UDEV Rules (/etc/udev/rules.d/70-persistent-net.rules) ####"
cat /etc/udev/rules.d/70-persistent-net.rules
vagrant_interface_rule

# Run Any Platform Specific Code and Apply the interface Re-map
    #   (may or may not perform a reboot depending on platform)
    device.vm.provision :shell , :inline => $script

end

  ##### DEFINE VM for leaf93 #####
  config.vm.define "leaf93" do |device|

    device.vm.hostname = "leaf93"

    device.vm.box = "CumulusCommunity/cumulus-vx"
    device.vm.box_version = "3.5.0"

    device.vm.provider :libvirt do |v|
      v.memory = 768
    end
    #   see note here: https://github.com/pradels/vagrant-libvirt#synced-folders
    device.vm.synced_folder ".", "/vagrant", disabled: true



    # NETWORK INTERFACES
      # link for eth0 --> oob-mgmt-switch2:swp47
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:9a",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10461',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8461',
            :libvirt__iface_name => 'eth0',
            auto_config: false
      # link for swp1 --> chassis01-lc3-2:swp13
      device.vm.network "private_network",
            :mac => "44:38:39:00:05:a0",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10720',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8720',
            :libvirt__iface_name => 'swp1',
            auto_config: false
      # link for swp2 --> chassis02-lc3-2:swp13
      device.vm.network "private_network",
            :mac => "44:38:39:00:06:e0",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10880',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8880',
            :libvirt__iface_name => 'swp2',
            auto_config: false
      # link for swp3 --> chassis03-lc3-2:swp13
      device.vm.network "private_network",
            :mac => "44:38:39:00:05:16",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10651',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8651',
            :libvirt__iface_name => 'swp3',
            auto_config: false
      # link for swp4 --> chassis04-lc3-2:swp13
      device.vm.network "private_network",
            :mac => "44:38:39:00:07:0e",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10903',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8903',
            :libvirt__iface_name => 'swp4',
            auto_config: false



    # Fixes "stdin: is not a tty" and "mesg: ttyname failed : Inappropriate ioctl for device"  messages --> https://github.com/mitchellh/vagrant/issues/1673
    device.vm.provision :shell , inline: "(sudo grep -q 'mesg n' /root/.profile 2>/dev/null && sudo sed -i '/mesg n/d' /root/.profile  2>/dev/null) || true;", privileged: false

    #Copy over Topology.dot File
    device.vm.provision "file", source: "topology.dot", destination: "~/topology.dot"
    device.vm.provision :shell, privileged: false, inline: "sudo mv ~/topology.dot /etc/ptm.d/topology.dot"


    # Run the Config specified in the Node Attributes
    device.vm.provision :shell , privileged: false, :inline => 'echo "$(whoami)" > /tmp/normal_user'
    device.vm.provision :shell , path: "./helper_scripts/extra_switch_config.sh"


    # Install Rules for the interface re-map
    device.vm.provision :shell , :inline => <<-delete_udev_directory
if [ -d "/etc/udev/rules.d/70-persistent-net.rules" ]; then
    rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
fi
rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
delete_udev_directory

device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:9a --> eth0"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:9a", NAME="eth0", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:05:a0 --> swp1"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:05:a0", NAME="swp1", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:06:e0 --> swp2"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:06:e0", NAME="swp2", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:05:16 --> swp3"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:05:16", NAME="swp3", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:07:0e --> swp4"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:07:0e", NAME="swp4", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule

      device.vm.provision :shell , :inline => <<-vagrant_interface_rule
echo "  INFO: Adding UDEV Rule: Vagrant interface = vagrant"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{ifindex}=="2", NAME="vagrant", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
echo "#### UDEV Rules (/etc/udev/rules.d/70-persistent-net.rules) ####"
cat /etc/udev/rules.d/70-persistent-net.rules
vagrant_interface_rule

# Run Any Platform Specific Code and Apply the interface Re-map
    #   (may or may not perform a reboot depending on platform)
    device.vm.provision :shell , :inline => $script

end

  ##### DEFINE VM for leaf92 #####
  config.vm.define "leaf92" do |device|

    device.vm.hostname = "leaf92"

    device.vm.box = "CumulusCommunity/cumulus-vx"
    device.vm.box_version = "3.5.0"

    device.vm.provider :libvirt do |v|
      v.memory = 768
    end
    #   see note here: https://github.com/pradels/vagrant-libvirt#synced-folders
    device.vm.synced_folder ".", "/vagrant", disabled: true



    # NETWORK INTERFACES
      # link for eth0 --> oob-mgmt-switch2:swp46
      device.vm.network "private_network",
            :mac => "44:38:39:00:07:62",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10945',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8945',
            :libvirt__iface_name => 'eth0',
            auto_config: false
      # link for swp1 --> chassis01-lc3-2:swp12
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:84",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10450',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8450',
            :libvirt__iface_name => 'swp1',
            auto_config: false
      # link for swp2 --> chassis02-lc3-2:swp12
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:3e",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10159',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8159',
            :libvirt__iface_name => 'swp2',
            auto_config: false
      # link for swp3 --> chassis03-lc3-2:swp12
      device.vm.network "private_network",
            :mac => "44:38:39:00:06:52",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10809',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8809',
            :libvirt__iface_name => 'swp3',
            auto_config: false
      # link for swp4 --> chassis04-lc3-2:swp12
      device.vm.network "private_network",
            :mac => "44:38:39:00:08:b6",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '11115',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '9115',
            :libvirt__iface_name => 'swp4',
            auto_config: false



    # Fixes "stdin: is not a tty" and "mesg: ttyname failed : Inappropriate ioctl for device"  messages --> https://github.com/mitchellh/vagrant/issues/1673
    device.vm.provision :shell , inline: "(sudo grep -q 'mesg n' /root/.profile 2>/dev/null && sudo sed -i '/mesg n/d' /root/.profile  2>/dev/null) || true;", privileged: false

    #Copy over Topology.dot File
    device.vm.provision "file", source: "topology.dot", destination: "~/topology.dot"
    device.vm.provision :shell, privileged: false, inline: "sudo mv ~/topology.dot /etc/ptm.d/topology.dot"


    # Run the Config specified in the Node Attributes
    device.vm.provision :shell , privileged: false, :inline => 'echo "$(whoami)" > /tmp/normal_user'
    device.vm.provision :shell , path: "./helper_scripts/extra_switch_config.sh"


    # Install Rules for the interface re-map
    device.vm.provision :shell , :inline => <<-delete_udev_directory
if [ -d "/etc/udev/rules.d/70-persistent-net.rules" ]; then
    rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
fi
rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
delete_udev_directory

device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:07:62 --> eth0"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:07:62", NAME="eth0", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:84 --> swp1"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:84", NAME="swp1", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:3e --> swp2"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:3e", NAME="swp2", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:06:52 --> swp3"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:06:52", NAME="swp3", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:08:b6 --> swp4"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:08:b6", NAME="swp4", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule

      device.vm.provision :shell , :inline => <<-vagrant_interface_rule
echo "  INFO: Adding UDEV Rule: Vagrant interface = vagrant"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{ifindex}=="2", NAME="vagrant", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
echo "#### UDEV Rules (/etc/udev/rules.d/70-persistent-net.rules) ####"
cat /etc/udev/rules.d/70-persistent-net.rules
vagrant_interface_rule

# Run Any Platform Specific Code and Apply the interface Re-map
    #   (may or may not perform a reboot depending on platform)
    device.vm.provision :shell , :inline => $script

end

  ##### DEFINE VM for netq-ts #####
  config.vm.define "netq-ts" do |device|

    device.vm.hostname = "netq-ts"

    device.vm.box = "cumulus/ts"

    device.vm.provider :libvirt do |v|
      v.nic_model_type = 'e1000'
      v.memory = 1024
      v.cpus = 2
    end
    #   see note here: https://github.com/pradels/vagrant-libvirt#synced-folders
    device.vm.synced_folder ".", "/vagrant", disabled: true



    # NETWORK INTERFACES
      # link for eth0 --> oob-mgmt-switch3:swp35
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:28",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10148',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8148',
            :libvirt__iface_name => 'eth0',
            auto_config: false



    # Fixes "stdin: is not a tty" and "mesg: ttyname failed : Inappropriate ioctl for device"  messages --> https://github.com/mitchellh/vagrant/issues/1673
    device.vm.provision :shell , inline: "(sudo grep -q 'mesg n' /root/.profile 2>/dev/null && sudo sed -i '/mesg n/d' /root/.profile  2>/dev/null) || true;", privileged: false


    # Run the Config specified in the Node Attributes
    device.vm.provision :shell , privileged: false, :inline => 'echo "$(whoami)" > /tmp/normal_user'


    # Install Rules for the interface re-map
    device.vm.provision :shell , :inline => <<-delete_udev_directory
if [ -d "/etc/udev/rules.d/70-persistent-net.rules" ]; then
    rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
fi
rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
delete_udev_directory

device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:28 --> eth0"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:28", NAME="eth0", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule

      device.vm.provision :shell , :inline => <<-vagrant_interface_rule
echo "  INFO: Adding UDEV Rule: Vagrant interface = vagrant"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{ifindex}=="2", NAME="vagrant", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
echo "#### UDEV Rules (/etc/udev/rules.d/70-persistent-net.rules) ####"
cat /etc/udev/rules.d/70-persistent-net.rules
vagrant_interface_rule

# Run Any Platform Specific Code and Apply the interface Re-map
    #   (may or may not perform a reboot depending on platform)
    device.vm.provision :shell , :inline => $script

end

  ##### DEFINE VM for chassis02-fc1-1 #####
  config.vm.define "chassis02-fc1-1" do |device|

    device.vm.hostname = "chassis02-fc1-1"

    device.vm.box = "CumulusCommunity/cumulus-vx"
    device.vm.box_version = "3.5.0"

    device.vm.provider :libvirt do |v|
      v.memory = 768
    end
    #   see note here: https://github.com/pradels/vagrant-libvirt#synced-folders
    device.vm.synced_folder ".", "/vagrant", disabled: true



    # NETWORK INTERFACES
      # link for eth0 --> oob-mgmt-switch4:swp23
      device.vm.network "private_network",
            :mac => "44:38:39:00:09:38",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '11180',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '9180',
            :libvirt__iface_name => 'eth0',
            auto_config: false
      # link for fp0 --> chassis02-lc1-1:fp0
      device.vm.network "private_network",
            :mac => "44:38:39:00:05:1a",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10653',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8653',
            :libvirt__iface_name => 'fp0',
            auto_config: false
      # link for fp1 --> chassis02-lc1-1:fp1
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:64",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10434',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8434',
            :libvirt__iface_name => 'fp1',
            auto_config: false
      # link for fp2 --> chassis02-lc1-1:fp2
      device.vm.network "private_network",
            :mac => "44:38:39:00:09:08",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '11156',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '9156',
            :libvirt__iface_name => 'fp2',
            auto_config: false
      # link for fp3 --> chassis02-lc1-1:fp3
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:f6",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10251',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8251',
            :libvirt__iface_name => 'fp3',
            auto_config: false
      # link for fp4 --> chassis02-lc1-2:fp0
      device.vm.network "private_network",
            :mac => "44:38:39:00:07:94",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10970',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8970',
            :libvirt__iface_name => 'fp4',
            auto_config: false
      # link for fp5 --> chassis02-lc1-2:fp1
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:50",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10296',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8296',
            :libvirt__iface_name => 'fp5',
            auto_config: false
      # link for fp6 --> chassis02-lc1-2:fp2
      device.vm.network "private_network",
            :mac => "44:38:39:00:08:a4",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '11106',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '9106',
            :libvirt__iface_name => 'fp6',
            auto_config: false
      # link for fp7 --> chassis02-lc1-2:fp3
      device.vm.network "private_network",
            :mac => "44:38:39:00:05:a2",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10721',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8721',
            :libvirt__iface_name => 'fp7',
            auto_config: false
      # link for fp8 --> chassis02-lc2-1:fp0
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:a8",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10468',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8468',
            :libvirt__iface_name => 'fp8',
            auto_config: false
      # link for fp9 --> chassis02-lc2-1:fp1
      device.vm.network "private_network",
            :mac => "44:38:39:00:07:6e",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10951',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8951',
            :libvirt__iface_name => 'fp9',
            auto_config: false
      # link for fp10 --> chassis02-lc2-1:fp2
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:9e",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10335',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8335',
            :libvirt__iface_name => 'fp10',
            auto_config: false
      # link for fp11 --> chassis02-lc2-1:fp3
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:36",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10539',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8539',
            :libvirt__iface_name => 'fp11',
            auto_config: false
      # link for fp12 --> chassis02-lc2-2:fp0
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:ac",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10598',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8598',
            :libvirt__iface_name => 'fp12',
            auto_config: false
      # link for fp13 --> chassis02-lc2-2:fp1
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:46",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10163',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8163',
            :libvirt__iface_name => 'fp13',
            auto_config: false
      # link for fp14 --> chassis02-lc2-2:fp2
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:08",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10516',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8516',
            :libvirt__iface_name => 'fp14',
            auto_config: false
      # link for fp15 --> chassis02-lc2-2:fp3
      device.vm.network "private_network",
            :mac => "44:38:39:00:05:4a",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10677',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8677',
            :libvirt__iface_name => 'fp15',
            auto_config: false
      # link for fp16 --> chassis02-lc3-1:fp0
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:06",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10259',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8259',
            :libvirt__iface_name => 'fp16',
            auto_config: false
      # link for fp17 --> chassis02-lc3-1:fp1
      device.vm.network "private_network",
            :mac => "44:38:39:00:06:d0",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10872',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8872',
            :libvirt__iface_name => 'fp17',
            auto_config: false
      # link for fp18 --> chassis02-lc3-1:fp2
      device.vm.network "private_network",
            :mac => "44:38:39:00:07:7a",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10957',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8957',
            :libvirt__iface_name => 'fp18',
            auto_config: false
      # link for fp19 --> chassis02-lc3-1:fp3
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:22",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10145',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8145',
            :libvirt__iface_name => 'fp19',
            auto_config: false
      # link for fp20 --> chassis02-lc3-2:fp0
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:9e",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10207',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8207',
            :libvirt__iface_name => 'fp20',
            auto_config: false
      # link for fp21 --> chassis02-lc3-2:fp1
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:c6",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10611',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8611',
            :libvirt__iface_name => 'fp21',
            auto_config: false
      # link for fp22 --> chassis02-lc3-2:fp2
      device.vm.network "private_network",
            :mac => "44:38:39:00:05:20",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10656',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8656',
            :libvirt__iface_name => 'fp22',
            auto_config: false
      # link for fp23 --> chassis02-lc3-2:fp3
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:12",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10265',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8265',
            :libvirt__iface_name => 'fp23',
            auto_config: false
      # link for fp24 --> chassis02-lc4-1:fp0
      device.vm.network "private_network",
            :mac => "44:38:39:00:06:7c",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10830',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8830',
            :libvirt__iface_name => 'fp24',
            auto_config: false
      # link for fp25 --> chassis02-lc4-1:fp1
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:1e",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10399',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8399',
            :libvirt__iface_name => 'fp25',
            auto_config: false
      # link for fp26 --> chassis02-lc4-1:fp2
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:c6",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10099',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8099',
            :libvirt__iface_name => 'fp26',
            auto_config: false
      # link for fp27 --> chassis02-lc4-1:fp3
      device.vm.network "private_network",
            :mac => "44:38:39:00:05:b8",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10732',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8732',
            :libvirt__iface_name => 'fp27',
            auto_config: false
      # link for fp28 --> chassis02-lc4-2:fp0
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:68",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10564',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8564',
            :libvirt__iface_name => 'fp28',
            auto_config: false
      # link for fp29 --> chassis02-lc4-2:fp1
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:e6",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10243',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8243',
            :libvirt__iface_name => 'fp29',
            auto_config: false
      # link for fp30 --> chassis02-lc4-2:fp2
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:30",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10408',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8408',
            :libvirt__iface_name => 'fp30',
            auto_config: false
      # link for fp31 --> chassis02-lc4-2:fp3
      device.vm.network "private_network",
            :mac => "44:38:39:00:05:ce",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10743',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8743',
            :libvirt__iface_name => 'fp31',
            auto_config: false



    # Fixes "stdin: is not a tty" and "mesg: ttyname failed : Inappropriate ioctl for device"  messages --> https://github.com/mitchellh/vagrant/issues/1673
    device.vm.provision :shell , inline: "(sudo grep -q 'mesg n' /root/.profile 2>/dev/null && sudo sed -i '/mesg n/d' /root/.profile  2>/dev/null) || true;", privileged: false

    #Copy over Topology.dot File
    device.vm.provision "file", source: "topology.dot", destination: "~/topology.dot"
    device.vm.provision :shell, privileged: false, inline: "sudo mv ~/topology.dot /etc/ptm.d/topology.dot"


    # Run the Config specified in the Node Attributes
    device.vm.provision :shell , privileged: false, :inline => 'echo "$(whoami)" > /tmp/normal_user'
    device.vm.provision :shell , path: "./helper_scripts/extra_switch_config.sh"


    # Install Rules for the interface re-map
    device.vm.provision :shell , :inline => <<-delete_udev_directory
if [ -d "/etc/udev/rules.d/70-persistent-net.rules" ]; then
    rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
fi
rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
delete_udev_directory

device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:09:38 --> eth0"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:09:38", NAME="eth0", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:05:1a --> fp0"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:05:1a", NAME="fp0", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:64 --> fp1"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:64", NAME="fp1", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:09:08 --> fp2"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:09:08", NAME="fp2", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:f6 --> fp3"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:f6", NAME="fp3", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:07:94 --> fp4"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:07:94", NAME="fp4", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:50 --> fp5"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:50", NAME="fp5", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:08:a4 --> fp6"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:08:a4", NAME="fp6", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:05:a2 --> fp7"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:05:a2", NAME="fp7", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:a8 --> fp8"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:a8", NAME="fp8", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:07:6e --> fp9"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:07:6e", NAME="fp9", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:9e --> fp10"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:9e", NAME="fp10", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:36 --> fp11"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:36", NAME="fp11", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:ac --> fp12"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:ac", NAME="fp12", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:46 --> fp13"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:46", NAME="fp13", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:08 --> fp14"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:08", NAME="fp14", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:05:4a --> fp15"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:05:4a", NAME="fp15", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:06 --> fp16"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:06", NAME="fp16", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:06:d0 --> fp17"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:06:d0", NAME="fp17", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:07:7a --> fp18"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:07:7a", NAME="fp18", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:22 --> fp19"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:22", NAME="fp19", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:9e --> fp20"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:9e", NAME="fp20", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:c6 --> fp21"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:c6", NAME="fp21", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:05:20 --> fp22"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:05:20", NAME="fp22", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:12 --> fp23"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:12", NAME="fp23", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:06:7c --> fp24"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:06:7c", NAME="fp24", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:1e --> fp25"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:1e", NAME="fp25", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:c6 --> fp26"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:c6", NAME="fp26", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:05:b8 --> fp27"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:05:b8", NAME="fp27", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:68 --> fp28"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:68", NAME="fp28", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:e6 --> fp29"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:e6", NAME="fp29", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:30 --> fp30"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:30", NAME="fp30", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:05:ce --> fp31"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:05:ce", NAME="fp31", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule

      device.vm.provision :shell , :inline => <<-vagrant_interface_rule
echo "  INFO: Adding UDEV Rule: Vagrant interface = vagrant"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{ifindex}=="2", NAME="vagrant", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
echo "#### UDEV Rules (/etc/udev/rules.d/70-persistent-net.rules) ####"
cat /etc/udev/rules.d/70-persistent-net.rules
vagrant_interface_rule

# Run Any Platform Specific Code and Apply the interface Re-map
    #   (may or may not perform a reboot depending on platform)
    device.vm.provision :shell , :inline => $script

end

  ##### DEFINE VM for chassis04-lc3-1 #####
  config.vm.define "chassis04-lc3-1" do |device|

    device.vm.hostname = "chassis04-lc3-1"

    device.vm.box = "CumulusCommunity/cumulus-vx"
    device.vm.box_version = "3.5.0"

    device.vm.provider :libvirt do |v|
      v.memory = 768
    end
    #   see note here: https://github.com/pradels/vagrant-libvirt#synced-folders
    device.vm.synced_folder ".", "/vagrant", disabled: true



    # NETWORK INTERFACES
      # link for eth0 --> oob-mgmt-switch4:swp43
      device.vm.network "private_network",
            :mac => "44:38:39:00:06:06",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10771',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8771',
            :libvirt__iface_name => 'eth0',
            auto_config: false
      # link for fp0 --> chassis04-fc1-1:fp16
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:51",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8169',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10169',
            :libvirt__iface_name => 'fp0',
            auto_config: false
      # link for fp1 --> chassis04-fc1-1:fp17
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:bf",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8096',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10096',
            :libvirt__iface_name => 'fp1',
            auto_config: false
      # link for fp2 --> chassis04-fc1-1:fp18
      device.vm.network "private_network",
            :mac => "44:38:39:00:09:4f",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '9192',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '11192',
            :libvirt__iface_name => 'fp2',
            auto_config: false
      # link for fp3 --> chassis04-fc1-1:fp19
      device.vm.network "private_network",
            :mac => "44:38:39:00:05:33",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8666',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10666',
            :libvirt__iface_name => 'fp3',
            auto_config: false
      # link for fp4 --> chassis04-fc2-1:fp16
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:41",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8289',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10289',
            :libvirt__iface_name => 'fp4',
            auto_config: false
      # link for fp5 --> chassis04-fc2-1:fp17
      device.vm.network "private_network",
            :mac => "44:38:39:00:07:4b",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8934',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10934',
            :libvirt__iface_name => 'fp5',
            auto_config: false
      # link for fp6 --> chassis04-fc2-1:fp18
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:bb",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8478',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10478',
            :libvirt__iface_name => 'fp6',
            auto_config: false
      # link for fp7 --> chassis04-fc2-1:fp19
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:35",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8155',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10155',
            :libvirt__iface_name => 'fp7',
            auto_config: false
      # link for fp8 --> chassis04-fc3-1:fp16
      device.vm.network "private_network",
            :mac => "44:38:39:00:07:9f",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8976',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10976',
            :libvirt__iface_name => 'fp8',
            auto_config: false
      # link for fp9 --> chassis04-fc3-1:fp17
      device.vm.network "private_network",
            :mac => "44:38:39:00:05:df",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8752',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10752',
            :libvirt__iface_name => 'fp9',
            auto_config: false
      # link for fp10 --> chassis04-fc3-1:fp18
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:b9",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8477',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10477',
            :libvirt__iface_name => 'fp10',
            auto_config: false
      # link for fp11 --> chassis04-fc3-1:fp19
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:8d",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8071',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10071',
            :libvirt__iface_name => 'fp11',
            auto_config: false
      # link for fp12 --> chassis04-fc4-1:fp16
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:c1",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8097',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10097',
            :libvirt__iface_name => 'fp12',
            auto_config: false
      # link for fp13 --> chassis04-fc4-1:fp17
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:23",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8402',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10402',
            :libvirt__iface_name => 'fp13',
            auto_config: false
      # link for fp14 --> chassis04-fc4-1:fp18
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:97",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8460',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10460',
            :libvirt__iface_name => 'fp14',
            auto_config: false
      # link for fp15 --> chassis04-fc4-1:fp19
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:f5",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8123',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10123',
            :libvirt__iface_name => 'fp15',
            auto_config: false
      # link for swp1 --> leaf65:swp4
      device.vm.network "private_network",
            :mac => "44:38:39:00:06:15",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8779',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10779',
            :libvirt__iface_name => 'swp1',
            auto_config: false
      # link for swp2 --> leaf66:swp4
      device.vm.network "private_network",
            :mac => "44:38:39:00:06:43",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8802',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10802',
            :libvirt__iface_name => 'swp2',
            auto_config: false
      # link for swp3 --> leaf67:swp4
      device.vm.network "private_network",
            :mac => "44:38:39:00:07:35",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8923',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10923',
            :libvirt__iface_name => 'swp3',
            auto_config: false
      # link for swp4 --> leaf68:swp4
      device.vm.network "private_network",
            :mac => "44:38:39:00:06:9b",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8846',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10846',
            :libvirt__iface_name => 'swp4',
            auto_config: false
      # link for swp5 --> leaf69:swp4
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:33",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8026',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10026',
            :libvirt__iface_name => 'swp5',
            auto_config: false
      # link for swp6 --> leaf70:swp4
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:af",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8472',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10472',
            :libvirt__iface_name => 'swp6',
            auto_config: false
      # link for swp7 --> leaf71:swp4
      device.vm.network "private_network",
            :mac => "44:38:39:00:06:f5",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8891',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10891',
            :libvirt__iface_name => 'swp7',
            auto_config: false
      # link for swp8 --> leaf72:swp4
      device.vm.network "private_network",
            :mac => "44:38:39:00:05:0d",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8647',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10647',
            :libvirt__iface_name => 'swp8',
            auto_config: false
      # link for swp9 --> leaf73:swp4
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:45",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8547',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10547',
            :libvirt__iface_name => 'swp9',
            auto_config: false
      # link for swp10 --> leaf74:swp4
      device.vm.network "private_network",
            :mac => "44:38:39:00:08:8f",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '9096',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '11096',
            :libvirt__iface_name => 'swp10',
            auto_config: false
      # link for swp11 --> leaf75:swp4
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:69",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8309',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10309',
            :libvirt__iface_name => 'swp11',
            auto_config: false
      # link for swp12 --> leaf76:swp4
      device.vm.network "private_network",
            :mac => "44:38:39:00:05:ed",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8759',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10759',
            :libvirt__iface_name => 'swp12',
            auto_config: false
      # link for swp13 --> leaf77:swp4
      device.vm.network "private_network",
            :mac => "44:38:39:00:07:91",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8969',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10969',
            :libvirt__iface_name => 'swp13',
            auto_config: false
      # link for swp14 --> leaf78:swp4
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:91",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8457',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10457',
            :libvirt__iface_name => 'swp14',
            auto_config: false
      # link for swp15 --> leaf79:swp4
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:d7",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8108',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10108',
            :libvirt__iface_name => 'swp15',
            auto_config: false
      # link for swp16 --> leaf80:swp4
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:71",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8441',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10441',
            :libvirt__iface_name => 'swp16',
            auto_config: false



    # Fixes "stdin: is not a tty" and "mesg: ttyname failed : Inappropriate ioctl for device"  messages --> https://github.com/mitchellh/vagrant/issues/1673
    device.vm.provision :shell , inline: "(sudo grep -q 'mesg n' /root/.profile 2>/dev/null && sudo sed -i '/mesg n/d' /root/.profile  2>/dev/null) || true;", privileged: false

    #Copy over Topology.dot File
    device.vm.provision "file", source: "topology.dot", destination: "~/topology.dot"
    device.vm.provision :shell, privileged: false, inline: "sudo mv ~/topology.dot /etc/ptm.d/topology.dot"


    # Run the Config specified in the Node Attributes
    device.vm.provision :shell , privileged: false, :inline => 'echo "$(whoami)" > /tmp/normal_user'
    device.vm.provision :shell , path: "./helper_scripts/extra_switch_config.sh"


    # Install Rules for the interface re-map
    device.vm.provision :shell , :inline => <<-delete_udev_directory
if [ -d "/etc/udev/rules.d/70-persistent-net.rules" ]; then
    rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
fi
rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
delete_udev_directory

device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:06:06 --> eth0"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:06:06", NAME="eth0", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:51 --> fp0"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:51", NAME="fp0", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:bf --> fp1"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:bf", NAME="fp1", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:09:4f --> fp2"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:09:4f", NAME="fp2", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:05:33 --> fp3"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:05:33", NAME="fp3", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:41 --> fp4"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:41", NAME="fp4", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:07:4b --> fp5"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:07:4b", NAME="fp5", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:bb --> fp6"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:bb", NAME="fp6", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:35 --> fp7"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:35", NAME="fp7", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:07:9f --> fp8"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:07:9f", NAME="fp8", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:05:df --> fp9"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:05:df", NAME="fp9", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:b9 --> fp10"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:b9", NAME="fp10", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:8d --> fp11"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:8d", NAME="fp11", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:c1 --> fp12"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:c1", NAME="fp12", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:23 --> fp13"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:23", NAME="fp13", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:97 --> fp14"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:97", NAME="fp14", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:f5 --> fp15"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:f5", NAME="fp15", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:06:15 --> swp1"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:06:15", NAME="swp1", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:06:43 --> swp2"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:06:43", NAME="swp2", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:07:35 --> swp3"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:07:35", NAME="swp3", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:06:9b --> swp4"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:06:9b", NAME="swp4", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:33 --> swp5"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:33", NAME="swp5", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:af --> swp6"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:af", NAME="swp6", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:06:f5 --> swp7"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:06:f5", NAME="swp7", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:05:0d --> swp8"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:05:0d", NAME="swp8", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:45 --> swp9"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:45", NAME="swp9", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:08:8f --> swp10"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:08:8f", NAME="swp10", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:69 --> swp11"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:69", NAME="swp11", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:05:ed --> swp12"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:05:ed", NAME="swp12", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:07:91 --> swp13"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:07:91", NAME="swp13", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:91 --> swp14"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:91", NAME="swp14", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:d7 --> swp15"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:d7", NAME="swp15", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:71 --> swp16"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:71", NAME="swp16", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule

      device.vm.provision :shell , :inline => <<-vagrant_interface_rule
echo "  INFO: Adding UDEV Rule: Vagrant interface = vagrant"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{ifindex}=="2", NAME="vagrant", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
echo "#### UDEV Rules (/etc/udev/rules.d/70-persistent-net.rules) ####"
cat /etc/udev/rules.d/70-persistent-net.rules
vagrant_interface_rule

# Run Any Platform Specific Code and Apply the interface Re-map
    #   (may or may not perform a reboot depending on platform)
    device.vm.provision :shell , :inline => $script

end

  ##### DEFINE VM for chassis04-lc3-2 #####
  config.vm.define "chassis04-lc3-2" do |device|

    device.vm.hostname = "chassis04-lc3-2"

    device.vm.box = "CumulusCommunity/cumulus-vx"
    device.vm.box_version = "3.5.0"

    device.vm.provider :libvirt do |v|
      v.memory = 768
    end
    #   see note here: https://github.com/pradels/vagrant-libvirt#synced-folders
    device.vm.synced_folder ".", "/vagrant", disabled: true



    # NETWORK INTERFACES
      # link for eth0 --> oob-mgmt-switch4:swp44
      device.vm.network "private_network",
            :mac => "44:38:39:00:08:52",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '11065',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '9065',
            :libvirt__iface_name => 'eth0',
            auto_config: false
      # link for fp0 --> chassis04-fc1-1:fp20
      device.vm.network "private_network",
            :mac => "44:38:39:00:08:53",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '9066',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '11066',
            :libvirt__iface_name => 'fp0',
            auto_config: false
      # link for fp1 --> chassis04-fc1-1:fp21
      device.vm.network "private_network",
            :mac => "44:38:39:00:05:d5",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8747',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10747',
            :libvirt__iface_name => 'fp1',
            auto_config: false
      # link for fp2 --> chassis04-fc1-1:fp22
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:45",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8291',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10291',
            :libvirt__iface_name => 'fp2',
            auto_config: false
      # link for fp3 --> chassis04-fc1-1:fp23
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:51",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8425',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10425',
            :libvirt__iface_name => 'fp3',
            auto_config: false
      # link for fp4 --> chassis04-fc2-1:fp20
      device.vm.network "private_network",
            :mac => "44:38:39:00:06:4d",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8807',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10807',
            :libvirt__iface_name => 'fp4',
            auto_config: false
      # link for fp5 --> chassis04-fc2-1:fp21
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:fd",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8511',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10511',
            :libvirt__iface_name => 'fp5',
            auto_config: false
      # link for fp6 --> chassis04-fc2-1:fp22
      device.vm.network "private_network",
            :mac => "44:38:39:00:08:c3",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '9122',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '11122',
            :libvirt__iface_name => 'fp6',
            auto_config: false
      # link for fp7 --> chassis04-fc2-1:fp23
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:ad",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8087',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10087',
            :libvirt__iface_name => 'fp7',
            auto_config: false
      # link for fp8 --> chassis04-fc3-1:fp20
      device.vm.network "private_network",
            :mac => "44:38:39:00:06:21",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8785',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10785',
            :libvirt__iface_name => 'fp8',
            auto_config: false
      # link for fp9 --> chassis04-fc3-1:fp21
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:7d",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8575',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10575',
            :libvirt__iface_name => 'fp9',
            auto_config: false
      # link for fp10 --> chassis04-fc3-1:fp22
      device.vm.network "private_network",
            :mac => "44:38:39:00:07:cf",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '9000',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '11000',
            :libvirt__iface_name => 'fp10',
            auto_config: false
      # link for fp11 --> chassis04-fc3-1:fp23
      device.vm.network "private_network",
            :mac => "44:38:39:00:05:95",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8715',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10715',
            :libvirt__iface_name => 'fp11',
            auto_config: false
      # link for fp12 --> chassis04-fc4-1:fp20
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:67",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8436',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10436',
            :libvirt__iface_name => 'fp12',
            auto_config: false
      # link for fp13 --> chassis04-fc4-1:fp21
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:19",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8397',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10397',
            :libvirt__iface_name => 'fp13',
            auto_config: false
      # link for fp14 --> chassis04-fc4-1:fp22
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:f3",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8378',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10378',
            :libvirt__iface_name => 'fp14',
            auto_config: false
      # link for fp15 --> chassis04-fc4-1:fp23
      device.vm.network "private_network",
            :mac => "44:38:39:00:09:5b",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '9198',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '11198',
            :libvirt__iface_name => 'fp15',
            auto_config: false
      # link for swp1 --> leaf81:swp4
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:db",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8110',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10110',
            :libvirt__iface_name => 'swp1',
            auto_config: false
      # link for swp2 --> leaf82:swp4
      device.vm.network "private_network",
            :mac => "44:38:39:00:07:83",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8962',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10962',
            :libvirt__iface_name => 'swp2',
            auto_config: false
      # link for swp3 --> leaf83:swp4
      device.vm.network "private_network",
            :mac => "44:38:39:00:07:bf",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8992',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10992',
            :libvirt__iface_name => 'swp3',
            auto_config: false
      # link for swp4 --> leaf84:swp4
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:61",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8561',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10561',
            :libvirt__iface_name => 'swp4',
            auto_config: false
      # link for swp5 --> leaf85:swp4
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:77",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8316',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10316',
            :libvirt__iface_name => 'swp5',
            auto_config: false
      # link for swp6 --> leaf86:swp4
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:93",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8586',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10586',
            :libvirt__iface_name => 'swp6',
            auto_config: false
      # link for swp7 --> leaf87:swp4
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:5f",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8048',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10048',
            :libvirt__iface_name => 'swp7',
            auto_config: false
      # link for swp8 --> leaf88:swp4
      device.vm.network "private_network",
            :mac => "44:38:39:00:08:f5",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '9147',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '11147',
            :libvirt__iface_name => 'swp8',
            auto_config: false
      # link for swp9 --> leaf89:swp4
      device.vm.network "private_network",
            :mac => "44:38:39:00:07:d3",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '9002',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '11002',
            :libvirt__iface_name => 'swp9',
            auto_config: false
      # link for swp10 --> leaf90:swp4
      device.vm.network "private_network",
            :mac => "44:38:39:00:05:99",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8717',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10717',
            :libvirt__iface_name => 'swp10',
            auto_config: false
      # link for swp11 --> leaf91:swp4
      device.vm.network "private_network",
            :mac => "44:38:39:00:08:e9",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '9141',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '11141',
            :libvirt__iface_name => 'swp11',
            auto_config: false
      # link for swp12 --> leaf92:swp4
      device.vm.network "private_network",
            :mac => "44:38:39:00:08:b5",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '9115',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '11115',
            :libvirt__iface_name => 'swp12',
            auto_config: false
      # link for swp13 --> leaf93:swp4
      device.vm.network "private_network",
            :mac => "44:38:39:00:07:0d",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8903',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10903',
            :libvirt__iface_name => 'swp13',
            auto_config: false
      # link for swp14 --> leaf94:swp4
      device.vm.network "private_network",
            :mac => "44:38:39:00:05:f5",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8763',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10763',
            :libvirt__iface_name => 'swp14',
            auto_config: false
      # link for swp15 --> leaf95:swp4
      device.vm.network "private_network",
            :mac => "44:38:39:00:08:ad",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '9111',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '11111',
            :libvirt__iface_name => 'swp15',
            auto_config: false
      # link for swp16 --> leaf96:swp4
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:f7",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8636',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10636',
            :libvirt__iface_name => 'swp16',
            auto_config: false



    # Fixes "stdin: is not a tty" and "mesg: ttyname failed : Inappropriate ioctl for device"  messages --> https://github.com/mitchellh/vagrant/issues/1673
    device.vm.provision :shell , inline: "(sudo grep -q 'mesg n' /root/.profile 2>/dev/null && sudo sed -i '/mesg n/d' /root/.profile  2>/dev/null) || true;", privileged: false

    #Copy over Topology.dot File
    device.vm.provision "file", source: "topology.dot", destination: "~/topology.dot"
    device.vm.provision :shell, privileged: false, inline: "sudo mv ~/topology.dot /etc/ptm.d/topology.dot"


    # Run the Config specified in the Node Attributes
    device.vm.provision :shell , privileged: false, :inline => 'echo "$(whoami)" > /tmp/normal_user'
    device.vm.provision :shell , path: "./helper_scripts/extra_switch_config.sh"


    # Install Rules for the interface re-map
    device.vm.provision :shell , :inline => <<-delete_udev_directory
if [ -d "/etc/udev/rules.d/70-persistent-net.rules" ]; then
    rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
fi
rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
delete_udev_directory

device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:08:52 --> eth0"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:08:52", NAME="eth0", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:08:53 --> fp0"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:08:53", NAME="fp0", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:05:d5 --> fp1"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:05:d5", NAME="fp1", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:45 --> fp2"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:45", NAME="fp2", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:51 --> fp3"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:51", NAME="fp3", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:06:4d --> fp4"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:06:4d", NAME="fp4", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:fd --> fp5"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:fd", NAME="fp5", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:08:c3 --> fp6"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:08:c3", NAME="fp6", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:ad --> fp7"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:ad", NAME="fp7", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:06:21 --> fp8"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:06:21", NAME="fp8", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:7d --> fp9"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:7d", NAME="fp9", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:07:cf --> fp10"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:07:cf", NAME="fp10", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:05:95 --> fp11"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:05:95", NAME="fp11", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:67 --> fp12"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:67", NAME="fp12", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:19 --> fp13"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:19", NAME="fp13", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:f3 --> fp14"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:f3", NAME="fp14", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:09:5b --> fp15"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:09:5b", NAME="fp15", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:db --> swp1"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:db", NAME="swp1", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:07:83 --> swp2"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:07:83", NAME="swp2", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:07:bf --> swp3"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:07:bf", NAME="swp3", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:61 --> swp4"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:61", NAME="swp4", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:77 --> swp5"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:77", NAME="swp5", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:93 --> swp6"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:93", NAME="swp6", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:5f --> swp7"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:5f", NAME="swp7", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:08:f5 --> swp8"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:08:f5", NAME="swp8", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:07:d3 --> swp9"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:07:d3", NAME="swp9", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:05:99 --> swp10"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:05:99", NAME="swp10", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:08:e9 --> swp11"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:08:e9", NAME="swp11", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:08:b5 --> swp12"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:08:b5", NAME="swp12", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:07:0d --> swp13"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:07:0d", NAME="swp13", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:05:f5 --> swp14"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:05:f5", NAME="swp14", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:08:ad --> swp15"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:08:ad", NAME="swp15", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:f7 --> swp16"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:f7", NAME="swp16", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule

      device.vm.provision :shell , :inline => <<-vagrant_interface_rule
echo "  INFO: Adding UDEV Rule: Vagrant interface = vagrant"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{ifindex}=="2", NAME="vagrant", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
echo "#### UDEV Rules (/etc/udev/rules.d/70-persistent-net.rules) ####"
cat /etc/udev/rules.d/70-persistent-net.rules
vagrant_interface_rule

# Run Any Platform Specific Code and Apply the interface Re-map
    #   (may or may not perform a reboot depending on platform)
    device.vm.provision :shell , :inline => $script

end

  ##### DEFINE VM for chassis01-fc3-1 #####
  config.vm.define "chassis01-fc3-1" do |device|

    device.vm.hostname = "chassis01-fc3-1"

    device.vm.box = "CumulusCommunity/cumulus-vx"
    device.vm.box_version = "3.5.0"

    device.vm.provider :libvirt do |v|
      v.memory = 768
    end
    #   see note here: https://github.com/pradels/vagrant-libvirt#synced-folders
    device.vm.synced_folder ".", "/vagrant", disabled: true



    # NETWORK INTERFACES
      # link for eth0 --> oob-mgmt-switch4:swp13
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:6a",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10565',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8565',
            :libvirt__iface_name => 'eth0',
            auto_config: false
      # link for fp0 --> chassis01-lc1-1:fp8
      device.vm.network "private_network",
            :mac => "44:38:39:00:07:1a",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10909',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8909',
            :libvirt__iface_name => 'fp0',
            auto_config: false
      # link for fp1 --> chassis01-lc1-1:fp9
      device.vm.network "private_network",
            :mac => "44:38:39:00:09:0c",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '11158',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '9158',
            :libvirt__iface_name => 'fp1',
            auto_config: false
      # link for fp2 --> chassis01-lc1-1:fp10
      device.vm.network "private_network",
            :mac => "44:38:39:00:06:c0",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10864',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8864',
            :libvirt__iface_name => 'fp2',
            auto_config: false
      # link for fp3 --> chassis01-lc1-1:fp11
      device.vm.network "private_network",
            :mac => "44:38:39:00:06:fe",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10895',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8895',
            :libvirt__iface_name => 'fp3',
            auto_config: false
      # link for fp4 --> chassis01-lc1-2:fp8
      device.vm.network "private_network",
            :mac => "44:38:39:00:07:fc",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '11022',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '9022',
            :libvirt__iface_name => 'fp4',
            auto_config: false
      # link for fp5 --> chassis01-lc1-2:fp9
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:e2",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10497',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8497',
            :libvirt__iface_name => 'fp5',
            auto_config: false
      # link for fp6 --> chassis01-lc1-2:fp10
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:9e",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10591',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8591',
            :libvirt__iface_name => 'fp6',
            auto_config: false
      # link for fp7 --> chassis01-lc1-2:fp11
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:d2",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10361',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8361',
            :libvirt__iface_name => 'fp7',
            auto_config: false
      # link for fp8 --> chassis01-lc2-1:fp8
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:06",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10003',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8003',
            :libvirt__iface_name => 'fp8',
            auto_config: false
      # link for fp9 --> chassis01-lc2-1:fp9
      device.vm.network "private_network",
            :mac => "44:38:39:00:08:e6",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '11139',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '9139',
            :libvirt__iface_name => 'fp9',
            auto_config: false
      # link for fp10 --> chassis01-lc2-1:fp10
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:ea",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10501',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8501',
            :libvirt__iface_name => 'fp10',
            auto_config: false
      # link for fp11 --> chassis01-lc2-1:fp11
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:c6",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10355',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8355',
            :libvirt__iface_name => 'fp11',
            auto_config: false
      # link for fp12 --> chassis01-lc2-2:fp8
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:2a",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10533',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8533',
            :libvirt__iface_name => 'fp12',
            auto_config: false
      # link for fp13 --> chassis01-lc2-2:fp9
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:28",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10020',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8020',
            :libvirt__iface_name => 'fp13',
            auto_config: false
      # link for fp14 --> chassis01-lc2-2:fp10
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:6e",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10055',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8055',
            :libvirt__iface_name => 'fp14',
            auto_config: false
      # link for fp15 --> chassis01-lc2-2:fp11
      device.vm.network "private_network",
            :mac => "44:38:39:00:07:7c",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10958',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8958',
            :libvirt__iface_name => 'fp15',
            auto_config: false
      # link for fp16 --> chassis01-lc3-1:fp8
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:50",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10040',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8040',
            :libvirt__iface_name => 'fp16',
            auto_config: false
      # link for fp17 --> chassis01-lc3-1:fp9
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:82",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10321',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8321',
            :libvirt__iface_name => 'fp17',
            auto_config: false
      # link for fp18 --> chassis01-lc3-1:fp10
      device.vm.network "private_network",
            :mac => "44:38:39:00:07:72",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10953',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8953',
            :libvirt__iface_name => 'fp18',
            auto_config: false
      # link for fp19 --> chassis01-lc3-1:fp11
      device.vm.network "private_network",
            :mac => "44:38:39:00:05:c8",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10740',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8740',
            :libvirt__iface_name => 'fp19',
            auto_config: false
      # link for fp20 --> chassis01-lc3-2:fp8
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:2c",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10406',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8406',
            :libvirt__iface_name => 'fp20',
            auto_config: false
      # link for fp21 --> chassis01-lc3-2:fp9
      device.vm.network "private_network",
            :mac => "44:38:39:00:06:8a",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10837',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8837',
            :libvirt__iface_name => 'fp21',
            auto_config: false
      # link for fp22 --> chassis01-lc3-2:fp10
      device.vm.network "private_network",
            :mac => "44:38:39:00:05:ac",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10726',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8726',
            :libvirt__iface_name => 'fp22',
            auto_config: false
      # link for fp23 --> chassis01-lc3-2:fp11
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:1e",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10527',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8527',
            :libvirt__iface_name => 'fp23',
            auto_config: false
      # link for fp24 --> chassis01-lc4-1:fp8
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:08",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10260',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8260',
            :libvirt__iface_name => 'fp24',
            auto_config: false
      # link for fp25 --> chassis01-lc4-1:fp9
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:24",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10274',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8274',
            :libvirt__iface_name => 'fp25',
            auto_config: false
      # link for fp26 --> chassis01-lc4-1:fp10
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:f0",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10504',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8504',
            :libvirt__iface_name => 'fp26',
            auto_config: false
      # link for fp27 --> chassis01-lc4-1:fp11
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:f4",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10250',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8250',
            :libvirt__iface_name => 'fp27',
            auto_config: false
      # link for fp28 --> chassis01-lc4-2:fp8
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:ba",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10093',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8093',
            :libvirt__iface_name => 'fp28',
            auto_config: false
      # link for fp29 --> chassis01-lc4-2:fp9
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:ec",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10374',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8374',
            :libvirt__iface_name => 'fp29',
            auto_config: false
      # link for fp30 --> chassis01-lc4-2:fp10
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:44",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10034',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8034',
            :libvirt__iface_name => 'fp30',
            auto_config: false
      # link for fp31 --> chassis01-lc4-2:fp11
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:96",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10587',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8587',
            :libvirt__iface_name => 'fp31',
            auto_config: false



    # Fixes "stdin: is not a tty" and "mesg: ttyname failed : Inappropriate ioctl for device"  messages --> https://github.com/mitchellh/vagrant/issues/1673
    device.vm.provision :shell , inline: "(sudo grep -q 'mesg n' /root/.profile 2>/dev/null && sudo sed -i '/mesg n/d' /root/.profile  2>/dev/null) || true;", privileged: false

    #Copy over Topology.dot File
    device.vm.provision "file", source: "topology.dot", destination: "~/topology.dot"
    device.vm.provision :shell, privileged: false, inline: "sudo mv ~/topology.dot /etc/ptm.d/topology.dot"


    # Run the Config specified in the Node Attributes
    device.vm.provision :shell , privileged: false, :inline => 'echo "$(whoami)" > /tmp/normal_user'
    device.vm.provision :shell , path: "./helper_scripts/extra_switch_config.sh"


    # Install Rules for the interface re-map
    device.vm.provision :shell , :inline => <<-delete_udev_directory
if [ -d "/etc/udev/rules.d/70-persistent-net.rules" ]; then
    rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
fi
rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
delete_udev_directory

device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:6a --> eth0"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:6a", NAME="eth0", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:07:1a --> fp0"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:07:1a", NAME="fp0", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:09:0c --> fp1"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:09:0c", NAME="fp1", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:06:c0 --> fp2"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:06:c0", NAME="fp2", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:06:fe --> fp3"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:06:fe", NAME="fp3", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:07:fc --> fp4"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:07:fc", NAME="fp4", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:e2 --> fp5"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:e2", NAME="fp5", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:9e --> fp6"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:9e", NAME="fp6", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:d2 --> fp7"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:d2", NAME="fp7", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:06 --> fp8"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:06", NAME="fp8", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:08:e6 --> fp9"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:08:e6", NAME="fp9", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:ea --> fp10"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:ea", NAME="fp10", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:c6 --> fp11"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:c6", NAME="fp11", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:2a --> fp12"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:2a", NAME="fp12", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:28 --> fp13"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:28", NAME="fp13", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:6e --> fp14"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:6e", NAME="fp14", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:07:7c --> fp15"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:07:7c", NAME="fp15", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:50 --> fp16"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:50", NAME="fp16", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:82 --> fp17"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:82", NAME="fp17", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:07:72 --> fp18"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:07:72", NAME="fp18", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:05:c8 --> fp19"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:05:c8", NAME="fp19", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:2c --> fp20"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:2c", NAME="fp20", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:06:8a --> fp21"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:06:8a", NAME="fp21", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:05:ac --> fp22"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:05:ac", NAME="fp22", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:1e --> fp23"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:1e", NAME="fp23", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:08 --> fp24"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:08", NAME="fp24", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:24 --> fp25"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:24", NAME="fp25", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:f0 --> fp26"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:f0", NAME="fp26", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:f4 --> fp27"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:f4", NAME="fp27", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:ba --> fp28"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:ba", NAME="fp28", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:ec --> fp29"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:ec", NAME="fp29", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:44 --> fp30"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:44", NAME="fp30", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:96 --> fp31"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:96", NAME="fp31", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule

      device.vm.provision :shell , :inline => <<-vagrant_interface_rule
echo "  INFO: Adding UDEV Rule: Vagrant interface = vagrant"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{ifindex}=="2", NAME="vagrant", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
echo "#### UDEV Rules (/etc/udev/rules.d/70-persistent-net.rules) ####"
cat /etc/udev/rules.d/70-persistent-net.rules
vagrant_interface_rule

# Run Any Platform Specific Code and Apply the interface Re-map
    #   (may or may not perform a reboot depending on platform)
    device.vm.provision :shell , :inline => $script

end

  ##### DEFINE VM for chassis02-fc3-1 #####
  config.vm.define "chassis02-fc3-1" do |device|

    device.vm.hostname = "chassis02-fc3-1"

    device.vm.box = "CumulusCommunity/cumulus-vx"
    device.vm.box_version = "3.5.0"

    device.vm.provider :libvirt do |v|
      v.memory = 768
    end
    #   see note here: https://github.com/pradels/vagrant-libvirt#synced-folders
    device.vm.synced_folder ".", "/vagrant", disabled: true



    # NETWORK INTERFACES
      # link for eth0 --> oob-mgmt-switch4:swp25
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:7e",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10063',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8063',
            :libvirt__iface_name => 'eth0',
            auto_config: false
      # link for fp0 --> chassis02-lc1-1:fp8
      device.vm.network "private_network",
            :mac => "44:38:39:00:08:10",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '11032',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '9032',
            :libvirt__iface_name => 'fp0',
            auto_config: false
      # link for fp1 --> chassis02-lc1-1:fp9
      device.vm.network "private_network",
            :mac => "44:38:39:00:06:c8",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10868',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8868',
            :libvirt__iface_name => 'fp1',
            auto_config: false
      # link for fp2 --> chassis02-lc1-1:fp10
      device.vm.network "private_network",
            :mac => "44:38:39:00:07:86",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10963',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8963',
            :libvirt__iface_name => 'fp2',
            auto_config: false
      # link for fp3 --> chassis02-lc1-1:fp11
      device.vm.network "private_network",
            :mac => "44:38:39:00:05:bc",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10734',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8734',
            :libvirt__iface_name => 'fp3',
            auto_config: false
      # link for fp4 --> chassis02-lc1-2:fp8
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:44",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10418',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8418',
            :libvirt__iface_name => 'fp4',
            auto_config: false
      # link for fp5 --> chassis02-lc1-2:fp9
      device.vm.network "private_network",
            :mac => "44:38:39:00:08:28",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '11044',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '9044',
            :libvirt__iface_name => 'fp5',
            auto_config: false
      # link for fp6 --> chassis02-lc1-2:fp10
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:14",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10522',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8522',
            :libvirt__iface_name => 'fp6',
            auto_config: false
      # link for fp7 --> chassis02-lc1-2:fp11
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:8a",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10581',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8581',
            :libvirt__iface_name => 'fp7',
            auto_config: false
      # link for fp8 --> chassis02-lc2-1:fp8
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:76",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10187',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8187',
            :libvirt__iface_name => 'fp8',
            auto_config: false
      # link for fp9 --> chassis02-lc2-1:fp9
      device.vm.network "private_network",
            :mac => "44:38:39:00:06:56",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10811',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8811',
            :libvirt__iface_name => 'fp9',
            auto_config: false
      # link for fp10 --> chassis02-lc2-1:fp10
      device.vm.network "private_network",
            :mac => "44:38:39:00:07:da",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '11005',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '9005',
            :libvirt__iface_name => 'fp10',
            auto_config: false
      # link for fp11 --> chassis02-lc2-1:fp11
      device.vm.network "private_network",
            :mac => "44:38:39:00:05:fa",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10765',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8765',
            :libvirt__iface_name => 'fp11',
            auto_config: false
      # link for fp12 --> chassis02-lc2-2:fp8
      device.vm.network "private_network",
            :mac => "44:38:39:00:07:40",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10928',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8928',
            :libvirt__iface_name => 'fp12',
            auto_config: false
      # link for fp13 --> chassis02-lc2-2:fp9
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:f6",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10635',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8635',
            :libvirt__iface_name => 'fp13',
            auto_config: false
      # link for fp14 --> chassis02-lc2-2:fp10
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:62",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10305',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8305',
            :libvirt__iface_name => 'fp14',
            auto_config: false
      # link for fp15 --> chassis02-lc2-2:fp11
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:ae",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10215',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8215',
            :libvirt__iface_name => 'fp15',
            auto_config: false
      # link for fp16 --> chassis02-lc3-1:fp8
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:d6",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10107',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8107',
            :libvirt__iface_name => 'fp16',
            auto_config: false
      # link for fp17 --> chassis02-lc3-1:fp9
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:ea",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10629',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8629',
            :libvirt__iface_name => 'fp17',
            auto_config: false
      # link for fp18 --> chassis02-lc3-1:fp10
      device.vm.network "private_network",
            :mac => "44:38:39:00:05:b0",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10728',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8728',
            :libvirt__iface_name => 'fp18',
            auto_config: false
      # link for fp19 --> chassis02-lc3-1:fp11
      device.vm.network "private_network",
            :mac => "44:38:39:00:08:9e",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '11103',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '9103',
            :libvirt__iface_name => 'fp19',
            auto_config: false
      # link for fp20 --> chassis02-lc3-2:fp8
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:20",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10272',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8272',
            :libvirt__iface_name => 'fp20',
            auto_config: false
      # link for fp21 --> chassis02-lc3-2:fp9
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:18",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10268',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8268',
            :libvirt__iface_name => 'fp21',
            auto_config: false
      # link for fp22 --> chassis02-lc3-2:fp10
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:e0",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10112',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8112',
            :libvirt__iface_name => 'fp22',
            auto_config: false
      # link for fp23 --> chassis02-lc3-2:fp11
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:70",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10568',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8568',
            :libvirt__iface_name => 'fp23',
            auto_config: false
      # link for fp24 --> chassis02-lc4-1:fp8
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:1c",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10270',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8270',
            :libvirt__iface_name => 'fp24',
            auto_config: false
      # link for fp25 --> chassis02-lc4-1:fp9
      device.vm.network "private_network",
            :mac => "44:38:39:00:08:8a",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '11093',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '9093',
            :libvirt__iface_name => 'fp25',
            auto_config: false
      # link for fp26 --> chassis02-lc4-1:fp10
      device.vm.network "private_network",
            :mac => "44:38:39:00:07:b8",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10988',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8988',
            :libvirt__iface_name => 'fp26',
            auto_config: false
      # link for fp27 --> chassis02-lc4-1:fp11
      device.vm.network "private_network",
            :mac => "44:38:39:00:08:04",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '11026',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '9026',
            :libvirt__iface_name => 'fp27',
            auto_config: false
      # link for fp28 --> chassis02-lc4-2:fp8
      device.vm.network "private_network",
            :mac => "44:38:39:00:06:3a",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10797',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8797',
            :libvirt__iface_name => 'fp28',
            auto_config: false
      # link for fp29 --> chassis02-lc4-2:fp9
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:6e",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10439',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8439',
            :libvirt__iface_name => 'fp29',
            auto_config: false
      # link for fp30 --> chassis02-lc4-2:fp10
      device.vm.network "private_network",
            :mac => "44:38:39:00:07:16",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10907',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8907',
            :libvirt__iface_name => 'fp30',
            auto_config: false
      # link for fp31 --> chassis02-lc4-2:fp11
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:a4",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10338',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8338',
            :libvirt__iface_name => 'fp31',
            auto_config: false



    # Fixes "stdin: is not a tty" and "mesg: ttyname failed : Inappropriate ioctl for device"  messages --> https://github.com/mitchellh/vagrant/issues/1673
    device.vm.provision :shell , inline: "(sudo grep -q 'mesg n' /root/.profile 2>/dev/null && sudo sed -i '/mesg n/d' /root/.profile  2>/dev/null) || true;", privileged: false

    #Copy over Topology.dot File
    device.vm.provision "file", source: "topology.dot", destination: "~/topology.dot"
    device.vm.provision :shell, privileged: false, inline: "sudo mv ~/topology.dot /etc/ptm.d/topology.dot"


    # Run the Config specified in the Node Attributes
    device.vm.provision :shell , privileged: false, :inline => 'echo "$(whoami)" > /tmp/normal_user'
    device.vm.provision :shell , path: "./helper_scripts/extra_switch_config.sh"


    # Install Rules for the interface re-map
    device.vm.provision :shell , :inline => <<-delete_udev_directory
if [ -d "/etc/udev/rules.d/70-persistent-net.rules" ]; then
    rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
fi
rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
delete_udev_directory

device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:7e --> eth0"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:7e", NAME="eth0", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:08:10 --> fp0"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:08:10", NAME="fp0", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:06:c8 --> fp1"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:06:c8", NAME="fp1", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:07:86 --> fp2"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:07:86", NAME="fp2", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:05:bc --> fp3"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:05:bc", NAME="fp3", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:44 --> fp4"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:44", NAME="fp4", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:08:28 --> fp5"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:08:28", NAME="fp5", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:14 --> fp6"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:14", NAME="fp6", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:8a --> fp7"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:8a", NAME="fp7", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:76 --> fp8"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:76", NAME="fp8", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:06:56 --> fp9"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:06:56", NAME="fp9", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:07:da --> fp10"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:07:da", NAME="fp10", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:05:fa --> fp11"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:05:fa", NAME="fp11", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:07:40 --> fp12"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:07:40", NAME="fp12", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:f6 --> fp13"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:f6", NAME="fp13", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:62 --> fp14"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:62", NAME="fp14", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:ae --> fp15"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:ae", NAME="fp15", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:d6 --> fp16"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:d6", NAME="fp16", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:ea --> fp17"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:ea", NAME="fp17", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:05:b0 --> fp18"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:05:b0", NAME="fp18", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:08:9e --> fp19"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:08:9e", NAME="fp19", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:20 --> fp20"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:20", NAME="fp20", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:18 --> fp21"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:18", NAME="fp21", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:e0 --> fp22"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:e0", NAME="fp22", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:70 --> fp23"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:70", NAME="fp23", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:1c --> fp24"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:1c", NAME="fp24", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:08:8a --> fp25"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:08:8a", NAME="fp25", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:07:b8 --> fp26"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:07:b8", NAME="fp26", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:08:04 --> fp27"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:08:04", NAME="fp27", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:06:3a --> fp28"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:06:3a", NAME="fp28", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:6e --> fp29"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:6e", NAME="fp29", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:07:16 --> fp30"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:07:16", NAME="fp30", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:a4 --> fp31"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:a4", NAME="fp31", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule

      device.vm.provision :shell , :inline => <<-vagrant_interface_rule
echo "  INFO: Adding UDEV Rule: Vagrant interface = vagrant"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{ifindex}=="2", NAME="vagrant", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
echo "#### UDEV Rules (/etc/udev/rules.d/70-persistent-net.rules) ####"
cat /etc/udev/rules.d/70-persistent-net.rules
vagrant_interface_rule

# Run Any Platform Specific Code and Apply the interface Re-map
    #   (may or may not perform a reboot depending on platform)
    device.vm.provision :shell , :inline => $script

end

  ##### DEFINE VM for chassis04-fc3-1 #####
  config.vm.define "chassis04-fc3-1" do |device|

    device.vm.hostname = "chassis04-fc3-1"

    device.vm.box = "CumulusCommunity/cumulus-vx"
    device.vm.box_version = "3.5.0"

    device.vm.provider :libvirt do |v|
      v.memory = 768
    end
    #   see note here: https://github.com/pradels/vagrant-libvirt#synced-folders
    device.vm.synced_folder ".", "/vagrant", disabled: true



    # NETWORK INTERFACES
      # link for eth0 --> oob-mgmt-switch4:swp49
      device.vm.network "private_network",
            :mac => "44:38:39:00:08:96",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '11099',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '9099',
            :libvirt__iface_name => 'eth0',
            auto_config: false
      # link for fp0 --> chassis04-lc1-1:fp8
      device.vm.network "private_network",
            :mac => "44:38:39:00:08:c8",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '11124',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '9124',
            :libvirt__iface_name => 'fp0',
            auto_config: false
      # link for fp1 --> chassis04-lc1-1:fp9
      device.vm.network "private_network",
            :mac => "44:38:39:00:08:2a",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '11045',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '9045',
            :libvirt__iface_name => 'fp1',
            auto_config: false
      # link for fp2 --> chassis04-lc1-1:fp10
      device.vm.network "private_network",
            :mac => "44:38:39:00:05:14",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10650',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8650',
            :libvirt__iface_name => 'fp2',
            auto_config: false
      # link for fp3 --> chassis04-lc1-1:fp11
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:aa",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10469',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8469',
            :libvirt__iface_name => 'fp3',
            auto_config: false
      # link for fp4 --> chassis04-lc1-2:fp8
      device.vm.network "private_network",
            :mac => "44:38:39:00:07:00",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10896',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8896',
            :libvirt__iface_name => 'fp4',
            auto_config: false
      # link for fp5 --> chassis04-lc1-2:fp9
      device.vm.network "private_network",
            :mac => "44:38:39:00:09:62",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '11201',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '9201',
            :libvirt__iface_name => 'fp5',
            auto_config: false
      # link for fp6 --> chassis04-lc1-2:fp10
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:ba",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10349',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8349',
            :libvirt__iface_name => 'fp6',
            auto_config: false
      # link for fp7 --> chassis04-lc1-2:fp11
      device.vm.network "private_network",
            :mac => "44:38:39:00:07:ca",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10997',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8997',
            :libvirt__iface_name => 'fp7',
            auto_config: false
      # link for fp8 --> chassis04-lc2-1:fp8
      device.vm.network "private_network",
            :mac => "44:38:39:00:06:b8",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10860',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8860',
            :libvirt__iface_name => 'fp8',
            auto_config: false
      # link for fp9 --> chassis04-lc2-1:fp9
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:62",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10177',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8177',
            :libvirt__iface_name => 'fp9',
            auto_config: false
      # link for fp10 --> chassis04-lc2-1:fp10
      device.vm.network "private_network",
            :mac => "44:38:39:00:08:6e",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '11079',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '9079',
            :libvirt__iface_name => 'fp10',
            auto_config: false
      # link for fp11 --> chassis04-lc2-1:fp11
      device.vm.network "private_network",
            :mac => "44:38:39:00:08:6a",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '11077',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '9077',
            :libvirt__iface_name => 'fp11',
            auto_config: false
      # link for fp12 --> chassis04-lc2-2:fp8
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:fe",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10255',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8255',
            :libvirt__iface_name => 'fp12',
            auto_config: false
      # link for fp13 --> chassis04-lc2-2:fp9
      device.vm.network "private_network",
            :mac => "44:38:39:00:05:e4",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10754',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8754',
            :libvirt__iface_name => 'fp13',
            auto_config: false
      # link for fp14 --> chassis04-lc2-2:fp10
      device.vm.network "private_network",
            :mac => "44:38:39:00:05:de",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10751',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8751',
            :libvirt__iface_name => 'fp14',
            auto_config: false
      # link for fp15 --> chassis04-lc2-2:fp11
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:5e",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10175',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8175',
            :libvirt__iface_name => 'fp15',
            auto_config: false
      # link for fp16 --> chassis04-lc3-1:fp8
      device.vm.network "private_network",
            :mac => "44:38:39:00:07:a0",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10976',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8976',
            :libvirt__iface_name => 'fp16',
            auto_config: false
      # link for fp17 --> chassis04-lc3-1:fp9
      device.vm.network "private_network",
            :mac => "44:38:39:00:05:e0",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10752',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8752',
            :libvirt__iface_name => 'fp17',
            auto_config: false
      # link for fp18 --> chassis04-lc3-1:fp10
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:ba",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10477',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8477',
            :libvirt__iface_name => 'fp18',
            auto_config: false
      # link for fp19 --> chassis04-lc3-1:fp11
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:8e",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10071',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8071',
            :libvirt__iface_name => 'fp19',
            auto_config: false
      # link for fp20 --> chassis04-lc3-2:fp8
      device.vm.network "private_network",
            :mac => "44:38:39:00:06:22",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10785',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8785',
            :libvirt__iface_name => 'fp20',
            auto_config: false
      # link for fp21 --> chassis04-lc3-2:fp9
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:7e",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10575',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8575',
            :libvirt__iface_name => 'fp21',
            auto_config: false
      # link for fp22 --> chassis04-lc3-2:fp10
      device.vm.network "private_network",
            :mac => "44:38:39:00:07:d0",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '11000',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '9000',
            :libvirt__iface_name => 'fp22',
            auto_config: false
      # link for fp23 --> chassis04-lc3-2:fp11
      device.vm.network "private_network",
            :mac => "44:38:39:00:05:96",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10715',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8715',
            :libvirt__iface_name => 'fp23',
            auto_config: false
      # link for fp24 --> chassis04-lc4-1:fp8
      device.vm.network "private_network",
            :mac => "44:38:39:00:05:1e",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10655',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8655',
            :libvirt__iface_name => 'fp24',
            auto_config: false
      # link for fp25 --> chassis04-lc4-1:fp9
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:8c",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10582',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8582',
            :libvirt__iface_name => 'fp25',
            auto_config: false
      # link for fp26 --> chassis04-lc4-1:fp10
      device.vm.network "private_network",
            :mac => "44:38:39:00:08:7a",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '11085',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '9085',
            :libvirt__iface_name => 'fp26',
            auto_config: false
      # link for fp27 --> chassis04-lc4-1:fp11
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:a8",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10340',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8340',
            :libvirt__iface_name => 'fp27',
            auto_config: false
      # link for fp28 --> chassis04-lc4-2:fp8
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:22",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10017',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8017',
            :libvirt__iface_name => 'fp28',
            auto_config: false
      # link for fp29 --> chassis04-lc4-2:fp9
      device.vm.network "private_network",
            :mac => "44:38:39:00:05:d8",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10748',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8748',
            :libvirt__iface_name => 'fp29',
            auto_config: false
      # link for fp30 --> chassis04-lc4-2:fp10
      device.vm.network "private_network",
            :mac => "44:38:39:00:09:36",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '11179',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '9179',
            :libvirt__iface_name => 'fp30',
            auto_config: false
      # link for fp31 --> chassis04-lc4-2:fp11
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:9c",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10462',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8462',
            :libvirt__iface_name => 'fp31',
            auto_config: false



    # Fixes "stdin: is not a tty" and "mesg: ttyname failed : Inappropriate ioctl for device"  messages --> https://github.com/mitchellh/vagrant/issues/1673
    device.vm.provision :shell , inline: "(sudo grep -q 'mesg n' /root/.profile 2>/dev/null && sudo sed -i '/mesg n/d' /root/.profile  2>/dev/null) || true;", privileged: false

    #Copy over Topology.dot File
    device.vm.provision "file", source: "topology.dot", destination: "~/topology.dot"
    device.vm.provision :shell, privileged: false, inline: "sudo mv ~/topology.dot /etc/ptm.d/topology.dot"


    # Run the Config specified in the Node Attributes
    device.vm.provision :shell , privileged: false, :inline => 'echo "$(whoami)" > /tmp/normal_user'
    device.vm.provision :shell , path: "./helper_scripts/extra_switch_config.sh"


    # Install Rules for the interface re-map
    device.vm.provision :shell , :inline => <<-delete_udev_directory
if [ -d "/etc/udev/rules.d/70-persistent-net.rules" ]; then
    rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
fi
rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
delete_udev_directory

device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:08:96 --> eth0"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:08:96", NAME="eth0", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:08:c8 --> fp0"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:08:c8", NAME="fp0", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:08:2a --> fp1"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:08:2a", NAME="fp1", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:05:14 --> fp2"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:05:14", NAME="fp2", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:aa --> fp3"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:aa", NAME="fp3", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:07:00 --> fp4"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:07:00", NAME="fp4", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:09:62 --> fp5"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:09:62", NAME="fp5", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:ba --> fp6"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:ba", NAME="fp6", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:07:ca --> fp7"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:07:ca", NAME="fp7", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:06:b8 --> fp8"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:06:b8", NAME="fp8", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:62 --> fp9"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:62", NAME="fp9", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:08:6e --> fp10"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:08:6e", NAME="fp10", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:08:6a --> fp11"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:08:6a", NAME="fp11", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:fe --> fp12"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:fe", NAME="fp12", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:05:e4 --> fp13"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:05:e4", NAME="fp13", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:05:de --> fp14"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:05:de", NAME="fp14", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:5e --> fp15"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:5e", NAME="fp15", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:07:a0 --> fp16"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:07:a0", NAME="fp16", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:05:e0 --> fp17"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:05:e0", NAME="fp17", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:ba --> fp18"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:ba", NAME="fp18", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:8e --> fp19"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:8e", NAME="fp19", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:06:22 --> fp20"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:06:22", NAME="fp20", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:7e --> fp21"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:7e", NAME="fp21", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:07:d0 --> fp22"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:07:d0", NAME="fp22", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:05:96 --> fp23"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:05:96", NAME="fp23", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:05:1e --> fp24"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:05:1e", NAME="fp24", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:8c --> fp25"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:8c", NAME="fp25", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:08:7a --> fp26"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:08:7a", NAME="fp26", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:a8 --> fp27"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:a8", NAME="fp27", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:22 --> fp28"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:22", NAME="fp28", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:05:d8 --> fp29"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:05:d8", NAME="fp29", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:09:36 --> fp30"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:09:36", NAME="fp30", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:9c --> fp31"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:9c", NAME="fp31", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule

      device.vm.provision :shell , :inline => <<-vagrant_interface_rule
echo "  INFO: Adding UDEV Rule: Vagrant interface = vagrant"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{ifindex}=="2", NAME="vagrant", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
echo "#### UDEV Rules (/etc/udev/rules.d/70-persistent-net.rules) ####"
cat /etc/udev/rules.d/70-persistent-net.rules
vagrant_interface_rule

# Run Any Platform Specific Code and Apply the interface Re-map
    #   (may or may not perform a reboot depending on platform)
    device.vm.provision :shell , :inline => $script

end

  ##### DEFINE VM for chassis04-fc4-1 #####
  config.vm.define "chassis04-fc4-1" do |device|

    device.vm.hostname = "chassis04-fc4-1"

    device.vm.box = "CumulusCommunity/cumulus-vx"
    device.vm.box_version = "3.5.0"

    device.vm.provider :libvirt do |v|
      v.memory = 768
    end
    #   see note here: https://github.com/pradels/vagrant-libvirt#synced-folders
    device.vm.synced_folder ".", "/vagrant", disabled: true



    # NETWORK INTERFACES
      # link for eth0 --> oob-mgmt-switch4:swp50
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:80",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10064',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8064',
            :libvirt__iface_name => 'eth0',
            auto_config: false
      # link for fp0 --> chassis04-lc1-1:fp12
      device.vm.network "private_network",
            :mac => "44:38:39:00:06:32",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10793',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8793',
            :libvirt__iface_name => 'fp0',
            auto_config: false
      # link for fp1 --> chassis04-lc1-1:fp13
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:a2",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10337',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8337',
            :libvirt__iface_name => 'fp1',
            auto_config: false
      # link for fp2 --> chassis04-lc1-1:fp14
      device.vm.network "private_network",
            :mac => "44:38:39:00:08:e0",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '11136',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '9136',
            :libvirt__iface_name => 'fp2',
            auto_config: false
      # link for fp3 --> chassis04-lc1-1:fp15
      device.vm.network "private_network",
            :mac => "44:38:39:00:08:b2",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '11113',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '9113',
            :libvirt__iface_name => 'fp3',
            auto_config: false
      # link for fp4 --> chassis04-lc1-2:fp12
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:7a",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10445',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8445',
            :libvirt__iface_name => 'fp4',
            auto_config: false
      # link for fp5 --> chassis04-lc1-2:fp13
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:5a",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10429',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8429',
            :libvirt__iface_name => 'fp5',
            auto_config: false
      # link for fp6 --> chassis04-lc1-2:fp14
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:54",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10042',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8042',
            :libvirt__iface_name => 'fp6',
            auto_config: false
      # link for fp7 --> chassis04-lc1-2:fp15
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:c2",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10481',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8481',
            :libvirt__iface_name => 'fp7',
            auto_config: false
      # link for fp8 --> chassis04-lc2-1:fp12
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:4a",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10037',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8037',
            :libvirt__iface_name => 'fp8',
            auto_config: false
      # link for fp9 --> chassis04-lc2-1:fp13
      device.vm.network "private_network",
            :mac => "44:38:39:00:07:5e",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10943',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8943',
            :libvirt__iface_name => 'fp9',
            auto_config: false
      # link for fp10 --> chassis04-lc2-1:fp14
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:7a",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10189',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8189',
            :libvirt__iface_name => 'fp10',
            auto_config: false
      # link for fp11 --> chassis04-lc2-1:fp15
      device.vm.network "private_network",
            :mac => "44:38:39:00:05:be",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10735',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8735',
            :libvirt__iface_name => 'fp11',
            auto_config: false
      # link for fp12 --> chassis04-lc2-2:fp12
      device.vm.network "private_network",
            :mac => "44:38:39:00:08:cc",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '11126',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '9126',
            :libvirt__iface_name => 'fp12',
            auto_config: false
      # link for fp13 --> chassis04-lc2-2:fp13
      device.vm.network "private_network",
            :mac => "44:38:39:00:08:bc",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '11118',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '9118',
            :libvirt__iface_name => 'fp13',
            auto_config: false
      # link for fp14 --> chassis04-lc2-2:fp14
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:70",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10056',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8056',
            :libvirt__iface_name => 'fp14',
            auto_config: false
      # link for fp15 --> chassis04-lc2-2:fp15
      device.vm.network "private_network",
            :mac => "44:38:39:00:06:2a",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10789',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8789',
            :libvirt__iface_name => 'fp15',
            auto_config: false
      # link for fp16 --> chassis04-lc3-1:fp12
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:c2",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10097',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8097',
            :libvirt__iface_name => 'fp16',
            auto_config: false
      # link for fp17 --> chassis04-lc3-1:fp13
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:24",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10402',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8402',
            :libvirt__iface_name => 'fp17',
            auto_config: false
      # link for fp18 --> chassis04-lc3-1:fp14
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:98",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10460',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8460',
            :libvirt__iface_name => 'fp18',
            auto_config: false
      # link for fp19 --> chassis04-lc3-1:fp15
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:f6",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10123',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8123',
            :libvirt__iface_name => 'fp19',
            auto_config: false
      # link for fp20 --> chassis04-lc3-2:fp12
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:68",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10436',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8436',
            :libvirt__iface_name => 'fp20',
            auto_config: false
      # link for fp21 --> chassis04-lc3-2:fp13
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:1a",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10397',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8397',
            :libvirt__iface_name => 'fp21',
            auto_config: false
      # link for fp22 --> chassis04-lc3-2:fp14
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:f4",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10378',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8378',
            :libvirt__iface_name => 'fp22',
            auto_config: false
      # link for fp23 --> chassis04-lc3-2:fp15
      device.vm.network "private_network",
            :mac => "44:38:39:00:09:5c",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '11198',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '9198',
            :libvirt__iface_name => 'fp23',
            auto_config: false
      # link for fp24 --> chassis04-lc4-1:fp12
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:36",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10411',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8411',
            :libvirt__iface_name => 'fp24',
            auto_config: false
      # link for fp25 --> chassis04-lc4-1:fp13
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:fe",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10383',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8383',
            :libvirt__iface_name => 'fp25',
            auto_config: false
      # link for fp26 --> chassis04-lc4-1:fp14
      device.vm.network "private_network",
            :mac => "44:38:39:00:05:fe",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10767',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8767',
            :libvirt__iface_name => 'fp26',
            auto_config: false
      # link for fp27 --> chassis04-lc4-1:fp15
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:e8",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10116',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8116',
            :libvirt__iface_name => 'fp27',
            auto_config: false
      # link for fp28 --> chassis04-lc4-2:fp12
      device.vm.network "private_network",
            :mac => "44:38:39:00:06:54",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10810',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8810',
            :libvirt__iface_name => 'fp28',
            auto_config: false
      # link for fp29 --> chassis04-lc4-2:fp13
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:ac",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10470',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8470',
            :libvirt__iface_name => 'fp29',
            auto_config: false
      # link for fp30 --> chassis04-lc4-2:fp14
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:1e",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10015',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8015',
            :libvirt__iface_name => 'fp30',
            auto_config: false
      # link for fp31 --> chassis04-lc4-2:fp15
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:6e",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10311',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8311',
            :libvirt__iface_name => 'fp31',
            auto_config: false



    # Fixes "stdin: is not a tty" and "mesg: ttyname failed : Inappropriate ioctl for device"  messages --> https://github.com/mitchellh/vagrant/issues/1673
    device.vm.provision :shell , inline: "(sudo grep -q 'mesg n' /root/.profile 2>/dev/null && sudo sed -i '/mesg n/d' /root/.profile  2>/dev/null) || true;", privileged: false

    #Copy over Topology.dot File
    device.vm.provision "file", source: "topology.dot", destination: "~/topology.dot"
    device.vm.provision :shell, privileged: false, inline: "sudo mv ~/topology.dot /etc/ptm.d/topology.dot"


    # Run the Config specified in the Node Attributes
    device.vm.provision :shell , privileged: false, :inline => 'echo "$(whoami)" > /tmp/normal_user'
    device.vm.provision :shell , path: "./helper_scripts/extra_switch_config.sh"


    # Install Rules for the interface re-map
    device.vm.provision :shell , :inline => <<-delete_udev_directory
if [ -d "/etc/udev/rules.d/70-persistent-net.rules" ]; then
    rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
fi
rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
delete_udev_directory

device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:80 --> eth0"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:80", NAME="eth0", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:06:32 --> fp0"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:06:32", NAME="fp0", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:a2 --> fp1"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:a2", NAME="fp1", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:08:e0 --> fp2"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:08:e0", NAME="fp2", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:08:b2 --> fp3"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:08:b2", NAME="fp3", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:7a --> fp4"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:7a", NAME="fp4", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:5a --> fp5"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:5a", NAME="fp5", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:54 --> fp6"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:54", NAME="fp6", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:c2 --> fp7"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:c2", NAME="fp7", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:4a --> fp8"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:4a", NAME="fp8", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:07:5e --> fp9"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:07:5e", NAME="fp9", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:7a --> fp10"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:7a", NAME="fp10", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:05:be --> fp11"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:05:be", NAME="fp11", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:08:cc --> fp12"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:08:cc", NAME="fp12", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:08:bc --> fp13"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:08:bc", NAME="fp13", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:70 --> fp14"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:70", NAME="fp14", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:06:2a --> fp15"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:06:2a", NAME="fp15", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:c2 --> fp16"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:c2", NAME="fp16", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:24 --> fp17"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:24", NAME="fp17", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:98 --> fp18"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:98", NAME="fp18", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:f6 --> fp19"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:f6", NAME="fp19", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:68 --> fp20"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:68", NAME="fp20", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:1a --> fp21"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:1a", NAME="fp21", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:f4 --> fp22"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:f4", NAME="fp22", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:09:5c --> fp23"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:09:5c", NAME="fp23", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:36 --> fp24"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:36", NAME="fp24", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:fe --> fp25"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:fe", NAME="fp25", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:05:fe --> fp26"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:05:fe", NAME="fp26", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:e8 --> fp27"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:e8", NAME="fp27", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:06:54 --> fp28"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:06:54", NAME="fp28", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:ac --> fp29"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:ac", NAME="fp29", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:1e --> fp30"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:1e", NAME="fp30", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:6e --> fp31"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:6e", NAME="fp31", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule

      device.vm.provision :shell , :inline => <<-vagrant_interface_rule
echo "  INFO: Adding UDEV Rule: Vagrant interface = vagrant"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{ifindex}=="2", NAME="vagrant", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
echo "#### UDEV Rules (/etc/udev/rules.d/70-persistent-net.rules) ####"
cat /etc/udev/rules.d/70-persistent-net.rules
vagrant_interface_rule

# Run Any Platform Specific Code and Apply the interface Re-map
    #   (may or may not perform a reboot depending on platform)
    device.vm.provision :shell , :inline => $script

end

  ##### DEFINE VM for chassis03-fc3-1 #####
  config.vm.define "chassis03-fc3-1" do |device|

    device.vm.hostname = "chassis03-fc3-1"

    device.vm.box = "CumulusCommunity/cumulus-vx"
    device.vm.box_version = "3.5.0"

    device.vm.provider :libvirt do |v|
      v.memory = 768
    end
    #   see note here: https://github.com/pradels/vagrant-libvirt#synced-folders
    device.vm.synced_folder ".", "/vagrant", disabled: true



    # NETWORK INTERFACES
      # link for eth0 --> oob-mgmt-switch4:swp37
      device.vm.network "private_network",
            :mac => "44:38:39:00:06:28",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10788',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8788',
            :libvirt__iface_name => 'eth0',
            auto_config: false
      # link for fp0 --> chassis03-lc1-1:fp8
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:2a",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10405',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8405',
            :libvirt__iface_name => 'fp0',
            auto_config: false
      # link for fp1 --> chassis03-lc1-1:fp9
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:e4",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10498',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8498',
            :libvirt__iface_name => 'fp1',
            auto_config: false
      # link for fp2 --> chassis03-lc1-1:fp10
      device.vm.network "private_network",
            :mac => "44:38:39:00:05:aa",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10725',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8725',
            :libvirt__iface_name => 'fp2',
            auto_config: false
      # link for fp3 --> chassis03-lc1-1:fp11
      device.vm.network "private_network",
            :mac => "44:38:39:00:09:60",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '11200',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '9200',
            :libvirt__iface_name => 'fp3',
            auto_config: false
      # link for fp4 --> chassis03-lc1-2:fp8
      device.vm.network "private_network",
            :mac => "44:38:39:00:06:50",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10808',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8808',
            :libvirt__iface_name => 'fp4',
            auto_config: false
      # link for fp5 --> chassis03-lc1-2:fp9
      device.vm.network "private_network",
            :mac => "44:38:39:00:08:7c",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '11086',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '9086',
            :libvirt__iface_name => 'fp5',
            auto_config: false
      # link for fp6 --> chassis03-lc1-2:fp10
      device.vm.network "private_network",
            :mac => "44:38:39:00:08:f4",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '11146',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '9146',
            :libvirt__iface_name => 'fp6',
            auto_config: false
      # link for fp7 --> chassis03-lc1-2:fp11
      device.vm.network "private_network",
            :mac => "44:38:39:00:06:b2",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10857',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8857',
            :libvirt__iface_name => 'fp7',
            auto_config: false
      # link for fp8 --> chassis03-lc2-1:fp8
      device.vm.network "private_network",
            :mac => "44:38:39:00:06:6c",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10822',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8822',
            :libvirt__iface_name => 'fp8',
            auto_config: false
      # link for fp9 --> chassis03-lc2-1:fp9
      device.vm.network "private_network",
            :mac => "44:38:39:00:07:68",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10948',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8948',
            :libvirt__iface_name => 'fp9',
            auto_config: false
      # link for fp10 --> chassis03-lc2-1:fp10
      device.vm.network "private_network",
            :mac => "44:38:39:00:06:34",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10794',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8794',
            :libvirt__iface_name => 'fp10',
            auto_config: false
      # link for fp11 --> chassis03-lc2-1:fp11
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:e0",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10624',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8624',
            :libvirt__iface_name => 'fp11',
            auto_config: false
      # link for fp12 --> chassis03-lc2-2:fp8
      device.vm.network "private_network",
            :mac => "44:38:39:00:07:04",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10898',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8898',
            :libvirt__iface_name => 'fp12',
            auto_config: false
      # link for fp13 --> chassis03-lc2-2:fp9
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:78",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10060',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8060',
            :libvirt__iface_name => 'fp13',
            auto_config: false
      # link for fp14 --> chassis03-lc2-2:fp10
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:68",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10308',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8308',
            :libvirt__iface_name => 'fp14',
            auto_config: false
      # link for fp15 --> chassis03-lc2-2:fp11
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:40",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10032',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8032',
            :libvirt__iface_name => 'fp15',
            auto_config: false
      # link for fp16 --> chassis03-lc3-1:fp8
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:90",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10328',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8328',
            :libvirt__iface_name => 'fp16',
            auto_config: false
      # link for fp17 --> chassis03-lc3-1:fp9
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:7e",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10191',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8191',
            :libvirt__iface_name => 'fp17',
            auto_config: false
      # link for fp18 --> chassis03-lc3-1:fp10
      device.vm.network "private_network",
            :mac => "44:38:39:00:06:3c",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10798',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8798',
            :libvirt__iface_name => 'fp18',
            auto_config: false
      # link for fp19 --> chassis03-lc3-1:fp11
      device.vm.network "private_network",
            :mac => "44:38:39:00:08:26",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '11043',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '9043',
            :libvirt__iface_name => 'fp19',
            auto_config: false
      # link for fp20 --> chassis03-lc3-2:fp8
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:8a",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10197',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8197',
            :libvirt__iface_name => 'fp20',
            auto_config: false
      # link for fp21 --> chassis03-lc3-2:fp9
      device.vm.network "private_network",
            :mac => "44:38:39:00:05:3e",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10671',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8671',
            :libvirt__iface_name => 'fp21',
            auto_config: false
      # link for fp22 --> chassis03-lc3-2:fp10
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:22",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10529',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8529',
            :libvirt__iface_name => 'fp22',
            auto_config: false
      # link for fp23 --> chassis03-lc3-2:fp11
      device.vm.network "private_network",
            :mac => "44:38:39:00:05:3a",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10669',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8669',
            :libvirt__iface_name => 'fp23',
            auto_config: false
      # link for fp24 --> chassis03-lc4-1:fp8
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:8c",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10070',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8070',
            :libvirt__iface_name => 'fp24',
            auto_config: false
      # link for fp25 --> chassis03-lc4-1:fp9
      device.vm.network "private_network",
            :mac => "44:38:39:00:05:8c",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10710',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8710',
            :libvirt__iface_name => 'fp25',
            auto_config: false
      # link for fp26 --> chassis03-lc4-1:fp10
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:f0",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10120',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8120',
            :libvirt__iface_name => 'fp26',
            auto_config: false
      # link for fp27 --> chassis03-lc4-1:fp11
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:bc",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10094',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8094',
            :libvirt__iface_name => 'fp27',
            auto_config: false
      # link for fp28 --> chassis03-lc4-2:fp8
      device.vm.network "private_network",
            :mac => "44:38:39:00:06:20",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10784',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8784',
            :libvirt__iface_name => 'fp28',
            auto_config: false
      # link for fp29 --> chassis03-lc4-2:fp9
      device.vm.network "private_network",
            :mac => "44:38:39:00:06:ce",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10871',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8871',
            :libvirt__iface_name => 'fp29',
            auto_config: false
      # link for fp30 --> chassis03-lc4-2:fp10
      device.vm.network "private_network",
            :mac => "44:38:39:00:05:58",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10684',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8684',
            :libvirt__iface_name => 'fp30',
            auto_config: false
      # link for fp31 --> chassis03-lc4-2:fp11
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:68",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10180',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8180',
            :libvirt__iface_name => 'fp31',
            auto_config: false



    # Fixes "stdin: is not a tty" and "mesg: ttyname failed : Inappropriate ioctl for device"  messages --> https://github.com/mitchellh/vagrant/issues/1673
    device.vm.provision :shell , inline: "(sudo grep -q 'mesg n' /root/.profile 2>/dev/null && sudo sed -i '/mesg n/d' /root/.profile  2>/dev/null) || true;", privileged: false

    #Copy over Topology.dot File
    device.vm.provision "file", source: "topology.dot", destination: "~/topology.dot"
    device.vm.provision :shell, privileged: false, inline: "sudo mv ~/topology.dot /etc/ptm.d/topology.dot"


    # Run the Config specified in the Node Attributes
    device.vm.provision :shell , privileged: false, :inline => 'echo "$(whoami)" > /tmp/normal_user'
    device.vm.provision :shell , path: "./helper_scripts/extra_switch_config.sh"


    # Install Rules for the interface re-map
    device.vm.provision :shell , :inline => <<-delete_udev_directory
if [ -d "/etc/udev/rules.d/70-persistent-net.rules" ]; then
    rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
fi
rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
delete_udev_directory

device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:06:28 --> eth0"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:06:28", NAME="eth0", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:2a --> fp0"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:2a", NAME="fp0", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:e4 --> fp1"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:e4", NAME="fp1", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:05:aa --> fp2"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:05:aa", NAME="fp2", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:09:60 --> fp3"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:09:60", NAME="fp3", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:06:50 --> fp4"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:06:50", NAME="fp4", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:08:7c --> fp5"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:08:7c", NAME="fp5", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:08:f4 --> fp6"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:08:f4", NAME="fp6", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:06:b2 --> fp7"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:06:b2", NAME="fp7", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:06:6c --> fp8"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:06:6c", NAME="fp8", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:07:68 --> fp9"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:07:68", NAME="fp9", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:06:34 --> fp10"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:06:34", NAME="fp10", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:e0 --> fp11"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:e0", NAME="fp11", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:07:04 --> fp12"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:07:04", NAME="fp12", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:78 --> fp13"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:78", NAME="fp13", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:68 --> fp14"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:68", NAME="fp14", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:40 --> fp15"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:40", NAME="fp15", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:90 --> fp16"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:90", NAME="fp16", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:7e --> fp17"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:7e", NAME="fp17", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:06:3c --> fp18"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:06:3c", NAME="fp18", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:08:26 --> fp19"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:08:26", NAME="fp19", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:8a --> fp20"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:8a", NAME="fp20", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:05:3e --> fp21"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:05:3e", NAME="fp21", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:22 --> fp22"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:22", NAME="fp22", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:05:3a --> fp23"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:05:3a", NAME="fp23", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:8c --> fp24"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:8c", NAME="fp24", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:05:8c --> fp25"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:05:8c", NAME="fp25", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:f0 --> fp26"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:f0", NAME="fp26", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:bc --> fp27"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:bc", NAME="fp27", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:06:20 --> fp28"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:06:20", NAME="fp28", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:06:ce --> fp29"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:06:ce", NAME="fp29", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:05:58 --> fp30"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:05:58", NAME="fp30", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:68 --> fp31"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:68", NAME="fp31", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule

      device.vm.provision :shell , :inline => <<-vagrant_interface_rule
echo "  INFO: Adding UDEV Rule: Vagrant interface = vagrant"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{ifindex}=="2", NAME="vagrant", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
echo "#### UDEV Rules (/etc/udev/rules.d/70-persistent-net.rules) ####"
cat /etc/udev/rules.d/70-persistent-net.rules
vagrant_interface_rule

# Run Any Platform Specific Code and Apply the interface Re-map
    #   (may or may not perform a reboot depending on platform)
    device.vm.provision :shell , :inline => $script

end

  ##### DEFINE VM for chassis01-lc2-1 #####
  config.vm.define "chassis01-lc2-1" do |device|

    device.vm.hostname = "chassis01-lc2-1"

    device.vm.box = "CumulusCommunity/cumulus-vx"
    device.vm.box_version = "3.5.0"

    device.vm.provider :libvirt do |v|
      v.memory = 768
    end
    #   see note here: https://github.com/pradels/vagrant-libvirt#synced-folders
    device.vm.synced_folder ".", "/vagrant", disabled: true



    # NETWORK INTERFACES
      # link for eth0 --> oob-mgmt-switch4:swp5
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:e8",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10372',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8372',
            :libvirt__iface_name => 'eth0',
            auto_config: false
      # link for fp0 --> chassis01-fc1-1:fp8
      device.vm.network "private_network",
            :mac => "44:38:39:00:05:6d",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8695',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10695',
            :libvirt__iface_name => 'fp0',
            auto_config: false
      # link for fp1 --> chassis01-fc1-1:fp9
      device.vm.network "private_network",
            :mac => "44:38:39:00:05:69",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8693',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10693',
            :libvirt__iface_name => 'fp1',
            auto_config: false
      # link for fp2 --> chassis01-fc1-1:fp10
      device.vm.network "private_network",
            :mac => "44:38:39:00:06:2d",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8791',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10791',
            :libvirt__iface_name => 'fp2',
            auto_config: false
      # link for fp3 --> chassis01-fc1-1:fp11
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:0b",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8134',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10134',
            :libvirt__iface_name => 'fp3',
            auto_config: false
      # link for fp4 --> chassis01-fc2-1:fp8
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:c5",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8483',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10483',
            :libvirt__iface_name => 'fp4',
            auto_config: false
      # link for fp5 --> chassis01-fc2-1:fp9
      device.vm.network "private_network",
            :mac => "44:38:39:00:08:db",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '9134',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '11134',
            :libvirt__iface_name => 'fp5',
            auto_config: false
      # link for fp6 --> chassis01-fc2-1:fp10
      device.vm.network "private_network",
            :mac => "44:38:39:00:05:d1",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8745',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10745',
            :libvirt__iface_name => 'fp6',
            auto_config: false
      # link for fp7 --> chassis01-fc2-1:fp11
      device.vm.network "private_network",
            :mac => "44:38:39:00:07:39",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8925',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10925',
            :libvirt__iface_name => 'fp7',
            auto_config: false
      # link for fp8 --> chassis01-fc3-1:fp8
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:05",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8003',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10003',
            :libvirt__iface_name => 'fp8',
            auto_config: false
      # link for fp9 --> chassis01-fc3-1:fp9
      device.vm.network "private_network",
            :mac => "44:38:39:00:08:e5",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '9139',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '11139',
            :libvirt__iface_name => 'fp9',
            auto_config: false
      # link for fp10 --> chassis01-fc3-1:fp10
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:e9",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8501',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10501',
            :libvirt__iface_name => 'fp10',
            auto_config: false
      # link for fp11 --> chassis01-fc3-1:fp11
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:c5",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8355',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10355',
            :libvirt__iface_name => 'fp11',
            auto_config: false
      # link for fp12 --> chassis01-fc4-1:fp8
      device.vm.network "private_network",
            :mac => "44:38:39:00:07:21",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8913',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10913',
            :libvirt__iface_name => 'fp12',
            auto_config: false
      # link for fp13 --> chassis01-fc4-1:fp9
      device.vm.network "private_network",
            :mac => "44:38:39:00:07:8f",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8968',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10968',
            :libvirt__iface_name => 'fp13',
            auto_config: false
      # link for fp14 --> chassis01-fc4-1:fp10
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:9d",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8079',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10079',
            :libvirt__iface_name => 'fp14',
            auto_config: false
      # link for fp15 --> chassis01-fc4-1:fp11
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:eb",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8246',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10246',
            :libvirt__iface_name => 'fp15',
            auto_config: false
      # link for swp1 --> leaf33:swp1
      device.vm.network "private_network",
            :mac => "44:38:39:00:09:01",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '9153',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '11153',
            :libvirt__iface_name => 'swp1',
            auto_config: false
      # link for swp2 --> leaf34:swp1
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:5b",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8302',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10302',
            :libvirt__iface_name => 'swp2',
            auto_config: false
      # link for swp3 --> leaf35:swp1
      device.vm.network "private_network",
            :mac => "44:38:39:00:07:29",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8917',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10917',
            :libvirt__iface_name => 'swp3',
            auto_config: false
      # link for swp4 --> leaf36:swp1
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:0d",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8263',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10263',
            :libvirt__iface_name => 'swp4',
            auto_config: false
      # link for swp5 --> leaf37:swp1
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:05",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8131',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10131',
            :libvirt__iface_name => 'swp5',
            auto_config: false
      # link for swp6 --> leaf38:swp1
      device.vm.network "private_network",
            :mac => "44:38:39:00:06:ed",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8887',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10887',
            :libvirt__iface_name => 'swp6',
            auto_config: false
      # link for swp7 --> leaf39:swp1
      device.vm.network "private_network",
            :mac => "44:38:39:00:05:37",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8668',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10668',
            :libvirt__iface_name => 'swp7',
            auto_config: false
      # link for swp8 --> leaf40:swp1
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:89",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8069',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10069',
            :libvirt__iface_name => 'swp8',
            auto_config: false
      # link for swp9 --> leaf41:swp1
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:2b",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8278',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10278',
            :libvirt__iface_name => 'swp9',
            auto_config: false
      # link for swp10 --> leaf42:swp1
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:af",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8216',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10216',
            :libvirt__iface_name => 'swp10',
            auto_config: false
      # link for swp11 --> leaf43:swp1
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:fd",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8639',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10639',
            :libvirt__iface_name => 'swp11',
            auto_config: false
      # link for swp12 --> leaf44:swp1
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:25",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8019',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10019',
            :libvirt__iface_name => 'swp12',
            auto_config: false
      # link for swp13 --> leaf45:swp1
      device.vm.network "private_network",
            :mac => "44:38:39:00:07:1b",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8910',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10910',
            :libvirt__iface_name => 'swp13',
            auto_config: false
      # link for swp14 --> leaf46:swp1
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:af",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8344',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10344',
            :libvirt__iface_name => 'swp14',
            auto_config: false
      # link for swp15 --> leaf47:swp1
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:81",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8449',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10449',
            :libvirt__iface_name => 'swp15',
            auto_config: false
      # link for swp16 --> leaf48:swp1
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:69",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8181',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10181',
            :libvirt__iface_name => 'swp16',
            auto_config: false



    # Fixes "stdin: is not a tty" and "mesg: ttyname failed : Inappropriate ioctl for device"  messages --> https://github.com/mitchellh/vagrant/issues/1673
    device.vm.provision :shell , inline: "(sudo grep -q 'mesg n' /root/.profile 2>/dev/null && sudo sed -i '/mesg n/d' /root/.profile  2>/dev/null) || true;", privileged: false

    #Copy over Topology.dot File
    device.vm.provision "file", source: "topology.dot", destination: "~/topology.dot"
    device.vm.provision :shell, privileged: false, inline: "sudo mv ~/topology.dot /etc/ptm.d/topology.dot"


    # Run the Config specified in the Node Attributes
    device.vm.provision :shell , privileged: false, :inline => 'echo "$(whoami)" > /tmp/normal_user'
    device.vm.provision :shell , path: "./helper_scripts/extra_switch_config.sh"


    # Install Rules for the interface re-map
    device.vm.provision :shell , :inline => <<-delete_udev_directory
if [ -d "/etc/udev/rules.d/70-persistent-net.rules" ]; then
    rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
fi
rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
delete_udev_directory

device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:e8 --> eth0"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:e8", NAME="eth0", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:05:6d --> fp0"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:05:6d", NAME="fp0", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:05:69 --> fp1"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:05:69", NAME="fp1", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:06:2d --> fp2"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:06:2d", NAME="fp2", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:0b --> fp3"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:0b", NAME="fp3", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:c5 --> fp4"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:c5", NAME="fp4", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:08:db --> fp5"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:08:db", NAME="fp5", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:05:d1 --> fp6"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:05:d1", NAME="fp6", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:07:39 --> fp7"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:07:39", NAME="fp7", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:05 --> fp8"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:05", NAME="fp8", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:08:e5 --> fp9"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:08:e5", NAME="fp9", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:e9 --> fp10"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:e9", NAME="fp10", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:c5 --> fp11"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:c5", NAME="fp11", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:07:21 --> fp12"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:07:21", NAME="fp12", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:07:8f --> fp13"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:07:8f", NAME="fp13", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:9d --> fp14"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:9d", NAME="fp14", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:eb --> fp15"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:eb", NAME="fp15", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:09:01 --> swp1"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:09:01", NAME="swp1", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:5b --> swp2"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:5b", NAME="swp2", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:07:29 --> swp3"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:07:29", NAME="swp3", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:0d --> swp4"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:0d", NAME="swp4", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:05 --> swp5"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:05", NAME="swp5", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:06:ed --> swp6"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:06:ed", NAME="swp6", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:05:37 --> swp7"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:05:37", NAME="swp7", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:89 --> swp8"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:89", NAME="swp8", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:2b --> swp9"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:2b", NAME="swp9", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:af --> swp10"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:af", NAME="swp10", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:fd --> swp11"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:fd", NAME="swp11", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:25 --> swp12"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:25", NAME="swp12", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:07:1b --> swp13"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:07:1b", NAME="swp13", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:af --> swp14"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:af", NAME="swp14", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:81 --> swp15"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:81", NAME="swp15", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:69 --> swp16"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:69", NAME="swp16", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule

      device.vm.provision :shell , :inline => <<-vagrant_interface_rule
echo "  INFO: Adding UDEV Rule: Vagrant interface = vagrant"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{ifindex}=="2", NAME="vagrant", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
echo "#### UDEV Rules (/etc/udev/rules.d/70-persistent-net.rules) ####"
cat /etc/udev/rules.d/70-persistent-net.rules
vagrant_interface_rule

# Run Any Platform Specific Code and Apply the interface Re-map
    #   (may or may not perform a reboot depending on platform)
    device.vm.provision :shell , :inline => $script

end

  ##### DEFINE VM for chassis01-lc2-2 #####
  config.vm.define "chassis01-lc2-2" do |device|

    device.vm.hostname = "chassis01-lc2-2"

    device.vm.box = "CumulusCommunity/cumulus-vx"
    device.vm.box_version = "3.5.0"

    device.vm.provider :libvirt do |v|
      v.memory = 768
    end
    #   see note here: https://github.com/pradels/vagrant-libvirt#synced-folders
    device.vm.synced_folder ".", "/vagrant", disabled: true



    # NETWORK INTERFACES
      # link for eth0 --> oob-mgmt-switch4:swp6
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:98",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10588',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8588',
            :libvirt__iface_name => 'eth0',
            auto_config: false
      # link for fp0 --> chassis01-fc1-1:fp12
      device.vm.network "private_network",
            :mac => "44:38:39:00:08:2f",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '9048',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '11048',
            :libvirt__iface_name => 'fp0',
            auto_config: false
      # link for fp1 --> chassis01-fc1-1:fp13
      device.vm.network "private_network",
            :mac => "44:38:39:00:06:b3",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8858',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10858',
            :libvirt__iface_name => 'fp1',
            auto_config: false
      # link for fp2 --> chassis01-fc1-1:fp14
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:d5",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8235',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10235',
            :libvirt__iface_name => 'fp2',
            auto_config: false
      # link for fp3 --> chassis01-fc1-1:fp15
      device.vm.network "private_network",
            :mac => "44:38:39:00:06:d7",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8876',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10876',
            :libvirt__iface_name => 'fp3',
            auto_config: false
      # link for fp4 --> chassis01-fc2-1:fp12
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:17",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8524',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10524',
            :libvirt__iface_name => 'fp4',
            auto_config: false
      # link for fp5 --> chassis01-fc2-1:fp13
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:55",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8043',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10043',
            :libvirt__iface_name => 'fp5',
            auto_config: false
      # link for fp6 --> chassis01-fc2-1:fp14
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:8f",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8456',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10456',
            :libvirt__iface_name => 'fp6',
            auto_config: false
      # link for fp7 --> chassis01-fc2-1:fp15
      device.vm.network "private_network",
            :mac => "44:38:39:00:05:6b",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8694',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10694',
            :libvirt__iface_name => 'fp7',
            auto_config: false
      # link for fp8 --> chassis01-fc3-1:fp12
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:29",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8533',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10533',
            :libvirt__iface_name => 'fp8',
            auto_config: false
      # link for fp9 --> chassis01-fc3-1:fp13
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:27",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8020',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10020',
            :libvirt__iface_name => 'fp9',
            auto_config: false
      # link for fp10 --> chassis01-fc3-1:fp14
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:6d",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8055',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10055',
            :libvirt__iface_name => 'fp10',
            auto_config: false
      # link for fp11 --> chassis01-fc3-1:fp15
      device.vm.network "private_network",
            :mac => "44:38:39:00:07:7b",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8958',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10958',
            :libvirt__iface_name => 'fp11',
            auto_config: false
      # link for fp12 --> chassis01-fc4-1:fp12
      device.vm.network "private_network",
            :mac => "44:38:39:00:08:23",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '9042',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '11042',
            :libvirt__iface_name => 'fp12',
            auto_config: false
      # link for fp13 --> chassis01-fc4-1:fp13
      device.vm.network "private_network",
            :mac => "44:38:39:00:06:c1",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8865',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10865',
            :libvirt__iface_name => 'fp13',
            auto_config: false
      # link for fp14 --> chassis01-fc4-1:fp14
      device.vm.network "private_network",
            :mac => "44:38:39:00:08:57",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '9068',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '11068',
            :libvirt__iface_name => 'fp14',
            auto_config: false
      # link for fp15 --> chassis01-fc4-1:fp15
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:4f",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8424',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10424',
            :libvirt__iface_name => 'fp15',
            auto_config: false
      # link for swp1 --> leaf49:swp1
      device.vm.network "private_network",
            :mac => "44:38:39:00:05:79",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8701',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10701',
            :libvirt__iface_name => 'swp1',
            auto_config: false
      # link for swp2 --> leaf50:swp1
      device.vm.network "private_network",
            :mac => "44:38:39:00:07:5f",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8944',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10944',
            :libvirt__iface_name => 'swp2',
            auto_config: false
      # link for swp3 --> leaf51:swp1
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:25",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8403',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10403',
            :libvirt__iface_name => 'swp3',
            auto_config: false
      # link for swp4 --> leaf52:swp1
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:ad",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8599',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10599',
            :libvirt__iface_name => 'swp4',
            auto_config: false
      # link for swp5 --> leaf53:swp1
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:eb",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8118',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10118',
            :libvirt__iface_name => 'swp5',
            auto_config: false
      # link for swp6 --> leaf54:swp1
      device.vm.network "private_network",
            :mac => "44:38:39:00:07:27",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8916',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10916',
            :libvirt__iface_name => 'swp6',
            auto_config: false
      # link for swp7 --> leaf55:swp1
      device.vm.network "private_network",
            :mac => "44:38:39:00:07:b5",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8987',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10987',
            :libvirt__iface_name => 'swp7',
            auto_config: false
      # link for swp8 --> leaf56:swp1
      device.vm.network "private_network",
            :mac => "44:38:39:00:09:0d",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '9159',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '11159',
            :libvirt__iface_name => 'swp8',
            auto_config: false
      # link for swp9 --> leaf57:swp1
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:f1",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8633',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10633',
            :libvirt__iface_name => 'swp9',
            auto_config: false
      # link for swp10 --> leaf58:swp1
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:b1",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8217',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10217',
            :libvirt__iface_name => 'swp10',
            auto_config: false
      # link for swp11 --> leaf59:swp1
      device.vm.network "private_network",
            :mac => "44:38:39:00:05:f3",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8762',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10762',
            :libvirt__iface_name => 'swp11',
            auto_config: false
      # link for swp12 --> leaf60:swp1
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:09",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8005',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10005',
            :libvirt__iface_name => 'swp12',
            auto_config: false
      # link for swp13 --> leaf61:swp1
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:79",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8317',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10317',
            :libvirt__iface_name => 'swp13',
            auto_config: false
      # link for swp14 --> leaf62:swp1
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:41",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8417',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10417',
            :libvirt__iface_name => 'swp14',
            auto_config: false
      # link for swp15 --> leaf63:swp1
      device.vm.network "private_network",
            :mac => "44:38:39:00:06:f9",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8893',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10893',
            :libvirt__iface_name => 'swp15',
            auto_config: false
      # link for swp16 --> leaf64:swp1
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:b1",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8089',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10089',
            :libvirt__iface_name => 'swp16',
            auto_config: false



    # Fixes "stdin: is not a tty" and "mesg: ttyname failed : Inappropriate ioctl for device"  messages --> https://github.com/mitchellh/vagrant/issues/1673
    device.vm.provision :shell , inline: "(sudo grep -q 'mesg n' /root/.profile 2>/dev/null && sudo sed -i '/mesg n/d' /root/.profile  2>/dev/null) || true;", privileged: false

    #Copy over Topology.dot File
    device.vm.provision "file", source: "topology.dot", destination: "~/topology.dot"
    device.vm.provision :shell, privileged: false, inline: "sudo mv ~/topology.dot /etc/ptm.d/topology.dot"


    # Run the Config specified in the Node Attributes
    device.vm.provision :shell , privileged: false, :inline => 'echo "$(whoami)" > /tmp/normal_user'
    device.vm.provision :shell , path: "./helper_scripts/extra_switch_config.sh"


    # Install Rules for the interface re-map
    device.vm.provision :shell , :inline => <<-delete_udev_directory
if [ -d "/etc/udev/rules.d/70-persistent-net.rules" ]; then
    rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
fi
rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
delete_udev_directory

device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:98 --> eth0"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:98", NAME="eth0", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:08:2f --> fp0"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:08:2f", NAME="fp0", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:06:b3 --> fp1"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:06:b3", NAME="fp1", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:d5 --> fp2"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:d5", NAME="fp2", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:06:d7 --> fp3"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:06:d7", NAME="fp3", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:17 --> fp4"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:17", NAME="fp4", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:55 --> fp5"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:55", NAME="fp5", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:8f --> fp6"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:8f", NAME="fp6", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:05:6b --> fp7"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:05:6b", NAME="fp7", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:29 --> fp8"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:29", NAME="fp8", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:27 --> fp9"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:27", NAME="fp9", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:6d --> fp10"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:6d", NAME="fp10", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:07:7b --> fp11"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:07:7b", NAME="fp11", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:08:23 --> fp12"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:08:23", NAME="fp12", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:06:c1 --> fp13"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:06:c1", NAME="fp13", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:08:57 --> fp14"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:08:57", NAME="fp14", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:4f --> fp15"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:4f", NAME="fp15", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:05:79 --> swp1"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:05:79", NAME="swp1", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:07:5f --> swp2"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:07:5f", NAME="swp2", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:25 --> swp3"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:25", NAME="swp3", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:ad --> swp4"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:ad", NAME="swp4", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:eb --> swp5"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:eb", NAME="swp5", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:07:27 --> swp6"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:07:27", NAME="swp6", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:07:b5 --> swp7"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:07:b5", NAME="swp7", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:09:0d --> swp8"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:09:0d", NAME="swp8", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:f1 --> swp9"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:f1", NAME="swp9", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:b1 --> swp10"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:b1", NAME="swp10", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:05:f3 --> swp11"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:05:f3", NAME="swp11", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:09 --> swp12"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:09", NAME="swp12", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:79 --> swp13"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:79", NAME="swp13", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:41 --> swp14"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:41", NAME="swp14", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:06:f9 --> swp15"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:06:f9", NAME="swp15", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:b1 --> swp16"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:b1", NAME="swp16", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule

      device.vm.provision :shell , :inline => <<-vagrant_interface_rule
echo "  INFO: Adding UDEV Rule: Vagrant interface = vagrant"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{ifindex}=="2", NAME="vagrant", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
echo "#### UDEV Rules (/etc/udev/rules.d/70-persistent-net.rules) ####"
cat /etc/udev/rules.d/70-persistent-net.rules
vagrant_interface_rule

# Run Any Platform Specific Code and Apply the interface Re-map
    #   (may or may not perform a reboot depending on platform)
    device.vm.provision :shell , :inline => $script

end

  ##### DEFINE VM for chassis02-fc4-1 #####
  config.vm.define "chassis02-fc4-1" do |device|

    device.vm.hostname = "chassis02-fc4-1"

    device.vm.box = "CumulusCommunity/cumulus-vx"
    device.vm.box_version = "3.5.0"

    device.vm.provider :libvirt do |v|
      v.memory = 768
    end
    #   see note here: https://github.com/pradels/vagrant-libvirt#synced-folders
    device.vm.synced_folder ".", "/vagrant", disabled: true



    # NETWORK INTERFACES
      # link for eth0 --> oob-mgmt-switch4:swp26
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:d6",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10619',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8619',
            :libvirt__iface_name => 'eth0',
            auto_config: false
      # link for fp0 --> chassis02-lc1-1:fp12
      device.vm.network "private_network",
            :mac => "44:38:39:00:05:94",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10714',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8714',
            :libvirt__iface_name => 'fp0',
            auto_config: false
      # link for fp1 --> chassis02-lc1-1:fp13
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:16",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10523',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8523',
            :libvirt__iface_name => 'fp1',
            auto_config: false
      # link for fp2 --> chassis02-lc1-1:fp14
      device.vm.network "private_network",
            :mac => "44:38:39:00:07:20",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10912',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8912',
            :libvirt__iface_name => 'fp2',
            auto_config: false
      # link for fp3 --> chassis02-lc1-1:fp15
      device.vm.network "private_network",
            :mac => "44:38:39:00:08:72",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '11081',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '9081',
            :libvirt__iface_name => 'fp3',
            auto_config: false
      # link for fp4 --> chassis02-lc1-2:fp12
      device.vm.network "private_network",
            :mac => "44:38:39:00:06:24",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10786',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8786',
            :libvirt__iface_name => 'fp4',
            auto_config: false
      # link for fp5 --> chassis02-lc1-2:fp13
      device.vm.network "private_network",
            :mac => "44:38:39:00:06:76",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10827',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8827',
            :libvirt__iface_name => 'fp5',
            auto_config: false
      # link for fp6 --> chassis02-lc1-2:fp14
      device.vm.network "private_network",
            :mac => "44:38:39:00:08:56",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '11067',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '9067',
            :libvirt__iface_name => 'fp6',
            auto_config: false
      # link for fp7 --> chassis02-lc1-2:fp15
      device.vm.network "private_network",
            :mac => "44:38:39:00:07:26",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10915',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8915',
            :libvirt__iface_name => 'fp7',
            auto_config: false
      # link for fp8 --> chassis02-lc2-1:fp12
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:42",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10033',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8033',
            :libvirt__iface_name => 'fp8',
            auto_config: false
      # link for fp9 --> chassis02-lc2-1:fp13
      device.vm.network "private_network",
            :mac => "44:38:39:00:05:f2",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10761',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8761',
            :libvirt__iface_name => 'fp9',
            auto_config: false
      # link for fp10 --> chassis02-lc2-1:fp14
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:dc",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10622',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8622',
            :libvirt__iface_name => 'fp10',
            auto_config: false
      # link for fp11 --> chassis02-lc2-1:fp15
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:34",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10538',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8538',
            :libvirt__iface_name => 'fp11',
            auto_config: false
      # link for fp12 --> chassis02-lc2-2:fp12
      device.vm.network "private_network",
            :mac => "44:38:39:00:07:64",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10946',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8946',
            :libvirt__iface_name => 'fp12',
            auto_config: false
      # link for fp13 --> chassis02-lc2-2:fp13
      device.vm.network "private_network",
            :mac => "44:38:39:00:08:42",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '11057',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '9057',
            :libvirt__iface_name => 'fp13',
            auto_config: false
      # link for fp14 --> chassis02-lc2-2:fp14
      device.vm.network "private_network",
            :mac => "44:38:39:00:08:e8",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '11140',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '9140',
            :libvirt__iface_name => 'fp14',
            auto_config: false
      # link for fp15 --> chassis02-lc2-2:fp15
      device.vm.network "private_network",
            :mac => "44:38:39:00:05:56",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10683',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8683',
            :libvirt__iface_name => 'fp15',
            auto_config: false
      # link for fp16 --> chassis02-lc3-1:fp12
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:fe",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10127',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8127',
            :libvirt__iface_name => 'fp16',
            auto_config: false
      # link for fp17 --> chassis02-lc3-1:fp13
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:4a",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10421',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8421',
            :libvirt__iface_name => 'fp17',
            auto_config: false
      # link for fp18 --> chassis02-lc3-1:fp14
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:54",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10426',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8426',
            :libvirt__iface_name => 'fp18',
            auto_config: false
      # link for fp19 --> chassis02-lc3-1:fp15
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:e6",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10371',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8371',
            :libvirt__iface_name => 'fp19',
            auto_config: false
      # link for fp20 --> chassis02-lc3-2:fp12
      device.vm.network "private_network",
            :mac => "44:38:39:00:09:06",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '11155',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '9155',
            :libvirt__iface_name => 'fp20',
            auto_config: false
      # link for fp21 --> chassis02-lc3-2:fp13
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:32",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10537',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8537',
            :libvirt__iface_name => 'fp21',
            auto_config: false
      # link for fp22 --> chassis02-lc3-2:fp14
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:f0",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10248',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8248',
            :libvirt__iface_name => 'fp22',
            auto_config: false
      # link for fp23 --> chassis02-lc3-2:fp15
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:2e",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10151',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8151',
            :libvirt__iface_name => 'fp23',
            auto_config: false
      # link for fp24 --> chassis02-lc4-1:fp12
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:5a",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10557',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8557',
            :libvirt__iface_name => 'fp24',
            auto_config: false
      # link for fp25 --> chassis02-lc4-1:fp13
      device.vm.network "private_network",
            :mac => "44:38:39:00:07:80",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10960',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8960',
            :libvirt__iface_name => 'fp25',
            auto_config: false
      # link for fp26 --> chassis02-lc4-1:fp14
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:ee",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10631',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8631',
            :libvirt__iface_name => 'fp26',
            auto_config: false
      # link for fp27 --> chassis02-lc4-1:fp15
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:aa",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10085',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8085',
            :libvirt__iface_name => 'fp27',
            auto_config: false
      # link for fp28 --> chassis02-lc4-2:fp12
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:4c",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10422',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8422',
            :libvirt__iface_name => 'fp28',
            auto_config: false
      # link for fp29 --> chassis02-lc4-2:fp13
      device.vm.network "private_network",
            :mac => "44:38:39:00:06:58",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10812',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8812',
            :libvirt__iface_name => 'fp29',
            auto_config: false
      # link for fp30 --> chassis02-lc4-2:fp14
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:2a",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10021',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8021',
            :libvirt__iface_name => 'fp30',
            auto_config: false
      # link for fp31 --> chassis02-lc4-2:fp15
      device.vm.network "private_network",
            :mac => "44:38:39:00:07:3c",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10926',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8926',
            :libvirt__iface_name => 'fp31',
            auto_config: false



    # Fixes "stdin: is not a tty" and "mesg: ttyname failed : Inappropriate ioctl for device"  messages --> https://github.com/mitchellh/vagrant/issues/1673
    device.vm.provision :shell , inline: "(sudo grep -q 'mesg n' /root/.profile 2>/dev/null && sudo sed -i '/mesg n/d' /root/.profile  2>/dev/null) || true;", privileged: false

    #Copy over Topology.dot File
    device.vm.provision "file", source: "topology.dot", destination: "~/topology.dot"
    device.vm.provision :shell, privileged: false, inline: "sudo mv ~/topology.dot /etc/ptm.d/topology.dot"


    # Run the Config specified in the Node Attributes
    device.vm.provision :shell , privileged: false, :inline => 'echo "$(whoami)" > /tmp/normal_user'
    device.vm.provision :shell , path: "./helper_scripts/extra_switch_config.sh"


    # Install Rules for the interface re-map
    device.vm.provision :shell , :inline => <<-delete_udev_directory
if [ -d "/etc/udev/rules.d/70-persistent-net.rules" ]; then
    rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
fi
rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
delete_udev_directory

device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:d6 --> eth0"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:d6", NAME="eth0", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:05:94 --> fp0"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:05:94", NAME="fp0", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:16 --> fp1"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:16", NAME="fp1", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:07:20 --> fp2"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:07:20", NAME="fp2", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:08:72 --> fp3"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:08:72", NAME="fp3", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:06:24 --> fp4"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:06:24", NAME="fp4", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:06:76 --> fp5"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:06:76", NAME="fp5", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:08:56 --> fp6"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:08:56", NAME="fp6", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:07:26 --> fp7"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:07:26", NAME="fp7", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:42 --> fp8"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:42", NAME="fp8", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:05:f2 --> fp9"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:05:f2", NAME="fp9", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:dc --> fp10"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:dc", NAME="fp10", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:34 --> fp11"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:34", NAME="fp11", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:07:64 --> fp12"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:07:64", NAME="fp12", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:08:42 --> fp13"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:08:42", NAME="fp13", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:08:e8 --> fp14"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:08:e8", NAME="fp14", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:05:56 --> fp15"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:05:56", NAME="fp15", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:fe --> fp16"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:fe", NAME="fp16", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:4a --> fp17"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:4a", NAME="fp17", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:54 --> fp18"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:54", NAME="fp18", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:e6 --> fp19"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:e6", NAME="fp19", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:09:06 --> fp20"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:09:06", NAME="fp20", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:32 --> fp21"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:32", NAME="fp21", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:f0 --> fp22"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:f0", NAME="fp22", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:2e --> fp23"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:2e", NAME="fp23", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:5a --> fp24"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:5a", NAME="fp24", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:07:80 --> fp25"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:07:80", NAME="fp25", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:ee --> fp26"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:ee", NAME="fp26", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:aa --> fp27"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:aa", NAME="fp27", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:4c --> fp28"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:4c", NAME="fp28", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:06:58 --> fp29"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:06:58", NAME="fp29", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:2a --> fp30"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:2a", NAME="fp30", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:07:3c --> fp31"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:07:3c", NAME="fp31", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule

      device.vm.provision :shell , :inline => <<-vagrant_interface_rule
echo "  INFO: Adding UDEV Rule: Vagrant interface = vagrant"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{ifindex}=="2", NAME="vagrant", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
echo "#### UDEV Rules (/etc/udev/rules.d/70-persistent-net.rules) ####"
cat /etc/udev/rules.d/70-persistent-net.rules
vagrant_interface_rule

# Run Any Platform Specific Code and Apply the interface Re-map
    #   (may or may not perform a reboot depending on platform)
    device.vm.provision :shell , :inline => $script

end

  ##### DEFINE VM for chassis04-lc4-2 #####
  config.vm.define "chassis04-lc4-2" do |device|

    device.vm.hostname = "chassis04-lc4-2"

    device.vm.box = "CumulusCommunity/cumulus-vx"
    device.vm.box_version = "3.5.0"

    device.vm.provider :libvirt do |v|
      v.memory = 768
    end
    #   see note here: https://github.com/pradels/vagrant-libvirt#synced-folders
    device.vm.synced_folder ".", "/vagrant", disabled: true



    # NETWORK INTERFACES
      # link for eth0 --> oob-mgmt-switch4:swp46
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:4e",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10295',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8295',
            :libvirt__iface_name => 'eth0',
            auto_config: false
      # link for fp0 --> chassis04-fc1-1:fp28
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:3b",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8158',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10158',
            :libvirt__iface_name => 'fp0',
            auto_config: false
      # link for fp1 --> chassis04-fc1-1:fp29
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:51",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8297',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10297',
            :libvirt__iface_name => 'fp1',
            auto_config: false
      # link for fp2 --> chassis04-fc1-1:fp30
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:73",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8314',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10314',
            :libvirt__iface_name => 'fp2',
            auto_config: false
      # link for fp3 --> chassis04-fc1-1:fp31
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:1d",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8271',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10271',
            :libvirt__iface_name => 'fp3',
            auto_config: false
      # link for fp4 --> chassis04-fc2-1:fp28
      device.vm.network "private_network",
            :mac => "44:38:39:00:09:2d",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '9175',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '11175',
            :libvirt__iface_name => 'fp4',
            auto_config: false
      # link for fp5 --> chassis04-fc2-1:fp29
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:f9",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8637',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10637',
            :libvirt__iface_name => 'fp5',
            auto_config: false
      # link for fp6 --> chassis04-fc2-1:fp30
      device.vm.network "private_network",
            :mac => "44:38:39:00:08:d7",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '9132',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '11132',
            :libvirt__iface_name => 'fp6',
            auto_config: false
      # link for fp7 --> chassis04-fc2-1:fp31
      device.vm.network "private_network",
            :mac => "44:38:39:00:08:f1",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '9145',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '11145',
            :libvirt__iface_name => 'fp7',
            auto_config: false
      # link for fp8 --> chassis04-fc3-1:fp28
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:21",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8017',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10017',
            :libvirt__iface_name => 'fp8',
            auto_config: false
      # link for fp9 --> chassis04-fc3-1:fp29
      device.vm.network "private_network",
            :mac => "44:38:39:00:05:d7",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8748',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10748',
            :libvirt__iface_name => 'fp9',
            auto_config: false
      # link for fp10 --> chassis04-fc3-1:fp30
      device.vm.network "private_network",
            :mac => "44:38:39:00:09:35",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '9179',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '11179',
            :libvirt__iface_name => 'fp10',
            auto_config: false
      # link for fp11 --> chassis04-fc3-1:fp31
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:9b",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8462',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10462',
            :libvirt__iface_name => 'fp11',
            auto_config: false
      # link for fp12 --> chassis04-fc4-1:fp28
      device.vm.network "private_network",
            :mac => "44:38:39:00:06:53",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8810',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10810',
            :libvirt__iface_name => 'fp12',
            auto_config: false
      # link for fp13 --> chassis04-fc4-1:fp29
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:ab",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8470',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10470',
            :libvirt__iface_name => 'fp13',
            auto_config: false
      # link for fp14 --> chassis04-fc4-1:fp30
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:1d",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8015',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10015',
            :libvirt__iface_name => 'fp14',
            auto_config: false
      # link for fp15 --> chassis04-fc4-1:fp31
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:6d",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8311',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10311',
            :libvirt__iface_name => 'fp15',
            auto_config: false
      # link for swp1 --> leaf113:swp4
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:b7",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8348',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10348',
            :libvirt__iface_name => 'swp1',
            auto_config: false
      # link for swp2 --> leaf114:swp4
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:3d",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8415',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10415',
            :libvirt__iface_name => 'swp2',
            auto_config: false
      # link for swp3 --> leaf115:swp4
      device.vm.network "private_network",
            :mac => "44:38:39:00:07:33",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8922',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10922',
            :libvirt__iface_name => 'swp3',
            auto_config: false
      # link for swp4 --> leaf116:swp4
      device.vm.network "private_network",
            :mac => "44:38:39:00:09:29",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '9173',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '11173',
            :libvirt__iface_name => 'swp4',
            auto_config: false
      # link for swp5 --> leaf117:swp4
      device.vm.network "private_network",
            :mac => "44:38:39:00:06:fb",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8894',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10894',
            :libvirt__iface_name => 'swp5',
            auto_config: false
      # link for swp6 --> leaf118:swp4
      device.vm.network "private_network",
            :mac => "44:38:39:00:06:9d",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8847',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10847',
            :libvirt__iface_name => 'swp6',
            auto_config: false
      # link for swp7 --> leaf119:swp4
      device.vm.network "private_network",
            :mac => "44:38:39:00:05:1b",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8654',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10654',
            :libvirt__iface_name => 'swp7',
            auto_config: false
      # link for swp8 --> leaf120:swp4
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:73",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8186',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10186',
            :libvirt__iface_name => 'swp8',
            auto_config: false
      # link for swp9 --> leaf121:swp4
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:25",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8531',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10531',
            :libvirt__iface_name => 'swp9',
            auto_config: false
      # link for swp10 --> leaf122:swp4
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:93",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8202',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10202',
            :libvirt__iface_name => 'swp10',
            auto_config: false
      # link for swp11 --> leaf123:swp4
      device.vm.network "private_network",
            :mac => "44:38:39:00:09:3d",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '9183',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '11183',
            :libvirt__iface_name => 'swp11',
            auto_config: false
      # link for swp12 --> leaf124:swp4
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:a3",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8466',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10466',
            :libvirt__iface_name => 'swp12',
            auto_config: false
      # link for swp13 --> leaf125:swp4
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:25",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8147',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10147',
            :libvirt__iface_name => 'swp13',
            auto_config: false
      # link for swp14 --> leaf126:swp4
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:8d",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8455',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10455',
            :libvirt__iface_name => 'swp14',
            auto_config: false
      # link for swp15 --> leaf127:swp4
      device.vm.network "private_network",
            :mac => "44:38:39:00:08:1b",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '9038',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '11038',
            :libvirt__iface_name => 'swp15',
            auto_config: false
      # link for swp16 --> leaf128:swp4
      device.vm.network "private_network",
            :mac => "44:38:39:00:07:4d",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8935',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10935',
            :libvirt__iface_name => 'swp16',
            auto_config: false



    # Fixes "stdin: is not a tty" and "mesg: ttyname failed : Inappropriate ioctl for device"  messages --> https://github.com/mitchellh/vagrant/issues/1673
    device.vm.provision :shell , inline: "(sudo grep -q 'mesg n' /root/.profile 2>/dev/null && sudo sed -i '/mesg n/d' /root/.profile  2>/dev/null) || true;", privileged: false

    #Copy over Topology.dot File
    device.vm.provision "file", source: "topology.dot", destination: "~/topology.dot"
    device.vm.provision :shell, privileged: false, inline: "sudo mv ~/topology.dot /etc/ptm.d/topology.dot"


    # Run the Config specified in the Node Attributes
    device.vm.provision :shell , privileged: false, :inline => 'echo "$(whoami)" > /tmp/normal_user'
    device.vm.provision :shell , path: "./helper_scripts/extra_switch_config.sh"


    # Install Rules for the interface re-map
    device.vm.provision :shell , :inline => <<-delete_udev_directory
if [ -d "/etc/udev/rules.d/70-persistent-net.rules" ]; then
    rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
fi
rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
delete_udev_directory

device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:4e --> eth0"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:4e", NAME="eth0", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:3b --> fp0"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:3b", NAME="fp0", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:51 --> fp1"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:51", NAME="fp1", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:73 --> fp2"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:73", NAME="fp2", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:1d --> fp3"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:1d", NAME="fp3", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:09:2d --> fp4"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:09:2d", NAME="fp4", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:f9 --> fp5"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:f9", NAME="fp5", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:08:d7 --> fp6"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:08:d7", NAME="fp6", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:08:f1 --> fp7"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:08:f1", NAME="fp7", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:21 --> fp8"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:21", NAME="fp8", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:05:d7 --> fp9"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:05:d7", NAME="fp9", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:09:35 --> fp10"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:09:35", NAME="fp10", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:9b --> fp11"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:9b", NAME="fp11", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:06:53 --> fp12"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:06:53", NAME="fp12", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:ab --> fp13"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:ab", NAME="fp13", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:1d --> fp14"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:1d", NAME="fp14", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:6d --> fp15"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:6d", NAME="fp15", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:b7 --> swp1"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:b7", NAME="swp1", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:3d --> swp2"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:3d", NAME="swp2", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:07:33 --> swp3"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:07:33", NAME="swp3", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:09:29 --> swp4"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:09:29", NAME="swp4", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:06:fb --> swp5"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:06:fb", NAME="swp5", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:06:9d --> swp6"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:06:9d", NAME="swp6", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:05:1b --> swp7"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:05:1b", NAME="swp7", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:73 --> swp8"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:73", NAME="swp8", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:25 --> swp9"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:25", NAME="swp9", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:93 --> swp10"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:93", NAME="swp10", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:09:3d --> swp11"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:09:3d", NAME="swp11", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:a3 --> swp12"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:a3", NAME="swp12", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:25 --> swp13"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:25", NAME="swp13", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:8d --> swp14"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:8d", NAME="swp14", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:08:1b --> swp15"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:08:1b", NAME="swp15", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:07:4d --> swp16"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:07:4d", NAME="swp16", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule

      device.vm.provision :shell , :inline => <<-vagrant_interface_rule
echo "  INFO: Adding UDEV Rule: Vagrant interface = vagrant"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{ifindex}=="2", NAME="vagrant", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
echo "#### UDEV Rules (/etc/udev/rules.d/70-persistent-net.rules) ####"
cat /etc/udev/rules.d/70-persistent-net.rules
vagrant_interface_rule

# Run Any Platform Specific Code and Apply the interface Re-map
    #   (may or may not perform a reboot depending on platform)
    device.vm.provision :shell , :inline => $script

end

  ##### DEFINE VM for chassis04-lc4-1 #####
  config.vm.define "chassis04-lc4-1" do |device|

    device.vm.hostname = "chassis04-lc4-1"

    device.vm.box = "CumulusCommunity/cumulus-vx"
    device.vm.box_version = "3.5.0"

    device.vm.provider :libvirt do |v|
      v.memory = 768
    end
    #   see note here: https://github.com/pradels/vagrant-libvirt#synced-folders
    device.vm.synced_folder ".", "/vagrant", disabled: true



    # NETWORK INTERFACES
      # link for eth0 --> oob-mgmt-switch4:swp45
      device.vm.network "private_network",
            :mac => "44:38:39:00:08:32",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '11049',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '9049',
            :libvirt__iface_name => 'eth0',
            auto_config: false
      # link for fp0 --> chassis04-fc1-1:fp24
      device.vm.network "private_network",
            :mac => "44:38:39:00:06:85",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8835',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10835',
            :libvirt__iface_name => 'fp0',
            auto_config: false
      # link for fp1 --> chassis04-fc1-1:fp25
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:65",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8307',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10307',
            :libvirt__iface_name => 'fp1',
            auto_config: false
      # link for fp2 --> chassis04-fc1-1:fp26
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:03",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8386',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10386',
            :libvirt__iface_name => 'fp2',
            auto_config: false
      # link for fp3 --> chassis04-fc1-1:fp27
      device.vm.network "private_network",
            :mac => "44:38:39:00:09:69",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '9205',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '11205',
            :libvirt__iface_name => 'fp3',
            auto_config: false
      # link for fp4 --> chassis04-fc2-1:fp24
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:81",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8577',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10577',
            :libvirt__iface_name => 'fp4',
            auto_config: false
      # link for fp5 --> chassis04-fc2-1:fp25
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:89",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8453',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10453',
            :libvirt__iface_name => 'fp5',
            auto_config: false
      # link for fp6 --> chassis04-fc2-1:fp26
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:6b",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8566',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10566',
            :libvirt__iface_name => 'fp6',
            auto_config: false
      # link for fp7 --> chassis04-fc2-1:fp27
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:59",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8173',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10173',
            :libvirt__iface_name => 'fp7',
            auto_config: false
      # link for fp8 --> chassis04-fc3-1:fp24
      device.vm.network "private_network",
            :mac => "44:38:39:00:05:1d",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8655',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10655',
            :libvirt__iface_name => 'fp8',
            auto_config: false
      # link for fp9 --> chassis04-fc3-1:fp25
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:8b",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8582',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10582',
            :libvirt__iface_name => 'fp9',
            auto_config: false
      # link for fp10 --> chassis04-fc3-1:fp26
      device.vm.network "private_network",
            :mac => "44:38:39:00:08:79",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '9085',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '11085',
            :libvirt__iface_name => 'fp10',
            auto_config: false
      # link for fp11 --> chassis04-fc3-1:fp27
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:a7",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8340',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10340',
            :libvirt__iface_name => 'fp11',
            auto_config: false
      # link for fp12 --> chassis04-fc4-1:fp24
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:35",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8411',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10411',
            :libvirt__iface_name => 'fp12',
            auto_config: false
      # link for fp13 --> chassis04-fc4-1:fp25
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:fd",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8383',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10383',
            :libvirt__iface_name => 'fp13',
            auto_config: false
      # link for fp14 --> chassis04-fc4-1:fp26
      device.vm.network "private_network",
            :mac => "44:38:39:00:05:fd",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8767',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10767',
            :libvirt__iface_name => 'fp14',
            auto_config: false
      # link for fp15 --> chassis04-fc4-1:fp27
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:e7",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8116',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10116',
            :libvirt__iface_name => 'fp15',
            auto_config: false
      # link for swp1 --> leaf97:swp4
      device.vm.network "private_network",
            :mac => "44:38:39:00:08:07",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '9028',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '11028',
            :libvirt__iface_name => 'swp1',
            auto_config: false
      # link for swp2 --> leaf98:swp4
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:d1",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8233',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10233',
            :libvirt__iface_name => 'swp2',
            auto_config: false
      # link for swp3 --> leaf99:swp4
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:e5",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8627',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10627',
            :libvirt__iface_name => 'swp3',
            auto_config: false
      # link for swp4 --> leaf100:swp4
      device.vm.network "private_network",
            :mac => "44:38:39:00:05:5f",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8688',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10688',
            :libvirt__iface_name => 'swp4',
            auto_config: false
      # link for swp5 --> leaf101:swp4
      device.vm.network "private_network",
            :mac => "44:38:39:00:06:83",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8834',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10834',
            :libvirt__iface_name => 'swp5',
            auto_config: false
      # link for swp6 --> leaf102:swp4
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:4b",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8038',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10038',
            :libvirt__iface_name => 'swp6',
            auto_config: false
      # link for swp7 --> leaf103:swp4
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:65",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8435',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10435',
            :libvirt__iface_name => 'swp7',
            auto_config: false
      # link for swp8 --> leaf104:swp4
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:83",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8194',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10194',
            :libvirt__iface_name => 'swp8',
            auto_config: false
      # link for swp9 --> leaf105:swp4
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:2d",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8535',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10535',
            :libvirt__iface_name => 'swp9',
            auto_config: false
      # link for swp10 --> leaf106:swp4
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:dd",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8495',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10495',
            :libvirt__iface_name => 'swp10',
            auto_config: false
      # link for swp11 --> leaf107:swp4
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:95",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8459',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10459',
            :libvirt__iface_name => 'swp11',
            auto_config: false
      # link for swp12 --> leaf108:swp4
      device.vm.network "private_network",
            :mac => "44:38:39:00:05:b1",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8729',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10729',
            :libvirt__iface_name => 'swp12',
            auto_config: false
      # link for swp13 --> leaf109:swp4
      device.vm.network "private_network",
            :mac => "44:38:39:00:07:c3",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8994',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10994',
            :libvirt__iface_name => 'swp13',
            auto_config: false
      # link for swp14 --> leaf110:swp4
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:5f",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8432',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10432',
            :libvirt__iface_name => 'swp14',
            auto_config: false
      # link for swp15 --> leaf111:swp4
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:95",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8331',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10331',
            :libvirt__iface_name => 'swp15',
            auto_config: false
      # link for swp16 --> leaf112:swp4
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:3b",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8414',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10414',
            :libvirt__iface_name => 'swp16',
            auto_config: false



    # Fixes "stdin: is not a tty" and "mesg: ttyname failed : Inappropriate ioctl for device"  messages --> https://github.com/mitchellh/vagrant/issues/1673
    device.vm.provision :shell , inline: "(sudo grep -q 'mesg n' /root/.profile 2>/dev/null && sudo sed -i '/mesg n/d' /root/.profile  2>/dev/null) || true;", privileged: false

    #Copy over Topology.dot File
    device.vm.provision "file", source: "topology.dot", destination: "~/topology.dot"
    device.vm.provision :shell, privileged: false, inline: "sudo mv ~/topology.dot /etc/ptm.d/topology.dot"


    # Run the Config specified in the Node Attributes
    device.vm.provision :shell , privileged: false, :inline => 'echo "$(whoami)" > /tmp/normal_user'
    device.vm.provision :shell , path: "./helper_scripts/extra_switch_config.sh"


    # Install Rules for the interface re-map
    device.vm.provision :shell , :inline => <<-delete_udev_directory
if [ -d "/etc/udev/rules.d/70-persistent-net.rules" ]; then
    rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
fi
rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
delete_udev_directory

device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:08:32 --> eth0"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:08:32", NAME="eth0", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:06:85 --> fp0"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:06:85", NAME="fp0", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:65 --> fp1"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:65", NAME="fp1", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:03 --> fp2"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:03", NAME="fp2", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:09:69 --> fp3"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:09:69", NAME="fp3", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:81 --> fp4"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:81", NAME="fp4", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:89 --> fp5"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:89", NAME="fp5", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:6b --> fp6"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:6b", NAME="fp6", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:59 --> fp7"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:59", NAME="fp7", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:05:1d --> fp8"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:05:1d", NAME="fp8", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:8b --> fp9"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:8b", NAME="fp9", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:08:79 --> fp10"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:08:79", NAME="fp10", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:a7 --> fp11"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:a7", NAME="fp11", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:35 --> fp12"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:35", NAME="fp12", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:fd --> fp13"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:fd", NAME="fp13", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:05:fd --> fp14"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:05:fd", NAME="fp14", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:e7 --> fp15"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:e7", NAME="fp15", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:08:07 --> swp1"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:08:07", NAME="swp1", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:d1 --> swp2"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:d1", NAME="swp2", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:e5 --> swp3"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:e5", NAME="swp3", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:05:5f --> swp4"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:05:5f", NAME="swp4", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:06:83 --> swp5"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:06:83", NAME="swp5", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:4b --> swp6"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:4b", NAME="swp6", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:65 --> swp7"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:65", NAME="swp7", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:83 --> swp8"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:83", NAME="swp8", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:2d --> swp9"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:2d", NAME="swp9", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:dd --> swp10"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:dd", NAME="swp10", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:95 --> swp11"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:95", NAME="swp11", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:05:b1 --> swp12"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:05:b1", NAME="swp12", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:07:c3 --> swp13"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:07:c3", NAME="swp13", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:5f --> swp14"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:5f", NAME="swp14", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:95 --> swp15"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:95", NAME="swp15", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:3b --> swp16"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:3b", NAME="swp16", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule

      device.vm.provision :shell , :inline => <<-vagrant_interface_rule
echo "  INFO: Adding UDEV Rule: Vagrant interface = vagrant"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{ifindex}=="2", NAME="vagrant", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
echo "#### UDEV Rules (/etc/udev/rules.d/70-persistent-net.rules) ####"
cat /etc/udev/rules.d/70-persistent-net.rules
vagrant_interface_rule

# Run Any Platform Specific Code and Apply the interface Re-map
    #   (may or may not perform a reboot depending on platform)
    device.vm.provision :shell , :inline => $script

end

  ##### DEFINE VM for chassis02-lc1-1 #####
  config.vm.define "chassis02-lc1-1" do |device|

    device.vm.hostname = "chassis02-lc1-1"

    device.vm.box = "CumulusCommunity/cumulus-vx"
    device.vm.box_version = "3.5.0"

    device.vm.provider :libvirt do |v|
      v.memory = 768
    end
    #   see note here: https://github.com/pradels/vagrant-libvirt#synced-folders
    device.vm.synced_folder ".", "/vagrant", disabled: true



    # NETWORK INTERFACES
      # link for eth0 --> oob-mgmt-switch4:swp15
      device.vm.network "private_network",
            :mac => "44:38:39:00:07:46",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10931',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8931',
            :libvirt__iface_name => 'eth0',
            auto_config: false
      # link for fp0 --> chassis02-fc1-1:fp0
      device.vm.network "private_network",
            :mac => "44:38:39:00:05:19",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8653',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10653',
            :libvirt__iface_name => 'fp0',
            auto_config: false
      # link for fp1 --> chassis02-fc1-1:fp1
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:63",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8434',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10434',
            :libvirt__iface_name => 'fp1',
            auto_config: false
      # link for fp2 --> chassis02-fc1-1:fp2
      device.vm.network "private_network",
            :mac => "44:38:39:00:09:07",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '9156',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '11156',
            :libvirt__iface_name => 'fp2',
            auto_config: false
      # link for fp3 --> chassis02-fc1-1:fp3
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:f5",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8251',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10251',
            :libvirt__iface_name => 'fp3',
            auto_config: false
      # link for fp4 --> chassis02-fc2-1:fp0
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:73",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8442',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10442',
            :libvirt__iface_name => 'fp4',
            auto_config: false
      # link for fp5 --> chassis02-fc2-1:fp1
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:c5",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8227',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10227',
            :libvirt__iface_name => 'fp5',
            auto_config: false
      # link for fp6 --> chassis02-fc2-1:fp2
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:b1",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8473',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10473',
            :libvirt__iface_name => 'fp6',
            auto_config: false
      # link for fp7 --> chassis02-fc2-1:fp3
      device.vm.network "private_network",
            :mac => "44:38:39:00:07:a3",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8978',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10978',
            :libvirt__iface_name => 'fp7',
            auto_config: false
      # link for fp8 --> chassis02-fc3-1:fp0
      device.vm.network "private_network",
            :mac => "44:38:39:00:08:0f",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '9032',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '11032',
            :libvirt__iface_name => 'fp8',
            auto_config: false
      # link for fp9 --> chassis02-fc3-1:fp1
      device.vm.network "private_network",
            :mac => "44:38:39:00:06:c7",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8868',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10868',
            :libvirt__iface_name => 'fp9',
            auto_config: false
      # link for fp10 --> chassis02-fc3-1:fp2
      device.vm.network "private_network",
            :mac => "44:38:39:00:07:85",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8963',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10963',
            :libvirt__iface_name => 'fp10',
            auto_config: false
      # link for fp11 --> chassis02-fc3-1:fp3
      device.vm.network "private_network",
            :mac => "44:38:39:00:05:bb",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8734',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10734',
            :libvirt__iface_name => 'fp11',
            auto_config: false
      # link for fp12 --> chassis02-fc4-1:fp0
      device.vm.network "private_network",
            :mac => "44:38:39:00:05:93",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8714',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10714',
            :libvirt__iface_name => 'fp12',
            auto_config: false
      # link for fp13 --> chassis02-fc4-1:fp1
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:15",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8523',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10523',
            :libvirt__iface_name => 'fp13',
            auto_config: false
      # link for fp14 --> chassis02-fc4-1:fp2
      device.vm.network "private_network",
            :mac => "44:38:39:00:07:1f",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8912',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10912',
            :libvirt__iface_name => 'fp14',
            auto_config: false
      # link for fp15 --> chassis02-fc4-1:fp3
      device.vm.network "private_network",
            :mac => "44:38:39:00:08:71",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '9081',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '11081',
            :libvirt__iface_name => 'fp15',
            auto_config: false
      # link for swp1 --> leaf01:swp2
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:0f",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8136',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10136',
            :libvirt__iface_name => 'swp1',
            auto_config: false
      # link for swp2 --> leaf02:swp2
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:99",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8333',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10333',
            :libvirt__iface_name => 'swp2',
            auto_config: false
      # link for swp3 --> leaf03:swp2
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:39",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8029',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10029',
            :libvirt__iface_name => 'swp3',
            auto_config: false
      # link for swp4 --> leaf04:swp2
      device.vm.network "private_network",
            :mac => "44:38:39:00:07:11",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8905',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10905',
            :libvirt__iface_name => 'swp4',
            auto_config: false
      # link for swp5 --> leaf05:swp2
      device.vm.network "private_network",
            :mac => "44:38:39:00:08:21",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '9041',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '11041',
            :libvirt__iface_name => 'swp5',
            auto_config: false
      # link for swp6 --> leaf06:swp2
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:49",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8293',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10293',
            :libvirt__iface_name => 'swp6',
            auto_config: false
      # link for swp7 --> leaf07:swp2
      device.vm.network "private_network",
            :mac => "44:38:39:00:07:c5",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8995',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10995',
            :libvirt__iface_name => 'swp7',
            auto_config: false
      # link for swp8 --> leaf08:swp2
      device.vm.network "private_network",
            :mac => "44:38:39:00:07:49",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8933',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10933',
            :libvirt__iface_name => 'swp8',
            auto_config: false
      # link for swp9 --> leaf09:swp2
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:57",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8300',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10300',
            :libvirt__iface_name => 'swp9',
            auto_config: false
      # link for swp10 --> leaf10:swp2
      device.vm.network "private_network",
            :mac => "44:38:39:00:05:83",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8706',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10706',
            :libvirt__iface_name => 'swp10',
            auto_config: false
      # link for swp11 --> leaf11:swp2
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:e7",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8628',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10628',
            :libvirt__iface_name => 'swp11',
            auto_config: false
      # link for swp12 --> leaf12:swp2
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:95",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8075',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10075',
            :libvirt__iface_name => 'swp12',
            auto_config: false
      # link for swp13 --> leaf13:swp2
      device.vm.network "private_network",
            :mac => "44:38:39:00:08:2b",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '9046',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '11046',
            :libvirt__iface_name => 'swp13',
            auto_config: false
      # link for swp14 --> leaf14:swp2
      device.vm.network "private_network",
            :mac => "44:38:39:00:07:a9",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8981',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10981',
            :libvirt__iface_name => 'swp14',
            auto_config: false
      # link for swp15 --> leaf15:swp2
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:cf",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8616',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10616',
            :libvirt__iface_name => 'swp15',
            auto_config: false
      # link for swp16 --> leaf16:swp2
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:6b",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8054',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10054',
            :libvirt__iface_name => 'swp16',
            auto_config: false



    # Fixes "stdin: is not a tty" and "mesg: ttyname failed : Inappropriate ioctl for device"  messages --> https://github.com/mitchellh/vagrant/issues/1673
    device.vm.provision :shell , inline: "(sudo grep -q 'mesg n' /root/.profile 2>/dev/null && sudo sed -i '/mesg n/d' /root/.profile  2>/dev/null) || true;", privileged: false

    #Copy over Topology.dot File
    device.vm.provision "file", source: "topology.dot", destination: "~/topology.dot"
    device.vm.provision :shell, privileged: false, inline: "sudo mv ~/topology.dot /etc/ptm.d/topology.dot"


    # Run the Config specified in the Node Attributes
    device.vm.provision :shell , privileged: false, :inline => 'echo "$(whoami)" > /tmp/normal_user'
    device.vm.provision :shell , path: "./helper_scripts/extra_switch_config.sh"


    # Install Rules for the interface re-map
    device.vm.provision :shell , :inline => <<-delete_udev_directory
if [ -d "/etc/udev/rules.d/70-persistent-net.rules" ]; then
    rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
fi
rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
delete_udev_directory

device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:07:46 --> eth0"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:07:46", NAME="eth0", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:05:19 --> fp0"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:05:19", NAME="fp0", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:63 --> fp1"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:63", NAME="fp1", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:09:07 --> fp2"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:09:07", NAME="fp2", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:f5 --> fp3"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:f5", NAME="fp3", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:73 --> fp4"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:73", NAME="fp4", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:c5 --> fp5"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:c5", NAME="fp5", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:b1 --> fp6"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:b1", NAME="fp6", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:07:a3 --> fp7"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:07:a3", NAME="fp7", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:08:0f --> fp8"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:08:0f", NAME="fp8", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:06:c7 --> fp9"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:06:c7", NAME="fp9", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:07:85 --> fp10"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:07:85", NAME="fp10", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:05:bb --> fp11"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:05:bb", NAME="fp11", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:05:93 --> fp12"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:05:93", NAME="fp12", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:15 --> fp13"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:15", NAME="fp13", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:07:1f --> fp14"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:07:1f", NAME="fp14", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:08:71 --> fp15"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:08:71", NAME="fp15", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:0f --> swp1"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:0f", NAME="swp1", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:99 --> swp2"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:99", NAME="swp2", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:39 --> swp3"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:39", NAME="swp3", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:07:11 --> swp4"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:07:11", NAME="swp4", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:08:21 --> swp5"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:08:21", NAME="swp5", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:49 --> swp6"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:49", NAME="swp6", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:07:c5 --> swp7"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:07:c5", NAME="swp7", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:07:49 --> swp8"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:07:49", NAME="swp8", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:57 --> swp9"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:57", NAME="swp9", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:05:83 --> swp10"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:05:83", NAME="swp10", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:e7 --> swp11"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:e7", NAME="swp11", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:95 --> swp12"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:95", NAME="swp12", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:08:2b --> swp13"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:08:2b", NAME="swp13", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:07:a9 --> swp14"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:07:a9", NAME="swp14", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:cf --> swp15"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:cf", NAME="swp15", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:6b --> swp16"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:6b", NAME="swp16", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule

      device.vm.provision :shell , :inline => <<-vagrant_interface_rule
echo "  INFO: Adding UDEV Rule: Vagrant interface = vagrant"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{ifindex}=="2", NAME="vagrant", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
echo "#### UDEV Rules (/etc/udev/rules.d/70-persistent-net.rules) ####"
cat /etc/udev/rules.d/70-persistent-net.rules
vagrant_interface_rule

# Run Any Platform Specific Code and Apply the interface Re-map
    #   (may or may not perform a reboot depending on platform)
    device.vm.provision :shell , :inline => $script

end

  ##### DEFINE VM for chassis03-lc1-1 #####
  config.vm.define "chassis03-lc1-1" do |device|

    device.vm.hostname = "chassis03-lc1-1"

    device.vm.box = "CumulusCommunity/cumulus-vx"
    device.vm.box_version = "3.5.0"

    device.vm.provider :libvirt do |v|
      v.memory = 768
    end
    #   see note here: https://github.com/pradels/vagrant-libvirt#synced-folders
    device.vm.synced_folder ".", "/vagrant", disabled: true



    # NETWORK INTERFACES
      # link for eth0 --> oob-mgmt-switch4:swp27
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:c0",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10480',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8480',
            :libvirt__iface_name => 'eth0',
            auto_config: false
      # link for fp0 --> chassis03-fc1-1:fp0
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:91",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8329',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10329',
            :libvirt__iface_name => 'fp0',
            auto_config: false
      # link for fp1 --> chassis03-fc1-1:fp1
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:39",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8413',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10413',
            :libvirt__iface_name => 'fp1',
            auto_config: false
      # link for fp2 --> chassis03-fc1-1:fp2
      device.vm.network "private_network",
            :mac => "44:38:39:00:08:09",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '9029',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '11029',
            :libvirt__iface_name => 'fp2',
            auto_config: false
      # link for fp3 --> chassis03-fc1-1:fp3
      device.vm.network "private_network",
            :mac => "44:38:39:00:06:e5",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8883',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10883',
            :libvirt__iface_name => 'fp3',
            auto_config: false
      # link for fp4 --> chassis03-fc2-1:fp0
      device.vm.network "private_network",
            :mac => "44:38:39:00:09:65",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '9203',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '11203',
            :libvirt__iface_name => 'fp4',
            auto_config: false
      # link for fp5 --> chassis03-fc2-1:fp1
      device.vm.network "private_network",
            :mac => "44:38:39:00:05:31",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8665',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10665',
            :libvirt__iface_name => 'fp5',
            auto_config: false
      # link for fp6 --> chassis03-fc2-1:fp2
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:b7",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8220',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10220',
            :libvirt__iface_name => 'fp6',
            auto_config: false
      # link for fp7 --> chassis03-fc2-1:fp3
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:d9",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8109',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10109',
            :libvirt__iface_name => 'fp7',
            auto_config: false
      # link for fp8 --> chassis03-fc3-1:fp0
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:29",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8405',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10405',
            :libvirt__iface_name => 'fp8',
            auto_config: false
      # link for fp9 --> chassis03-fc3-1:fp1
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:e3",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8498',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10498',
            :libvirt__iface_name => 'fp9',
            auto_config: false
      # link for fp10 --> chassis03-fc3-1:fp2
      device.vm.network "private_network",
            :mac => "44:38:39:00:05:a9",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8725',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10725',
            :libvirt__iface_name => 'fp10',
            auto_config: false
      # link for fp11 --> chassis03-fc3-1:fp3
      device.vm.network "private_network",
            :mac => "44:38:39:00:09:5f",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '9200',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '11200',
            :libvirt__iface_name => 'fp11',
            auto_config: false
      # link for fp12 --> chassis03-fc4-1:fp0
      device.vm.network "private_network",
            :mac => "44:38:39:00:06:47",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8804',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10804',
            :libvirt__iface_name => 'fp12',
            auto_config: false
      # link for fp13 --> chassis03-fc4-1:fp1
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:5b",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8174',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10174',
            :libvirt__iface_name => 'fp13',
            auto_config: false
      # link for fp14 --> chassis03-fc4-1:fp2
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:21",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8273',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10273',
            :libvirt__iface_name => 'fp14',
            auto_config: false
      # link for fp15 --> chassis03-fc4-1:fp3
      device.vm.network "private_network",
            :mac => "44:38:39:00:05:47",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8676',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10676',
            :libvirt__iface_name => 'fp15',
            auto_config: false
      # link for swp1 --> leaf01:swp3
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:5b",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8046',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10046',
            :libvirt__iface_name => 'swp1',
            auto_config: false
      # link for swp2 --> leaf02:swp3
      device.vm.network "private_network",
            :mac => "44:38:39:00:06:6f",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8824',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10824',
            :libvirt__iface_name => 'swp2',
            auto_config: false
      # link for swp3 --> leaf03:swp3
      device.vm.network "private_network",
            :mac => "44:38:39:00:09:23",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '9170',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '11170',
            :libvirt__iface_name => 'swp3',
            auto_config: false
      # link for swp4 --> leaf04:swp3
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:81",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8193',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10193',
            :libvirt__iface_name => 'swp4',
            auto_config: false
      # link for swp5 --> leaf05:swp3
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:1f",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8016',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10016',
            :libvirt__iface_name => 'swp5',
            auto_config: false
      # link for swp6 --> leaf06:swp3
      device.vm.network "private_network",
            :mac => "44:38:39:00:09:27",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '9172',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '11172',
            :libvirt__iface_name => 'swp6',
            auto_config: false
      # link for swp7 --> leaf07:swp3
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:6b",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8310',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10310',
            :libvirt__iface_name => 'swp7',
            auto_config: false
      # link for swp8 --> leaf08:swp3
      device.vm.network "private_network",
            :mac => "44:38:39:00:09:4b",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '9190',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '11190',
            :libvirt__iface_name => 'swp8',
            auto_config: false
      # link for swp9 --> leaf09:swp3
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:03",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8002',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10002',
            :libvirt__iface_name => 'swp9',
            auto_config: false
      # link for swp10 --> leaf10:swp3
      device.vm.network "private_network",
            :mac => "44:38:39:00:07:9d",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8975',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10975',
            :libvirt__iface_name => 'swp10',
            auto_config: false
      # link for swp11 --> leaf11:swp3
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:7d",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8447',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10447',
            :libvirt__iface_name => 'swp11',
            auto_config: false
      # link for swp12 --> leaf12:swp3
      device.vm.network "private_network",
            :mac => "44:38:39:00:05:8f",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8712',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10712',
            :libvirt__iface_name => 'swp12',
            auto_config: false
      # link for swp13 --> leaf13:swp3
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:63",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8178',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10178',
            :libvirt__iface_name => 'swp13',
            auto_config: false
      # link for swp14 --> leaf14:swp3
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:21",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8401',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10401',
            :libvirt__iface_name => 'swp14',
            auto_config: false
      # link for swp15 --> leaf15:swp3
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:1b",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8142',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10142',
            :libvirt__iface_name => 'swp15',
            auto_config: false
      # link for swp16 --> leaf16:swp3
      device.vm.network "private_network",
            :mac => "44:38:39:00:09:09",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '9157',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '11157',
            :libvirt__iface_name => 'swp16',
            auto_config: false



    # Fixes "stdin: is not a tty" and "mesg: ttyname failed : Inappropriate ioctl for device"  messages --> https://github.com/mitchellh/vagrant/issues/1673
    device.vm.provision :shell , inline: "(sudo grep -q 'mesg n' /root/.profile 2>/dev/null && sudo sed -i '/mesg n/d' /root/.profile  2>/dev/null) || true;", privileged: false

    #Copy over Topology.dot File
    device.vm.provision "file", source: "topology.dot", destination: "~/topology.dot"
    device.vm.provision :shell, privileged: false, inline: "sudo mv ~/topology.dot /etc/ptm.d/topology.dot"


    # Run the Config specified in the Node Attributes
    device.vm.provision :shell , privileged: false, :inline => 'echo "$(whoami)" > /tmp/normal_user'
    device.vm.provision :shell , path: "./helper_scripts/extra_switch_config.sh"


    # Install Rules for the interface re-map
    device.vm.provision :shell , :inline => <<-delete_udev_directory
if [ -d "/etc/udev/rules.d/70-persistent-net.rules" ]; then
    rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
fi
rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
delete_udev_directory

device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:c0 --> eth0"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:c0", NAME="eth0", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:91 --> fp0"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:91", NAME="fp0", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:39 --> fp1"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:39", NAME="fp1", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:08:09 --> fp2"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:08:09", NAME="fp2", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:06:e5 --> fp3"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:06:e5", NAME="fp3", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:09:65 --> fp4"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:09:65", NAME="fp4", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:05:31 --> fp5"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:05:31", NAME="fp5", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:b7 --> fp6"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:b7", NAME="fp6", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:d9 --> fp7"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:d9", NAME="fp7", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:29 --> fp8"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:29", NAME="fp8", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:e3 --> fp9"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:e3", NAME="fp9", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:05:a9 --> fp10"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:05:a9", NAME="fp10", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:09:5f --> fp11"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:09:5f", NAME="fp11", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:06:47 --> fp12"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:06:47", NAME="fp12", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:5b --> fp13"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:5b", NAME="fp13", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:21 --> fp14"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:21", NAME="fp14", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:05:47 --> fp15"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:05:47", NAME="fp15", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:5b --> swp1"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:5b", NAME="swp1", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:06:6f --> swp2"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:06:6f", NAME="swp2", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:09:23 --> swp3"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:09:23", NAME="swp3", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:81 --> swp4"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:81", NAME="swp4", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:1f --> swp5"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:1f", NAME="swp5", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:09:27 --> swp6"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:09:27", NAME="swp6", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:6b --> swp7"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:6b", NAME="swp7", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:09:4b --> swp8"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:09:4b", NAME="swp8", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:03 --> swp9"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:03", NAME="swp9", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:07:9d --> swp10"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:07:9d", NAME="swp10", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:7d --> swp11"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:7d", NAME="swp11", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:05:8f --> swp12"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:05:8f", NAME="swp12", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:63 --> swp13"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:63", NAME="swp13", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:21 --> swp14"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:21", NAME="swp14", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:1b --> swp15"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:1b", NAME="swp15", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:09:09 --> swp16"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:09:09", NAME="swp16", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule

      device.vm.provision :shell , :inline => <<-vagrant_interface_rule
echo "  INFO: Adding UDEV Rule: Vagrant interface = vagrant"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{ifindex}=="2", NAME="vagrant", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
echo "#### UDEV Rules (/etc/udev/rules.d/70-persistent-net.rules) ####"
cat /etc/udev/rules.d/70-persistent-net.rules
vagrant_interface_rule

# Run Any Platform Specific Code and Apply the interface Re-map
    #   (may or may not perform a reboot depending on platform)
    device.vm.provision :shell , :inline => $script

end

  ##### DEFINE VM for chassis03-lc1-2 #####
  config.vm.define "chassis03-lc1-2" do |device|

    device.vm.hostname = "chassis03-lc1-2"

    device.vm.box = "CumulusCommunity/cumulus-vx"
    device.vm.box_version = "3.5.0"

    device.vm.provider :libvirt do |v|
      v.memory = 768
    end
    #   see note here: https://github.com/pradels/vagrant-libvirt#synced-folders
    device.vm.synced_folder ".", "/vagrant", disabled: true



    # NETWORK INTERFACES
      # link for eth0 --> oob-mgmt-switch4:swp28
      device.vm.network "private_network",
            :mac => "44:38:39:00:07:42",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10929',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8929',
            :libvirt__iface_name => 'eth0',
            auto_config: false
      # link for fp0 --> chassis03-fc1-1:fp4
      device.vm.network "private_network",
            :mac => "44:38:39:00:08:3d",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '9055',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '11055',
            :libvirt__iface_name => 'fp0',
            auto_config: false
      # link for fp1 --> chassis03-fc1-1:fp5
      device.vm.network "private_network",
            :mac => "44:38:39:00:05:71",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8697',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10697',
            :libvirt__iface_name => 'fp1',
            auto_config: false
      # link for fp2 --> chassis03-fc1-1:fp6
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:d7",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8364',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10364',
            :libvirt__iface_name => 'fp2',
            auto_config: false
      # link for fp3 --> chassis03-fc1-1:fp7
      device.vm.network "private_network",
            :mac => "44:38:39:00:08:cd",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '9127',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '11127',
            :libvirt__iface_name => 'fp3',
            auto_config: false
      # link for fp4 --> chassis03-fc2-1:fp4
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:e7",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8244',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10244',
            :libvirt__iface_name => 'fp4',
            auto_config: false
      # link for fp5 --> chassis03-fc2-1:fp5
      device.vm.network "private_network",
            :mac => "44:38:39:00:07:9b",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8974',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10974',
            :libvirt__iface_name => 'fp5',
            auto_config: false
      # link for fp6 --> chassis03-fc2-1:fp6
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:bd",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8223',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10223',
            :libvirt__iface_name => 'fp6',
            auto_config: false
      # link for fp7 --> chassis03-fc2-1:fp7
      device.vm.network "private_network",
            :mac => "44:38:39:00:07:05",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8899',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10899',
            :libvirt__iface_name => 'fp7',
            auto_config: false
      # link for fp8 --> chassis03-fc3-1:fp4
      device.vm.network "private_network",
            :mac => "44:38:39:00:06:4f",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8808',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10808',
            :libvirt__iface_name => 'fp8',
            auto_config: false
      # link for fp9 --> chassis03-fc3-1:fp5
      device.vm.network "private_network",
            :mac => "44:38:39:00:08:7b",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '9086',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '11086',
            :libvirt__iface_name => 'fp9',
            auto_config: false
      # link for fp10 --> chassis03-fc3-1:fp6
      device.vm.network "private_network",
            :mac => "44:38:39:00:08:f3",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '9146',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '11146',
            :libvirt__iface_name => 'fp10',
            auto_config: false
      # link for fp11 --> chassis03-fc3-1:fp7
      device.vm.network "private_network",
            :mac => "44:38:39:00:06:b1",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8857',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10857',
            :libvirt__iface_name => 'fp11',
            auto_config: false
      # link for fp12 --> chassis03-fc4-1:fp4
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:5b",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8558',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10558',
            :libvirt__iface_name => 'fp12',
            auto_config: false
      # link for fp13 --> chassis03-fc4-1:fp5
      device.vm.network "private_network",
            :mac => "44:38:39:00:05:73",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8698',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10698',
            :libvirt__iface_name => 'fp13',
            auto_config: false
      # link for fp14 --> chassis03-fc4-1:fp6
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:d1",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8617',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10617',
            :libvirt__iface_name => 'fp14',
            auto_config: false
      # link for fp15 --> chassis03-fc4-1:fp7
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:a9",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8213',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10213',
            :libvirt__iface_name => 'fp15',
            auto_config: false
      # link for swp1 --> leaf17:swp3
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:fb",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8638',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10638',
            :libvirt__iface_name => 'swp1',
            auto_config: false
      # link for swp2 --> leaf18:swp3
      device.vm.network "private_network",
            :mac => "44:38:39:00:05:b5",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8731',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10731',
            :libvirt__iface_name => 'swp2',
            auto_config: false
      # link for swp3 --> leaf19:swp3
      device.vm.network "private_network",
            :mac => "44:38:39:00:08:cf",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '9128',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '11128',
            :libvirt__iface_name => 'swp3',
            auto_config: false
      # link for swp4 --> leaf20:swp3
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:cd",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8231',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10231',
            :libvirt__iface_name => 'swp4',
            auto_config: false
      # link for swp5 --> leaf21:swp3
      device.vm.network "private_network",
            :mac => "44:38:39:00:09:43",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '9186',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '11186',
            :libvirt__iface_name => 'swp5',
            auto_config: false
      # link for swp6 --> leaf22:swp3
      device.vm.network "private_network",
            :mac => "44:38:39:00:06:db",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8878',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10878',
            :libvirt__iface_name => 'swp6',
            auto_config: false
      # link for swp7 --> leaf23:swp3
      device.vm.network "private_network",
            :mac => "44:38:39:00:05:23",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8658',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10658',
            :libvirt__iface_name => 'swp7',
            auto_config: false
      # link for swp8 --> leaf24:swp3
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:27",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8276',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10276',
            :libvirt__iface_name => 'swp8',
            auto_config: false
      # link for swp9 --> leaf25:swp3
      device.vm.network "private_network",
            :mac => "44:38:39:00:05:61",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8689',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10689',
            :libvirt__iface_name => 'swp9',
            auto_config: false
      # link for swp10 --> leaf26:swp3
      device.vm.network "private_network",
            :mac => "44:38:39:00:06:87",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8836',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10836',
            :libvirt__iface_name => 'swp10',
            auto_config: false
      # link for swp11 --> leaf27:swp3
      device.vm.network "private_network",
            :mac => "44:38:39:00:07:b9",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8989',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10989',
            :libvirt__iface_name => 'swp11',
            auto_config: false
      # link for swp12 --> leaf28:swp3
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:d9",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8621',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10621',
            :libvirt__iface_name => 'swp12',
            auto_config: false
      # link for swp13 --> leaf29:swp3
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:c3",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8098',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10098',
            :libvirt__iface_name => 'swp13',
            auto_config: false
      # link for swp14 --> leaf30:swp3
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:c9",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8229',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10229',
            :libvirt__iface_name => 'swp14',
            auto_config: false
      # link for swp15 --> leaf31:swp3
      device.vm.network "private_network",
            :mac => "44:38:39:00:06:19",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8781',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10781',
            :libvirt__iface_name => 'swp15',
            auto_config: false
      # link for swp16 --> leaf32:swp3
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:a9",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8341',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10341',
            :libvirt__iface_name => 'swp16',
            auto_config: false



    # Fixes "stdin: is not a tty" and "mesg: ttyname failed : Inappropriate ioctl for device"  messages --> https://github.com/mitchellh/vagrant/issues/1673
    device.vm.provision :shell , inline: "(sudo grep -q 'mesg n' /root/.profile 2>/dev/null && sudo sed -i '/mesg n/d' /root/.profile  2>/dev/null) || true;", privileged: false

    #Copy over Topology.dot File
    device.vm.provision "file", source: "topology.dot", destination: "~/topology.dot"
    device.vm.provision :shell, privileged: false, inline: "sudo mv ~/topology.dot /etc/ptm.d/topology.dot"


    # Run the Config specified in the Node Attributes
    device.vm.provision :shell , privileged: false, :inline => 'echo "$(whoami)" > /tmp/normal_user'
    device.vm.provision :shell , path: "./helper_scripts/extra_switch_config.sh"


    # Install Rules for the interface re-map
    device.vm.provision :shell , :inline => <<-delete_udev_directory
if [ -d "/etc/udev/rules.d/70-persistent-net.rules" ]; then
    rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
fi
rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
delete_udev_directory

device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:07:42 --> eth0"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:07:42", NAME="eth0", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:08:3d --> fp0"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:08:3d", NAME="fp0", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:05:71 --> fp1"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:05:71", NAME="fp1", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:d7 --> fp2"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:d7", NAME="fp2", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:08:cd --> fp3"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:08:cd", NAME="fp3", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:e7 --> fp4"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:e7", NAME="fp4", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:07:9b --> fp5"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:07:9b", NAME="fp5", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:bd --> fp6"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:bd", NAME="fp6", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:07:05 --> fp7"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:07:05", NAME="fp7", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:06:4f --> fp8"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:06:4f", NAME="fp8", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:08:7b --> fp9"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:08:7b", NAME="fp9", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:08:f3 --> fp10"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:08:f3", NAME="fp10", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:06:b1 --> fp11"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:06:b1", NAME="fp11", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:5b --> fp12"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:5b", NAME="fp12", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:05:73 --> fp13"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:05:73", NAME="fp13", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:d1 --> fp14"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:d1", NAME="fp14", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:a9 --> fp15"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:a9", NAME="fp15", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:fb --> swp1"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:fb", NAME="swp1", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:05:b5 --> swp2"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:05:b5", NAME="swp2", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:08:cf --> swp3"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:08:cf", NAME="swp3", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:cd --> swp4"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:cd", NAME="swp4", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:09:43 --> swp5"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:09:43", NAME="swp5", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:06:db --> swp6"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:06:db", NAME="swp6", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:05:23 --> swp7"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:05:23", NAME="swp7", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:27 --> swp8"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:27", NAME="swp8", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:05:61 --> swp9"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:05:61", NAME="swp9", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:06:87 --> swp10"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:06:87", NAME="swp10", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:07:b9 --> swp11"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:07:b9", NAME="swp11", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:d9 --> swp12"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:d9", NAME="swp12", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:c3 --> swp13"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:c3", NAME="swp13", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:c9 --> swp14"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:c9", NAME="swp14", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:06:19 --> swp15"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:06:19", NAME="swp15", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:a9 --> swp16"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:a9", NAME="swp16", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule

      device.vm.provision :shell , :inline => <<-vagrant_interface_rule
echo "  INFO: Adding UDEV Rule: Vagrant interface = vagrant"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{ifindex}=="2", NAME="vagrant", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
echo "#### UDEV Rules (/etc/udev/rules.d/70-persistent-net.rules) ####"
cat /etc/udev/rules.d/70-persistent-net.rules
vagrant_interface_rule

# Run Any Platform Specific Code and Apply the interface Re-map
    #   (may or may not perform a reboot depending on platform)
    device.vm.provision :shell , :inline => $script

end

  ##### DEFINE VM for chassis02-lc1-2 #####
  config.vm.define "chassis02-lc1-2" do |device|

    device.vm.hostname = "chassis02-lc1-2"

    device.vm.box = "CumulusCommunity/cumulus-vx"
    device.vm.box_version = "3.5.0"

    device.vm.provider :libvirt do |v|
      v.memory = 768
    end
    #   see note here: https://github.com/pradels/vagrant-libvirt#synced-folders
    device.vm.synced_folder ".", "/vagrant", disabled: true



    # NETWORK INTERFACES
      # link for eth0 --> oob-mgmt-switch4:swp16
      device.vm.network "private_network",
            :mac => "44:38:39:00:08:34",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '11050',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '9050',
            :libvirt__iface_name => 'eth0',
            auto_config: false
      # link for fp0 --> chassis02-fc1-1:fp4
      device.vm.network "private_network",
            :mac => "44:38:39:00:07:93",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8970',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10970',
            :libvirt__iface_name => 'fp0',
            auto_config: false
      # link for fp1 --> chassis02-fc1-1:fp5
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:4f",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8296',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10296',
            :libvirt__iface_name => 'fp1',
            auto_config: false
      # link for fp2 --> chassis02-fc1-1:fp6
      device.vm.network "private_network",
            :mac => "44:38:39:00:08:a3",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '9106',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '11106',
            :libvirt__iface_name => 'fp2',
            auto_config: false
      # link for fp3 --> chassis02-fc1-1:fp7
      device.vm.network "private_network",
            :mac => "44:38:39:00:05:a1",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8721',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10721',
            :libvirt__iface_name => 'fp3',
            auto_config: false
      # link for fp4 --> chassis02-fc2-1:fp4
      device.vm.network "private_network",
            :mac => "44:38:39:00:08:fb",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '9150',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '11150',
            :libvirt__iface_name => 'fp4',
            auto_config: false
      # link for fp5 --> chassis02-fc2-1:fp5
      device.vm.network "private_network",
            :mac => "44:38:39:00:06:91",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8841',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10841',
            :libvirt__iface_name => 'fp5',
            auto_config: false
      # link for fp6 --> chassis02-fc2-1:fp6
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:19",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8013',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10013',
            :libvirt__iface_name => 'fp6',
            auto_config: false
      # link for fp7 --> chassis02-fc2-1:fp7
      device.vm.network "private_network",
            :mac => "44:38:39:00:05:43",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8674',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10674',
            :libvirt__iface_name => 'fp7',
            auto_config: false
      # link for fp8 --> chassis02-fc3-1:fp4
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:43",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8418',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10418',
            :libvirt__iface_name => 'fp8',
            auto_config: false
      # link for fp9 --> chassis02-fc3-1:fp5
      device.vm.network "private_network",
            :mac => "44:38:39:00:08:27",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '9044',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '11044',
            :libvirt__iface_name => 'fp9',
            auto_config: false
      # link for fp10 --> chassis02-fc3-1:fp6
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:13",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8522',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10522',
            :libvirt__iface_name => 'fp10',
            auto_config: false
      # link for fp11 --> chassis02-fc3-1:fp7
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:89",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8581',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10581',
            :libvirt__iface_name => 'fp11',
            auto_config: false
      # link for fp12 --> chassis02-fc4-1:fp4
      device.vm.network "private_network",
            :mac => "44:38:39:00:06:23",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8786',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10786',
            :libvirt__iface_name => 'fp12',
            auto_config: false
      # link for fp13 --> chassis02-fc4-1:fp5
      device.vm.network "private_network",
            :mac => "44:38:39:00:06:75",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8827',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10827',
            :libvirt__iface_name => 'fp13',
            auto_config: false
      # link for fp14 --> chassis02-fc4-1:fp6
      device.vm.network "private_network",
            :mac => "44:38:39:00:08:55",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '9067',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '11067',
            :libvirt__iface_name => 'fp14',
            auto_config: false
      # link for fp15 --> chassis02-fc4-1:fp7
      device.vm.network "private_network",
            :mac => "44:38:39:00:07:25",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8915',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10915',
            :libvirt__iface_name => 'fp15',
            auto_config: false
      # link for swp1 --> leaf17:swp2
      device.vm.network "private_network",
            :mac => "44:38:39:00:06:4b",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8806',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10806',
            :libvirt__iface_name => 'swp1',
            auto_config: false
      # link for swp2 --> leaf18:swp2
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:93",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8074',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10074',
            :libvirt__iface_name => 'swp2',
            auto_config: false
      # link for swp3 --> leaf19:swp2
      device.vm.network "private_network",
            :mac => "44:38:39:00:07:69",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8949',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10949',
            :libvirt__iface_name => 'swp3',
            auto_config: false
      # link for swp4 --> leaf20:swp2
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:c3",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8354',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10354',
            :libvirt__iface_name => 'swp4',
            auto_config: false
      # link for swp5 --> leaf21:swp2
      device.vm.network "private_network",
            :mac => "44:38:39:00:07:f3",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '9018',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '11018',
            :libvirt__iface_name => 'swp5',
            auto_config: false
      # link for swp6 --> leaf22:swp2
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:f1",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8121',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10121',
            :libvirt__iface_name => 'swp6',
            auto_config: false
      # link for swp7 --> leaf23:swp2
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:55",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8299',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10299',
            :libvirt__iface_name => 'swp7',
            auto_config: false
      # link for swp8 --> leaf24:swp2
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:2f",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8280',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10280',
            :libvirt__iface_name => 'swp8',
            auto_config: false
      # link for swp9 --> leaf25:swp2
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:af",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8088',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10088',
            :libvirt__iface_name => 'swp9',
            auto_config: false
      # link for swp10 --> leaf26:swp2
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:4b",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8294',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10294',
            :libvirt__iface_name => 'swp10',
            auto_config: false
      # link for swp11 --> leaf27:swp2
      device.vm.network "private_network",
            :mac => "44:38:39:00:09:45",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '9187',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '11187',
            :libvirt__iface_name => 'swp11',
            auto_config: false
      # link for swp12 --> leaf28:swp2
      device.vm.network "private_network",
            :mac => "44:38:39:00:07:fd",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '9023',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '11023',
            :libvirt__iface_name => 'swp12',
            auto_config: false
      # link for swp13 --> leaf29:swp2
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:1b",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8014',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10014',
            :libvirt__iface_name => 'swp13',
            auto_config: false
      # link for swp14 --> leaf30:swp2
      device.vm.network "private_network",
            :mac => "44:38:39:00:05:53",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8682',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10682',
            :libvirt__iface_name => 'swp14',
            auto_config: false
      # link for swp15 --> leaf31:swp2
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:13",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8010',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10010',
            :libvirt__iface_name => 'swp15',
            auto_config: false
      # link for swp16 --> leaf32:swp2
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:ed",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8375',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10375',
            :libvirt__iface_name => 'swp16',
            auto_config: false



    # Fixes "stdin: is not a tty" and "mesg: ttyname failed : Inappropriate ioctl for device"  messages --> https://github.com/mitchellh/vagrant/issues/1673
    device.vm.provision :shell , inline: "(sudo grep -q 'mesg n' /root/.profile 2>/dev/null && sudo sed -i '/mesg n/d' /root/.profile  2>/dev/null) || true;", privileged: false

    #Copy over Topology.dot File
    device.vm.provision "file", source: "topology.dot", destination: "~/topology.dot"
    device.vm.provision :shell, privileged: false, inline: "sudo mv ~/topology.dot /etc/ptm.d/topology.dot"


    # Run the Config specified in the Node Attributes
    device.vm.provision :shell , privileged: false, :inline => 'echo "$(whoami)" > /tmp/normal_user'
    device.vm.provision :shell , path: "./helper_scripts/extra_switch_config.sh"


    # Install Rules for the interface re-map
    device.vm.provision :shell , :inline => <<-delete_udev_directory
if [ -d "/etc/udev/rules.d/70-persistent-net.rules" ]; then
    rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
fi
rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
delete_udev_directory

device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:08:34 --> eth0"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:08:34", NAME="eth0", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:07:93 --> fp0"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:07:93", NAME="fp0", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:4f --> fp1"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:4f", NAME="fp1", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:08:a3 --> fp2"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:08:a3", NAME="fp2", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:05:a1 --> fp3"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:05:a1", NAME="fp3", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:08:fb --> fp4"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:08:fb", NAME="fp4", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:06:91 --> fp5"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:06:91", NAME="fp5", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:19 --> fp6"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:19", NAME="fp6", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:05:43 --> fp7"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:05:43", NAME="fp7", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:43 --> fp8"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:43", NAME="fp8", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:08:27 --> fp9"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:08:27", NAME="fp9", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:13 --> fp10"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:13", NAME="fp10", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:89 --> fp11"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:89", NAME="fp11", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:06:23 --> fp12"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:06:23", NAME="fp12", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:06:75 --> fp13"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:06:75", NAME="fp13", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:08:55 --> fp14"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:08:55", NAME="fp14", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:07:25 --> fp15"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:07:25", NAME="fp15", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:06:4b --> swp1"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:06:4b", NAME="swp1", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:93 --> swp2"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:93", NAME="swp2", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:07:69 --> swp3"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:07:69", NAME="swp3", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:c3 --> swp4"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:c3", NAME="swp4", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:07:f3 --> swp5"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:07:f3", NAME="swp5", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:f1 --> swp6"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:f1", NAME="swp6", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:55 --> swp7"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:55", NAME="swp7", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:2f --> swp8"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:2f", NAME="swp8", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:af --> swp9"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:af", NAME="swp9", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:4b --> swp10"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:4b", NAME="swp10", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:09:45 --> swp11"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:09:45", NAME="swp11", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:07:fd --> swp12"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:07:fd", NAME="swp12", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:1b --> swp13"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:1b", NAME="swp13", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:05:53 --> swp14"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:05:53", NAME="swp14", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:13 --> swp15"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:13", NAME="swp15", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:ed --> swp16"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:ed", NAME="swp16", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule

      device.vm.provision :shell , :inline => <<-vagrant_interface_rule
echo "  INFO: Adding UDEV Rule: Vagrant interface = vagrant"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{ifindex}=="2", NAME="vagrant", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
echo "#### UDEV Rules (/etc/udev/rules.d/70-persistent-net.rules) ####"
cat /etc/udev/rules.d/70-persistent-net.rules
vagrant_interface_rule

# Run Any Platform Specific Code and Apply the interface Re-map
    #   (may or may not perform a reboot depending on platform)
    device.vm.provision :shell , :inline => $script

end

  ##### DEFINE VM for chassis02-lc2-2 #####
  config.vm.define "chassis02-lc2-2" do |device|

    device.vm.hostname = "chassis02-lc2-2"

    device.vm.box = "CumulusCommunity/cumulus-vx"
    device.vm.box_version = "3.5.0"

    device.vm.provider :libvirt do |v|
      v.memory = 768
    end
    #   see note here: https://github.com/pradels/vagrant-libvirt#synced-folders
    device.vm.synced_folder ".", "/vagrant", disabled: true



    # NETWORK INTERFACES
      # link for eth0 --> oob-mgmt-switch4:swp18
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:80",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10448',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8448',
            :libvirt__iface_name => 'eth0',
            auto_config: false
      # link for fp0 --> chassis02-fc1-1:fp12
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:ab",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8598',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10598',
            :libvirt__iface_name => 'fp0',
            auto_config: false
      # link for fp1 --> chassis02-fc1-1:fp13
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:45",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8163',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10163',
            :libvirt__iface_name => 'fp1',
            auto_config: false
      # link for fp2 --> chassis02-fc1-1:fp14
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:07",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8516',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10516',
            :libvirt__iface_name => 'fp2',
            auto_config: false
      # link for fp3 --> chassis02-fc1-1:fp15
      device.vm.network "private_network",
            :mac => "44:38:39:00:05:49",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8677',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10677',
            :libvirt__iface_name => 'fp3',
            auto_config: false
      # link for fp4 --> chassis02-fc2-1:fp12
      device.vm.network "private_network",
            :mac => "44:38:39:00:07:2b",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8918',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10918',
            :libvirt__iface_name => 'fp4',
            auto_config: false
      # link for fp5 --> chassis02-fc2-1:fp13
      device.vm.network "private_network",
            :mac => "44:38:39:00:05:89",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8709',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10709',
            :libvirt__iface_name => 'fp5',
            auto_config: false
      # link for fp6 --> chassis02-fc2-1:fp14
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:45",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8419',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10419',
            :libvirt__iface_name => 'fp6',
            auto_config: false
      # link for fp7 --> chassis02-fc2-1:fp15
      device.vm.network "private_network",
            :mac => "44:38:39:00:05:9b",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8718',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10718',
            :libvirt__iface_name => 'fp7',
            auto_config: false
      # link for fp8 --> chassis02-fc3-1:fp12
      device.vm.network "private_network",
            :mac => "44:38:39:00:07:3f",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8928',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10928',
            :libvirt__iface_name => 'fp8',
            auto_config: false
      # link for fp9 --> chassis02-fc3-1:fp13
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:f5",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8635',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10635',
            :libvirt__iface_name => 'fp9',
            auto_config: false
      # link for fp10 --> chassis02-fc3-1:fp14
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:61",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8305',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10305',
            :libvirt__iface_name => 'fp10',
            auto_config: false
      # link for fp11 --> chassis02-fc3-1:fp15
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:ad",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8215',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10215',
            :libvirt__iface_name => 'fp11',
            auto_config: false
      # link for fp12 --> chassis02-fc4-1:fp12
      device.vm.network "private_network",
            :mac => "44:38:39:00:07:63",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8946',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10946',
            :libvirt__iface_name => 'fp12',
            auto_config: false
      # link for fp13 --> chassis02-fc4-1:fp13
      device.vm.network "private_network",
            :mac => "44:38:39:00:08:41",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '9057',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '11057',
            :libvirt__iface_name => 'fp13',
            auto_config: false
      # link for fp14 --> chassis02-fc4-1:fp14
      device.vm.network "private_network",
            :mac => "44:38:39:00:08:e7",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '9140',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '11140',
            :libvirt__iface_name => 'fp14',
            auto_config: false
      # link for fp15 --> chassis02-fc4-1:fp15
      device.vm.network "private_network",
            :mac => "44:38:39:00:05:55",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8683',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10683',
            :libvirt__iface_name => 'fp15',
            auto_config: false
      # link for swp1 --> leaf49:swp2
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:75",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8571',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10571',
            :libvirt__iface_name => 'swp1',
            auto_config: false
      # link for swp2 --> leaf50:swp2
      device.vm.network "private_network",
            :mac => "44:38:39:00:08:49",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '9061',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '11061',
            :libvirt__iface_name => 'swp2',
            auto_config: false
      # link for swp3 --> leaf51:swp2
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:59",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8045',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10045',
            :libvirt__iface_name => 'swp3',
            auto_config: false
      # link for swp4 --> leaf52:swp2
      device.vm.network "private_network",
            :mac => "44:38:39:00:08:d1",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '9129',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '11129',
            :libvirt__iface_name => 'swp4',
            auto_config: false
      # link for swp5 --> leaf53:swp2
      device.vm.network "private_network",
            :mac => "44:38:39:00:09:59",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '9197',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '11197',
            :libvirt__iface_name => 'swp5',
            auto_config: false
      # link for swp6 --> leaf54:swp2
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:31",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8025',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10025',
            :libvirt__iface_name => 'swp6',
            auto_config: false
      # link for swp7 --> leaf55:swp2
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:b5",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8603',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10603',
            :libvirt__iface_name => 'swp7',
            auto_config: false
      # link for swp8 --> leaf56:swp2
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:6f",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8440',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10440',
            :libvirt__iface_name => 'swp8',
            auto_config: false
      # link for swp9 --> leaf57:swp2
      device.vm.network "private_network",
            :mac => "44:38:39:00:06:8b",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8838',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10838',
            :libvirt__iface_name => 'swp9',
            auto_config: false
      # link for swp10 --> leaf58:swp2
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:c1",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8609',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10609',
            :libvirt__iface_name => 'swp10',
            auto_config: false
      # link for swp11 --> leaf59:swp2
      device.vm.network "private_network",
            :mac => "44:38:39:00:08:a9",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '9109',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '11109',
            :libvirt__iface_name => 'swp11',
            auto_config: false
      # link for swp12 --> leaf60:swp2
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:51",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8553',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10553',
            :libvirt__iface_name => 'swp12',
            auto_config: false
      # link for swp13 --> leaf61:swp2
      device.vm.network "private_network",
            :mac => "44:38:39:00:07:ad",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8983',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10983',
            :libvirt__iface_name => 'swp13',
            auto_config: false
      # link for swp14 --> leaf62:swp2
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:af",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8600',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10600',
            :libvirt__iface_name => 'swp14',
            auto_config: false
      # link for swp15 --> leaf63:swp2
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:fb",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8382',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10382',
            :libvirt__iface_name => 'swp15',
            auto_config: false
      # link for swp16 --> leaf64:swp2
      device.vm.network "private_network",
            :mac => "44:38:39:00:07:99",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8973',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10973',
            :libvirt__iface_name => 'swp16',
            auto_config: false



    # Fixes "stdin: is not a tty" and "mesg: ttyname failed : Inappropriate ioctl for device"  messages --> https://github.com/mitchellh/vagrant/issues/1673
    device.vm.provision :shell , inline: "(sudo grep -q 'mesg n' /root/.profile 2>/dev/null && sudo sed -i '/mesg n/d' /root/.profile  2>/dev/null) || true;", privileged: false

    #Copy over Topology.dot File
    device.vm.provision "file", source: "topology.dot", destination: "~/topology.dot"
    device.vm.provision :shell, privileged: false, inline: "sudo mv ~/topology.dot /etc/ptm.d/topology.dot"


    # Run the Config specified in the Node Attributes
    device.vm.provision :shell , privileged: false, :inline => 'echo "$(whoami)" > /tmp/normal_user'
    device.vm.provision :shell , path: "./helper_scripts/extra_switch_config.sh"


    # Install Rules for the interface re-map
    device.vm.provision :shell , :inline => <<-delete_udev_directory
if [ -d "/etc/udev/rules.d/70-persistent-net.rules" ]; then
    rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
fi
rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
delete_udev_directory

device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:80 --> eth0"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:80", NAME="eth0", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:ab --> fp0"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:ab", NAME="fp0", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:45 --> fp1"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:45", NAME="fp1", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:07 --> fp2"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:07", NAME="fp2", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:05:49 --> fp3"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:05:49", NAME="fp3", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:07:2b --> fp4"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:07:2b", NAME="fp4", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:05:89 --> fp5"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:05:89", NAME="fp5", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:45 --> fp6"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:45", NAME="fp6", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:05:9b --> fp7"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:05:9b", NAME="fp7", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:07:3f --> fp8"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:07:3f", NAME="fp8", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:f5 --> fp9"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:f5", NAME="fp9", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:61 --> fp10"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:61", NAME="fp10", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:ad --> fp11"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:ad", NAME="fp11", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:07:63 --> fp12"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:07:63", NAME="fp12", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:08:41 --> fp13"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:08:41", NAME="fp13", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:08:e7 --> fp14"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:08:e7", NAME="fp14", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:05:55 --> fp15"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:05:55", NAME="fp15", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:75 --> swp1"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:75", NAME="swp1", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:08:49 --> swp2"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:08:49", NAME="swp2", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:59 --> swp3"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:59", NAME="swp3", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:08:d1 --> swp4"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:08:d1", NAME="swp4", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:09:59 --> swp5"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:09:59", NAME="swp5", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:31 --> swp6"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:31", NAME="swp6", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:b5 --> swp7"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:b5", NAME="swp7", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:6f --> swp8"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:6f", NAME="swp8", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:06:8b --> swp9"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:06:8b", NAME="swp9", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:c1 --> swp10"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:c1", NAME="swp10", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:08:a9 --> swp11"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:08:a9", NAME="swp11", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:51 --> swp12"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:51", NAME="swp12", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:07:ad --> swp13"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:07:ad", NAME="swp13", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:af --> swp14"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:af", NAME="swp14", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:fb --> swp15"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:fb", NAME="swp15", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:07:99 --> swp16"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:07:99", NAME="swp16", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule

      device.vm.provision :shell , :inline => <<-vagrant_interface_rule
echo "  INFO: Adding UDEV Rule: Vagrant interface = vagrant"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{ifindex}=="2", NAME="vagrant", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
echo "#### UDEV Rules (/etc/udev/rules.d/70-persistent-net.rules) ####"
cat /etc/udev/rules.d/70-persistent-net.rules
vagrant_interface_rule

# Run Any Platform Specific Code and Apply the interface Re-map
    #   (may or may not perform a reboot depending on platform)
    device.vm.provision :shell , :inline => $script

end

  ##### DEFINE VM for chassis02-lc2-1 #####
  config.vm.define "chassis02-lc2-1" do |device|

    device.vm.hostname = "chassis02-lc2-1"

    device.vm.box = "CumulusCommunity/cumulus-vx"
    device.vm.box_version = "3.5.0"

    device.vm.provider :libvirt do |v|
      v.memory = 768
    end
    #   see note here: https://github.com/pradels/vagrant-libvirt#synced-folders
    device.vm.synced_folder ".", "/vagrant", disabled: true



    # NETWORK INTERFACES
      # link for eth0 --> oob-mgmt-switch4:swp17
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:56",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10427',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8427',
            :libvirt__iface_name => 'eth0',
            auto_config: false
      # link for fp0 --> chassis02-fc1-1:fp8
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:a7",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8468',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10468',
            :libvirt__iface_name => 'fp0',
            auto_config: false
      # link for fp1 --> chassis02-fc1-1:fp9
      device.vm.network "private_network",
            :mac => "44:38:39:00:07:6d",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8951',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10951',
            :libvirt__iface_name => 'fp1',
            auto_config: false
      # link for fp2 --> chassis02-fc1-1:fp10
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:9d",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8335',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10335',
            :libvirt__iface_name => 'fp2',
            auto_config: false
      # link for fp3 --> chassis02-fc1-1:fp11
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:35",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8539',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10539',
            :libvirt__iface_name => 'fp3',
            auto_config: false
      # link for fp4 --> chassis02-fc2-1:fp8
      device.vm.network "private_network",
            :mac => "44:38:39:00:05:07",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8644',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10644',
            :libvirt__iface_name => 'fp4',
            auto_config: false
      # link for fp5 --> chassis02-fc2-1:fp9
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:9f",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8336',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10336',
            :libvirt__iface_name => 'fp5',
            auto_config: false
      # link for fp6 --> chassis02-fc2-1:fp10
      device.vm.network "private_network",
            :mac => "44:38:39:00:06:97",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8844',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10844',
            :libvirt__iface_name => 'fp6',
            auto_config: false
      # link for fp7 --> chassis02-fc2-1:fp11
      device.vm.network "private_network",
            :mac => "44:38:39:00:06:f7",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8892',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10892',
            :libvirt__iface_name => 'fp7',
            auto_config: false
      # link for fp8 --> chassis02-fc3-1:fp8
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:75",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8187',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10187',
            :libvirt__iface_name => 'fp8',
            auto_config: false
      # link for fp9 --> chassis02-fc3-1:fp9
      device.vm.network "private_network",
            :mac => "44:38:39:00:06:55",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8811',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10811',
            :libvirt__iface_name => 'fp9',
            auto_config: false
      # link for fp10 --> chassis02-fc3-1:fp10
      device.vm.network "private_network",
            :mac => "44:38:39:00:07:d9",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '9005',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '11005',
            :libvirt__iface_name => 'fp10',
            auto_config: false
      # link for fp11 --> chassis02-fc3-1:fp11
      device.vm.network "private_network",
            :mac => "44:38:39:00:05:f9",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8765',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10765',
            :libvirt__iface_name => 'fp11',
            auto_config: false
      # link for fp12 --> chassis02-fc4-1:fp8
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:41",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8033',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10033',
            :libvirt__iface_name => 'fp12',
            auto_config: false
      # link for fp13 --> chassis02-fc4-1:fp9
      device.vm.network "private_network",
            :mac => "44:38:39:00:05:f1",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8761',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10761',
            :libvirt__iface_name => 'fp13',
            auto_config: false
      # link for fp14 --> chassis02-fc4-1:fp10
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:db",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8622',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10622',
            :libvirt__iface_name => 'fp14',
            auto_config: false
      # link for fp15 --> chassis02-fc4-1:fp11
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:33",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8538',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10538',
            :libvirt__iface_name => 'fp15',
            auto_config: false
      # link for swp1 --> leaf33:swp2
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:97",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8076',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10076',
            :libvirt__iface_name => 'swp1',
            auto_config: false
      # link for swp2 --> leaf34:swp2
      device.vm.network "private_network",
            :mac => "44:38:39:00:06:2b",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8790',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10790',
            :libvirt__iface_name => 'swp2',
            auto_config: false
      # link for swp3 --> leaf35:swp2
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:19",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8525',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10525',
            :libvirt__iface_name => 'swp3',
            auto_config: false
      # link for swp4 --> leaf36:swp2
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:cb",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8614',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10614',
            :libvirt__iface_name => 'swp4',
            auto_config: false
      # link for swp5 --> leaf37:swp2
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:6b",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8438',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10438',
            :libvirt__iface_name => 'swp5',
            auto_config: false
      # link for swp6 --> leaf38:swp2
      device.vm.network "private_network",
            :mac => "44:38:39:00:07:6b",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8950',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10950',
            :libvirt__iface_name => 'swp6',
            auto_config: false
      # link for swp7 --> leaf39:swp2
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:b3",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8602',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10602',
            :libvirt__iface_name => 'swp7',
            auto_config: false
      # link for swp8 --> leaf40:swp2
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:a1",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8209',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10209',
            :libvirt__iface_name => 'swp8',
            auto_config: false
      # link for swp9 --> leaf41:swp2
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:df",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8240',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10240',
            :libvirt__iface_name => 'swp9',
            auto_config: false
      # link for swp10 --> leaf42:swp2
      device.vm.network "private_network",
            :mac => "44:38:39:00:06:1b",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8782',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10782',
            :libvirt__iface_name => 'swp10',
            auto_config: false
      # link for swp11 --> leaf43:swp2
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:73",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8570',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10570',
            :libvirt__iface_name => 'swp11',
            auto_config: false
      # link for swp12 --> leaf44:swp2
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:61",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8433',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10433',
            :libvirt__iface_name => 'swp12',
            auto_config: false
      # link for swp13 --> leaf45:swp2
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:f9",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8381',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10381',
            :libvirt__iface_name => 'swp13',
            auto_config: false
      # link for swp14 --> leaf46:swp2
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:e1",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8241',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10241',
            :libvirt__iface_name => 'swp14',
            auto_config: false
      # link for swp15 --> leaf47:swp2
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:f7",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8508',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10508',
            :libvirt__iface_name => 'swp15',
            auto_config: false
      # link for swp16 --> leaf48:swp2
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:a3",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8210',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10210',
            :libvirt__iface_name => 'swp16',
            auto_config: false



    # Fixes "stdin: is not a tty" and "mesg: ttyname failed : Inappropriate ioctl for device"  messages --> https://github.com/mitchellh/vagrant/issues/1673
    device.vm.provision :shell , inline: "(sudo grep -q 'mesg n' /root/.profile 2>/dev/null && sudo sed -i '/mesg n/d' /root/.profile  2>/dev/null) || true;", privileged: false

    #Copy over Topology.dot File
    device.vm.provision "file", source: "topology.dot", destination: "~/topology.dot"
    device.vm.provision :shell, privileged: false, inline: "sudo mv ~/topology.dot /etc/ptm.d/topology.dot"


    # Run the Config specified in the Node Attributes
    device.vm.provision :shell , privileged: false, :inline => 'echo "$(whoami)" > /tmp/normal_user'
    device.vm.provision :shell , path: "./helper_scripts/extra_switch_config.sh"


    # Install Rules for the interface re-map
    device.vm.provision :shell , :inline => <<-delete_udev_directory
if [ -d "/etc/udev/rules.d/70-persistent-net.rules" ]; then
    rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
fi
rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
delete_udev_directory

device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:56 --> eth0"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:56", NAME="eth0", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:a7 --> fp0"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:a7", NAME="fp0", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:07:6d --> fp1"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:07:6d", NAME="fp1", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:9d --> fp2"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:9d", NAME="fp2", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:35 --> fp3"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:35", NAME="fp3", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:05:07 --> fp4"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:05:07", NAME="fp4", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:9f --> fp5"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:9f", NAME="fp5", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:06:97 --> fp6"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:06:97", NAME="fp6", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:06:f7 --> fp7"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:06:f7", NAME="fp7", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:75 --> fp8"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:75", NAME="fp8", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:06:55 --> fp9"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:06:55", NAME="fp9", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:07:d9 --> fp10"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:07:d9", NAME="fp10", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:05:f9 --> fp11"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:05:f9", NAME="fp11", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:41 --> fp12"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:41", NAME="fp12", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:05:f1 --> fp13"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:05:f1", NAME="fp13", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:db --> fp14"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:db", NAME="fp14", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:33 --> fp15"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:33", NAME="fp15", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:97 --> swp1"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:97", NAME="swp1", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:06:2b --> swp2"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:06:2b", NAME="swp2", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:19 --> swp3"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:19", NAME="swp3", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:cb --> swp4"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:cb", NAME="swp4", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:6b --> swp5"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:6b", NAME="swp5", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:07:6b --> swp6"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:07:6b", NAME="swp6", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:b3 --> swp7"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:b3", NAME="swp7", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:a1 --> swp8"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:a1", NAME="swp8", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:df --> swp9"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:df", NAME="swp9", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:06:1b --> swp10"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:06:1b", NAME="swp10", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:73 --> swp11"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:73", NAME="swp11", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:61 --> swp12"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:61", NAME="swp12", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:f9 --> swp13"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:f9", NAME="swp13", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:e1 --> swp14"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:e1", NAME="swp14", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:f7 --> swp15"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:f7", NAME="swp15", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:a3 --> swp16"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:a3", NAME="swp16", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule

      device.vm.provision :shell , :inline => <<-vagrant_interface_rule
echo "  INFO: Adding UDEV Rule: Vagrant interface = vagrant"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{ifindex}=="2", NAME="vagrant", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
echo "#### UDEV Rules (/etc/udev/rules.d/70-persistent-net.rules) ####"
cat /etc/udev/rules.d/70-persistent-net.rules
vagrant_interface_rule

# Run Any Platform Specific Code and Apply the interface Re-map
    #   (may or may not perform a reboot depending on platform)
    device.vm.provision :shell , :inline => $script

end

  ##### DEFINE VM for chassis01-fc2-1 #####
  config.vm.define "chassis01-fc2-1" do |device|

    device.vm.hostname = "chassis01-fc2-1"

    device.vm.box = "CumulusCommunity/cumulus-vx"
    device.vm.box_version = "3.5.0"

    device.vm.provider :libvirt do |v|
      v.memory = 768
    end
    #   see note here: https://github.com/pradels/vagrant-libvirt#synced-folders
    device.vm.synced_folder ".", "/vagrant", disabled: true



    # NETWORK INTERFACES
      # link for eth0 --> oob-mgmt-switch4:swp12
      device.vm.network "private_network",
            :mac => "44:38:39:00:05:46",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10675',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8675',
            :libvirt__iface_name => 'eth0',
            auto_config: false
      # link for fp0 --> chassis01-lc1-1:fp4
      device.vm.network "private_network",
            :mac => "44:38:39:00:07:f8",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '11020',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '9020',
            :libvirt__iface_name => 'fp0',
            auto_config: false
      # link for fp1 --> chassis01-lc1-1:fp5
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:86",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10579',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8579',
            :libvirt__iface_name => 'fp1',
            auto_config: false
      # link for fp2 --> chassis01-lc1-1:fp6
      device.vm.network "private_network",
            :mac => "44:38:39:00:05:50",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10680',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8680',
            :libvirt__iface_name => 'fp2',
            auto_config: false
      # link for fp3 --> chassis01-lc1-1:fp7
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:a8",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10084',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8084',
            :libvirt__iface_name => 'fp3',
            auto_config: false
      # link for fp4 --> chassis01-lc1-2:fp4
      device.vm.network "private_network",
            :mac => "44:38:39:00:09:42",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '11185',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '9185',
            :libvirt__iface_name => 'fp4',
            auto_config: false
      # link for fp5 --> chassis01-lc1-2:fp5
      device.vm.network "private_network",
            :mac => "44:38:39:00:08:c0",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '11120',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '9120',
            :libvirt__iface_name => 'fp5',
            auto_config: false
      # link for fp6 --> chassis01-lc1-2:fp6
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:f2",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10249',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8249',
            :libvirt__iface_name => 'fp6',
            auto_config: false
      # link for fp7 --> chassis01-lc1-2:fp7
      device.vm.network "private_network",
            :mac => "44:38:39:00:05:02",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10641',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8641',
            :libvirt__iface_name => 'fp7',
            auto_config: false
      # link for fp8 --> chassis01-lc2-1:fp4
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:c6",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10483',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8483',
            :libvirt__iface_name => 'fp8',
            auto_config: false
      # link for fp9 --> chassis01-lc2-1:fp5
      device.vm.network "private_network",
            :mac => "44:38:39:00:08:dc",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '11134',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '9134',
            :libvirt__iface_name => 'fp9',
            auto_config: false
      # link for fp10 --> chassis01-lc2-1:fp6
      device.vm.network "private_network",
            :mac => "44:38:39:00:05:d2",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10745',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8745',
            :libvirt__iface_name => 'fp10',
            auto_config: false
      # link for fp11 --> chassis01-lc2-1:fp7
      device.vm.network "private_network",
            :mac => "44:38:39:00:07:3a",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10925',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8925',
            :libvirt__iface_name => 'fp11',
            auto_config: false
      # link for fp12 --> chassis01-lc2-2:fp4
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:18",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10524',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8524',
            :libvirt__iface_name => 'fp12',
            auto_config: false
      # link for fp13 --> chassis01-lc2-2:fp5
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:56",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10043',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8043',
            :libvirt__iface_name => 'fp13',
            auto_config: false
      # link for fp14 --> chassis01-lc2-2:fp6
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:90",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10456',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8456',
            :libvirt__iface_name => 'fp14',
            auto_config: false
      # link for fp15 --> chassis01-lc2-2:fp7
      device.vm.network "private_network",
            :mac => "44:38:39:00:05:6c",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10694',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8694',
            :libvirt__iface_name => 'fp15',
            auto_config: false
      # link for fp16 --> chassis01-lc3-1:fp4
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:5e",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10431',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8431',
            :libvirt__iface_name => 'fp16',
            auto_config: false
      # link for fp17 --> chassis01-lc3-1:fp5
      device.vm.network "private_network",
            :mac => "44:38:39:00:05:06",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10643',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8643',
            :libvirt__iface_name => 'fp17',
            auto_config: false
      # link for fp18 --> chassis01-lc3-1:fp6
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:06",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10387',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8387',
            :libvirt__iface_name => 'fp18',
            auto_config: false
      # link for fp19 --> chassis01-lc3-1:fp7
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:88",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10196',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8196',
            :libvirt__iface_name => 'fp19',
            auto_config: false
      # link for fp20 --> chassis01-lc3-2:fp4
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:9a",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10589',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8589',
            :libvirt__iface_name => 'fp20',
            auto_config: false
      # link for fp21 --> chassis01-lc3-2:fp5
      device.vm.network "private_network",
            :mac => "44:38:39:00:06:e2",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10881',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8881',
            :libvirt__iface_name => 'fp21',
            auto_config: false
      # link for fp22 --> chassis01-lc3-2:fp6
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:90",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10584',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8584',
            :libvirt__iface_name => 'fp22',
            auto_config: false
      # link for fp23 --> chassis01-lc3-2:fp7
      device.vm.network "private_network",
            :mac => "44:38:39:00:06:38",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10796',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8796',
            :libvirt__iface_name => 'fp23',
            auto_config: false
      # link for fp24 --> chassis01-lc4-1:fp4
      device.vm.network "private_network",
            :mac => "44:38:39:00:07:e4",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '11010',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '9010',
            :libvirt__iface_name => 'fp24',
            auto_config: false
      # link for fp25 --> chassis01-lc4-1:fp5
      device.vm.network "private_network",
            :mac => "44:38:39:00:06:ec",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10886',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8886',
            :libvirt__iface_name => 'fp25',
            auto_config: false
      # link for fp26 --> chassis01-lc4-1:fp6
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:04",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10514',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8514',
            :libvirt__iface_name => 'fp26',
            auto_config: false
      # link for fp27 --> chassis01-lc4-1:fp7
      device.vm.network "private_network",
            :mac => "44:38:39:00:07:f2",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '11017',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '9017',
            :libvirt__iface_name => 'fp27',
            auto_config: false
      # link for fp28 --> chassis01-lc4-2:fp4
      device.vm.network "private_network",
            :mac => "44:38:39:00:07:32",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10921',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8921',
            :libvirt__iface_name => 'fp28',
            auto_config: false
      # link for fp29 --> chassis01-lc4-2:fp5
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:54",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10298',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8298',
            :libvirt__iface_name => 'fp29',
            auto_config: false
      # link for fp30 --> chassis01-lc4-2:fp6
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:70",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10312',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8312',
            :libvirt__iface_name => 'fp30',
            auto_config: false
      # link for fp31 --> chassis01-lc4-2:fp7
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:7a",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10061',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8061',
            :libvirt__iface_name => 'fp31',
            auto_config: false



    # Fixes "stdin: is not a tty" and "mesg: ttyname failed : Inappropriate ioctl for device"  messages --> https://github.com/mitchellh/vagrant/issues/1673
    device.vm.provision :shell , inline: "(sudo grep -q 'mesg n' /root/.profile 2>/dev/null && sudo sed -i '/mesg n/d' /root/.profile  2>/dev/null) || true;", privileged: false

    #Copy over Topology.dot File
    device.vm.provision "file", source: "topology.dot", destination: "~/topology.dot"
    device.vm.provision :shell, privileged: false, inline: "sudo mv ~/topology.dot /etc/ptm.d/topology.dot"


    # Run the Config specified in the Node Attributes
    device.vm.provision :shell , privileged: false, :inline => 'echo "$(whoami)" > /tmp/normal_user'
    device.vm.provision :shell , path: "./helper_scripts/extra_switch_config.sh"


    # Install Rules for the interface re-map
    device.vm.provision :shell , :inline => <<-delete_udev_directory
if [ -d "/etc/udev/rules.d/70-persistent-net.rules" ]; then
    rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
fi
rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
delete_udev_directory

device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:05:46 --> eth0"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:05:46", NAME="eth0", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:07:f8 --> fp0"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:07:f8", NAME="fp0", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:86 --> fp1"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:86", NAME="fp1", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:05:50 --> fp2"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:05:50", NAME="fp2", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:a8 --> fp3"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:a8", NAME="fp3", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:09:42 --> fp4"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:09:42", NAME="fp4", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:08:c0 --> fp5"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:08:c0", NAME="fp5", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:f2 --> fp6"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:f2", NAME="fp6", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:05:02 --> fp7"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:05:02", NAME="fp7", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:c6 --> fp8"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:c6", NAME="fp8", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:08:dc --> fp9"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:08:dc", NAME="fp9", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:05:d2 --> fp10"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:05:d2", NAME="fp10", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:07:3a --> fp11"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:07:3a", NAME="fp11", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:18 --> fp12"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:18", NAME="fp12", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:56 --> fp13"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:56", NAME="fp13", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:90 --> fp14"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:90", NAME="fp14", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:05:6c --> fp15"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:05:6c", NAME="fp15", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:5e --> fp16"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:5e", NAME="fp16", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:05:06 --> fp17"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:05:06", NAME="fp17", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:06 --> fp18"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:06", NAME="fp18", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:88 --> fp19"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:88", NAME="fp19", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:9a --> fp20"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:9a", NAME="fp20", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:06:e2 --> fp21"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:06:e2", NAME="fp21", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:90 --> fp22"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:90", NAME="fp22", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:06:38 --> fp23"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:06:38", NAME="fp23", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:07:e4 --> fp24"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:07:e4", NAME="fp24", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:06:ec --> fp25"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:06:ec", NAME="fp25", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:04 --> fp26"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:04", NAME="fp26", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:07:f2 --> fp27"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:07:f2", NAME="fp27", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:07:32 --> fp28"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:07:32", NAME="fp28", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:54 --> fp29"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:54", NAME="fp29", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:70 --> fp30"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:70", NAME="fp30", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:7a --> fp31"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:7a", NAME="fp31", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule

      device.vm.provision :shell , :inline => <<-vagrant_interface_rule
echo "  INFO: Adding UDEV Rule: Vagrant interface = vagrant"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{ifindex}=="2", NAME="vagrant", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
echo "#### UDEV Rules (/etc/udev/rules.d/70-persistent-net.rules) ####"
cat /etc/udev/rules.d/70-persistent-net.rules
vagrant_interface_rule

# Run Any Platform Specific Code and Apply the interface Re-map
    #   (may or may not perform a reboot depending on platform)
    device.vm.provision :shell , :inline => $script

end

  ##### DEFINE VM for chassis03-lc2-2 #####
  config.vm.define "chassis03-lc2-2" do |device|

    device.vm.hostname = "chassis03-lc2-2"

    device.vm.box = "CumulusCommunity/cumulus-vx"
    device.vm.box_version = "3.5.0"

    device.vm.provider :libvirt do |v|
      v.memory = 768
    end
    #   see note here: https://github.com/pradels/vagrant-libvirt#synced-folders
    device.vm.synced_folder ".", "/vagrant", disabled: true



    # NETWORK INTERFACES
      # link for eth0 --> oob-mgmt-switch4:swp30
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:84",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10066',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8066',
            :libvirt__iface_name => 'eth0',
            auto_config: false
      # link for fp0 --> chassis03-fc1-1:fp12
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:b9",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8605',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10605',
            :libvirt__iface_name => 'fp0',
            auto_config: false
      # link for fp1 --> chassis03-fc1-1:fp13
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:39",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8541',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10541',
            :libvirt__iface_name => 'fp1',
            auto_config: false
      # link for fp2 --> chassis03-fc1-1:fp14
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:a5",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8595',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10595',
            :libvirt__iface_name => 'fp2',
            auto_config: false
      # link for fp3 --> chassis03-fc1-1:fp15
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:2d",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8023',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10023',
            :libvirt__iface_name => 'fp3',
            auto_config: false
      # link for fp4 --> chassis03-fc2-1:fp12
      device.vm.network "private_network",
            :mac => "44:38:39:00:05:41",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8673',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10673',
            :libvirt__iface_name => 'fp4',
            auto_config: false
      # link for fp5 --> chassis03-fc2-1:fp13
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:a3",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8082',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10082',
            :libvirt__iface_name => 'fp5',
            auto_config: false
      # link for fp6 --> chassis03-fc2-1:fp14
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:87",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8324',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10324',
            :libvirt__iface_name => 'fp6',
            auto_config: false
      # link for fp7 --> chassis03-fc2-1:fp15
      device.vm.network "private_network",
            :mac => "44:38:39:00:05:c9",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8741',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10741',
            :libvirt__iface_name => 'fp7',
            auto_config: false
      # link for fp8 --> chassis03-fc3-1:fp12
      device.vm.network "private_network",
            :mac => "44:38:39:00:07:03",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8898',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10898',
            :libvirt__iface_name => 'fp8',
            auto_config: false
      # link for fp9 --> chassis03-fc3-1:fp13
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:77",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8060',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10060',
            :libvirt__iface_name => 'fp9',
            auto_config: false
      # link for fp10 --> chassis03-fc3-1:fp14
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:67",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8308',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10308',
            :libvirt__iface_name => 'fp10',
            auto_config: false
      # link for fp11 --> chassis03-fc3-1:fp15
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:3f",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8032',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10032',
            :libvirt__iface_name => 'fp11',
            auto_config: false
      # link for fp12 --> chassis03-fc4-1:fp12
      device.vm.network "private_network",
            :mac => "44:38:39:00:08:01",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '9025',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '11025',
            :libvirt__iface_name => 'fp12',
            auto_config: false
      # link for fp13 --> chassis03-fc4-1:fp13
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:15",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8395',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10395',
            :libvirt__iface_name => 'fp13',
            auto_config: false
      # link for fp14 --> chassis03-fc4-1:fp14
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:43",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8290',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10290',
            :libvirt__iface_name => 'fp14',
            auto_config: false
      # link for fp15 --> chassis03-fc4-1:fp15
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:4d",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8551',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10551',
            :libvirt__iface_name => 'fp15',
            auto_config: false
      # link for swp1 --> leaf49:swp3
      device.vm.network "private_network",
            :mac => "44:38:39:00:05:81",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8705',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10705',
            :libvirt__iface_name => 'swp1',
            auto_config: false
      # link for swp2 --> leaf50:swp3
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:85",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8067',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10067',
            :libvirt__iface_name => 'swp2',
            auto_config: false
      # link for swp3 --> leaf51:swp3
      device.vm.network "private_network",
            :mac => "44:38:39:00:09:3f",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '9184',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '11184',
            :libvirt__iface_name => 'swp3',
            auto_config: false
      # link for swp4 --> leaf52:swp3
      device.vm.network "private_network",
            :mac => "44:38:39:00:07:7d",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8959',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10959',
            :libvirt__iface_name => 'swp4',
            auto_config: false
      # link for swp5 --> leaf53:swp3
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:35",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8027',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10027',
            :libvirt__iface_name => 'swp5',
            auto_config: false
      # link for swp6 --> leaf54:swp3
      device.vm.network "private_network",
            :mac => "44:38:39:00:07:bd",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8991',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10991',
            :libvirt__iface_name => 'swp6',
            auto_config: false
      # link for swp7 --> leaf55:swp3
      device.vm.network "private_network",
            :mac => "44:38:39:00:07:57",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8940',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10940',
            :libvirt__iface_name => 'swp7',
            auto_config: false
      # link for swp8 --> leaf56:swp3
      device.vm.network "private_network",
            :mac => "44:38:39:00:07:37",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8924',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10924',
            :libvirt__iface_name => 'swp8',
            auto_config: false
      # link for swp9 --> leaf57:swp3
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:d5",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8363',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10363',
            :libvirt__iface_name => 'swp9',
            auto_config: false
      # link for swp10 --> leaf58:swp3
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:ff",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8640',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10640',
            :libvirt__iface_name => 'swp10',
            auto_config: false
      # link for swp11 --> leaf59:swp3
      device.vm.network "private_network",
            :mac => "44:38:39:00:07:a1",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8977',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10977',
            :libvirt__iface_name => 'swp11',
            auto_config: false
      # link for swp12 --> leaf60:swp3
      device.vm.network "private_network",
            :mac => "44:38:39:00:08:63",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '9074',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '11074',
            :libvirt__iface_name => 'swp12',
            auto_config: false
      # link for swp13 --> leaf61:swp3
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:7b",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8062',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10062',
            :libvirt__iface_name => 'swp13',
            auto_config: false
      # link for swp14 --> leaf62:swp3
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:17",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8396',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10396',
            :libvirt__iface_name => 'swp14',
            auto_config: false
      # link for swp15 --> leaf63:swp3
      device.vm.network "private_network",
            :mac => "44:38:39:00:08:91",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '9097',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '11097',
            :libvirt__iface_name => 'swp15',
            auto_config: false
      # link for swp16 --> leaf64:swp3
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:fb",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8510',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10510',
            :libvirt__iface_name => 'swp16',
            auto_config: false



    # Fixes "stdin: is not a tty" and "mesg: ttyname failed : Inappropriate ioctl for device"  messages --> https://github.com/mitchellh/vagrant/issues/1673
    device.vm.provision :shell , inline: "(sudo grep -q 'mesg n' /root/.profile 2>/dev/null && sudo sed -i '/mesg n/d' /root/.profile  2>/dev/null) || true;", privileged: false

    #Copy over Topology.dot File
    device.vm.provision "file", source: "topology.dot", destination: "~/topology.dot"
    device.vm.provision :shell, privileged: false, inline: "sudo mv ~/topology.dot /etc/ptm.d/topology.dot"


    # Run the Config specified in the Node Attributes
    device.vm.provision :shell , privileged: false, :inline => 'echo "$(whoami)" > /tmp/normal_user'
    device.vm.provision :shell , path: "./helper_scripts/extra_switch_config.sh"


    # Install Rules for the interface re-map
    device.vm.provision :shell , :inline => <<-delete_udev_directory
if [ -d "/etc/udev/rules.d/70-persistent-net.rules" ]; then
    rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
fi
rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
delete_udev_directory

device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:84 --> eth0"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:84", NAME="eth0", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:b9 --> fp0"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:b9", NAME="fp0", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:39 --> fp1"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:39", NAME="fp1", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:a5 --> fp2"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:a5", NAME="fp2", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:2d --> fp3"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:2d", NAME="fp3", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:05:41 --> fp4"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:05:41", NAME="fp4", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:a3 --> fp5"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:a3", NAME="fp5", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:87 --> fp6"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:87", NAME="fp6", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:05:c9 --> fp7"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:05:c9", NAME="fp7", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:07:03 --> fp8"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:07:03", NAME="fp8", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:77 --> fp9"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:77", NAME="fp9", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:67 --> fp10"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:67", NAME="fp10", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:3f --> fp11"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:3f", NAME="fp11", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:08:01 --> fp12"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:08:01", NAME="fp12", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:15 --> fp13"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:15", NAME="fp13", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:43 --> fp14"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:43", NAME="fp14", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:4d --> fp15"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:4d", NAME="fp15", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:05:81 --> swp1"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:05:81", NAME="swp1", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:85 --> swp2"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:85", NAME="swp2", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:09:3f --> swp3"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:09:3f", NAME="swp3", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:07:7d --> swp4"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:07:7d", NAME="swp4", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:35 --> swp5"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:35", NAME="swp5", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:07:bd --> swp6"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:07:bd", NAME="swp6", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:07:57 --> swp7"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:07:57", NAME="swp7", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:07:37 --> swp8"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:07:37", NAME="swp8", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:d5 --> swp9"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:d5", NAME="swp9", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:ff --> swp10"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:ff", NAME="swp10", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:07:a1 --> swp11"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:07:a1", NAME="swp11", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:08:63 --> swp12"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:08:63", NAME="swp12", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:7b --> swp13"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:7b", NAME="swp13", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:17 --> swp14"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:17", NAME="swp14", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:08:91 --> swp15"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:08:91", NAME="swp15", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:fb --> swp16"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:fb", NAME="swp16", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule

      device.vm.provision :shell , :inline => <<-vagrant_interface_rule
echo "  INFO: Adding UDEV Rule: Vagrant interface = vagrant"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{ifindex}=="2", NAME="vagrant", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
echo "#### UDEV Rules (/etc/udev/rules.d/70-persistent-net.rules) ####"
cat /etc/udev/rules.d/70-persistent-net.rules
vagrant_interface_rule

# Run Any Platform Specific Code and Apply the interface Re-map
    #   (may or may not perform a reboot depending on platform)
    device.vm.provision :shell , :inline => $script

end

  ##### DEFINE VM for chassis03-lc2-1 #####
  config.vm.define "chassis03-lc2-1" do |device|

    device.vm.hostname = "chassis03-lc2-1"

    device.vm.box = "CumulusCommunity/cumulus-vx"
    device.vm.box_version = "3.5.0"

    device.vm.provider :libvirt do |v|
      v.memory = 768
    end
    #   see note here: https://github.com/pradels/vagrant-libvirt#synced-folders
    device.vm.synced_folder ".", "/vagrant", disabled: true



    # NETWORK INTERFACES
      # link for eth0 --> oob-mgmt-switch4:swp29
      device.vm.network "private_network",
            :mac => "44:38:39:00:06:02",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10769',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8769',
            :libvirt__iface_name => 'eth0',
            auto_config: false
      # link for fp0 --> chassis03-fc1-1:fp8
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:2f",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8536',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10536',
            :libvirt__iface_name => 'fp0',
            auto_config: false
      # link for fp1 --> chassis03-fc1-1:fp9
      device.vm.network "private_network",
            :mac => "44:38:39:00:05:7d",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8703',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10703',
            :libvirt__iface_name => 'fp1',
            auto_config: false
      # link for fp2 --> chassis03-fc1-1:fp10
      device.vm.network "private_network",
            :mac => "44:38:39:00:08:81",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '9089',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '11089',
            :libvirt__iface_name => 'fp2',
            auto_config: false
      # link for fp3 --> chassis03-fc1-1:fp11
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:11",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8393',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10393',
            :libvirt__iface_name => 'fp3',
            auto_config: false
      # link for fp4 --> chassis03-fc2-1:fp8
      device.vm.network "private_network",
            :mac => "44:38:39:00:08:dd",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '9135',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '11135',
            :libvirt__iface_name => 'fp4',
            auto_config: false
      # link for fp5 --> chassis03-fc2-1:fp9
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:7b",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8190',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10190',
            :libvirt__iface_name => 'fp5',
            auto_config: false
      # link for fp6 --> chassis03-fc2-1:fp10
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:0f",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8008',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10008',
            :libvirt__iface_name => 'fp6',
            auto_config: false
      # link for fp7 --> chassis03-fc2-1:fp11
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:75",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8443',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10443',
            :libvirt__iface_name => 'fp7',
            auto_config: false
      # link for fp8 --> chassis03-fc3-1:fp8
      device.vm.network "private_network",
            :mac => "44:38:39:00:06:6b",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8822',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10822',
            :libvirt__iface_name => 'fp8',
            auto_config: false
      # link for fp9 --> chassis03-fc3-1:fp9
      device.vm.network "private_network",
            :mac => "44:38:39:00:07:67",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8948',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10948',
            :libvirt__iface_name => 'fp9',
            auto_config: false
      # link for fp10 --> chassis03-fc3-1:fp10
      device.vm.network "private_network",
            :mac => "44:38:39:00:06:33",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8794',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10794',
            :libvirt__iface_name => 'fp10',
            auto_config: false
      # link for fp11 --> chassis03-fc3-1:fp11
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:df",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8624',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10624',
            :libvirt__iface_name => 'fp11',
            auto_config: false
      # link for fp12 --> chassis03-fc4-1:fp8
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:7b",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8574',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10574',
            :libvirt__iface_name => 'fp12',
            auto_config: false
      # link for fp13 --> chassis03-fc4-1:fp9
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:8d",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8199',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10199',
            :libvirt__iface_name => 'fp13',
            auto_config: false
      # link for fp14 --> chassis03-fc4-1:fp10
      device.vm.network "private_network",
            :mac => "44:38:39:00:07:d5",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '9003',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '11003',
            :libvirt__iface_name => 'fp14',
            auto_config: false
      # link for fp15 --> chassis03-fc4-1:fp11
      device.vm.network "private_network",
            :mac => "44:38:39:00:06:2f",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8792',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10792',
            :libvirt__iface_name => 'fp15',
            auto_config: false
      # link for swp1 --> leaf33:swp3
      device.vm.network "private_network",
            :mac => "44:38:39:00:06:8d",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8839',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10839',
            :libvirt__iface_name => 'swp1',
            auto_config: false
      # link for swp2 --> leaf34:swp3
      device.vm.network "private_network",
            :mac => "44:38:39:00:05:21",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8657',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10657',
            :libvirt__iface_name => 'swp2',
            auto_config: false
      # link for swp3 --> leaf35:swp3
      device.vm.network "private_network",
            :mac => "44:38:39:00:08:13",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '9034',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '11034',
            :libvirt__iface_name => 'swp3',
            auto_config: false
      # link for swp4 --> leaf36:swp3
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:47",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8548',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10548',
            :libvirt__iface_name => 'swp4',
            auto_config: false
      # link for swp5 --> leaf37:swp3
      device.vm.network "private_network",
            :mac => "44:38:39:00:08:8d",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '9095',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '11095',
            :libvirt__iface_name => 'swp5',
            auto_config: false
      # link for swp6 --> leaf38:swp3
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:3d",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8031',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10031',
            :libvirt__iface_name => 'swp6',
            auto_config: false
      # link for swp7 --> leaf39:swp3
      device.vm.network "private_network",
            :mac => "44:38:39:00:08:3b",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '9054',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '11054',
            :libvirt__iface_name => 'swp7',
            auto_config: false
      # link for swp8 --> leaf40:swp3
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:d3",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8362',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10362',
            :libvirt__iface_name => 'swp8',
            auto_config: false
      # link for swp9 --> leaf41:swp3
      device.vm.network "private_network",
            :mac => "44:38:39:00:08:19",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '9037',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '11037',
            :libvirt__iface_name => 'swp9',
            auto_config: false
      # link for swp10 --> leaf42:swp3
      device.vm.network "private_network",
            :mac => "44:38:39:00:05:2f",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8664',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10664',
            :libvirt__iface_name => 'swp10',
            auto_config: false
      # link for swp11 --> leaf43:swp3
      device.vm.network "private_network",
            :mac => "44:38:39:00:06:ef",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8888',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10888',
            :libvirt__iface_name => 'swp11',
            auto_config: false
      # link for swp12 --> leaf44:swp3
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:8f",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8200',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10200',
            :libvirt__iface_name => 'swp12',
            auto_config: false
      # link for swp13 --> leaf45:swp3
      device.vm.network "private_network",
            :mac => "44:38:39:00:08:9f",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '9104',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '11104',
            :libvirt__iface_name => 'swp13',
            auto_config: false
      # link for swp14 --> leaf46:swp3
      device.vm.network "private_network",
            :mac => "44:38:39:00:05:f7",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8764',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10764',
            :libvirt__iface_name => 'swp14',
            auto_config: false
      # link for swp15 --> leaf47:swp3
      device.vm.network "private_network",
            :mac => "44:38:39:00:05:7b",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8702',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10702',
            :libvirt__iface_name => 'swp15',
            auto_config: false
      # link for swp16 --> leaf48:swp3
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:8d",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8327',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10327',
            :libvirt__iface_name => 'swp16',
            auto_config: false



    # Fixes "stdin: is not a tty" and "mesg: ttyname failed : Inappropriate ioctl for device"  messages --> https://github.com/mitchellh/vagrant/issues/1673
    device.vm.provision :shell , inline: "(sudo grep -q 'mesg n' /root/.profile 2>/dev/null && sudo sed -i '/mesg n/d' /root/.profile  2>/dev/null) || true;", privileged: false

    #Copy over Topology.dot File
    device.vm.provision "file", source: "topology.dot", destination: "~/topology.dot"
    device.vm.provision :shell, privileged: false, inline: "sudo mv ~/topology.dot /etc/ptm.d/topology.dot"


    # Run the Config specified in the Node Attributes
    device.vm.provision :shell , privileged: false, :inline => 'echo "$(whoami)" > /tmp/normal_user'
    device.vm.provision :shell , path: "./helper_scripts/extra_switch_config.sh"


    # Install Rules for the interface re-map
    device.vm.provision :shell , :inline => <<-delete_udev_directory
if [ -d "/etc/udev/rules.d/70-persistent-net.rules" ]; then
    rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
fi
rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
delete_udev_directory

device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:06:02 --> eth0"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:06:02", NAME="eth0", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:2f --> fp0"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:2f", NAME="fp0", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:05:7d --> fp1"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:05:7d", NAME="fp1", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:08:81 --> fp2"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:08:81", NAME="fp2", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:11 --> fp3"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:11", NAME="fp3", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:08:dd --> fp4"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:08:dd", NAME="fp4", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:7b --> fp5"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:7b", NAME="fp5", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:0f --> fp6"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:0f", NAME="fp6", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:75 --> fp7"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:75", NAME="fp7", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:06:6b --> fp8"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:06:6b", NAME="fp8", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:07:67 --> fp9"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:07:67", NAME="fp9", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:06:33 --> fp10"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:06:33", NAME="fp10", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:df --> fp11"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:df", NAME="fp11", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:7b --> fp12"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:7b", NAME="fp12", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:8d --> fp13"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:8d", NAME="fp13", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:07:d5 --> fp14"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:07:d5", NAME="fp14", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:06:2f --> fp15"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:06:2f", NAME="fp15", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:06:8d --> swp1"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:06:8d", NAME="swp1", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:05:21 --> swp2"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:05:21", NAME="swp2", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:08:13 --> swp3"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:08:13", NAME="swp3", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:47 --> swp4"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:47", NAME="swp4", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:08:8d --> swp5"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:08:8d", NAME="swp5", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:3d --> swp6"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:3d", NAME="swp6", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:08:3b --> swp7"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:08:3b", NAME="swp7", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:d3 --> swp8"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:d3", NAME="swp8", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:08:19 --> swp9"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:08:19", NAME="swp9", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:05:2f --> swp10"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:05:2f", NAME="swp10", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:06:ef --> swp11"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:06:ef", NAME="swp11", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:8f --> swp12"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:8f", NAME="swp12", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:08:9f --> swp13"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:08:9f", NAME="swp13", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:05:f7 --> swp14"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:05:f7", NAME="swp14", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:05:7b --> swp15"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:05:7b", NAME="swp15", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:8d --> swp16"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:8d", NAME="swp16", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule

      device.vm.provision :shell , :inline => <<-vagrant_interface_rule
echo "  INFO: Adding UDEV Rule: Vagrant interface = vagrant"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{ifindex}=="2", NAME="vagrant", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
echo "#### UDEV Rules (/etc/udev/rules.d/70-persistent-net.rules) ####"
cat /etc/udev/rules.d/70-persistent-net.rules
vagrant_interface_rule

# Run Any Platform Specific Code and Apply the interface Re-map
    #   (may or may not perform a reboot depending on platform)
    device.vm.provision :shell , :inline => $script

end

  ##### DEFINE VM for chassis03-fc4-1 #####
  config.vm.define "chassis03-fc4-1" do |device|

    device.vm.hostname = "chassis03-fc4-1"

    device.vm.box = "CumulusCommunity/cumulus-vx"
    device.vm.box_version = "3.5.0"

    device.vm.provider :libvirt do |v|
      v.memory = 768
    end
    #   see note here: https://github.com/pradels/vagrant-libvirt#synced-folders
    device.vm.synced_folder ".", "/vagrant", disabled: true



    # NETWORK INTERFACES
      # link for eth0 --> oob-mgmt-switch4:swp38
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:dc",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10366',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8366',
            :libvirt__iface_name => 'eth0',
            auto_config: false
      # link for fp0 --> chassis03-lc1-1:fp12
      device.vm.network "private_network",
            :mac => "44:38:39:00:06:48",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10804',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8804',
            :libvirt__iface_name => 'fp0',
            auto_config: false
      # link for fp1 --> chassis03-lc1-1:fp13
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:5c",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10174',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8174',
            :libvirt__iface_name => 'fp1',
            auto_config: false
      # link for fp2 --> chassis03-lc1-1:fp14
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:22",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10273',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8273',
            :libvirt__iface_name => 'fp2',
            auto_config: false
      # link for fp3 --> chassis03-lc1-1:fp15
      device.vm.network "private_network",
            :mac => "44:38:39:00:05:48",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10676',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8676',
            :libvirt__iface_name => 'fp3',
            auto_config: false
      # link for fp4 --> chassis03-lc1-2:fp12
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:5c",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10558',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8558',
            :libvirt__iface_name => 'fp4',
            auto_config: false
      # link for fp5 --> chassis03-lc1-2:fp13
      device.vm.network "private_network",
            :mac => "44:38:39:00:05:74",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10698',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8698',
            :libvirt__iface_name => 'fp5',
            auto_config: false
      # link for fp6 --> chassis03-lc1-2:fp14
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:d2",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10617',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8617',
            :libvirt__iface_name => 'fp6',
            auto_config: false
      # link for fp7 --> chassis03-lc1-2:fp15
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:aa",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10213',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8213',
            :libvirt__iface_name => 'fp7',
            auto_config: false
      # link for fp8 --> chassis03-lc2-1:fp12
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:7c",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10574',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8574',
            :libvirt__iface_name => 'fp8',
            auto_config: false
      # link for fp9 --> chassis03-lc2-1:fp13
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:8e",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10199',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8199',
            :libvirt__iface_name => 'fp9',
            auto_config: false
      # link for fp10 --> chassis03-lc2-1:fp14
      device.vm.network "private_network",
            :mac => "44:38:39:00:07:d6",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '11003',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '9003',
            :libvirt__iface_name => 'fp10',
            auto_config: false
      # link for fp11 --> chassis03-lc2-1:fp15
      device.vm.network "private_network",
            :mac => "44:38:39:00:06:30",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10792',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8792',
            :libvirt__iface_name => 'fp11',
            auto_config: false
      # link for fp12 --> chassis03-lc2-2:fp12
      device.vm.network "private_network",
            :mac => "44:38:39:00:08:02",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '11025',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '9025',
            :libvirt__iface_name => 'fp12',
            auto_config: false
      # link for fp13 --> chassis03-lc2-2:fp13
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:16",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10395',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8395',
            :libvirt__iface_name => 'fp13',
            auto_config: false
      # link for fp14 --> chassis03-lc2-2:fp14
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:44",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10290',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8290',
            :libvirt__iface_name => 'fp14',
            auto_config: false
      # link for fp15 --> chassis03-lc2-2:fp15
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:4e",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10551',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8551',
            :libvirt__iface_name => 'fp15',
            auto_config: false
      # link for fp16 --> chassis03-lc3-1:fp12
      device.vm.network "private_network",
            :mac => "44:38:39:00:09:48",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '11188',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '9188',
            :libvirt__iface_name => 'fp16',
            auto_config: false
      # link for fp17 --> chassis03-lc3-1:fp13
      device.vm.network "private_network",
            :mac => "44:38:39:00:07:10",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10904',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8904',
            :libvirt__iface_name => 'fp17',
            auto_config: false
      # link for fp18 --> chassis03-lc3-1:fp14
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:f2",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10377',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8377',
            :libvirt__iface_name => 'fp18',
            auto_config: false
      # link for fp19 --> chassis03-lc3-1:fp15
      device.vm.network "private_network",
            :mac => "44:38:39:00:07:78",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10956',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8956',
            :libvirt__iface_name => 'fp19',
            auto_config: false
      # link for fp20 --> chassis03-lc3-2:fp12
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:9c",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10206',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8206',
            :libvirt__iface_name => 'fp20',
            auto_config: false
      # link for fp21 --> chassis03-lc3-2:fp13
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:10",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10392',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8392',
            :libvirt__iface_name => 'fp21',
            auto_config: false
      # link for fp22 --> chassis03-lc3-2:fp14
      device.vm.network "private_network",
            :mac => "44:38:39:00:08:1e",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '11039',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '9039',
            :libvirt__iface_name => 'fp22',
            auto_config: false
      # link for fp23 --> chassis03-lc3-2:fp15
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:3c",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10030',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8030',
            :libvirt__iface_name => 'fp23',
            auto_config: false
      # link for fp24 --> chassis03-lc4-1:fp12
      device.vm.network "private_network",
            :mac => "44:38:39:00:09:34",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '11178',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '9178',
            :libvirt__iface_name => 'fp24',
            auto_config: false
      # link for fp25 --> chassis03-lc4-1:fp13
      device.vm.network "private_network",
            :mac => "44:38:39:00:09:52",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '11193',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '9193',
            :libvirt__iface_name => 'fp25',
            auto_config: false
      # link for fp26 --> chassis03-lc4-1:fp14
      device.vm.network "private_network",
            :mac => "44:38:39:00:09:56",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '11195',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '9195',
            :libvirt__iface_name => 'fp26',
            auto_config: false
      # link for fp27 --> chassis03-lc4-1:fp15
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:24",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10146',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8146',
            :libvirt__iface_name => 'fp27',
            auto_config: false
      # link for fp28 --> chassis03-lc4-2:fp12
      device.vm.network "private_network",
            :mac => "44:38:39:00:06:de",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10879',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8879',
            :libvirt__iface_name => 'fp28',
            auto_config: false
      # link for fp29 --> chassis03-lc4-2:fp13
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:e2",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10369',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8369',
            :libvirt__iface_name => 'fp29',
            auto_config: false
      # link for fp30 --> chassis03-lc4-2:fp14
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:9e",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10463',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8463',
            :libvirt__iface_name => 'fp30',
            auto_config: false
      # link for fp31 --> chassis03-lc4-2:fp15
      device.vm.network "private_network",
            :mac => "44:38:39:00:07:b0",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10984',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8984',
            :libvirt__iface_name => 'fp31',
            auto_config: false



    # Fixes "stdin: is not a tty" and "mesg: ttyname failed : Inappropriate ioctl for device"  messages --> https://github.com/mitchellh/vagrant/issues/1673
    device.vm.provision :shell , inline: "(sudo grep -q 'mesg n' /root/.profile 2>/dev/null && sudo sed -i '/mesg n/d' /root/.profile  2>/dev/null) || true;", privileged: false

    #Copy over Topology.dot File
    device.vm.provision "file", source: "topology.dot", destination: "~/topology.dot"
    device.vm.provision :shell, privileged: false, inline: "sudo mv ~/topology.dot /etc/ptm.d/topology.dot"


    # Run the Config specified in the Node Attributes
    device.vm.provision :shell , privileged: false, :inline => 'echo "$(whoami)" > /tmp/normal_user'
    device.vm.provision :shell , path: "./helper_scripts/extra_switch_config.sh"


    # Install Rules for the interface re-map
    device.vm.provision :shell , :inline => <<-delete_udev_directory
if [ -d "/etc/udev/rules.d/70-persistent-net.rules" ]; then
    rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
fi
rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
delete_udev_directory

device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:dc --> eth0"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:dc", NAME="eth0", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:06:48 --> fp0"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:06:48", NAME="fp0", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:5c --> fp1"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:5c", NAME="fp1", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:22 --> fp2"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:22", NAME="fp2", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:05:48 --> fp3"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:05:48", NAME="fp3", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:5c --> fp4"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:5c", NAME="fp4", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:05:74 --> fp5"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:05:74", NAME="fp5", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:d2 --> fp6"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:d2", NAME="fp6", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:aa --> fp7"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:aa", NAME="fp7", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:7c --> fp8"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:7c", NAME="fp8", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:8e --> fp9"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:8e", NAME="fp9", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:07:d6 --> fp10"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:07:d6", NAME="fp10", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:06:30 --> fp11"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:06:30", NAME="fp11", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:08:02 --> fp12"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:08:02", NAME="fp12", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:16 --> fp13"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:16", NAME="fp13", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:44 --> fp14"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:44", NAME="fp14", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:4e --> fp15"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:4e", NAME="fp15", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:09:48 --> fp16"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:09:48", NAME="fp16", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:07:10 --> fp17"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:07:10", NAME="fp17", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:f2 --> fp18"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:f2", NAME="fp18", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:07:78 --> fp19"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:07:78", NAME="fp19", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:9c --> fp20"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:9c", NAME="fp20", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:10 --> fp21"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:10", NAME="fp21", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:08:1e --> fp22"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:08:1e", NAME="fp22", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:3c --> fp23"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:3c", NAME="fp23", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:09:34 --> fp24"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:09:34", NAME="fp24", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:09:52 --> fp25"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:09:52", NAME="fp25", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:09:56 --> fp26"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:09:56", NAME="fp26", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:24 --> fp27"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:24", NAME="fp27", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:06:de --> fp28"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:06:de", NAME="fp28", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:e2 --> fp29"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:e2", NAME="fp29", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:9e --> fp30"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:9e", NAME="fp30", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:07:b0 --> fp31"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:07:b0", NAME="fp31", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule

      device.vm.provision :shell , :inline => <<-vagrant_interface_rule
echo "  INFO: Adding UDEV Rule: Vagrant interface = vagrant"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{ifindex}=="2", NAME="vagrant", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
echo "#### UDEV Rules (/etc/udev/rules.d/70-persistent-net.rules) ####"
cat /etc/udev/rules.d/70-persistent-net.rules
vagrant_interface_rule

# Run Any Platform Specific Code and Apply the interface Re-map
    #   (may or may not perform a reboot depending on platform)
    device.vm.provision :shell , :inline => $script

end

  ##### DEFINE VM for chassis01-fc1-1 #####
  config.vm.define "chassis01-fc1-1" do |device|

    device.vm.hostname = "chassis01-fc1-1"

    device.vm.box = "CumulusCommunity/cumulus-vx"
    device.vm.box_version = "3.5.0"

    device.vm.provider :libvirt do |v|
      v.memory = 768
    end
    #   see note here: https://github.com/pradels/vagrant-libvirt#synced-folders
    device.vm.synced_folder ".", "/vagrant", disabled: true



    # NETWORK INTERFACES
      # link for eth0 --> oob-mgmt-switch4:swp11
      device.vm.network "private_network",
            :mac => "44:38:39:00:07:ea",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '11013',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '9013',
            :libvirt__iface_name => 'eth0',
            auto_config: false
      # link for fp0 --> chassis01-lc1-1:fp0
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:40",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10544',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8544',
            :libvirt__iface_name => 'fp0',
            auto_config: false
      # link for fp1 --> chassis01-lc1-1:fp1
      device.vm.network "private_network",
            :mac => "44:38:39:00:08:94",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '11098',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '9098',
            :libvirt__iface_name => 'fp1',
            auto_config: false
      # link for fp2 --> chassis01-lc1-1:fp2
      device.vm.network "private_network",
            :mac => "44:38:39:00:05:fc",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10766',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8766',
            :libvirt__iface_name => 'fp2',
            auto_config: false
      # link for fp3 --> chassis01-lc1-1:fp3
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:14",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10394',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8394',
            :libvirt__iface_name => 'fp3',
            auto_config: false
      # link for fp4 --> chassis01-lc1-2:fp0
      device.vm.network "private_network",
            :mac => "44:38:39:00:08:62",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '11073',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '9073',
            :libvirt__iface_name => 'fp4',
            auto_config: false
      # link for fp5 --> chassis01-lc1-2:fp1
      device.vm.network "private_network",
            :mac => "44:38:39:00:05:28",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10660',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8660',
            :libvirt__iface_name => 'fp5',
            auto_config: false
      # link for fp6 --> chassis01-lc1-2:fp2
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:4e",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10039',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8039',
            :libvirt__iface_name => 'fp6',
            auto_config: false
      # link for fp7 --> chassis01-lc1-2:fp3
      device.vm.network "private_network",
            :mac => "44:38:39:00:07:18",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10908',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8908',
            :libvirt__iface_name => 'fp7',
            auto_config: false
      # link for fp8 --> chassis01-lc2-1:fp0
      device.vm.network "private_network",
            :mac => "44:38:39:00:05:6e",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10695',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8695',
            :libvirt__iface_name => 'fp8',
            auto_config: false
      # link for fp9 --> chassis01-lc2-1:fp1
      device.vm.network "private_network",
            :mac => "44:38:39:00:05:6a",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10693',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8693',
            :libvirt__iface_name => 'fp9',
            auto_config: false
      # link for fp10 --> chassis01-lc2-1:fp2
      device.vm.network "private_network",
            :mac => "44:38:39:00:06:2e",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10791',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8791',
            :libvirt__iface_name => 'fp10',
            auto_config: false
      # link for fp11 --> chassis01-lc2-1:fp3
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:0c",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10134',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8134',
            :libvirt__iface_name => 'fp11',
            auto_config: false
      # link for fp12 --> chassis01-lc2-2:fp0
      device.vm.network "private_network",
            :mac => "44:38:39:00:08:30",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '11048',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '9048',
            :libvirt__iface_name => 'fp12',
            auto_config: false
      # link for fp13 --> chassis01-lc2-2:fp1
      device.vm.network "private_network",
            :mac => "44:38:39:00:06:b4",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10858',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8858',
            :libvirt__iface_name => 'fp13',
            auto_config: false
      # link for fp14 --> chassis01-lc2-2:fp2
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:d6",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10235',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8235',
            :libvirt__iface_name => 'fp14',
            auto_config: false
      # link for fp15 --> chassis01-lc2-2:fp3
      device.vm.network "private_network",
            :mac => "44:38:39:00:06:d8",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10876',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8876',
            :libvirt__iface_name => 'fp15',
            auto_config: false
      # link for fp16 --> chassis01-lc3-1:fp0
      device.vm.network "private_network",
            :mac => "44:38:39:00:06:42",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10801',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8801',
            :libvirt__iface_name => 'fp16',
            auto_config: false
      # link for fp17 --> chassis01-lc3-1:fp1
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:10",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10264',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8264',
            :libvirt__iface_name => 'fp17',
            auto_config: false
      # link for fp18 --> chassis01-lc3-1:fp2
      device.vm.network "private_network",
            :mac => "44:38:39:00:08:5a",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '11069',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '9069',
            :libvirt__iface_name => 'fp18',
            auto_config: false
      # link for fp19 --> chassis01-lc3-1:fp3
      device.vm.network "private_network",
            :mac => "44:38:39:00:07:2e",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10919',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8919',
            :libvirt__iface_name => 'fp19',
            auto_config: false
      # link for fp20 --> chassis01-lc3-2:fp0
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:38",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10412',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8412',
            :libvirt__iface_name => 'fp20',
            auto_config: false
      # link for fp21 --> chassis01-lc3-2:fp1
      device.vm.network "private_network",
            :mac => "44:38:39:00:06:66",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10819',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8819',
            :libvirt__iface_name => 'fp21',
            auto_config: false
      # link for fp22 --> chassis01-lc3-2:fp2
      device.vm.network "private_network",
            :mac => "44:38:39:00:05:5a",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10685',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8685',
            :libvirt__iface_name => 'fp22',
            auto_config: false
      # link for fp23 --> chassis01-lc3-2:fp3
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:90",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10072',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8072',
            :libvirt__iface_name => 'fp23',
            auto_config: false
      # link for fp24 --> chassis01-lc4-1:fp0
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:a6",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10083',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8083',
            :libvirt__iface_name => 'fp24',
            auto_config: false
      # link for fp25 --> chassis01-lc4-1:fp1
      device.vm.network "private_network",
            :mac => "44:38:39:00:07:56",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10939',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8939',
            :libvirt__iface_name => 'fp25',
            auto_config: false
      # link for fp26 --> chassis01-lc4-1:fp2
      device.vm.network "private_network",
            :mac => "44:38:39:00:08:4c",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '11062',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '9062',
            :libvirt__iface_name => 'fp26',
            auto_config: false
      # link for fp27 --> chassis01-lc4-1:fp3
      device.vm.network "private_network",
            :mac => "44:38:39:00:07:b2",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10985',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8985',
            :libvirt__iface_name => 'fp27',
            auto_config: false
      # link for fp28 --> chassis01-lc4-2:fp0
      device.vm.network "private_network",
            :mac => "44:38:39:00:05:ba",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10733',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8733',
            :libvirt__iface_name => 'fp28',
            auto_config: false
      # link for fp29 --> chassis01-lc4-2:fp1
      device.vm.network "private_network",
            :mac => "44:38:39:00:07:74",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10954',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8954',
            :libvirt__iface_name => 'fp29',
            auto_config: false
      # link for fp30 --> chassis01-lc4-2:fp2
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:46",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10035',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8035',
            :libvirt__iface_name => 'fp30',
            auto_config: false
      # link for fp31 --> chassis01-lc4-2:fp3
      device.vm.network "private_network",
            :mac => "44:38:39:00:07:5a",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10941',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8941',
            :libvirt__iface_name => 'fp31',
            auto_config: false



    # Fixes "stdin: is not a tty" and "mesg: ttyname failed : Inappropriate ioctl for device"  messages --> https://github.com/mitchellh/vagrant/issues/1673
    device.vm.provision :shell , inline: "(sudo grep -q 'mesg n' /root/.profile 2>/dev/null && sudo sed -i '/mesg n/d' /root/.profile  2>/dev/null) || true;", privileged: false

    #Copy over Topology.dot File
    device.vm.provision "file", source: "topology.dot", destination: "~/topology.dot"
    device.vm.provision :shell, privileged: false, inline: "sudo mv ~/topology.dot /etc/ptm.d/topology.dot"


    # Run the Config specified in the Node Attributes
    device.vm.provision :shell , privileged: false, :inline => 'echo "$(whoami)" > /tmp/normal_user'
    device.vm.provision :shell , path: "./helper_scripts/extra_switch_config.sh"


    # Install Rules for the interface re-map
    device.vm.provision :shell , :inline => <<-delete_udev_directory
if [ -d "/etc/udev/rules.d/70-persistent-net.rules" ]; then
    rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
fi
rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
delete_udev_directory

device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:07:ea --> eth0"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:07:ea", NAME="eth0", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:40 --> fp0"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:40", NAME="fp0", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:08:94 --> fp1"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:08:94", NAME="fp1", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:05:fc --> fp2"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:05:fc", NAME="fp2", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:14 --> fp3"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:14", NAME="fp3", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:08:62 --> fp4"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:08:62", NAME="fp4", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:05:28 --> fp5"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:05:28", NAME="fp5", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:4e --> fp6"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:4e", NAME="fp6", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:07:18 --> fp7"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:07:18", NAME="fp7", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:05:6e --> fp8"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:05:6e", NAME="fp8", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:05:6a --> fp9"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:05:6a", NAME="fp9", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:06:2e --> fp10"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:06:2e", NAME="fp10", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:0c --> fp11"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:0c", NAME="fp11", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:08:30 --> fp12"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:08:30", NAME="fp12", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:06:b4 --> fp13"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:06:b4", NAME="fp13", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:d6 --> fp14"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:d6", NAME="fp14", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:06:d8 --> fp15"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:06:d8", NAME="fp15", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:06:42 --> fp16"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:06:42", NAME="fp16", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:10 --> fp17"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:10", NAME="fp17", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:08:5a --> fp18"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:08:5a", NAME="fp18", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:07:2e --> fp19"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:07:2e", NAME="fp19", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:38 --> fp20"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:38", NAME="fp20", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:06:66 --> fp21"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:06:66", NAME="fp21", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:05:5a --> fp22"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:05:5a", NAME="fp22", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:90 --> fp23"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:90", NAME="fp23", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:a6 --> fp24"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:a6", NAME="fp24", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:07:56 --> fp25"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:07:56", NAME="fp25", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:08:4c --> fp26"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:08:4c", NAME="fp26", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:07:b2 --> fp27"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:07:b2", NAME="fp27", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:05:ba --> fp28"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:05:ba", NAME="fp28", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:07:74 --> fp29"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:07:74", NAME="fp29", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:46 --> fp30"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:46", NAME="fp30", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:07:5a --> fp31"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:07:5a", NAME="fp31", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule

      device.vm.provision :shell , :inline => <<-vagrant_interface_rule
echo "  INFO: Adding UDEV Rule: Vagrant interface = vagrant"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{ifindex}=="2", NAME="vagrant", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
echo "#### UDEV Rules (/etc/udev/rules.d/70-persistent-net.rules) ####"
cat /etc/udev/rules.d/70-persistent-net.rules
vagrant_interface_rule

# Run Any Platform Specific Code and Apply the interface Re-map
    #   (may or may not perform a reboot depending on platform)
    device.vm.provision :shell , :inline => $script

end

  ##### DEFINE VM for chassis03-lc4-2 #####
  config.vm.define "chassis03-lc4-2" do |device|

    device.vm.hostname = "chassis03-lc4-2"

    device.vm.box = "CumulusCommunity/cumulus-vx"
    device.vm.box_version = "3.5.0"

    device.vm.provider :libvirt do |v|
      v.memory = 768
    end
    #   see note here: https://github.com/pradels/vagrant-libvirt#synced-folders
    device.vm.synced_folder ".", "/vagrant", disabled: true



    # NETWORK INTERFACES
      # link for eth0 --> oob-mgmt-switch4:swp34
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:6c",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10182',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8182',
            :libvirt__iface_name => 'eth0',
            auto_config: false
      # link for fp0 --> chassis03-fc1-1:fp28
      device.vm.network "private_network",
            :mac => "44:38:39:00:06:11",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8777',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10777',
            :libvirt__iface_name => 'fp0',
            auto_config: false
      # link for fp1 --> chassis03-fc1-1:fp29
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:91",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8585',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10585',
            :libvirt__iface_name => 'fp1',
            auto_config: false
      # link for fp2 --> chassis03-fc1-1:fp30
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:31",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8281',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10281',
            :libvirt__iface_name => 'fp2',
            auto_config: false
      # link for fp3 --> chassis03-fc1-1:fp31
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:0d",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8135',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10135',
            :libvirt__iface_name => 'fp3',
            auto_config: false
      # link for fp4 --> chassis03-fc2-1:fp28
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:c9",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8613',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10613',
            :libvirt__iface_name => 'fp4',
            auto_config: false
      # link for fp5 --> chassis03-fc2-1:fp29
      device.vm.network "private_network",
            :mac => "44:38:39:00:09:67",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '9204',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '11204',
            :libvirt__iface_name => 'fp5',
            auto_config: false
      # link for fp6 --> chassis03-fc2-1:fp30
      device.vm.network "private_network",
            :mac => "44:38:39:00:06:7f",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8832',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10832',
            :libvirt__iface_name => 'fp6',
            auto_config: false
      # link for fp7 --> chassis03-fc2-1:fp31
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:9b",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8078',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10078',
            :libvirt__iface_name => 'fp7',
            auto_config: false
      # link for fp8 --> chassis03-fc3-1:fp28
      device.vm.network "private_network",
            :mac => "44:38:39:00:06:1f",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8784',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10784',
            :libvirt__iface_name => 'fp8',
            auto_config: false
      # link for fp9 --> chassis03-fc3-1:fp29
      device.vm.network "private_network",
            :mac => "44:38:39:00:06:cd",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8871',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10871',
            :libvirt__iface_name => 'fp9',
            auto_config: false
      # link for fp10 --> chassis03-fc3-1:fp30
      device.vm.network "private_network",
            :mac => "44:38:39:00:05:57",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8684',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10684',
            :libvirt__iface_name => 'fp10',
            auto_config: false
      # link for fp11 --> chassis03-fc3-1:fp31
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:67",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8180',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10180',
            :libvirt__iface_name => 'fp11',
            auto_config: false
      # link for fp12 --> chassis03-fc4-1:fp28
      device.vm.network "private_network",
            :mac => "44:38:39:00:06:dd",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8879',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10879',
            :libvirt__iface_name => 'fp12',
            auto_config: false
      # link for fp13 --> chassis03-fc4-1:fp29
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:e1",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8369',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10369',
            :libvirt__iface_name => 'fp13',
            auto_config: false
      # link for fp14 --> chassis03-fc4-1:fp30
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:9d",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8463',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10463',
            :libvirt__iface_name => 'fp14',
            auto_config: false
      # link for fp15 --> chassis03-fc4-1:fp31
      device.vm.network "private_network",
            :mac => "44:38:39:00:07:af",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8984',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10984',
            :libvirt__iface_name => 'fp15',
            auto_config: false
      # link for swp1 --> leaf113:swp3
      device.vm.network "private_network",
            :mac => "44:38:39:00:07:ef",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '9016',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '11016',
            :libvirt__iface_name => 'swp1',
            auto_config: false
      # link for swp2 --> leaf114:swp3
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:65",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8051',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10051',
            :libvirt__iface_name => 'swp2',
            auto_config: false
      # link for swp3 --> leaf115:swp3
      device.vm.network "private_network",
            :mac => "44:38:39:00:08:6b",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '9078',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '11078',
            :libvirt__iface_name => 'swp3',
            auto_config: false
      # link for swp4 --> leaf116:swp3
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:33",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8282',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10282',
            :libvirt__iface_name => 'swp4',
            auto_config: false
      # link for swp5 --> leaf117:swp3
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:bf",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8352',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10352',
            :libvirt__iface_name => 'swp5',
            auto_config: false
      # link for swp6 --> leaf118:swp3
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:57",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8172',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10172',
            :libvirt__iface_name => 'swp6',
            auto_config: false
      # link for swp7 --> leaf119:swp3
      device.vm.network "private_network",
            :mac => "44:38:39:00:07:df",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '9008',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '11008',
            :libvirt__iface_name => 'swp7',
            auto_config: false
      # link for swp8 --> leaf120:swp3
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:1f",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8400',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10400',
            :libvirt__iface_name => 'swp8',
            auto_config: false
      # link for swp9 --> leaf121:swp3
      device.vm.network "private_network",
            :mac => "44:38:39:00:09:15",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '9163',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '11163',
            :libvirt__iface_name => 'swp9',
            auto_config: false
      # link for swp10 --> leaf122:swp3
      device.vm.network "private_network",
            :mac => "44:38:39:00:08:ab",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '9110',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '11110',
            :libvirt__iface_name => 'swp10',
            auto_config: false
      # link for swp11 --> leaf123:swp3
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:0b",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8390',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10390',
            :libvirt__iface_name => 'swp11',
            auto_config: false
      # link for swp12 --> leaf124:swp3
      device.vm.network "private_network",
            :mac => "44:38:39:00:06:d3",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8874',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10874',
            :libvirt__iface_name => 'swp12',
            auto_config: false
      # link for swp13 --> leaf125:swp3
      device.vm.network "private_network",
            :mac => "44:38:39:00:07:cd",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8999',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10999',
            :libvirt__iface_name => 'swp13',
            auto_config: false
      # link for swp14 --> leaf126:swp3
      device.vm.network "private_network",
            :mac => "44:38:39:00:06:e7",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8884',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10884',
            :libvirt__iface_name => 'swp14',
            auto_config: false
      # link for swp15 --> leaf127:swp3
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:05",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8515',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10515',
            :libvirt__iface_name => 'swp15',
            auto_config: false
      # link for swp16 --> leaf128:swp3
      device.vm.network "private_network",
            :mac => "44:38:39:00:06:03",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8770',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10770',
            :libvirt__iface_name => 'swp16',
            auto_config: false



    # Fixes "stdin: is not a tty" and "mesg: ttyname failed : Inappropriate ioctl for device"  messages --> https://github.com/mitchellh/vagrant/issues/1673
    device.vm.provision :shell , inline: "(sudo grep -q 'mesg n' /root/.profile 2>/dev/null && sudo sed -i '/mesg n/d' /root/.profile  2>/dev/null) || true;", privileged: false

    #Copy over Topology.dot File
    device.vm.provision "file", source: "topology.dot", destination: "~/topology.dot"
    device.vm.provision :shell, privileged: false, inline: "sudo mv ~/topology.dot /etc/ptm.d/topology.dot"


    # Run the Config specified in the Node Attributes
    device.vm.provision :shell , privileged: false, :inline => 'echo "$(whoami)" > /tmp/normal_user'
    device.vm.provision :shell , path: "./helper_scripts/extra_switch_config.sh"


    # Install Rules for the interface re-map
    device.vm.provision :shell , :inline => <<-delete_udev_directory
if [ -d "/etc/udev/rules.d/70-persistent-net.rules" ]; then
    rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
fi
rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
delete_udev_directory

device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:6c --> eth0"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:6c", NAME="eth0", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:06:11 --> fp0"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:06:11", NAME="fp0", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:91 --> fp1"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:91", NAME="fp1", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:31 --> fp2"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:31", NAME="fp2", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:0d --> fp3"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:0d", NAME="fp3", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:c9 --> fp4"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:c9", NAME="fp4", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:09:67 --> fp5"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:09:67", NAME="fp5", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:06:7f --> fp6"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:06:7f", NAME="fp6", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:9b --> fp7"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:9b", NAME="fp7", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:06:1f --> fp8"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:06:1f", NAME="fp8", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:06:cd --> fp9"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:06:cd", NAME="fp9", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:05:57 --> fp10"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:05:57", NAME="fp10", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:67 --> fp11"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:67", NAME="fp11", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:06:dd --> fp12"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:06:dd", NAME="fp12", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:e1 --> fp13"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:e1", NAME="fp13", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:9d --> fp14"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:9d", NAME="fp14", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:07:af --> fp15"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:07:af", NAME="fp15", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:07:ef --> swp1"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:07:ef", NAME="swp1", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:65 --> swp2"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:65", NAME="swp2", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:08:6b --> swp3"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:08:6b", NAME="swp3", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:33 --> swp4"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:33", NAME="swp4", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:bf --> swp5"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:bf", NAME="swp5", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:57 --> swp6"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:57", NAME="swp6", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:07:df --> swp7"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:07:df", NAME="swp7", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:1f --> swp8"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:1f", NAME="swp8", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:09:15 --> swp9"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:09:15", NAME="swp9", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:08:ab --> swp10"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:08:ab", NAME="swp10", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:0b --> swp11"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:0b", NAME="swp11", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:06:d3 --> swp12"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:06:d3", NAME="swp12", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:07:cd --> swp13"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:07:cd", NAME="swp13", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:06:e7 --> swp14"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:06:e7", NAME="swp14", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:05 --> swp15"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:05", NAME="swp15", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:06:03 --> swp16"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:06:03", NAME="swp16", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule

      device.vm.provision :shell , :inline => <<-vagrant_interface_rule
echo "  INFO: Adding UDEV Rule: Vagrant interface = vagrant"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{ifindex}=="2", NAME="vagrant", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
echo "#### UDEV Rules (/etc/udev/rules.d/70-persistent-net.rules) ####"
cat /etc/udev/rules.d/70-persistent-net.rules
vagrant_interface_rule

# Run Any Platform Specific Code and Apply the interface Re-map
    #   (may or may not perform a reboot depending on platform)
    device.vm.provision :shell , :inline => $script

end

  ##### DEFINE VM for chassis02-fc2-1 #####
  config.vm.define "chassis02-fc2-1" do |device|

    device.vm.hostname = "chassis02-fc2-1"

    device.vm.box = "CumulusCommunity/cumulus-vx"
    device.vm.box_version = "3.5.0"

    device.vm.provider :libvirt do |v|
      v.memory = 768
    end
    #   see note here: https://github.com/pradels/vagrant-libvirt#synced-folders
    device.vm.synced_folder ".", "/vagrant", disabled: true



    # NETWORK INTERFACES
      # link for eth0 --> oob-mgmt-switch4:swp24
      device.vm.network "private_network",
            :mac => "44:38:39:00:08:98",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '11100',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '9100',
            :libvirt__iface_name => 'eth0',
            auto_config: false
      # link for fp0 --> chassis02-lc1-1:fp4
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:74",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10442',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8442',
            :libvirt__iface_name => 'fp0',
            auto_config: false
      # link for fp1 --> chassis02-lc1-1:fp5
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:c6",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10227',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8227',
            :libvirt__iface_name => 'fp1',
            auto_config: false
      # link for fp2 --> chassis02-lc1-1:fp6
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:b2",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10473',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8473',
            :libvirt__iface_name => 'fp2',
            auto_config: false
      # link for fp3 --> chassis02-lc1-1:fp7
      device.vm.network "private_network",
            :mac => "44:38:39:00:07:a4",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10978',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8978',
            :libvirt__iface_name => 'fp3',
            auto_config: false
      # link for fp4 --> chassis02-lc1-2:fp4
      device.vm.network "private_network",
            :mac => "44:38:39:00:08:fc",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '11150',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '9150',
            :libvirt__iface_name => 'fp4',
            auto_config: false
      # link for fp5 --> chassis02-lc1-2:fp5
      device.vm.network "private_network",
            :mac => "44:38:39:00:06:92",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10841',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8841',
            :libvirt__iface_name => 'fp5',
            auto_config: false
      # link for fp6 --> chassis02-lc1-2:fp6
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:1a",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10013',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8013',
            :libvirt__iface_name => 'fp6',
            auto_config: false
      # link for fp7 --> chassis02-lc1-2:fp7
      device.vm.network "private_network",
            :mac => "44:38:39:00:05:44",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10674',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8674',
            :libvirt__iface_name => 'fp7',
            auto_config: false
      # link for fp8 --> chassis02-lc2-1:fp4
      device.vm.network "private_network",
            :mac => "44:38:39:00:05:08",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10644',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8644',
            :libvirt__iface_name => 'fp8',
            auto_config: false
      # link for fp9 --> chassis02-lc2-1:fp5
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:a0",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10336',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8336',
            :libvirt__iface_name => 'fp9',
            auto_config: false
      # link for fp10 --> chassis02-lc2-1:fp6
      device.vm.network "private_network",
            :mac => "44:38:39:00:06:98",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10844',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8844',
            :libvirt__iface_name => 'fp10',
            auto_config: false
      # link for fp11 --> chassis02-lc2-1:fp7
      device.vm.network "private_network",
            :mac => "44:38:39:00:06:f8",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10892',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8892',
            :libvirt__iface_name => 'fp11',
            auto_config: false
      # link for fp12 --> chassis02-lc2-2:fp4
      device.vm.network "private_network",
            :mac => "44:38:39:00:07:2c",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10918',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8918',
            :libvirt__iface_name => 'fp12',
            auto_config: false
      # link for fp13 --> chassis02-lc2-2:fp5
      device.vm.network "private_network",
            :mac => "44:38:39:00:05:8a",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10709',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8709',
            :libvirt__iface_name => 'fp13',
            auto_config: false
      # link for fp14 --> chassis02-lc2-2:fp6
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:46",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10419',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8419',
            :libvirt__iface_name => 'fp14',
            auto_config: false
      # link for fp15 --> chassis02-lc2-2:fp7
      device.vm.network "private_network",
            :mac => "44:38:39:00:05:9c",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10718',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8718',
            :libvirt__iface_name => 'fp15',
            auto_config: false
      # link for fp16 --> chassis02-lc3-1:fp4
      device.vm.network "private_network",
            :mac => "44:38:39:00:06:c6",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10867',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8867',
            :libvirt__iface_name => 'fp16',
            auto_config: false
      # link for fp17 --> chassis02-lc3-1:fp5
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:78",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10444',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8444',
            :libvirt__iface_name => 'fp17',
            auto_config: false
      # link for fp18 --> chassis02-lc3-1:fp6
      device.vm.network "private_network",
            :mac => "44:38:39:00:05:70",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10696',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8696',
            :libvirt__iface_name => 'fp18',
            auto_config: false
      # link for fp19 --> chassis02-lc3-1:fp7
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:be",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10095',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8095',
            :libvirt__iface_name => 'fp19',
            auto_config: false
      # link for fp20 --> chassis02-lc3-2:fp4
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:ac",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10342',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8342',
            :libvirt__iface_name => 'fp20',
            auto_config: false
      # link for fp21 --> chassis02-lc3-2:fp5
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:74",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10058',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8058',
            :libvirt__iface_name => 'fp21',
            auto_config: false
      # link for fp22 --> chassis02-lc3-2:fp6
      device.vm.network "private_network",
            :mac => "44:38:39:00:08:be",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '11119',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '9119',
            :libvirt__iface_name => 'fp22',
            auto_config: false
      # link for fp23 --> chassis02-lc3-2:fp7
      device.vm.network "private_network",
            :mac => "44:38:39:00:08:e4",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '11138',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '9138',
            :libvirt__iface_name => 'fp23',
            auto_config: false
      # link for fp24 --> chassis02-lc4-1:fp4
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:ce",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10615',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8615',
            :libvirt__iface_name => 'fp24',
            auto_config: false
      # link for fp25 --> chassis02-lc4-1:fp5
      device.vm.network "private_network",
            :mac => "44:38:39:00:06:a6",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10851',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8851',
            :libvirt__iface_name => 'fp25',
            auto_config: false
      # link for fp26 --> chassis02-lc4-1:fp6
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:98",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10204',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8204',
            :libvirt__iface_name => 'fp26',
            auto_config: false
      # link for fp27 --> chassis02-lc4-1:fp7
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:fa",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10509',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8509',
            :libvirt__iface_name => 'fp27',
            auto_config: false
      # link for fp28 --> chassis02-lc4-2:fp4
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:78",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10188',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8188',
            :libvirt__iface_name => 'fp28',
            auto_config: false
      # link for fp29 --> chassis02-lc4-2:fp5
      device.vm.network "private_network",
            :mac => "44:38:39:00:07:8e",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10967',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8967',
            :libvirt__iface_name => 'fp29',
            auto_config: false
      # link for fp30 --> chassis02-lc4-2:fp6
      device.vm.network "private_network",
            :mac => "44:38:39:00:05:26",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10659',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8659',
            :libvirt__iface_name => 'fp30',
            auto_config: false
      # link for fp31 --> chassis02-lc4-2:fp7
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:f8",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10380',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8380',
            :libvirt__iface_name => 'fp31',
            auto_config: false



    # Fixes "stdin: is not a tty" and "mesg: ttyname failed : Inappropriate ioctl for device"  messages --> https://github.com/mitchellh/vagrant/issues/1673
    device.vm.provision :shell , inline: "(sudo grep -q 'mesg n' /root/.profile 2>/dev/null && sudo sed -i '/mesg n/d' /root/.profile  2>/dev/null) || true;", privileged: false

    #Copy over Topology.dot File
    device.vm.provision "file", source: "topology.dot", destination: "~/topology.dot"
    device.vm.provision :shell, privileged: false, inline: "sudo mv ~/topology.dot /etc/ptm.d/topology.dot"


    # Run the Config specified in the Node Attributes
    device.vm.provision :shell , privileged: false, :inline => 'echo "$(whoami)" > /tmp/normal_user'
    device.vm.provision :shell , path: "./helper_scripts/extra_switch_config.sh"


    # Install Rules for the interface re-map
    device.vm.provision :shell , :inline => <<-delete_udev_directory
if [ -d "/etc/udev/rules.d/70-persistent-net.rules" ]; then
    rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
fi
rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
delete_udev_directory

device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:08:98 --> eth0"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:08:98", NAME="eth0", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:74 --> fp0"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:74", NAME="fp0", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:c6 --> fp1"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:c6", NAME="fp1", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:b2 --> fp2"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:b2", NAME="fp2", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:07:a4 --> fp3"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:07:a4", NAME="fp3", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:08:fc --> fp4"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:08:fc", NAME="fp4", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:06:92 --> fp5"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:06:92", NAME="fp5", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:1a --> fp6"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:1a", NAME="fp6", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:05:44 --> fp7"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:05:44", NAME="fp7", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:05:08 --> fp8"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:05:08", NAME="fp8", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:a0 --> fp9"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:a0", NAME="fp9", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:06:98 --> fp10"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:06:98", NAME="fp10", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:06:f8 --> fp11"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:06:f8", NAME="fp11", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:07:2c --> fp12"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:07:2c", NAME="fp12", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:05:8a --> fp13"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:05:8a", NAME="fp13", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:46 --> fp14"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:46", NAME="fp14", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:05:9c --> fp15"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:05:9c", NAME="fp15", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:06:c6 --> fp16"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:06:c6", NAME="fp16", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:78 --> fp17"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:78", NAME="fp17", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:05:70 --> fp18"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:05:70", NAME="fp18", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:be --> fp19"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:be", NAME="fp19", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:ac --> fp20"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:ac", NAME="fp20", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:74 --> fp21"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:74", NAME="fp21", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:08:be --> fp22"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:08:be", NAME="fp22", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:08:e4 --> fp23"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:08:e4", NAME="fp23", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:ce --> fp24"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:ce", NAME="fp24", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:06:a6 --> fp25"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:06:a6", NAME="fp25", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:98 --> fp26"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:98", NAME="fp26", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:fa --> fp27"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:fa", NAME="fp27", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:78 --> fp28"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:78", NAME="fp28", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:07:8e --> fp29"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:07:8e", NAME="fp29", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:05:26 --> fp30"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:05:26", NAME="fp30", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:f8 --> fp31"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:f8", NAME="fp31", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule

      device.vm.provision :shell , :inline => <<-vagrant_interface_rule
echo "  INFO: Adding UDEV Rule: Vagrant interface = vagrant"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{ifindex}=="2", NAME="vagrant", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
echo "#### UDEV Rules (/etc/udev/rules.d/70-persistent-net.rules) ####"
cat /etc/udev/rules.d/70-persistent-net.rules
vagrant_interface_rule

# Run Any Platform Specific Code and Apply the interface Re-map
    #   (may or may not perform a reboot depending on platform)
    device.vm.provision :shell , :inline => $script

end

  ##### DEFINE VM for chassis04-fc1-1 #####
  config.vm.define "chassis04-fc1-1" do |device|

    device.vm.hostname = "chassis04-fc1-1"

    device.vm.box = "CumulusCommunity/cumulus-vx"
    device.vm.box_version = "3.5.0"

    device.vm.provider :libvirt do |v|
      v.memory = 768
    end
    #   see note here: https://github.com/pradels/vagrant-libvirt#synced-folders
    device.vm.synced_folder ".", "/vagrant", disabled: true



    # NETWORK INTERFACES
      # link for eth0 --> oob-mgmt-switch4:swp47
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:be",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10351',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8351',
            :libvirt__iface_name => 'eth0',
            auto_config: false
      # link for fp0 --> chassis04-lc1-1:fp0
      device.vm.network "private_network",
            :mac => "44:38:39:00:06:a0",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10848',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8848',
            :libvirt__iface_name => 'fp0',
            auto_config: false
      # link for fp1 --> chassis04-lc1-1:fp1
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:b4",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10218',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8218',
            :libvirt__iface_name => 'fp1',
            auto_config: false
      # link for fp2 --> chassis04-lc1-1:fp2
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:8e",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10583',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8583',
            :libvirt__iface_name => 'fp2',
            auto_config: false
      # link for fp3 --> chassis04-lc1-1:fp3
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:12",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10137',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8137',
            :libvirt__iface_name => 'fp3',
            auto_config: false
      # link for fp4 --> chassis04-lc1-2:fp0
      device.vm.network "private_network",
            :mac => "44:38:39:00:06:78",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10828',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8828',
            :libvirt__iface_name => 'fp4',
            auto_config: false
      # link for fp5 --> chassis04-lc1-2:fp1
      device.vm.network "private_network",
            :mac => "44:38:39:00:06:0c",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10774',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8774',
            :libvirt__iface_name => 'fp5',
            auto_config: false
      # link for fp6 --> chassis04-lc1-2:fp2
      device.vm.network "private_network",
            :mac => "44:38:39:00:06:08",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10772',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8772',
            :libvirt__iface_name => 'fp6',
            auto_config: false
      # link for fp7 --> chassis04-lc1-2:fp3
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:d4",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10106',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8106',
            :libvirt__iface_name => 'fp7',
            auto_config: false
      # link for fp8 --> chassis04-lc2-1:fp0
      device.vm.network "private_network",
            :mac => "44:38:39:00:08:88",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '11092',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '9092',
            :libvirt__iface_name => 'fp8',
            auto_config: false
      # link for fp9 --> chassis04-lc2-1:fp1
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:0e",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10391',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8391',
            :libvirt__iface_name => 'fp9',
            auto_config: false
      # link for fp10 --> chassis04-lc2-1:fp2
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:fc",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10126',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8126',
            :libvirt__iface_name => 'fp10',
            auto_config: false
      # link for fp11 --> chassis04-lc2-1:fp3
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:0a",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10389',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8389',
            :libvirt__iface_name => 'fp11',
            auto_config: false
      # link for fp12 --> chassis04-lc2-2:fp0
      device.vm.network "private_network",
            :mac => "44:38:39:00:08:b4",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '11114',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '9114',
            :libvirt__iface_name => 'fp12',
            auto_config: false
      # link for fp13 --> chassis04-lc2-2:fp1
      device.vm.network "private_network",
            :mac => "44:38:39:00:05:8e",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10711',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8711',
            :libvirt__iface_name => 'fp13',
            auto_config: false
      # link for fp14 --> chassis04-lc2-2:fp2
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:02",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10385',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8385',
            :libvirt__iface_name => 'fp14',
            auto_config: false
      # link for fp15 --> chassis04-lc2-2:fp3
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:40",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10288',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8288',
            :libvirt__iface_name => 'fp15',
            auto_config: false
      # link for fp16 --> chassis04-lc3-1:fp0
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:52",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10169',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8169',
            :libvirt__iface_name => 'fp16',
            auto_config: false
      # link for fp17 --> chassis04-lc3-1:fp1
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:c0",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10096',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8096',
            :libvirt__iface_name => 'fp17',
            auto_config: false
      # link for fp18 --> chassis04-lc3-1:fp2
      device.vm.network "private_network",
            :mac => "44:38:39:00:09:50",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '11192',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '9192',
            :libvirt__iface_name => 'fp18',
            auto_config: false
      # link for fp19 --> chassis04-lc3-1:fp3
      device.vm.network "private_network",
            :mac => "44:38:39:00:05:34",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10666',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8666',
            :libvirt__iface_name => 'fp19',
            auto_config: false
      # link for fp20 --> chassis04-lc3-2:fp0
      device.vm.network "private_network",
            :mac => "44:38:39:00:08:54",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '11066',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '9066',
            :libvirt__iface_name => 'fp20',
            auto_config: false
      # link for fp21 --> chassis04-lc3-2:fp1
      device.vm.network "private_network",
            :mac => "44:38:39:00:05:d6",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10747',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8747',
            :libvirt__iface_name => 'fp21',
            auto_config: false
      # link for fp22 --> chassis04-lc3-2:fp2
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:46",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10291',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8291',
            :libvirt__iface_name => 'fp22',
            auto_config: false
      # link for fp23 --> chassis04-lc3-2:fp3
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:52",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10425',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8425',
            :libvirt__iface_name => 'fp23',
            auto_config: false
      # link for fp24 --> chassis04-lc4-1:fp0
      device.vm.network "private_network",
            :mac => "44:38:39:00:06:86",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10835',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8835',
            :libvirt__iface_name => 'fp24',
            auto_config: false
      # link for fp25 --> chassis04-lc4-1:fp1
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:66",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10307',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8307',
            :libvirt__iface_name => 'fp25',
            auto_config: false
      # link for fp26 --> chassis04-lc4-1:fp2
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:04",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10386',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8386',
            :libvirt__iface_name => 'fp26',
            auto_config: false
      # link for fp27 --> chassis04-lc4-1:fp3
      device.vm.network "private_network",
            :mac => "44:38:39:00:09:6a",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '11205',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '9205',
            :libvirt__iface_name => 'fp27',
            auto_config: false
      # link for fp28 --> chassis04-lc4-2:fp0
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:3c",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10158',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8158',
            :libvirt__iface_name => 'fp28',
            auto_config: false
      # link for fp29 --> chassis04-lc4-2:fp1
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:52",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10297',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8297',
            :libvirt__iface_name => 'fp29',
            auto_config: false
      # link for fp30 --> chassis04-lc4-2:fp2
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:74",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10314',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8314',
            :libvirt__iface_name => 'fp30',
            auto_config: false
      # link for fp31 --> chassis04-lc4-2:fp3
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:1e",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10271',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8271',
            :libvirt__iface_name => 'fp31',
            auto_config: false



    # Fixes "stdin: is not a tty" and "mesg: ttyname failed : Inappropriate ioctl for device"  messages --> https://github.com/mitchellh/vagrant/issues/1673
    device.vm.provision :shell , inline: "(sudo grep -q 'mesg n' /root/.profile 2>/dev/null && sudo sed -i '/mesg n/d' /root/.profile  2>/dev/null) || true;", privileged: false

    #Copy over Topology.dot File
    device.vm.provision "file", source: "topology.dot", destination: "~/topology.dot"
    device.vm.provision :shell, privileged: false, inline: "sudo mv ~/topology.dot /etc/ptm.d/topology.dot"


    # Run the Config specified in the Node Attributes
    device.vm.provision :shell , privileged: false, :inline => 'echo "$(whoami)" > /tmp/normal_user'
    device.vm.provision :shell , path: "./helper_scripts/extra_switch_config.sh"


    # Install Rules for the interface re-map
    device.vm.provision :shell , :inline => <<-delete_udev_directory
if [ -d "/etc/udev/rules.d/70-persistent-net.rules" ]; then
    rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
fi
rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
delete_udev_directory

device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:be --> eth0"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:be", NAME="eth0", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:06:a0 --> fp0"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:06:a0", NAME="fp0", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:b4 --> fp1"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:b4", NAME="fp1", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:8e --> fp2"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:8e", NAME="fp2", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:12 --> fp3"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:12", NAME="fp3", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:06:78 --> fp4"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:06:78", NAME="fp4", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:06:0c --> fp5"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:06:0c", NAME="fp5", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:06:08 --> fp6"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:06:08", NAME="fp6", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:d4 --> fp7"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:d4", NAME="fp7", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:08:88 --> fp8"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:08:88", NAME="fp8", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:0e --> fp9"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:0e", NAME="fp9", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:fc --> fp10"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:fc", NAME="fp10", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:0a --> fp11"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:0a", NAME="fp11", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:08:b4 --> fp12"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:08:b4", NAME="fp12", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:05:8e --> fp13"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:05:8e", NAME="fp13", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:02 --> fp14"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:02", NAME="fp14", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:40 --> fp15"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:40", NAME="fp15", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:52 --> fp16"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:52", NAME="fp16", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:c0 --> fp17"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:c0", NAME="fp17", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:09:50 --> fp18"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:09:50", NAME="fp18", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:05:34 --> fp19"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:05:34", NAME="fp19", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:08:54 --> fp20"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:08:54", NAME="fp20", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:05:d6 --> fp21"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:05:d6", NAME="fp21", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:46 --> fp22"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:46", NAME="fp22", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:52 --> fp23"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:52", NAME="fp23", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:06:86 --> fp24"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:06:86", NAME="fp24", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:66 --> fp25"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:66", NAME="fp25", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:04 --> fp26"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:04", NAME="fp26", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:09:6a --> fp27"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:09:6a", NAME="fp27", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:3c --> fp28"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:3c", NAME="fp28", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:52 --> fp29"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:52", NAME="fp29", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:74 --> fp30"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:74", NAME="fp30", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:1e --> fp31"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:1e", NAME="fp31", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule

      device.vm.provision :shell , :inline => <<-vagrant_interface_rule
echo "  INFO: Adding UDEV Rule: Vagrant interface = vagrant"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{ifindex}=="2", NAME="vagrant", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
echo "#### UDEV Rules (/etc/udev/rules.d/70-persistent-net.rules) ####"
cat /etc/udev/rules.d/70-persistent-net.rules
vagrant_interface_rule

# Run Any Platform Specific Code and Apply the interface Re-map
    #   (may or may not perform a reboot depending on platform)
    device.vm.provision :shell , :inline => $script

end

  ##### DEFINE VM for chassis04-lc2-1 #####
  config.vm.define "chassis04-lc2-1" do |device|

    device.vm.hostname = "chassis04-lc2-1"

    device.vm.box = "CumulusCommunity/cumulus-vx"
    device.vm.box_version = "3.5.0"

    device.vm.provider :libvirt do |v|
      v.memory = 768
    end
    #   see note here: https://github.com/pradels/vagrant-libvirt#synced-folders
    device.vm.synced_folder ".", "/vagrant", disabled: true



    # NETWORK INTERFACES
      # link for eth0 --> oob-mgmt-switch4:swp41
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:20",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10528',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8528',
            :libvirt__iface_name => 'eth0',
            auto_config: false
      # link for fp0 --> chassis04-fc1-1:fp8
      device.vm.network "private_network",
            :mac => "44:38:39:00:08:87",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '9092',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '11092',
            :libvirt__iface_name => 'fp0',
            auto_config: false
      # link for fp1 --> chassis04-fc1-1:fp9
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:0d",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8391',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10391',
            :libvirt__iface_name => 'fp1',
            auto_config: false
      # link for fp2 --> chassis04-fc1-1:fp10
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:fb",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8126',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10126',
            :libvirt__iface_name => 'fp2',
            auto_config: false
      # link for fp3 --> chassis04-fc1-1:fp11
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:09",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8389',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10389',
            :libvirt__iface_name => 'fp3',
            auto_config: false
      # link for fp4 --> chassis04-fc2-1:fp8
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:47",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8036',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10036',
            :libvirt__iface_name => 'fp4',
            auto_config: false
      # link for fp5 --> chassis04-fc2-1:fp9
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:b5",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8475',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10475',
            :libvirt__iface_name => 'fp5',
            auto_config: false
      # link for fp6 --> chassis04-fc2-1:fp10
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:6f",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8184',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10184',
            :libvirt__iface_name => 'fp6',
            auto_config: false
      # link for fp7 --> chassis04-fc2-1:fp11
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:07",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8388',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10388',
            :libvirt__iface_name => 'fp7',
            auto_config: false
      # link for fp8 --> chassis04-fc3-1:fp8
      device.vm.network "private_network",
            :mac => "44:38:39:00:06:b7",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8860',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10860',
            :libvirt__iface_name => 'fp8',
            auto_config: false
      # link for fp9 --> chassis04-fc3-1:fp9
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:61",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8177',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10177',
            :libvirt__iface_name => 'fp9',
            auto_config: false
      # link for fp10 --> chassis04-fc3-1:fp10
      device.vm.network "private_network",
            :mac => "44:38:39:00:08:6d",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '9079',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '11079',
            :libvirt__iface_name => 'fp10',
            auto_config: false
      # link for fp11 --> chassis04-fc3-1:fp11
      device.vm.network "private_network",
            :mac => "44:38:39:00:08:69",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '9077',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '11077',
            :libvirt__iface_name => 'fp11',
            auto_config: false
      # link for fp12 --> chassis04-fc4-1:fp8
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:49",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8037',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10037',
            :libvirt__iface_name => 'fp12',
            auto_config: false
      # link for fp13 --> chassis04-fc4-1:fp9
      device.vm.network "private_network",
            :mac => "44:38:39:00:07:5d",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8943',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10943',
            :libvirt__iface_name => 'fp13',
            auto_config: false
      # link for fp14 --> chassis04-fc4-1:fp10
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:79",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8189',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10189',
            :libvirt__iface_name => 'fp14',
            auto_config: false
      # link for fp15 --> chassis04-fc4-1:fp11
      device.vm.network "private_network",
            :mac => "44:38:39:00:05:bd",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8735',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10735',
            :libvirt__iface_name => 'fp15',
            auto_config: false
      # link for swp1 --> leaf33:swp4
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:b5",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8091',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10091',
            :libvirt__iface_name => 'swp1',
            auto_config: false
      # link for swp2 --> leaf34:swp4
      device.vm.network "private_network",
            :mac => "44:38:39:00:08:7f",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '9088',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '11088',
            :libvirt__iface_name => 'swp2',
            auto_config: false
      # link for swp3 --> leaf35:swp4
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:09",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8261',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10261',
            :libvirt__iface_name => 'swp3',
            auto_config: false
      # link for swp4 --> leaf36:swp4
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:99",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8205',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10205',
            :libvirt__iface_name => 'swp4',
            auto_config: false
      # link for swp5 --> leaf37:swp4
      device.vm.network "private_network",
            :mac => "44:38:39:00:06:c3",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8866',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10866',
            :libvirt__iface_name => 'swp5',
            auto_config: false
      # link for swp6 --> leaf38:swp4
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:0b",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8518',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10518',
            :libvirt__iface_name => 'swp6',
            auto_config: false
      # link for swp7 --> leaf39:swp4
      device.vm.network "private_network",
            :mac => "44:38:39:00:07:d1",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '9001',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '11001',
            :libvirt__iface_name => 'swp7',
            auto_config: false
      # link for swp8 --> leaf40:swp4
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:7b",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8446',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10446',
            :libvirt__iface_name => 'swp8',
            auto_config: false
      # link for swp9 --> leaf41:swp4
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:5b",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8430',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10430',
            :libvirt__iface_name => 'swp9',
            auto_config: false
      # link for swp10 --> leaf42:swp4
      device.vm.network "private_network",
            :mac => "44:38:39:00:08:6f",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '9080',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '11080',
            :libvirt__iface_name => 'swp10',
            auto_config: false
      # link for swp11 --> leaf43:swp4
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:cb",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8486',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10486',
            :libvirt__iface_name => 'swp11',
            auto_config: false
      # link for swp12 --> leaf44:swp4
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:e3",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8114',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10114',
            :libvirt__iface_name => 'swp12',
            auto_config: false
      # link for swp13 --> leaf45:swp4
      device.vm.network "private_network",
            :mac => "44:38:39:00:09:03",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '9154',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '11154',
            :libvirt__iface_name => 'swp13',
            auto_config: false
      # link for swp14 --> leaf46:swp4
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:9b",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8590',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10590',
            :libvirt__iface_name => 'swp14',
            auto_config: false
      # link for swp15 --> leaf47:swp4
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:c9",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8357',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10357',
            :libvirt__iface_name => 'swp15',
            auto_config: false
      # link for swp16 --> leaf48:swp4
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:39",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8285',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10285',
            :libvirt__iface_name => 'swp16',
            auto_config: false



    # Fixes "stdin: is not a tty" and "mesg: ttyname failed : Inappropriate ioctl for device"  messages --> https://github.com/mitchellh/vagrant/issues/1673
    device.vm.provision :shell , inline: "(sudo grep -q 'mesg n' /root/.profile 2>/dev/null && sudo sed -i '/mesg n/d' /root/.profile  2>/dev/null) || true;", privileged: false

    #Copy over Topology.dot File
    device.vm.provision "file", source: "topology.dot", destination: "~/topology.dot"
    device.vm.provision :shell, privileged: false, inline: "sudo mv ~/topology.dot /etc/ptm.d/topology.dot"


    # Run the Config specified in the Node Attributes
    device.vm.provision :shell , privileged: false, :inline => 'echo "$(whoami)" > /tmp/normal_user'
    device.vm.provision :shell , path: "./helper_scripts/extra_switch_config.sh"


    # Install Rules for the interface re-map
    device.vm.provision :shell , :inline => <<-delete_udev_directory
if [ -d "/etc/udev/rules.d/70-persistent-net.rules" ]; then
    rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
fi
rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
delete_udev_directory

device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:20 --> eth0"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:20", NAME="eth0", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:08:87 --> fp0"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:08:87", NAME="fp0", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:0d --> fp1"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:0d", NAME="fp1", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:fb --> fp2"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:fb", NAME="fp2", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:09 --> fp3"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:09", NAME="fp3", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:47 --> fp4"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:47", NAME="fp4", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:b5 --> fp5"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:b5", NAME="fp5", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:6f --> fp6"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:6f", NAME="fp6", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:07 --> fp7"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:07", NAME="fp7", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:06:b7 --> fp8"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:06:b7", NAME="fp8", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:61 --> fp9"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:61", NAME="fp9", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:08:6d --> fp10"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:08:6d", NAME="fp10", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:08:69 --> fp11"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:08:69", NAME="fp11", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:49 --> fp12"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:49", NAME="fp12", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:07:5d --> fp13"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:07:5d", NAME="fp13", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:79 --> fp14"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:79", NAME="fp14", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:05:bd --> fp15"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:05:bd", NAME="fp15", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:b5 --> swp1"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:b5", NAME="swp1", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:08:7f --> swp2"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:08:7f", NAME="swp2", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:09 --> swp3"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:09", NAME="swp3", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:99 --> swp4"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:99", NAME="swp4", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:06:c3 --> swp5"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:06:c3", NAME="swp5", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:0b --> swp6"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:0b", NAME="swp6", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:07:d1 --> swp7"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:07:d1", NAME="swp7", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:7b --> swp8"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:7b", NAME="swp8", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:5b --> swp9"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:5b", NAME="swp9", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:08:6f --> swp10"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:08:6f", NAME="swp10", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:cb --> swp11"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:cb", NAME="swp11", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:e3 --> swp12"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:e3", NAME="swp12", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:09:03 --> swp13"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:09:03", NAME="swp13", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:9b --> swp14"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:9b", NAME="swp14", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:c9 --> swp15"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:c9", NAME="swp15", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:39 --> swp16"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:39", NAME="swp16", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule

      device.vm.provision :shell , :inline => <<-vagrant_interface_rule
echo "  INFO: Adding UDEV Rule: Vagrant interface = vagrant"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{ifindex}=="2", NAME="vagrant", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
echo "#### UDEV Rules (/etc/udev/rules.d/70-persistent-net.rules) ####"
cat /etc/udev/rules.d/70-persistent-net.rules
vagrant_interface_rule

# Run Any Platform Specific Code and Apply the interface Re-map
    #   (may or may not perform a reboot depending on platform)
    device.vm.provision :shell , :inline => $script

end

  ##### DEFINE VM for chassis04-lc2-2 #####
  config.vm.define "chassis04-lc2-2" do |device|

    device.vm.hostname = "chassis04-lc2-2"

    device.vm.box = "CumulusCommunity/cumulus-vx"
    device.vm.box_version = "3.5.0"

    device.vm.provider :libvirt do |v|
      v.memory = 768
    end
    #   see note here: https://github.com/pradels/vagrant-libvirt#synced-folders
    device.vm.synced_folder ".", "/vagrant", disabled: true



    # NETWORK INTERFACES
      # link for eth0 --> oob-mgmt-switch4:swp42
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:e0",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10496',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8496',
            :libvirt__iface_name => 'eth0',
            auto_config: false
      # link for fp0 --> chassis04-fc1-1:fp12
      device.vm.network "private_network",
            :mac => "44:38:39:00:08:b3",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '9114',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '11114',
            :libvirt__iface_name => 'fp0',
            auto_config: false
      # link for fp1 --> chassis04-fc1-1:fp13
      device.vm.network "private_network",
            :mac => "44:38:39:00:05:8d",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8711',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10711',
            :libvirt__iface_name => 'fp1',
            auto_config: false
      # link for fp2 --> chassis04-fc1-1:fp14
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:01",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8385',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10385',
            :libvirt__iface_name => 'fp2',
            auto_config: false
      # link for fp3 --> chassis04-fc1-1:fp15
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:3f",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8288',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10288',
            :libvirt__iface_name => 'fp3',
            auto_config: false
      # link for fp4 --> chassis04-fc2-1:fp12
      device.vm.network "private_network",
            :mac => "44:38:39:00:06:25",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8787',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10787',
            :libvirt__iface_name => 'fp4',
            auto_config: false
      # link for fp5 --> chassis04-fc2-1:fp13
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:27",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8532',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10532',
            :libvirt__iface_name => 'fp5',
            auto_config: false
      # link for fp6 --> chassis04-fc2-1:fp14
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:c3",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8226',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10226',
            :libvirt__iface_name => 'fp6',
            auto_config: false
      # link for fp7 --> chassis04-fc2-1:fp15
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:9f",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8208',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10208',
            :libvirt__iface_name => 'fp7',
            auto_config: false
      # link for fp8 --> chassis04-fc3-1:fp12
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:fd",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8255',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10255',
            :libvirt__iface_name => 'fp8',
            auto_config: false
      # link for fp9 --> chassis04-fc3-1:fp13
      device.vm.network "private_network",
            :mac => "44:38:39:00:05:e3",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8754',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10754',
            :libvirt__iface_name => 'fp9',
            auto_config: false
      # link for fp10 --> chassis04-fc3-1:fp14
      device.vm.network "private_network",
            :mac => "44:38:39:00:05:dd",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8751',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10751',
            :libvirt__iface_name => 'fp10',
            auto_config: false
      # link for fp11 --> chassis04-fc3-1:fp15
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:5d",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8175',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10175',
            :libvirt__iface_name => 'fp11',
            auto_config: false
      # link for fp12 --> chassis04-fc4-1:fp12
      device.vm.network "private_network",
            :mac => "44:38:39:00:08:cb",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '9126',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '11126',
            :libvirt__iface_name => 'fp12',
            auto_config: false
      # link for fp13 --> chassis04-fc4-1:fp13
      device.vm.network "private_network",
            :mac => "44:38:39:00:08:bb",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '9118',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '11118',
            :libvirt__iface_name => 'fp13',
            auto_config: false
      # link for fp14 --> chassis04-fc4-1:fp14
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:6f",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8056',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10056',
            :libvirt__iface_name => 'fp14',
            auto_config: false
      # link for fp15 --> chassis04-fc4-1:fp15
      device.vm.network "private_network",
            :mac => "44:38:39:00:06:29",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8789',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10789',
            :libvirt__iface_name => 'fp15',
            auto_config: false
      # link for swp1 --> leaf49:swp4
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:65",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8179',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10179',
            :libvirt__iface_name => 'swp1',
            auto_config: false
      # link for swp2 --> leaf50:swp4
      device.vm.network "private_network",
            :mac => "44:38:39:00:08:0b",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '9030',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '11030',
            :libvirt__iface_name => 'swp2',
            auto_config: false
      # link for swp3 --> leaf51:swp4
      device.vm.network "private_network",
            :mac => "44:38:39:00:07:2f",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8920',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10920',
            :libvirt__iface_name => 'swp3',
            auto_config: false
      # link for swp4 --> leaf52:swp4
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:a7",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8212',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10212',
            :libvirt__iface_name => 'swp4',
            auto_config: false
      # link for swp5 --> leaf53:swp4
      device.vm.network "private_network",
            :mac => "44:38:39:00:05:75",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8699',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10699',
            :libvirt__iface_name => 'swp5',
            auto_config: false
      # link for swp6 --> leaf54:swp4
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:dd",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8367',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10367',
            :libvirt__iface_name => 'swp6',
            auto_config: false
      # link for swp7 --> leaf55:swp4
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:cd",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8487',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10487',
            :libvirt__iface_name => 'swp7',
            auto_config: false
      # link for swp8 --> leaf56:swp4
      device.vm.network "private_network",
            :mac => "44:38:39:00:06:17",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8780',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10780',
            :libvirt__iface_name => 'swp8',
            auto_config: false
      # link for swp9 --> leaf57:swp4
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:7f",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8320',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10320',
            :libvirt__iface_name => 'swp9',
            auto_config: false
      # link for swp10 --> leaf58:swp4
      device.vm.network "private_network",
            :mac => "44:38:39:00:05:ff",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8768',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10768',
            :libvirt__iface_name => 'swp10',
            auto_config: false
      # link for swp11 --> leaf59:swp4
      device.vm.network "private_network",
            :mac => "44:38:39:00:07:e5",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '9011',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '11011',
            :libvirt__iface_name => 'swp11',
            auto_config: false
      # link for swp12 --> leaf60:swp4
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:49",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8165',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10165',
            :libvirt__iface_name => 'swp12',
            auto_config: false
      # link for swp13 --> leaf61:swp4
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:85",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8195',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10195',
            :libvirt__iface_name => 'swp13',
            auto_config: false
      # link for swp14 --> leaf62:swp4
      device.vm.network "private_network",
            :mac => "44:38:39:00:05:77",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8700',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10700',
            :libvirt__iface_name => 'swp14',
            auto_config: false
      # link for swp15 --> leaf63:swp4
      device.vm.network "private_network",
            :mac => "44:38:39:00:09:53",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '9194',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '11194',
            :libvirt__iface_name => 'swp15',
            auto_config: false
      # link for swp16 --> leaf64:swp4
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:85",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8323',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10323',
            :libvirt__iface_name => 'swp16',
            auto_config: false



    # Fixes "stdin: is not a tty" and "mesg: ttyname failed : Inappropriate ioctl for device"  messages --> https://github.com/mitchellh/vagrant/issues/1673
    device.vm.provision :shell , inline: "(sudo grep -q 'mesg n' /root/.profile 2>/dev/null && sudo sed -i '/mesg n/d' /root/.profile  2>/dev/null) || true;", privileged: false

    #Copy over Topology.dot File
    device.vm.provision "file", source: "topology.dot", destination: "~/topology.dot"
    device.vm.provision :shell, privileged: false, inline: "sudo mv ~/topology.dot /etc/ptm.d/topology.dot"


    # Run the Config specified in the Node Attributes
    device.vm.provision :shell , privileged: false, :inline => 'echo "$(whoami)" > /tmp/normal_user'
    device.vm.provision :shell , path: "./helper_scripts/extra_switch_config.sh"


    # Install Rules for the interface re-map
    device.vm.provision :shell , :inline => <<-delete_udev_directory
if [ -d "/etc/udev/rules.d/70-persistent-net.rules" ]; then
    rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
fi
rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
delete_udev_directory

device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:e0 --> eth0"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:e0", NAME="eth0", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:08:b3 --> fp0"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:08:b3", NAME="fp0", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:05:8d --> fp1"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:05:8d", NAME="fp1", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:01 --> fp2"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:01", NAME="fp2", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:3f --> fp3"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:3f", NAME="fp3", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:06:25 --> fp4"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:06:25", NAME="fp4", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:27 --> fp5"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:27", NAME="fp5", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:c3 --> fp6"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:c3", NAME="fp6", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:9f --> fp7"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:9f", NAME="fp7", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:fd --> fp8"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:fd", NAME="fp8", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:05:e3 --> fp9"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:05:e3", NAME="fp9", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:05:dd --> fp10"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:05:dd", NAME="fp10", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:5d --> fp11"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:5d", NAME="fp11", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:08:cb --> fp12"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:08:cb", NAME="fp12", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:08:bb --> fp13"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:08:bb", NAME="fp13", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:6f --> fp14"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:6f", NAME="fp14", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:06:29 --> fp15"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:06:29", NAME="fp15", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:65 --> swp1"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:65", NAME="swp1", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:08:0b --> swp2"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:08:0b", NAME="swp2", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:07:2f --> swp3"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:07:2f", NAME="swp3", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:a7 --> swp4"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:a7", NAME="swp4", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:05:75 --> swp5"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:05:75", NAME="swp5", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:dd --> swp6"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:dd", NAME="swp6", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:cd --> swp7"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:cd", NAME="swp7", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:06:17 --> swp8"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:06:17", NAME="swp8", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:7f --> swp9"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:7f", NAME="swp9", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:05:ff --> swp10"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:05:ff", NAME="swp10", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:07:e5 --> swp11"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:07:e5", NAME="swp11", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:49 --> swp12"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:49", NAME="swp12", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:85 --> swp13"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:85", NAME="swp13", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:05:77 --> swp14"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:05:77", NAME="swp14", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:09:53 --> swp15"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:09:53", NAME="swp15", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:85 --> swp16"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:85", NAME="swp16", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule

      device.vm.provision :shell , :inline => <<-vagrant_interface_rule
echo "  INFO: Adding UDEV Rule: Vagrant interface = vagrant"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{ifindex}=="2", NAME="vagrant", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
echo "#### UDEV Rules (/etc/udev/rules.d/70-persistent-net.rules) ####"
cat /etc/udev/rules.d/70-persistent-net.rules
vagrant_interface_rule

# Run Any Platform Specific Code and Apply the interface Re-map
    #   (may or may not perform a reboot depending on platform)
    device.vm.provision :shell , :inline => $script

end

  ##### DEFINE VM for chassis04-fc2-1 #####
  config.vm.define "chassis04-fc2-1" do |device|

    device.vm.hostname = "chassis04-fc2-1"

    device.vm.box = "CumulusCommunity/cumulus-vx"
    device.vm.box_version = "3.5.0"

    device.vm.provider :libvirt do |v|
      v.memory = 768
    end
    #   see note here: https://github.com/pradels/vagrant-libvirt#synced-folders
    device.vm.synced_folder ".", "/vagrant", disabled: true



    # NETWORK INTERFACES
      # link for eth0 --> oob-mgmt-switch4:swp48
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:78",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10572',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8572',
            :libvirt__iface_name => 'eth0',
            auto_config: false
      # link for fp0 --> chassis04-lc1-1:fp4
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:fa",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10253',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8253',
            :libvirt__iface_name => 'fp0',
            auto_config: false
      # link for fp1 --> chassis04-lc1-1:fp5
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:f0",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10376',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8376',
            :libvirt__iface_name => 'fp1',
            auto_config: false
      # link for fp2 --> chassis04-lc1-1:fp6
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:e2",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10625',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8625',
            :libvirt__iface_name => 'fp2',
            auto_config: false
      # link for fp3 --> chassis04-lc1-1:fp7
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:e2",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10113',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8113',
            :libvirt__iface_name => 'fp3',
            auto_config: false
      # link for fp4 --> chassis04-lc1-2:fp4
      device.vm.network "private_network",
            :mac => "44:38:39:00:05:a6",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10723',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8723',
            :libvirt__iface_name => 'fp4',
            auto_config: false
      # link for fp5 --> chassis04-lc1-2:fp5
      device.vm.network "private_network",
            :mac => "44:38:39:00:09:22",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '11169',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '9169',
            :libvirt__iface_name => 'fp5',
            auto_config: false
      # link for fp6 --> chassis04-lc1-2:fp6
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:d4",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10234',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8234',
            :libvirt__iface_name => 'fp6',
            auto_config: false
      # link for fp7 --> chassis04-lc1-2:fp7
      device.vm.network "private_network",
            :mac => "44:38:39:00:09:4e",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '11191',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '9191',
            :libvirt__iface_name => 'fp7',
            auto_config: false
      # link for fp8 --> chassis04-lc2-1:fp4
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:48",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10036',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8036',
            :libvirt__iface_name => 'fp8',
            auto_config: false
      # link for fp9 --> chassis04-lc2-1:fp5
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:b6",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10475',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8475',
            :libvirt__iface_name => 'fp9',
            auto_config: false
      # link for fp10 --> chassis04-lc2-1:fp6
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:70",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10184',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8184',
            :libvirt__iface_name => 'fp10',
            auto_config: false
      # link for fp11 --> chassis04-lc2-1:fp7
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:08",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10388',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8388',
            :libvirt__iface_name => 'fp11',
            auto_config: false
      # link for fp12 --> chassis04-lc2-2:fp4
      device.vm.network "private_network",
            :mac => "44:38:39:00:06:26",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10787',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8787',
            :libvirt__iface_name => 'fp12',
            auto_config: false
      # link for fp13 --> chassis04-lc2-2:fp5
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:28",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10532',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8532',
            :libvirt__iface_name => 'fp13',
            auto_config: false
      # link for fp14 --> chassis04-lc2-2:fp6
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:c4",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10226',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8226',
            :libvirt__iface_name => 'fp14',
            auto_config: false
      # link for fp15 --> chassis04-lc2-2:fp7
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:a0",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10208',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8208',
            :libvirt__iface_name => 'fp15',
            auto_config: false
      # link for fp16 --> chassis04-lc3-1:fp4
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:42",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10289',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8289',
            :libvirt__iface_name => 'fp16',
            auto_config: false
      # link for fp17 --> chassis04-lc3-1:fp5
      device.vm.network "private_network",
            :mac => "44:38:39:00:07:4c",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10934',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8934',
            :libvirt__iface_name => 'fp17',
            auto_config: false
      # link for fp18 --> chassis04-lc3-1:fp6
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:bc",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10478',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8478',
            :libvirt__iface_name => 'fp18',
            auto_config: false
      # link for fp19 --> chassis04-lc3-1:fp7
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:36",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10155',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8155',
            :libvirt__iface_name => 'fp19',
            auto_config: false
      # link for fp20 --> chassis04-lc3-2:fp4
      device.vm.network "private_network",
            :mac => "44:38:39:00:06:4e",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10807',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8807',
            :libvirt__iface_name => 'fp20',
            auto_config: false
      # link for fp21 --> chassis04-lc3-2:fp5
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:fe",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10511',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8511',
            :libvirt__iface_name => 'fp21',
            auto_config: false
      # link for fp22 --> chassis04-lc3-2:fp6
      device.vm.network "private_network",
            :mac => "44:38:39:00:08:c4",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '11122',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '9122',
            :libvirt__iface_name => 'fp22',
            auto_config: false
      # link for fp23 --> chassis04-lc3-2:fp7
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:ae",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10087',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8087',
            :libvirt__iface_name => 'fp23',
            auto_config: false
      # link for fp24 --> chassis04-lc4-1:fp4
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:82",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10577',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8577',
            :libvirt__iface_name => 'fp24',
            auto_config: false
      # link for fp25 --> chassis04-lc4-1:fp5
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:8a",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10453',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8453',
            :libvirt__iface_name => 'fp25',
            auto_config: false
      # link for fp26 --> chassis04-lc4-1:fp6
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:6c",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10566',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8566',
            :libvirt__iface_name => 'fp26',
            auto_config: false
      # link for fp27 --> chassis04-lc4-1:fp7
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:5a",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10173',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8173',
            :libvirt__iface_name => 'fp27',
            auto_config: false
      # link for fp28 --> chassis04-lc4-2:fp4
      device.vm.network "private_network",
            :mac => "44:38:39:00:09:2e",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '11175',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '9175',
            :libvirt__iface_name => 'fp28',
            auto_config: false
      # link for fp29 --> chassis04-lc4-2:fp5
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:fa",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10637',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8637',
            :libvirt__iface_name => 'fp29',
            auto_config: false
      # link for fp30 --> chassis04-lc4-2:fp6
      device.vm.network "private_network",
            :mac => "44:38:39:00:08:d8",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '11132',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '9132',
            :libvirt__iface_name => 'fp30',
            auto_config: false
      # link for fp31 --> chassis04-lc4-2:fp7
      device.vm.network "private_network",
            :mac => "44:38:39:00:08:f2",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '11145',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '9145',
            :libvirt__iface_name => 'fp31',
            auto_config: false



    # Fixes "stdin: is not a tty" and "mesg: ttyname failed : Inappropriate ioctl for device"  messages --> https://github.com/mitchellh/vagrant/issues/1673
    device.vm.provision :shell , inline: "(sudo grep -q 'mesg n' /root/.profile 2>/dev/null && sudo sed -i '/mesg n/d' /root/.profile  2>/dev/null) || true;", privileged: false

    #Copy over Topology.dot File
    device.vm.provision "file", source: "topology.dot", destination: "~/topology.dot"
    device.vm.provision :shell, privileged: false, inline: "sudo mv ~/topology.dot /etc/ptm.d/topology.dot"


    # Run the Config specified in the Node Attributes
    device.vm.provision :shell , privileged: false, :inline => 'echo "$(whoami)" > /tmp/normal_user'
    device.vm.provision :shell , path: "./helper_scripts/extra_switch_config.sh"


    # Install Rules for the interface re-map
    device.vm.provision :shell , :inline => <<-delete_udev_directory
if [ -d "/etc/udev/rules.d/70-persistent-net.rules" ]; then
    rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
fi
rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
delete_udev_directory

device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:78 --> eth0"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:78", NAME="eth0", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:fa --> fp0"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:fa", NAME="fp0", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:f0 --> fp1"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:f0", NAME="fp1", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:e2 --> fp2"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:e2", NAME="fp2", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:e2 --> fp3"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:e2", NAME="fp3", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:05:a6 --> fp4"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:05:a6", NAME="fp4", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:09:22 --> fp5"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:09:22", NAME="fp5", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:d4 --> fp6"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:d4", NAME="fp6", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:09:4e --> fp7"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:09:4e", NAME="fp7", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:48 --> fp8"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:48", NAME="fp8", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:b6 --> fp9"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:b6", NAME="fp9", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:70 --> fp10"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:70", NAME="fp10", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:08 --> fp11"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:08", NAME="fp11", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:06:26 --> fp12"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:06:26", NAME="fp12", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:28 --> fp13"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:28", NAME="fp13", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:c4 --> fp14"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:c4", NAME="fp14", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:a0 --> fp15"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:a0", NAME="fp15", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:42 --> fp16"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:42", NAME="fp16", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:07:4c --> fp17"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:07:4c", NAME="fp17", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:bc --> fp18"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:bc", NAME="fp18", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:36 --> fp19"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:36", NAME="fp19", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:06:4e --> fp20"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:06:4e", NAME="fp20", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:fe --> fp21"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:fe", NAME="fp21", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:08:c4 --> fp22"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:08:c4", NAME="fp22", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:ae --> fp23"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:ae", NAME="fp23", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:82 --> fp24"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:82", NAME="fp24", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:8a --> fp25"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:8a", NAME="fp25", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:6c --> fp26"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:6c", NAME="fp26", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:5a --> fp27"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:5a", NAME="fp27", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:09:2e --> fp28"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:09:2e", NAME="fp28", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:fa --> fp29"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:fa", NAME="fp29", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:08:d8 --> fp30"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:08:d8", NAME="fp30", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:08:f2 --> fp31"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:08:f2", NAME="fp31", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule

      device.vm.provision :shell , :inline => <<-vagrant_interface_rule
echo "  INFO: Adding UDEV Rule: Vagrant interface = vagrant"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{ifindex}=="2", NAME="vagrant", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
echo "#### UDEV Rules (/etc/udev/rules.d/70-persistent-net.rules) ####"
cat /etc/udev/rules.d/70-persistent-net.rules
vagrant_interface_rule

# Run Any Platform Specific Code and Apply the interface Re-map
    #   (may or may not perform a reboot depending on platform)
    device.vm.provision :shell , :inline => $script

end

  ##### DEFINE VM for chassis03-fc2-1 #####
  config.vm.define "chassis03-fc2-1" do |device|

    device.vm.hostname = "chassis03-fc2-1"

    device.vm.box = "CumulusCommunity/cumulus-vx"
    device.vm.box_version = "3.5.0"

    device.vm.provider :libvirt do |v|
      v.memory = 768
    end
    #   see note here: https://github.com/pradels/vagrant-libvirt#synced-folders
    device.vm.synced_folder ".", "/vagrant", disabled: true



    # NETWORK INTERFACES
      # link for eth0 --> oob-mgmt-switch4:swp36
      device.vm.network "private_network",
            :mac => "44:38:39:00:08:c6",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '11123',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '9123',
            :libvirt__iface_name => 'eth0',
            auto_config: false
      # link for fp0 --> chassis03-lc1-1:fp4
      device.vm.network "private_network",
            :mac => "44:38:39:00:09:66",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '11203',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '9203',
            :libvirt__iface_name => 'fp0',
            auto_config: false
      # link for fp1 --> chassis03-lc1-1:fp5
      device.vm.network "private_network",
            :mac => "44:38:39:00:05:32",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10665',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8665',
            :libvirt__iface_name => 'fp1',
            auto_config: false
      # link for fp2 --> chassis03-lc1-1:fp6
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:b8",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10220',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8220',
            :libvirt__iface_name => 'fp2',
            auto_config: false
      # link for fp3 --> chassis03-lc1-1:fp7
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:da",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10109',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8109',
            :libvirt__iface_name => 'fp3',
            auto_config: false
      # link for fp4 --> chassis03-lc1-2:fp4
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:e8",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10244',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8244',
            :libvirt__iface_name => 'fp4',
            auto_config: false
      # link for fp5 --> chassis03-lc1-2:fp5
      device.vm.network "private_network",
            :mac => "44:38:39:00:07:9c",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10974',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8974',
            :libvirt__iface_name => 'fp5',
            auto_config: false
      # link for fp6 --> chassis03-lc1-2:fp6
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:be",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10223',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8223',
            :libvirt__iface_name => 'fp6',
            auto_config: false
      # link for fp7 --> chassis03-lc1-2:fp7
      device.vm.network "private_network",
            :mac => "44:38:39:00:07:06",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10899',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8899',
            :libvirt__iface_name => 'fp7',
            auto_config: false
      # link for fp8 --> chassis03-lc2-1:fp4
      device.vm.network "private_network",
            :mac => "44:38:39:00:08:de",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '11135',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '9135',
            :libvirt__iface_name => 'fp8',
            auto_config: false
      # link for fp9 --> chassis03-lc2-1:fp5
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:7c",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10190',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8190',
            :libvirt__iface_name => 'fp9',
            auto_config: false
      # link for fp10 --> chassis03-lc2-1:fp6
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:10",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10008',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8008',
            :libvirt__iface_name => 'fp10',
            auto_config: false
      # link for fp11 --> chassis03-lc2-1:fp7
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:76",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10443',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8443',
            :libvirt__iface_name => 'fp11',
            auto_config: false
      # link for fp12 --> chassis03-lc2-2:fp4
      device.vm.network "private_network",
            :mac => "44:38:39:00:05:42",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10673',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8673',
            :libvirt__iface_name => 'fp12',
            auto_config: false
      # link for fp13 --> chassis03-lc2-2:fp5
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:a4",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10082',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8082',
            :libvirt__iface_name => 'fp13',
            auto_config: false
      # link for fp14 --> chassis03-lc2-2:fp6
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:88",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10324',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8324',
            :libvirt__iface_name => 'fp14',
            auto_config: false
      # link for fp15 --> chassis03-lc2-2:fp7
      device.vm.network "private_network",
            :mac => "44:38:39:00:05:ca",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10741',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8741',
            :libvirt__iface_name => 'fp15',
            auto_config: false
      # link for fp16 --> chassis03-lc3-1:fp4
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:c0",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10224',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8224',
            :libvirt__iface_name => 'fp16',
            auto_config: false
      # link for fp17 --> chassis03-lc3-1:fp5
      device.vm.network "private_network",
            :mac => "44:38:39:00:05:e2",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10753',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8753',
            :libvirt__iface_name => 'fp17',
            auto_config: false
      # link for fp18 --> chassis03-lc3-1:fp6
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:24",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10530',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8530',
            :libvirt__iface_name => 'fp18',
            auto_config: false
      # link for fp19 --> chassis03-lc3-1:fp7
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:a0",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10464',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8464',
            :libvirt__iface_name => 'fp19',
            auto_config: false
      # link for fp20 --> chassis03-lc3-2:fp4
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:c2",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10225',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8225',
            :libvirt__iface_name => 'fp20',
            auto_config: false
      # link for fp21 --> chassis03-lc3-2:fp5
      device.vm.network "private_network",
            :mac => "44:38:39:00:05:40",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10672',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8672',
            :libvirt__iface_name => 'fp21',
            auto_config: false
      # link for fp22 --> chassis03-lc3-2:fp6
      device.vm.network "private_network",
            :mac => "44:38:39:00:06:14",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10778',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8778',
            :libvirt__iface_name => 'fp22',
            auto_config: false
      # link for fp23 --> chassis03-lc3-2:fp7
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:02",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10513',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8513',
            :libvirt__iface_name => 'fp23',
            auto_config: false
      # link for fp24 --> chassis03-lc4-1:fp4
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:42",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10161',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8161',
            :libvirt__iface_name => 'fp24',
            auto_config: false
      # link for fp25 --> chassis03-lc4-1:fp5
      device.vm.network "private_network",
            :mac => "44:38:39:00:06:64",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10818',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8818',
            :libvirt__iface_name => 'fp25',
            auto_config: false
      # link for fp26 --> chassis03-lc4-1:fp6
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:ea",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10117',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8117',
            :libvirt__iface_name => 'fp26',
            auto_config: false
      # link for fp27 --> chassis03-lc4-1:fp7
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:6a",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10437',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8437',
            :libvirt__iface_name => 'fp27',
            auto_config: false
      # link for fp28 --> chassis03-lc4-2:fp4
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:ca",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10613',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8613',
            :libvirt__iface_name => 'fp28',
            auto_config: false
      # link for fp29 --> chassis03-lc4-2:fp5
      device.vm.network "private_network",
            :mac => "44:38:39:00:09:68",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '11204',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '9204',
            :libvirt__iface_name => 'fp29',
            auto_config: false
      # link for fp30 --> chassis03-lc4-2:fp6
      device.vm.network "private_network",
            :mac => "44:38:39:00:06:80",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10832',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8832',
            :libvirt__iface_name => 'fp30',
            auto_config: false
      # link for fp31 --> chassis03-lc4-2:fp7
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:9c",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10078',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8078',
            :libvirt__iface_name => 'fp31',
            auto_config: false



    # Fixes "stdin: is not a tty" and "mesg: ttyname failed : Inappropriate ioctl for device"  messages --> https://github.com/mitchellh/vagrant/issues/1673
    device.vm.provision :shell , inline: "(sudo grep -q 'mesg n' /root/.profile 2>/dev/null && sudo sed -i '/mesg n/d' /root/.profile  2>/dev/null) || true;", privileged: false

    #Copy over Topology.dot File
    device.vm.provision "file", source: "topology.dot", destination: "~/topology.dot"
    device.vm.provision :shell, privileged: false, inline: "sudo mv ~/topology.dot /etc/ptm.d/topology.dot"


    # Run the Config specified in the Node Attributes
    device.vm.provision :shell , privileged: false, :inline => 'echo "$(whoami)" > /tmp/normal_user'
    device.vm.provision :shell , path: "./helper_scripts/extra_switch_config.sh"


    # Install Rules for the interface re-map
    device.vm.provision :shell , :inline => <<-delete_udev_directory
if [ -d "/etc/udev/rules.d/70-persistent-net.rules" ]; then
    rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
fi
rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
delete_udev_directory

device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:08:c6 --> eth0"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:08:c6", NAME="eth0", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:09:66 --> fp0"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:09:66", NAME="fp0", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:05:32 --> fp1"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:05:32", NAME="fp1", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:b8 --> fp2"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:b8", NAME="fp2", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:da --> fp3"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:da", NAME="fp3", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:e8 --> fp4"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:e8", NAME="fp4", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:07:9c --> fp5"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:07:9c", NAME="fp5", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:be --> fp6"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:be", NAME="fp6", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:07:06 --> fp7"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:07:06", NAME="fp7", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:08:de --> fp8"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:08:de", NAME="fp8", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:7c --> fp9"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:7c", NAME="fp9", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:10 --> fp10"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:10", NAME="fp10", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:76 --> fp11"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:76", NAME="fp11", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:05:42 --> fp12"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:05:42", NAME="fp12", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:a4 --> fp13"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:a4", NAME="fp13", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:88 --> fp14"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:88", NAME="fp14", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:05:ca --> fp15"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:05:ca", NAME="fp15", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:c0 --> fp16"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:c0", NAME="fp16", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:05:e2 --> fp17"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:05:e2", NAME="fp17", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:24 --> fp18"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:24", NAME="fp18", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:a0 --> fp19"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:a0", NAME="fp19", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:c2 --> fp20"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:c2", NAME="fp20", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:05:40 --> fp21"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:05:40", NAME="fp21", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:06:14 --> fp22"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:06:14", NAME="fp22", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:02 --> fp23"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:02", NAME="fp23", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:42 --> fp24"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:42", NAME="fp24", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:06:64 --> fp25"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:06:64", NAME="fp25", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:ea --> fp26"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:ea", NAME="fp26", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:6a --> fp27"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:6a", NAME="fp27", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:ca --> fp28"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:ca", NAME="fp28", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:09:68 --> fp29"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:09:68", NAME="fp29", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:06:80 --> fp30"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:06:80", NAME="fp30", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:9c --> fp31"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:9c", NAME="fp31", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule

      device.vm.provision :shell , :inline => <<-vagrant_interface_rule
echo "  INFO: Adding UDEV Rule: Vagrant interface = vagrant"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{ifindex}=="2", NAME="vagrant", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
echo "#### UDEV Rules (/etc/udev/rules.d/70-persistent-net.rules) ####"
cat /etc/udev/rules.d/70-persistent-net.rules
vagrant_interface_rule

# Run Any Platform Specific Code and Apply the interface Re-map
    #   (may or may not perform a reboot depending on platform)
    device.vm.provision :shell , :inline => $script

end

  ##### DEFINE VM for chassis04-lc1-2 #####
  config.vm.define "chassis04-lc1-2" do |device|

    device.vm.hostname = "chassis04-lc1-2"

    device.vm.box = "CumulusCommunity/cumulus-vx"
    device.vm.box_version = "3.5.0"

    device.vm.provider :libvirt do |v|
      v.memory = 768
    end
    #   see note here: https://github.com/pradels/vagrant-libvirt#synced-folders
    device.vm.synced_folder ".", "/vagrant", disabled: true



    # NETWORK INTERFACES
      # link for eth0 --> oob-mgmt-switch4:swp40
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:12",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10521',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8521',
            :libvirt__iface_name => 'eth0',
            auto_config: false
      # link for fp0 --> chassis04-fc1-1:fp4
      device.vm.network "private_network",
            :mac => "44:38:39:00:06:77",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8828',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10828',
            :libvirt__iface_name => 'fp0',
            auto_config: false
      # link for fp1 --> chassis04-fc1-1:fp5
      device.vm.network "private_network",
            :mac => "44:38:39:00:06:0b",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8774',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10774',
            :libvirt__iface_name => 'fp1',
            auto_config: false
      # link for fp2 --> chassis04-fc1-1:fp6
      device.vm.network "private_network",
            :mac => "44:38:39:00:06:07",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8772',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10772',
            :libvirt__iface_name => 'fp2',
            auto_config: false
      # link for fp3 --> chassis04-fc1-1:fp7
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:d3",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8106',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10106',
            :libvirt__iface_name => 'fp3',
            auto_config: false
      # link for fp4 --> chassis04-fc2-1:fp4
      device.vm.network "private_network",
            :mac => "44:38:39:00:05:a5",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8723',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10723',
            :libvirt__iface_name => 'fp4',
            auto_config: false
      # link for fp5 --> chassis04-fc2-1:fp5
      device.vm.network "private_network",
            :mac => "44:38:39:00:09:21",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '9169',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '11169',
            :libvirt__iface_name => 'fp5',
            auto_config: false
      # link for fp6 --> chassis04-fc2-1:fp6
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:d3",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8234',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10234',
            :libvirt__iface_name => 'fp6',
            auto_config: false
      # link for fp7 --> chassis04-fc2-1:fp7
      device.vm.network "private_network",
            :mac => "44:38:39:00:09:4d",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '9191',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '11191',
            :libvirt__iface_name => 'fp7',
            auto_config: false
      # link for fp8 --> chassis04-fc3-1:fp4
      device.vm.network "private_network",
            :mac => "44:38:39:00:06:ff",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8896',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10896',
            :libvirt__iface_name => 'fp8',
            auto_config: false
      # link for fp9 --> chassis04-fc3-1:fp5
      device.vm.network "private_network",
            :mac => "44:38:39:00:09:61",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '9201',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '11201',
            :libvirt__iface_name => 'fp9',
            auto_config: false
      # link for fp10 --> chassis04-fc3-1:fp6
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:b9",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8349',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10349',
            :libvirt__iface_name => 'fp10',
            auto_config: false
      # link for fp11 --> chassis04-fc3-1:fp7
      device.vm.network "private_network",
            :mac => "44:38:39:00:07:c9",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8997',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10997',
            :libvirt__iface_name => 'fp11',
            auto_config: false
      # link for fp12 --> chassis04-fc4-1:fp4
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:79",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8445',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10445',
            :libvirt__iface_name => 'fp12',
            auto_config: false
      # link for fp13 --> chassis04-fc4-1:fp5
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:59",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8429',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10429',
            :libvirt__iface_name => 'fp13',
            auto_config: false
      # link for fp14 --> chassis04-fc4-1:fp6
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:53",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8042',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10042',
            :libvirt__iface_name => 'fp14',
            auto_config: false
      # link for fp15 --> chassis04-fc4-1:fp7
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:c1",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8481',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10481',
            :libvirt__iface_name => 'fp15',
            auto_config: false
      # link for swp1 --> leaf17:swp4
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:37",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8156',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10156',
            :libvirt__iface_name => 'swp1',
            auto_config: false
      # link for swp2 --> leaf18:swp4
      device.vm.network "private_network",
            :mac => "44:38:39:00:08:d3",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '9130',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '11130',
            :libvirt__iface_name => 'swp2',
            auto_config: false
      # link for swp3 --> leaf19:swp4
      device.vm.network "private_network",
            :mac => "44:38:39:00:06:e9",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8885',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10885',
            :libvirt__iface_name => 'swp3',
            auto_config: false
      # link for swp4 --> leaf20:swp4
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:2d",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8407',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10407',
            :libvirt__iface_name => 'swp4',
            auto_config: false
      # link for swp5 --> leaf21:swp4
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:2f",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8152',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10152',
            :libvirt__iface_name => 'swp5',
            auto_config: false
      # link for swp6 --> leaf22:swp4
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:8b",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8198',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10198',
            :libvirt__iface_name => 'swp6',
            auto_config: false
      # link for swp7 --> leaf23:swp4
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:31",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8153',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10153',
            :libvirt__iface_name => 'swp7',
            auto_config: false
      # link for swp8 --> leaf24:swp4
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:91",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8201',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10201',
            :libvirt__iface_name => 'swp8',
            auto_config: false
      # link for swp9 --> leaf25:swp4
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:a9",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8597',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10597',
            :libvirt__iface_name => 'swp9',
            auto_config: false
      # link for swp10 --> leaf26:swp4
      device.vm.network "private_network",
            :mac => "44:38:39:00:06:71",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8825',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10825',
            :libvirt__iface_name => 'swp10',
            auto_config: false
      # link for swp11 --> leaf27:swp4
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:7f",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8576',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10576',
            :libvirt__iface_name => 'swp11',
            auto_config: false
      # link for swp12 --> leaf28:swp4
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:01",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8001',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10001',
            :libvirt__iface_name => 'swp12',
            auto_config: false
      # link for swp13 --> leaf29:swp4
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:87",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8068',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10068',
            :libvirt__iface_name => 'swp13',
            auto_config: false
      # link for swp14 --> leaf30:swp4
      device.vm.network "private_network",
            :mac => "44:38:39:00:05:9d",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8719',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10719',
            :libvirt__iface_name => 'swp14',
            auto_config: false
      # link for swp15 --> leaf31:swp4
      device.vm.network "private_network",
            :mac => "44:38:39:00:08:5d",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '9071',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '11071',
            :libvirt__iface_name => 'swp15',
            auto_config: false
      # link for swp16 --> leaf32:swp4
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:5f",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8304',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10304',
            :libvirt__iface_name => 'swp16',
            auto_config: false



    # Fixes "stdin: is not a tty" and "mesg: ttyname failed : Inappropriate ioctl for device"  messages --> https://github.com/mitchellh/vagrant/issues/1673
    device.vm.provision :shell , inline: "(sudo grep -q 'mesg n' /root/.profile 2>/dev/null && sudo sed -i '/mesg n/d' /root/.profile  2>/dev/null) || true;", privileged: false

    #Copy over Topology.dot File
    device.vm.provision "file", source: "topology.dot", destination: "~/topology.dot"
    device.vm.provision :shell, privileged: false, inline: "sudo mv ~/topology.dot /etc/ptm.d/topology.dot"


    # Run the Config specified in the Node Attributes
    device.vm.provision :shell , privileged: false, :inline => 'echo "$(whoami)" > /tmp/normal_user'
    device.vm.provision :shell , path: "./helper_scripts/extra_switch_config.sh"


    # Install Rules for the interface re-map
    device.vm.provision :shell , :inline => <<-delete_udev_directory
if [ -d "/etc/udev/rules.d/70-persistent-net.rules" ]; then
    rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
fi
rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
delete_udev_directory

device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:12 --> eth0"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:12", NAME="eth0", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:06:77 --> fp0"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:06:77", NAME="fp0", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:06:0b --> fp1"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:06:0b", NAME="fp1", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:06:07 --> fp2"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:06:07", NAME="fp2", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:d3 --> fp3"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:d3", NAME="fp3", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:05:a5 --> fp4"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:05:a5", NAME="fp4", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:09:21 --> fp5"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:09:21", NAME="fp5", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:d3 --> fp6"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:d3", NAME="fp6", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:09:4d --> fp7"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:09:4d", NAME="fp7", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:06:ff --> fp8"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:06:ff", NAME="fp8", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:09:61 --> fp9"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:09:61", NAME="fp9", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:b9 --> fp10"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:b9", NAME="fp10", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:07:c9 --> fp11"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:07:c9", NAME="fp11", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:79 --> fp12"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:79", NAME="fp12", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:59 --> fp13"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:59", NAME="fp13", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:53 --> fp14"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:53", NAME="fp14", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:c1 --> fp15"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:c1", NAME="fp15", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:37 --> swp1"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:37", NAME="swp1", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:08:d3 --> swp2"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:08:d3", NAME="swp2", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:06:e9 --> swp3"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:06:e9", NAME="swp3", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:2d --> swp4"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:2d", NAME="swp4", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:2f --> swp5"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:2f", NAME="swp5", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:8b --> swp6"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:8b", NAME="swp6", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:31 --> swp7"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:31", NAME="swp7", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:91 --> swp8"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:91", NAME="swp8", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:a9 --> swp9"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:a9", NAME="swp9", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:06:71 --> swp10"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:06:71", NAME="swp10", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:7f --> swp11"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:7f", NAME="swp11", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:01 --> swp12"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:01", NAME="swp12", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:87 --> swp13"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:87", NAME="swp13", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:05:9d --> swp14"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:05:9d", NAME="swp14", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:08:5d --> swp15"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:08:5d", NAME="swp15", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:5f --> swp16"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:5f", NAME="swp16", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule

      device.vm.provision :shell , :inline => <<-vagrant_interface_rule
echo "  INFO: Adding UDEV Rule: Vagrant interface = vagrant"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{ifindex}=="2", NAME="vagrant", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
echo "#### UDEV Rules (/etc/udev/rules.d/70-persistent-net.rules) ####"
cat /etc/udev/rules.d/70-persistent-net.rules
vagrant_interface_rule

# Run Any Platform Specific Code and Apply the interface Re-map
    #   (may or may not perform a reboot depending on platform)
    device.vm.provision :shell , :inline => $script

end

  ##### DEFINE VM for chassis04-lc1-1 #####
  config.vm.define "chassis04-lc1-1" do |device|

    device.vm.hostname = "chassis04-lc1-1"

    device.vm.box = "CumulusCommunity/cumulus-vx"
    device.vm.box_version = "3.5.0"

    device.vm.provider :libvirt do |v|
      v.memory = 768
    end
    #   see note here: https://github.com/pradels/vagrant-libvirt#synced-folders
    device.vm.synced_folder ".", "/vagrant", disabled: true



    # NETWORK INTERFACES
      # link for eth0 --> oob-mgmt-switch4:swp39
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:e0",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10368',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8368',
            :libvirt__iface_name => 'eth0',
            auto_config: false
      # link for fp0 --> chassis04-fc1-1:fp0
      device.vm.network "private_network",
            :mac => "44:38:39:00:06:9f",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8848',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10848',
            :libvirt__iface_name => 'fp0',
            auto_config: false
      # link for fp1 --> chassis04-fc1-1:fp1
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:b3",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8218',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10218',
            :libvirt__iface_name => 'fp1',
            auto_config: false
      # link for fp2 --> chassis04-fc1-1:fp2
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:8d",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8583',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10583',
            :libvirt__iface_name => 'fp2',
            auto_config: false
      # link for fp3 --> chassis04-fc1-1:fp3
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:11",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8137',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10137',
            :libvirt__iface_name => 'fp3',
            auto_config: false
      # link for fp4 --> chassis04-fc2-1:fp0
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:f9",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8253',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10253',
            :libvirt__iface_name => 'fp4',
            auto_config: false
      # link for fp5 --> chassis04-fc2-1:fp1
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:ef",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8376',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10376',
            :libvirt__iface_name => 'fp5',
            auto_config: false
      # link for fp6 --> chassis04-fc2-1:fp2
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:e1",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8625',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10625',
            :libvirt__iface_name => 'fp6',
            auto_config: false
      # link for fp7 --> chassis04-fc2-1:fp3
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:e1",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8113',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10113',
            :libvirt__iface_name => 'fp7',
            auto_config: false
      # link for fp8 --> chassis04-fc3-1:fp0
      device.vm.network "private_network",
            :mac => "44:38:39:00:08:c7",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '9124',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '11124',
            :libvirt__iface_name => 'fp8',
            auto_config: false
      # link for fp9 --> chassis04-fc3-1:fp1
      device.vm.network "private_network",
            :mac => "44:38:39:00:08:29",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '9045',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '11045',
            :libvirt__iface_name => 'fp9',
            auto_config: false
      # link for fp10 --> chassis04-fc3-1:fp2
      device.vm.network "private_network",
            :mac => "44:38:39:00:05:13",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8650',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10650',
            :libvirt__iface_name => 'fp10',
            auto_config: false
      # link for fp11 --> chassis04-fc3-1:fp3
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:a9",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8469',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10469',
            :libvirt__iface_name => 'fp11',
            auto_config: false
      # link for fp12 --> chassis04-fc4-1:fp0
      device.vm.network "private_network",
            :mac => "44:38:39:00:06:31",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8793',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10793',
            :libvirt__iface_name => 'fp12',
            auto_config: false
      # link for fp13 --> chassis04-fc4-1:fp1
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:a1",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8337',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10337',
            :libvirt__iface_name => 'fp13',
            auto_config: false
      # link for fp14 --> chassis04-fc4-1:fp2
      device.vm.network "private_network",
            :mac => "44:38:39:00:08:df",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '9136',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '11136',
            :libvirt__iface_name => 'fp14',
            auto_config: false
      # link for fp15 --> chassis04-fc4-1:fp3
      device.vm.network "private_network",
            :mac => "44:38:39:00:08:b1",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '9113',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '11113',
            :libvirt__iface_name => 'fp15',
            auto_config: false
      # link for swp1 --> leaf01:swp4
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:87",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8580',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10580',
            :libvirt__iface_name => 'swp1',
            auto_config: false
      # link for swp2 --> leaf02:swp4
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:c9",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8485',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10485',
            :libvirt__iface_name => 'swp2',
            auto_config: false
      # link for swp3 --> leaf03:swp4
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:37",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8540',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10540',
            :libvirt__iface_name => 'swp3',
            auto_config: false
      # link for swp4 --> leaf04:swp4
      device.vm.network "private_network",
            :mac => "44:38:39:00:08:d9",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '9133',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '11133',
            :libvirt__iface_name => 'swp4',
            auto_config: false
      # link for swp5 --> leaf05:swp4
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:cd",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8359',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10359',
            :libvirt__iface_name => 'swp5',
            auto_config: false
      # link for swp6 --> leaf06:swp4
      device.vm.network "private_network",
            :mac => "44:38:39:00:07:01",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8897',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10897',
            :libvirt__iface_name => 'swp6',
            auto_config: false
      # link for swp7 --> leaf07:swp4
      device.vm.network "private_network",
            :mac => "44:38:39:00:09:57",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '9196',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '11196',
            :libvirt__iface_name => 'swp7',
            auto_config: false
      # link for swp8 --> leaf08:swp4
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:d1",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8489',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10489',
            :libvirt__iface_name => 'swp8',
            auto_config: false
      # link for swp9 --> leaf09:swp4
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:33",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8410',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10410',
            :libvirt__iface_name => 'swp9',
            auto_config: false
      # link for swp10 --> leaf10:swp4
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:09",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8133',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10133',
            :libvirt__iface_name => 'swp10',
            auto_config: false
      # link for swp11 --> leaf11:swp4
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:f9",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8125',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10125',
            :libvirt__iface_name => 'swp11',
            auto_config: false
      # link for swp12 --> leaf12:swp4
      device.vm.network "private_network",
            :mac => "44:38:39:00:05:09",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8645',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10645',
            :libvirt__iface_name => 'swp12',
            auto_config: false
      # link for swp13 --> leaf13:swp4
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:5d",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8047',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10047',
            :libvirt__iface_name => 'swp13',
            auto_config: false
      # link for swp14 --> leaf14:swp4
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:d3",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8490',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10490',
            :libvirt__iface_name => 'swp14',
            auto_config: false
      # link for swp15 --> leaf15:swp4
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:39",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8157',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10157',
            :libvirt__iface_name => 'swp15',
            auto_config: false
      # link for swp16 --> leaf16:swp4
      device.vm.network "private_network",
            :mac => "44:38:39:00:05:e5",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8755',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10755',
            :libvirt__iface_name => 'swp16',
            auto_config: false



    # Fixes "stdin: is not a tty" and "mesg: ttyname failed : Inappropriate ioctl for device"  messages --> https://github.com/mitchellh/vagrant/issues/1673
    device.vm.provision :shell , inline: "(sudo grep -q 'mesg n' /root/.profile 2>/dev/null && sudo sed -i '/mesg n/d' /root/.profile  2>/dev/null) || true;", privileged: false

    #Copy over Topology.dot File
    device.vm.provision "file", source: "topology.dot", destination: "~/topology.dot"
    device.vm.provision :shell, privileged: false, inline: "sudo mv ~/topology.dot /etc/ptm.d/topology.dot"


    # Run the Config specified in the Node Attributes
    device.vm.provision :shell , privileged: false, :inline => 'echo "$(whoami)" > /tmp/normal_user'
    device.vm.provision :shell , path: "./helper_scripts/extra_switch_config.sh"


    # Install Rules for the interface re-map
    device.vm.provision :shell , :inline => <<-delete_udev_directory
if [ -d "/etc/udev/rules.d/70-persistent-net.rules" ]; then
    rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
fi
rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
delete_udev_directory

device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:e0 --> eth0"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:e0", NAME="eth0", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:06:9f --> fp0"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:06:9f", NAME="fp0", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:b3 --> fp1"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:b3", NAME="fp1", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:8d --> fp2"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:8d", NAME="fp2", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:11 --> fp3"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:11", NAME="fp3", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:f9 --> fp4"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:f9", NAME="fp4", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:ef --> fp5"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:ef", NAME="fp5", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:e1 --> fp6"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:e1", NAME="fp6", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:e1 --> fp7"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:e1", NAME="fp7", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:08:c7 --> fp8"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:08:c7", NAME="fp8", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:08:29 --> fp9"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:08:29", NAME="fp9", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:05:13 --> fp10"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:05:13", NAME="fp10", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:a9 --> fp11"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:a9", NAME="fp11", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:06:31 --> fp12"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:06:31", NAME="fp12", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:a1 --> fp13"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:a1", NAME="fp13", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:08:df --> fp14"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:08:df", NAME="fp14", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:08:b1 --> fp15"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:08:b1", NAME="fp15", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:87 --> swp1"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:87", NAME="swp1", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:c9 --> swp2"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:c9", NAME="swp2", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:37 --> swp3"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:37", NAME="swp3", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:08:d9 --> swp4"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:08:d9", NAME="swp4", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:cd --> swp5"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:cd", NAME="swp5", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:07:01 --> swp6"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:07:01", NAME="swp6", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:09:57 --> swp7"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:09:57", NAME="swp7", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:d1 --> swp8"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:d1", NAME="swp8", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:33 --> swp9"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:33", NAME="swp9", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:09 --> swp10"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:09", NAME="swp10", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:f9 --> swp11"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:f9", NAME="swp11", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:05:09 --> swp12"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:05:09", NAME="swp12", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:5d --> swp13"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:5d", NAME="swp13", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:d3 --> swp14"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:d3", NAME="swp14", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:39 --> swp15"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:39", NAME="swp15", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:05:e5 --> swp16"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:05:e5", NAME="swp16", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule

      device.vm.provision :shell , :inline => <<-vagrant_interface_rule
echo "  INFO: Adding UDEV Rule: Vagrant interface = vagrant"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{ifindex}=="2", NAME="vagrant", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
echo "#### UDEV Rules (/etc/udev/rules.d/70-persistent-net.rules) ####"
cat /etc/udev/rules.d/70-persistent-net.rules
vagrant_interface_rule

# Run Any Platform Specific Code and Apply the interface Re-map
    #   (may or may not perform a reboot depending on platform)
    device.vm.provision :shell , :inline => $script

end

  ##### DEFINE VM for chassis03-fc1-1 #####
  config.vm.define "chassis03-fc1-1" do |device|

    device.vm.hostname = "chassis03-fc1-1"

    device.vm.box = "CumulusCommunity/cumulus-vx"
    device.vm.box_version = "3.5.0"

    device.vm.provider :libvirt do |v|
      v.memory = 768
    end
    #   see note here: https://github.com/pradels/vagrant-libvirt#synced-folders
    device.vm.synced_folder ".", "/vagrant", disabled: true



    # NETWORK INTERFACES
      # link for eth0 --> oob-mgmt-switch4:swp35
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:de",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10239',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8239',
            :libvirt__iface_name => 'eth0',
            auto_config: false
      # link for fp0 --> chassis03-lc1-1:fp0
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:92",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10329',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8329',
            :libvirt__iface_name => 'fp0',
            auto_config: false
      # link for fp1 --> chassis03-lc1-1:fp1
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:3a",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10413',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8413',
            :libvirt__iface_name => 'fp1',
            auto_config: false
      # link for fp2 --> chassis03-lc1-1:fp2
      device.vm.network "private_network",
            :mac => "44:38:39:00:08:0a",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '11029',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '9029',
            :libvirt__iface_name => 'fp2',
            auto_config: false
      # link for fp3 --> chassis03-lc1-1:fp3
      device.vm.network "private_network",
            :mac => "44:38:39:00:06:e6",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10883',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8883',
            :libvirt__iface_name => 'fp3',
            auto_config: false
      # link for fp4 --> chassis03-lc1-2:fp0
      device.vm.network "private_network",
            :mac => "44:38:39:00:08:3e",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '11055',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '9055',
            :libvirt__iface_name => 'fp4',
            auto_config: false
      # link for fp5 --> chassis03-lc1-2:fp1
      device.vm.network "private_network",
            :mac => "44:38:39:00:05:72",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10697',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8697',
            :libvirt__iface_name => 'fp5',
            auto_config: false
      # link for fp6 --> chassis03-lc1-2:fp2
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:d8",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10364',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8364',
            :libvirt__iface_name => 'fp6',
            auto_config: false
      # link for fp7 --> chassis03-lc1-2:fp3
      device.vm.network "private_network",
            :mac => "44:38:39:00:08:ce",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '11127',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '9127',
            :libvirt__iface_name => 'fp7',
            auto_config: false
      # link for fp8 --> chassis03-lc2-1:fp0
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:30",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10536',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8536',
            :libvirt__iface_name => 'fp8',
            auto_config: false
      # link for fp9 --> chassis03-lc2-1:fp1
      device.vm.network "private_network",
            :mac => "44:38:39:00:05:7e",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10703',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8703',
            :libvirt__iface_name => 'fp9',
            auto_config: false
      # link for fp10 --> chassis03-lc2-1:fp2
      device.vm.network "private_network",
            :mac => "44:38:39:00:08:82",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '11089',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '9089',
            :libvirt__iface_name => 'fp10',
            auto_config: false
      # link for fp11 --> chassis03-lc2-1:fp3
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:12",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10393',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8393',
            :libvirt__iface_name => 'fp11',
            auto_config: false
      # link for fp12 --> chassis03-lc2-2:fp0
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:ba",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10605',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8605',
            :libvirt__iface_name => 'fp12',
            auto_config: false
      # link for fp13 --> chassis03-lc2-2:fp1
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:3a",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10541',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8541',
            :libvirt__iface_name => 'fp13',
            auto_config: false
      # link for fp14 --> chassis03-lc2-2:fp2
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:a6",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10595',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8595',
            :libvirt__iface_name => 'fp14',
            auto_config: false
      # link for fp15 --> chassis03-lc2-2:fp3
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:2e",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10023',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8023',
            :libvirt__iface_name => 'fp15',
            auto_config: false
      # link for fp16 --> chassis03-lc3-1:fp0
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:e8",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10500',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8500',
            :libvirt__iface_name => 'fp16',
            auto_config: false
      # link for fp17 --> chassis03-lc3-1:fp1
      device.vm.network "private_network",
            :mac => "44:38:39:00:06:ca",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10869',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8869',
            :libvirt__iface_name => 'fp17',
            auto_config: false
      # link for fp18 --> chassis03-lc3-1:fp2
      device.vm.network "private_network",
            :mac => "44:38:39:00:07:e2",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '11009',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '9009',
            :libvirt__iface_name => 'fp18',
            auto_config: false
      # link for fp19 --> chassis03-lc3-1:fp3
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:c4",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10610',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8610',
            :libvirt__iface_name => 'fp19',
            auto_config: false
      # link for fp20 --> chassis03-lc3-2:fp0
      device.vm.network "private_network",
            :mac => "44:38:39:00:06:5c",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10814',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8814',
            :libvirt__iface_name => 'fp20',
            auto_config: false
      # link for fp21 --> chassis03-lc3-2:fp1
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:98",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10332',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8332',
            :libvirt__iface_name => 'fp21',
            auto_config: false
      # link for fp22 --> chassis03-lc3-2:fp2
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:88",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10452',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8452',
            :libvirt__iface_name => 'fp22',
            auto_config: false
      # link for fp23 --> chassis03-lc3-2:fp3
      device.vm.network "private_network",
            :mac => "44:38:39:00:06:6a",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10821',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8821',
            :libvirt__iface_name => 'fp23',
            auto_config: false
      # link for fp24 --> chassis03-lc4-1:fp0
      device.vm.network "private_network",
            :mac => "44:38:39:00:06:96",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10843',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8843',
            :libvirt__iface_name => 'fp24',
            auto_config: false
      # link for fp25 --> chassis03-lc4-1:fp1
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:da",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10237',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8237',
            :libvirt__iface_name => 'fp25',
            auto_config: false
      # link for fp26 --> chassis03-lc4-1:fp2
      device.vm.network "private_network",
            :mac => "44:38:39:00:07:c2",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10993',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8993',
            :libvirt__iface_name => 'fp26',
            auto_config: false
      # link for fp27 --> chassis03-lc4-1:fp3
      device.vm.network "private_network",
            :mac => "44:38:39:00:08:74",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '11082',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '9082',
            :libvirt__iface_name => 'fp27',
            auto_config: false
      # link for fp28 --> chassis03-lc4-2:fp0
      device.vm.network "private_network",
            :mac => "44:38:39:00:06:12",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10777',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8777',
            :libvirt__iface_name => 'fp28',
            auto_config: false
      # link for fp29 --> chassis03-lc4-2:fp1
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:92",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10585',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8585',
            :libvirt__iface_name => 'fp29',
            auto_config: false
      # link for fp30 --> chassis03-lc4-2:fp2
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:32",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10281',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8281',
            :libvirt__iface_name => 'fp30',
            auto_config: false
      # link for fp31 --> chassis03-lc4-2:fp3
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:0e",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10135',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8135',
            :libvirt__iface_name => 'fp31',
            auto_config: false



    # Fixes "stdin: is not a tty" and "mesg: ttyname failed : Inappropriate ioctl for device"  messages --> https://github.com/mitchellh/vagrant/issues/1673
    device.vm.provision :shell , inline: "(sudo grep -q 'mesg n' /root/.profile 2>/dev/null && sudo sed -i '/mesg n/d' /root/.profile  2>/dev/null) || true;", privileged: false

    #Copy over Topology.dot File
    device.vm.provision "file", source: "topology.dot", destination: "~/topology.dot"
    device.vm.provision :shell, privileged: false, inline: "sudo mv ~/topology.dot /etc/ptm.d/topology.dot"


    # Run the Config specified in the Node Attributes
    device.vm.provision :shell , privileged: false, :inline => 'echo "$(whoami)" > /tmp/normal_user'
    device.vm.provision :shell , path: "./helper_scripts/extra_switch_config.sh"


    # Install Rules for the interface re-map
    device.vm.provision :shell , :inline => <<-delete_udev_directory
if [ -d "/etc/udev/rules.d/70-persistent-net.rules" ]; then
    rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
fi
rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
delete_udev_directory

device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:de --> eth0"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:de", NAME="eth0", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:92 --> fp0"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:92", NAME="fp0", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:3a --> fp1"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:3a", NAME="fp1", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:08:0a --> fp2"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:08:0a", NAME="fp2", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:06:e6 --> fp3"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:06:e6", NAME="fp3", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:08:3e --> fp4"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:08:3e", NAME="fp4", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:05:72 --> fp5"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:05:72", NAME="fp5", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:d8 --> fp6"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:d8", NAME="fp6", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:08:ce --> fp7"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:08:ce", NAME="fp7", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:30 --> fp8"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:30", NAME="fp8", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:05:7e --> fp9"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:05:7e", NAME="fp9", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:08:82 --> fp10"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:08:82", NAME="fp10", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:12 --> fp11"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:12", NAME="fp11", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:ba --> fp12"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:ba", NAME="fp12", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:3a --> fp13"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:3a", NAME="fp13", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:a6 --> fp14"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:a6", NAME="fp14", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:2e --> fp15"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:2e", NAME="fp15", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:e8 --> fp16"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:e8", NAME="fp16", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:06:ca --> fp17"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:06:ca", NAME="fp17", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:07:e2 --> fp18"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:07:e2", NAME="fp18", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:c4 --> fp19"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:c4", NAME="fp19", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:06:5c --> fp20"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:06:5c", NAME="fp20", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:98 --> fp21"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:98", NAME="fp21", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:88 --> fp22"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:88", NAME="fp22", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:06:6a --> fp23"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:06:6a", NAME="fp23", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:06:96 --> fp24"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:06:96", NAME="fp24", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:da --> fp25"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:da", NAME="fp25", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:07:c2 --> fp26"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:07:c2", NAME="fp26", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:08:74 --> fp27"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:08:74", NAME="fp27", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:06:12 --> fp28"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:06:12", NAME="fp28", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:92 --> fp29"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:92", NAME="fp29", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:32 --> fp30"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:32", NAME="fp30", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:0e --> fp31"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:0e", NAME="fp31", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule

      device.vm.provision :shell , :inline => <<-vagrant_interface_rule
echo "  INFO: Adding UDEV Rule: Vagrant interface = vagrant"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{ifindex}=="2", NAME="vagrant", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
echo "#### UDEV Rules (/etc/udev/rules.d/70-persistent-net.rules) ####"
cat /etc/udev/rules.d/70-persistent-net.rules
vagrant_interface_rule

# Run Any Platform Specific Code and Apply the interface Re-map
    #   (may or may not perform a reboot depending on platform)
    device.vm.provision :shell , :inline => $script

end

  ##### DEFINE VM for chassis01-lc4-2 #####
  config.vm.define "chassis01-lc4-2" do |device|

    device.vm.hostname = "chassis01-lc4-2"

    device.vm.box = "CumulusCommunity/cumulus-vx"
    device.vm.box_version = "3.5.0"

    device.vm.provider :libvirt do |v|
      v.memory = 768
    end
    #   see note here: https://github.com/pradels/vagrant-libvirt#synced-folders
    device.vm.synced_folder ".", "/vagrant", disabled: true



    # NETWORK INTERFACES
      # link for eth0 --> oob-mgmt-switch4:swp10
      device.vm.network "private_network",
            :mac => "44:38:39:00:07:0c",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10902',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8902',
            :libvirt__iface_name => 'eth0',
            auto_config: false
      # link for fp0 --> chassis01-fc1-1:fp28
      device.vm.network "private_network",
            :mac => "44:38:39:00:05:b9",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8733',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10733',
            :libvirt__iface_name => 'fp0',
            auto_config: false
      # link for fp1 --> chassis01-fc1-1:fp29
      device.vm.network "private_network",
            :mac => "44:38:39:00:07:73",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8954',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10954',
            :libvirt__iface_name => 'fp1',
            auto_config: false
      # link for fp2 --> chassis01-fc1-1:fp30
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:45",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8035',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10035',
            :libvirt__iface_name => 'fp2',
            auto_config: false
      # link for fp3 --> chassis01-fc1-1:fp31
      device.vm.network "private_network",
            :mac => "44:38:39:00:07:59",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8941',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10941',
            :libvirt__iface_name => 'fp3',
            auto_config: false
      # link for fp4 --> chassis01-fc2-1:fp28
      device.vm.network "private_network",
            :mac => "44:38:39:00:07:31",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8921',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10921',
            :libvirt__iface_name => 'fp4',
            auto_config: false
      # link for fp5 --> chassis01-fc2-1:fp29
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:53",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8298',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10298',
            :libvirt__iface_name => 'fp5',
            auto_config: false
      # link for fp6 --> chassis01-fc2-1:fp30
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:6f",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8312',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10312',
            :libvirt__iface_name => 'fp6',
            auto_config: false
      # link for fp7 --> chassis01-fc2-1:fp31
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:79",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8061',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10061',
            :libvirt__iface_name => 'fp7',
            auto_config: false
      # link for fp8 --> chassis01-fc3-1:fp28
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:b9",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8093',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10093',
            :libvirt__iface_name => 'fp8',
            auto_config: false
      # link for fp9 --> chassis01-fc3-1:fp29
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:eb",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8374',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10374',
            :libvirt__iface_name => 'fp9',
            auto_config: false
      # link for fp10 --> chassis01-fc3-1:fp30
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:43",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8034',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10034',
            :libvirt__iface_name => 'fp10',
            auto_config: false
      # link for fp11 --> chassis01-fc3-1:fp31
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:95",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8587',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10587',
            :libvirt__iface_name => 'fp11',
            auto_config: false
      # link for fp12 --> chassis01-fc4-1:fp28
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:51",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8041',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10041',
            :libvirt__iface_name => 'fp12',
            auto_config: false
      # link for fp13 --> chassis01-fc4-1:fp29
      device.vm.network "private_network",
            :mac => "44:38:39:00:07:ff",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '9024',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '11024',
            :libvirt__iface_name => 'fp13',
            auto_config: false
      # link for fp14 --> chassis01-fc4-1:fp30
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:81",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8065',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10065',
            :libvirt__iface_name => 'fp14',
            auto_config: false
      # link for fp15 --> chassis01-fc4-1:fp31
      device.vm.network "private_network",
            :mac => "44:38:39:00:06:81",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8833',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10833',
            :libvirt__iface_name => 'fp15',
            auto_config: false
      # link for swp1 --> leaf113:swp1
      device.vm.network "private_network",
            :mac => "44:38:39:00:08:fd",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '9151',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '11151',
            :libvirt__iface_name => 'swp1',
            auto_config: false
      # link for swp2 --> leaf114:swp1
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:4d",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8423',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10423',
            :libvirt__iface_name => 'swp2',
            auto_config: false
      # link for swp3 --> leaf115:swp1
      device.vm.network "private_network",
            :mac => "44:38:39:00:08:77",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '9084',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '11084',
            :libvirt__iface_name => 'swp3',
            auto_config: false
      # link for swp4 --> leaf116:swp1
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:b1",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8345',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10345',
            :libvirt__iface_name => 'swp4',
            auto_config: false
      # link for swp5 --> leaf117:swp1
      device.vm.network "private_network",
            :mac => "44:38:39:00:08:1f",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '9040',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '11040',
            :libvirt__iface_name => 'swp5',
            auto_config: false
      # link for swp6 --> leaf118:swp1
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:4d",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8167',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10167',
            :libvirt__iface_name => 'swp6',
            auto_config: false
      # link for swp7 --> leaf119:swp1
      device.vm.network "private_network",
            :mac => "44:38:39:00:06:cb",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8870',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10870',
            :libvirt__iface_name => 'swp7',
            auto_config: false
      # link for swp8 --> leaf120:swp1
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:f3",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8634',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10634',
            :libvirt__iface_name => 'swp8',
            auto_config: false
      # link for swp9 --> leaf121:swp1
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:cb",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8358',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10358',
            :libvirt__iface_name => 'swp9',
            auto_config: false
      # link for swp10 --> leaf122:swp1
      device.vm.network "private_network",
            :mac => "44:38:39:00:07:43",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8930',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10930',
            :libvirt__iface_name => 'swp10',
            auto_config: false
      # link for swp11 --> leaf123:swp1
      device.vm.network "private_network",
            :mac => "44:38:39:00:09:5d",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '9199',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '11199',
            :libvirt__iface_name => 'swp11',
            auto_config: false
      # link for swp12 --> leaf124:swp1
      device.vm.network "private_network",
            :mac => "44:38:39:00:08:a5",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '9107',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '11107',
            :libvirt__iface_name => 'swp12',
            auto_config: false
      # link for swp13 --> leaf125:swp1
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:69",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8053',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10053',
            :libvirt__iface_name => 'swp13',
            auto_config: false
      # link for swp14 --> leaf126:swp1
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:29",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8277',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10277',
            :libvirt__iface_name => 'swp14',
            auto_config: false
      # link for swp15 --> leaf127:swp1
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:ed",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8247',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10247',
            :libvirt__iface_name => 'swp15',
            auto_config: false
      # link for swp16 --> leaf128:swp1
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:63",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8050',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10050',
            :libvirt__iface_name => 'swp16',
            auto_config: false



    # Fixes "stdin: is not a tty" and "mesg: ttyname failed : Inappropriate ioctl for device"  messages --> https://github.com/mitchellh/vagrant/issues/1673
    device.vm.provision :shell , inline: "(sudo grep -q 'mesg n' /root/.profile 2>/dev/null && sudo sed -i '/mesg n/d' /root/.profile  2>/dev/null) || true;", privileged: false

    #Copy over Topology.dot File
    device.vm.provision "file", source: "topology.dot", destination: "~/topology.dot"
    device.vm.provision :shell, privileged: false, inline: "sudo mv ~/topology.dot /etc/ptm.d/topology.dot"


    # Run the Config specified in the Node Attributes
    device.vm.provision :shell , privileged: false, :inline => 'echo "$(whoami)" > /tmp/normal_user'
    device.vm.provision :shell , path: "./helper_scripts/extra_switch_config.sh"


    # Install Rules for the interface re-map
    device.vm.provision :shell , :inline => <<-delete_udev_directory
if [ -d "/etc/udev/rules.d/70-persistent-net.rules" ]; then
    rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
fi
rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
delete_udev_directory

device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:07:0c --> eth0"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:07:0c", NAME="eth0", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:05:b9 --> fp0"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:05:b9", NAME="fp0", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:07:73 --> fp1"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:07:73", NAME="fp1", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:45 --> fp2"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:45", NAME="fp2", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:07:59 --> fp3"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:07:59", NAME="fp3", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:07:31 --> fp4"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:07:31", NAME="fp4", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:53 --> fp5"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:53", NAME="fp5", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:6f --> fp6"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:6f", NAME="fp6", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:79 --> fp7"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:79", NAME="fp7", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:b9 --> fp8"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:b9", NAME="fp8", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:eb --> fp9"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:eb", NAME="fp9", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:43 --> fp10"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:43", NAME="fp10", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:95 --> fp11"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:95", NAME="fp11", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:51 --> fp12"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:51", NAME="fp12", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:07:ff --> fp13"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:07:ff", NAME="fp13", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:81 --> fp14"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:81", NAME="fp14", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:06:81 --> fp15"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:06:81", NAME="fp15", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:08:fd --> swp1"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:08:fd", NAME="swp1", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:4d --> swp2"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:4d", NAME="swp2", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:08:77 --> swp3"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:08:77", NAME="swp3", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:b1 --> swp4"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:b1", NAME="swp4", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:08:1f --> swp5"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:08:1f", NAME="swp5", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:4d --> swp6"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:4d", NAME="swp6", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:06:cb --> swp7"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:06:cb", NAME="swp7", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:f3 --> swp8"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:f3", NAME="swp8", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:cb --> swp9"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:cb", NAME="swp9", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:07:43 --> swp10"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:07:43", NAME="swp10", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:09:5d --> swp11"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:09:5d", NAME="swp11", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:08:a5 --> swp12"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:08:a5", NAME="swp12", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:69 --> swp13"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:69", NAME="swp13", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:29 --> swp14"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:29", NAME="swp14", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:ed --> swp15"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:ed", NAME="swp15", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:63 --> swp16"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:63", NAME="swp16", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule

      device.vm.provision :shell , :inline => <<-vagrant_interface_rule
echo "  INFO: Adding UDEV Rule: Vagrant interface = vagrant"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{ifindex}=="2", NAME="vagrant", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
echo "#### UDEV Rules (/etc/udev/rules.d/70-persistent-net.rules) ####"
cat /etc/udev/rules.d/70-persistent-net.rules
vagrant_interface_rule

# Run Any Platform Specific Code and Apply the interface Re-map
    #   (may or may not perform a reboot depending on platform)
    device.vm.provision :shell , :inline => $script

end

  ##### DEFINE VM for chassis01-lc4-1 #####
  config.vm.define "chassis01-lc4-1" do |device|

    device.vm.hostname = "chassis01-lc4-1"

    device.vm.box = "CumulusCommunity/cumulus-vx"
    device.vm.box_version = "3.5.0"

    device.vm.provider :libvirt do |v|
      v.memory = 768
    end
    #   see note here: https://github.com/pradels/vagrant-libvirt#synced-folders
    device.vm.synced_folder ".", "/vagrant", disabled: true



    # NETWORK INTERFACES
      # link for eth0 --> oob-mgmt-switch4:swp9
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:c8",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10484',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8484',
            :libvirt__iface_name => 'eth0',
            auto_config: false
      # link for fp0 --> chassis01-fc1-1:fp24
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:a5",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8083',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10083',
            :libvirt__iface_name => 'fp0',
            auto_config: false
      # link for fp1 --> chassis01-fc1-1:fp25
      device.vm.network "private_network",
            :mac => "44:38:39:00:07:55",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8939',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10939',
            :libvirt__iface_name => 'fp1',
            auto_config: false
      # link for fp2 --> chassis01-fc1-1:fp26
      device.vm.network "private_network",
            :mac => "44:38:39:00:08:4b",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '9062',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '11062',
            :libvirt__iface_name => 'fp2',
            auto_config: false
      # link for fp3 --> chassis01-fc1-1:fp27
      device.vm.network "private_network",
            :mac => "44:38:39:00:07:b1",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8985',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10985',
            :libvirt__iface_name => 'fp3',
            auto_config: false
      # link for fp4 --> chassis01-fc2-1:fp24
      device.vm.network "private_network",
            :mac => "44:38:39:00:07:e3",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '9010',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '11010',
            :libvirt__iface_name => 'fp4',
            auto_config: false
      # link for fp5 --> chassis01-fc2-1:fp25
      device.vm.network "private_network",
            :mac => "44:38:39:00:06:eb",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8886',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10886',
            :libvirt__iface_name => 'fp5',
            auto_config: false
      # link for fp6 --> chassis01-fc2-1:fp26
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:03",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8514',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10514',
            :libvirt__iface_name => 'fp6',
            auto_config: false
      # link for fp7 --> chassis01-fc2-1:fp27
      device.vm.network "private_network",
            :mac => "44:38:39:00:07:f1",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '9017',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '11017',
            :libvirt__iface_name => 'fp7',
            auto_config: false
      # link for fp8 --> chassis01-fc3-1:fp24
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:07",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8260',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10260',
            :libvirt__iface_name => 'fp8',
            auto_config: false
      # link for fp9 --> chassis01-fc3-1:fp25
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:23",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8274',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10274',
            :libvirt__iface_name => 'fp9',
            auto_config: false
      # link for fp10 --> chassis01-fc3-1:fp26
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:ef",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8504',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10504',
            :libvirt__iface_name => 'fp10',
            auto_config: false
      # link for fp11 --> chassis01-fc3-1:fp27
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:f3",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8250',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10250',
            :libvirt__iface_name => 'fp11',
            auto_config: false
      # link for fp12 --> chassis01-fc4-1:fp24
      device.vm.network "private_network",
            :mac => "44:38:39:00:07:ed",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '9015',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '11015',
            :libvirt__iface_name => 'fp12',
            auto_config: false
      # link for fp13 --> chassis01-fc4-1:fp25
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:83",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8322',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10322',
            :libvirt__iface_name => 'fp13',
            auto_config: false
      # link for fp14 --> chassis01-fc4-1:fp26
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:cf",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8488',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10488',
            :libvirt__iface_name => 'fp14',
            auto_config: false
      # link for fp15 --> chassis01-fc4-1:fp27
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:0b",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8262',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10262',
            :libvirt__iface_name => 'fp15',
            auto_config: false
      # link for swp1 --> leaf97:swp1
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:2d",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8279',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10279',
            :libvirt__iface_name => 'swp1',
            auto_config: false
      # link for swp2 --> leaf98:swp1
      device.vm.network "private_network",
            :mac => "44:38:39:00:08:67",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '9076',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '11076',
            :libvirt__iface_name => 'swp2',
            auto_config: false
      # link for swp3 --> leaf99:swp1
      device.vm.network "private_network",
            :mac => "44:38:39:00:06:ab",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8854',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10854',
            :libvirt__iface_name => 'swp3',
            auto_config: false
      # link for swp4 --> leaf100:swp1
      device.vm.network "private_network",
            :mac => "44:38:39:00:06:d9",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8877',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10877',
            :libvirt__iface_name => 'swp4',
            auto_config: false
      # link for swp5 --> leaf101:swp1
      device.vm.network "private_network",
            :mac => "44:38:39:00:07:bb",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8990',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10990',
            :libvirt__iface_name => 'swp5',
            auto_config: false
      # link for swp6 --> leaf102:swp1
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:11",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8009',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10009',
            :libvirt__iface_name => 'swp6',
            auto_config: false
      # link for swp7 --> leaf103:swp1
      device.vm.network "private_network",
            :mac => "44:38:39:00:06:5d",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8815',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10815',
            :libvirt__iface_name => 'swp7',
            auto_config: false
      # link for swp8 --> leaf104:swp1
      device.vm.network "private_network",
            :mac => "44:38:39:00:08:35",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '9051',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '11051',
            :libvirt__iface_name => 'swp8',
            auto_config: false
      # link for swp9 --> leaf105:swp1
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:5f",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8176',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10176',
            :libvirt__iface_name => 'swp9',
            auto_config: false
      # link for swp10 --> leaf106:swp1
      device.vm.network "private_network",
            :mac => "44:38:39:00:08:a7",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '9108',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '11108',
            :libvirt__iface_name => 'swp10',
            auto_config: false
      # link for swp11 --> leaf107:swp1
      device.vm.network "private_network",
            :mac => "44:38:39:00:08:65",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '9075',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '11075',
            :libvirt__iface_name => 'swp11',
            auto_config: false
      # link for swp12 --> leaf108:swp1
      device.vm.network "private_network",
            :mac => "44:38:39:00:07:f9",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '9021',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '11021',
            :libvirt__iface_name => 'swp12',
            auto_config: false
      # link for swp13 --> leaf109:swp1
      device.vm.network "private_network",
            :mac => "44:38:39:00:09:3b",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '9182',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '11182',
            :libvirt__iface_name => 'swp13',
            auto_config: false
      # link for swp14 --> leaf110:swp1
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:bd",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8479',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10479',
            :libvirt__iface_name => 'swp14',
            auto_config: false
      # link for swp15 --> leaf111:swp1
      device.vm.network "private_network",
            :mac => "44:38:39:00:09:63",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '9202',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '11202',
            :libvirt__iface_name => 'swp15',
            auto_config: false
      # link for swp16 --> leaf112:swp1
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:e9",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8373',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10373',
            :libvirt__iface_name => 'swp16',
            auto_config: false



    # Fixes "stdin: is not a tty" and "mesg: ttyname failed : Inappropriate ioctl for device"  messages --> https://github.com/mitchellh/vagrant/issues/1673
    device.vm.provision :shell , inline: "(sudo grep -q 'mesg n' /root/.profile 2>/dev/null && sudo sed -i '/mesg n/d' /root/.profile  2>/dev/null) || true;", privileged: false

    #Copy over Topology.dot File
    device.vm.provision "file", source: "topology.dot", destination: "~/topology.dot"
    device.vm.provision :shell, privileged: false, inline: "sudo mv ~/topology.dot /etc/ptm.d/topology.dot"


    # Run the Config specified in the Node Attributes
    device.vm.provision :shell , privileged: false, :inline => 'echo "$(whoami)" > /tmp/normal_user'
    device.vm.provision :shell , path: "./helper_scripts/extra_switch_config.sh"


    # Install Rules for the interface re-map
    device.vm.provision :shell , :inline => <<-delete_udev_directory
if [ -d "/etc/udev/rules.d/70-persistent-net.rules" ]; then
    rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
fi
rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
delete_udev_directory

device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:c8 --> eth0"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:c8", NAME="eth0", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:a5 --> fp0"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:a5", NAME="fp0", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:07:55 --> fp1"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:07:55", NAME="fp1", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:08:4b --> fp2"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:08:4b", NAME="fp2", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:07:b1 --> fp3"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:07:b1", NAME="fp3", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:07:e3 --> fp4"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:07:e3", NAME="fp4", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:06:eb --> fp5"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:06:eb", NAME="fp5", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:03 --> fp6"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:03", NAME="fp6", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:07:f1 --> fp7"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:07:f1", NAME="fp7", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:07 --> fp8"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:07", NAME="fp8", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:23 --> fp9"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:23", NAME="fp9", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:ef --> fp10"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:ef", NAME="fp10", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:f3 --> fp11"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:f3", NAME="fp11", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:07:ed --> fp12"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:07:ed", NAME="fp12", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:83 --> fp13"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:83", NAME="fp13", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:cf --> fp14"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:cf", NAME="fp14", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:0b --> fp15"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:0b", NAME="fp15", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:2d --> swp1"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:2d", NAME="swp1", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:08:67 --> swp2"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:08:67", NAME="swp2", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:06:ab --> swp3"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:06:ab", NAME="swp3", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:06:d9 --> swp4"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:06:d9", NAME="swp4", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:07:bb --> swp5"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:07:bb", NAME="swp5", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:11 --> swp6"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:11", NAME="swp6", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:06:5d --> swp7"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:06:5d", NAME="swp7", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:08:35 --> swp8"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:08:35", NAME="swp8", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:5f --> swp9"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:5f", NAME="swp9", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:08:a7 --> swp10"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:08:a7", NAME="swp10", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:08:65 --> swp11"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:08:65", NAME="swp11", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:07:f9 --> swp12"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:07:f9", NAME="swp12", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:09:3b --> swp13"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:09:3b", NAME="swp13", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:bd --> swp14"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:bd", NAME="swp14", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:09:63 --> swp15"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:09:63", NAME="swp15", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:e9 --> swp16"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:e9", NAME="swp16", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule

      device.vm.provision :shell , :inline => <<-vagrant_interface_rule
echo "  INFO: Adding UDEV Rule: Vagrant interface = vagrant"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{ifindex}=="2", NAME="vagrant", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
echo "#### UDEV Rules (/etc/udev/rules.d/70-persistent-net.rules) ####"
cat /etc/udev/rules.d/70-persistent-net.rules
vagrant_interface_rule

# Run Any Platform Specific Code and Apply the interface Re-map
    #   (may or may not perform a reboot depending on platform)
    device.vm.provision :shell , :inline => $script

end

  ##### DEFINE VM for chassis01-lc3-1 #####
  config.vm.define "chassis01-lc3-1" do |device|

    device.vm.hostname = "chassis01-lc3-1"

    device.vm.box = "CumulusCommunity/cumulus-vx"
    device.vm.box_version = "3.5.0"

    device.vm.provider :libvirt do |v|
      v.memory = 768
    end
    #   see note here: https://github.com/pradels/vagrant-libvirt#synced-folders
    device.vm.synced_folder ".", "/vagrant", disabled: true



    # NETWORK INTERFACES
      # link for eth0 --> oob-mgmt-switch4:swp7
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:d2",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10105',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8105',
            :libvirt__iface_name => 'eth0',
            auto_config: false
      # link for fp0 --> chassis01-fc1-1:fp16
      device.vm.network "private_network",
            :mac => "44:38:39:00:06:41",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8801',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10801',
            :libvirt__iface_name => 'fp0',
            auto_config: false
      # link for fp1 --> chassis01-fc1-1:fp17
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:0f",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8264',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10264',
            :libvirt__iface_name => 'fp1',
            auto_config: false
      # link for fp2 --> chassis01-fc1-1:fp18
      device.vm.network "private_network",
            :mac => "44:38:39:00:08:59",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '9069',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '11069',
            :libvirt__iface_name => 'fp2',
            auto_config: false
      # link for fp3 --> chassis01-fc1-1:fp19
      device.vm.network "private_network",
            :mac => "44:38:39:00:07:2d",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8919',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10919',
            :libvirt__iface_name => 'fp3',
            auto_config: false
      # link for fp4 --> chassis01-fc2-1:fp16
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:5d",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8431',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10431',
            :libvirt__iface_name => 'fp4',
            auto_config: false
      # link for fp5 --> chassis01-fc2-1:fp17
      device.vm.network "private_network",
            :mac => "44:38:39:00:05:05",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8643',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10643',
            :libvirt__iface_name => 'fp5',
            auto_config: false
      # link for fp6 --> chassis01-fc2-1:fp18
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:05",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8387',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10387',
            :libvirt__iface_name => 'fp6',
            auto_config: false
      # link for fp7 --> chassis01-fc2-1:fp19
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:87",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8196',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10196',
            :libvirt__iface_name => 'fp7',
            auto_config: false
      # link for fp8 --> chassis01-fc3-1:fp16
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:4f",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8040',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10040',
            :libvirt__iface_name => 'fp8',
            auto_config: false
      # link for fp9 --> chassis01-fc3-1:fp17
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:81",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8321',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10321',
            :libvirt__iface_name => 'fp9',
            auto_config: false
      # link for fp10 --> chassis01-fc3-1:fp18
      device.vm.network "private_network",
            :mac => "44:38:39:00:07:71",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8953',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10953',
            :libvirt__iface_name => 'fp10',
            auto_config: false
      # link for fp11 --> chassis01-fc3-1:fp19
      device.vm.network "private_network",
            :mac => "44:38:39:00:05:c7",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8740',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10740',
            :libvirt__iface_name => 'fp11',
            auto_config: false
      # link for fp12 --> chassis01-fc4-1:fp16
      device.vm.network "private_network",
            :mac => "44:38:39:00:07:ab",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8982',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10982',
            :libvirt__iface_name => 'fp12',
            auto_config: false
      # link for fp13 --> chassis01-fc4-1:fp17
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:19",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8269',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10269',
            :libvirt__iface_name => 'fp13',
            auto_config: false
      # link for fp14 --> chassis01-fc4-1:fp18
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:07",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8004',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10004',
            :libvirt__iface_name => 'fp14',
            auto_config: false
      # link for fp15 --> chassis01-fc4-1:fp19
      device.vm.network "private_network",
            :mac => "44:38:39:00:09:2f",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '9176',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '11176',
            :libvirt__iface_name => 'fp15',
            auto_config: false
      # link for swp1 --> leaf65:swp1
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:01",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8257',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10257',
            :libvirt__iface_name => 'swp1',
            auto_config: false
      # link for swp2 --> leaf66:swp1
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:0f",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8520',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10520',
            :libvirt__iface_name => 'swp2',
            auto_config: false
      # link for swp3 --> leaf67:swp1
      device.vm.network "private_network",
            :mac => "44:38:39:00:09:1b",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '9166',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '11166',
            :libvirt__iface_name => 'swp3',
            auto_config: false
      # link for swp4 --> leaf68:swp1
      device.vm.network "private_network",
            :mac => "44:38:39:00:07:f5",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '9019',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '11019',
            :libvirt__iface_name => 'swp4',
            auto_config: false
      # link for swp5 --> leaf69:swp1
      device.vm.network "private_network",
            :mac => "44:38:39:00:06:f3",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8890',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10890',
            :libvirt__iface_name => 'swp5',
            auto_config: false
      # link for swp6 --> leaf70:swp1
      device.vm.network "private_network",
            :mac => "44:38:39:00:08:05",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '9027',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '11027',
            :libvirt__iface_name => 'swp6',
            auto_config: false
      # link for swp7 --> leaf71:swp1
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:59",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8301',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10301',
            :libvirt__iface_name => 'swp7',
            auto_config: false
      # link for swp8 --> leaf72:swp1
      device.vm.network "private_network",
            :mac => "44:38:39:00:07:c7",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8996',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10996',
            :libvirt__iface_name => 'swp8',
            auto_config: false
      # link for swp9 --> leaf73:swp1
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:a5",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8339',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10339',
            :libvirt__iface_name => 'swp9',
            auto_config: false
      # link for swp10 --> leaf74:swp1
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:95",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8203',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10203',
            :libvirt__iface_name => 'swp10',
            auto_config: false
      # link for swp11 --> leaf75:swp1
      device.vm.network "private_network",
            :mac => "44:38:39:00:05:e7",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8756',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10756',
            :libvirt__iface_name => 'swp11',
            auto_config: false
      # link for swp12 --> leaf76:swp1
      device.vm.network "private_network",
            :mac => "44:38:39:00:07:db",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '9006',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '11006',
            :libvirt__iface_name => 'swp12',
            auto_config: false
      # link for swp13 --> leaf77:swp1
      device.vm.network "private_network",
            :mac => "44:38:39:00:06:ad",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8855',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10855',
            :libvirt__iface_name => 'swp13',
            auto_config: false
      # link for swp14 --> leaf78:swp1
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:9f",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8080',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10080',
            :libvirt__iface_name => 'swp14',
            auto_config: false
      # link for swp15 --> leaf79:swp1
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:0d",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8519',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10519',
            :libvirt__iface_name => 'swp15',
            auto_config: false
      # link for swp16 --> leaf80:swp1
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:93",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8330',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10330',
            :libvirt__iface_name => 'swp16',
            auto_config: false



    # Fixes "stdin: is not a tty" and "mesg: ttyname failed : Inappropriate ioctl for device"  messages --> https://github.com/mitchellh/vagrant/issues/1673
    device.vm.provision :shell , inline: "(sudo grep -q 'mesg n' /root/.profile 2>/dev/null && sudo sed -i '/mesg n/d' /root/.profile  2>/dev/null) || true;", privileged: false

    #Copy over Topology.dot File
    device.vm.provision "file", source: "topology.dot", destination: "~/topology.dot"
    device.vm.provision :shell, privileged: false, inline: "sudo mv ~/topology.dot /etc/ptm.d/topology.dot"


    # Run the Config specified in the Node Attributes
    device.vm.provision :shell , privileged: false, :inline => 'echo "$(whoami)" > /tmp/normal_user'
    device.vm.provision :shell , path: "./helper_scripts/extra_switch_config.sh"


    # Install Rules for the interface re-map
    device.vm.provision :shell , :inline => <<-delete_udev_directory
if [ -d "/etc/udev/rules.d/70-persistent-net.rules" ]; then
    rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
fi
rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
delete_udev_directory

device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:d2 --> eth0"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:d2", NAME="eth0", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:06:41 --> fp0"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:06:41", NAME="fp0", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:0f --> fp1"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:0f", NAME="fp1", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:08:59 --> fp2"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:08:59", NAME="fp2", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:07:2d --> fp3"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:07:2d", NAME="fp3", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:5d --> fp4"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:5d", NAME="fp4", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:05:05 --> fp5"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:05:05", NAME="fp5", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:05 --> fp6"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:05", NAME="fp6", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:87 --> fp7"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:87", NAME="fp7", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:4f --> fp8"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:4f", NAME="fp8", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:81 --> fp9"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:81", NAME="fp9", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:07:71 --> fp10"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:07:71", NAME="fp10", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:05:c7 --> fp11"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:05:c7", NAME="fp11", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:07:ab --> fp12"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:07:ab", NAME="fp12", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:19 --> fp13"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:19", NAME="fp13", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:07 --> fp14"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:07", NAME="fp14", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:09:2f --> fp15"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:09:2f", NAME="fp15", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:01 --> swp1"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:01", NAME="swp1", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:0f --> swp2"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:0f", NAME="swp2", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:09:1b --> swp3"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:09:1b", NAME="swp3", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:07:f5 --> swp4"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:07:f5", NAME="swp4", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:06:f3 --> swp5"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:06:f3", NAME="swp5", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:08:05 --> swp6"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:08:05", NAME="swp6", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:59 --> swp7"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:59", NAME="swp7", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:07:c7 --> swp8"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:07:c7", NAME="swp8", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:a5 --> swp9"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:a5", NAME="swp9", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:95 --> swp10"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:95", NAME="swp10", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:05:e7 --> swp11"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:05:e7", NAME="swp11", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:07:db --> swp12"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:07:db", NAME="swp12", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:06:ad --> swp13"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:06:ad", NAME="swp13", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:9f --> swp14"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:9f", NAME="swp14", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:0d --> swp15"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:0d", NAME="swp15", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:93 --> swp16"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:93", NAME="swp16", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule

      device.vm.provision :shell , :inline => <<-vagrant_interface_rule
echo "  INFO: Adding UDEV Rule: Vagrant interface = vagrant"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{ifindex}=="2", NAME="vagrant", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
echo "#### UDEV Rules (/etc/udev/rules.d/70-persistent-net.rules) ####"
cat /etc/udev/rules.d/70-persistent-net.rules
vagrant_interface_rule

# Run Any Platform Specific Code and Apply the interface Re-map
    #   (may or may not perform a reboot depending on platform)
    device.vm.provision :shell , :inline => $script

end

  ##### DEFINE VM for chassis01-lc3-2 #####
  config.vm.define "chassis01-lc3-2" do |device|

    device.vm.hostname = "chassis01-lc3-2"

    device.vm.box = "CumulusCommunity/cumulus-vx"
    device.vm.box_version = "3.5.0"

    device.vm.provider :libvirt do |v|
      v.memory = 768
    end
    #   see note here: https://github.com/pradels/vagrant-libvirt#synced-folders
    device.vm.synced_folder ".", "/vagrant", disabled: true



    # NETWORK INTERFACES
      # link for eth0 --> oob-mgmt-switch4:swp8
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:be",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10607',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8607',
            :libvirt__iface_name => 'eth0',
            auto_config: false
      # link for fp0 --> chassis01-fc1-1:fp20
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:37",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8412',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10412',
            :libvirt__iface_name => 'fp0',
            auto_config: false
      # link for fp1 --> chassis01-fc1-1:fp21
      device.vm.network "private_network",
            :mac => "44:38:39:00:06:65",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8819',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10819',
            :libvirt__iface_name => 'fp1',
            auto_config: false
      # link for fp2 --> chassis01-fc1-1:fp22
      device.vm.network "private_network",
            :mac => "44:38:39:00:05:59",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8685',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10685',
            :libvirt__iface_name => 'fp2',
            auto_config: false
      # link for fp3 --> chassis01-fc1-1:fp23
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:8f",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8072',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10072',
            :libvirt__iface_name => 'fp3',
            auto_config: false
      # link for fp4 --> chassis01-fc2-1:fp20
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:99",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8589',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10589',
            :libvirt__iface_name => 'fp4',
            auto_config: false
      # link for fp5 --> chassis01-fc2-1:fp21
      device.vm.network "private_network",
            :mac => "44:38:39:00:06:e1",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8881',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10881',
            :libvirt__iface_name => 'fp5',
            auto_config: false
      # link for fp6 --> chassis01-fc2-1:fp22
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:8f",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8584',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10584',
            :libvirt__iface_name => 'fp6',
            auto_config: false
      # link for fp7 --> chassis01-fc2-1:fp23
      device.vm.network "private_network",
            :mac => "44:38:39:00:06:37",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8796',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10796',
            :libvirt__iface_name => 'fp7',
            auto_config: false
      # link for fp8 --> chassis01-fc3-1:fp20
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:2b",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8406',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10406',
            :libvirt__iface_name => 'fp8',
            auto_config: false
      # link for fp9 --> chassis01-fc3-1:fp21
      device.vm.network "private_network",
            :mac => "44:38:39:00:06:89",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8837',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10837',
            :libvirt__iface_name => 'fp9',
            auto_config: false
      # link for fp10 --> chassis01-fc3-1:fp22
      device.vm.network "private_network",
            :mac => "44:38:39:00:05:ab",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8726',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10726',
            :libvirt__iface_name => 'fp10',
            auto_config: false
      # link for fp11 --> chassis01-fc3-1:fp23
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:1d",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8527',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10527',
            :libvirt__iface_name => 'fp11',
            auto_config: false
      # link for fp12 --> chassis01-fc4-1:fp20
      device.vm.network "private_network",
            :mac => "44:38:39:00:06:93",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8842',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10842',
            :libvirt__iface_name => 'fp12',
            auto_config: false
      # link for fp13 --> chassis01-fc4-1:fp21
      device.vm.network "private_network",
            :mac => "44:38:39:00:06:a3",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8850',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10850',
            :libvirt__iface_name => 'fp13',
            auto_config: false
      # link for fp14 --> chassis01-fc4-1:fp22
      device.vm.network "private_network",
            :mac => "44:38:39:00:06:a7",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8852',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10852',
            :libvirt__iface_name => 'fp14',
            auto_config: false
      # link for fp15 --> chassis01-fc4-1:fp23
      device.vm.network "private_network",
            :mac => "44:38:39:00:05:17",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8652',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10652',
            :libvirt__iface_name => 'fp15',
            auto_config: false
      # link for swp1 --> leaf81:swp1
      device.vm.network "private_network",
            :mac => "44:38:39:00:06:59",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8813',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10813',
            :libvirt__iface_name => 'swp1',
            auto_config: false
      # link for swp2 --> leaf82:swp1
      device.vm.network "private_network",
            :mac => "44:38:39:00:08:85",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '9091',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '11091',
            :libvirt__iface_name => 'swp2',
            auto_config: false
      # link for swp3 --> leaf83:swp1
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:ff",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8512',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10512',
            :libvirt__iface_name => 'swp3',
            auto_config: false
      # link for swp4 --> leaf84:swp1
      device.vm.network "private_network",
            :mac => "44:38:39:00:05:29",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8661',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10661',
            :libvirt__iface_name => 'swp4',
            auto_config: false
      # link for swp5 --> leaf85:swp1
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:13",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8266',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10266',
            :libvirt__iface_name => 'swp5',
            auto_config: false
      # link for swp6 --> leaf86:swp1
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:1b",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8526',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10526',
            :libvirt__iface_name => 'swp6',
            auto_config: false
      # link for swp7 --> leaf87:swp1
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:15",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8139',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10139',
            :libvirt__iface_name => 'swp7',
            auto_config: false
      # link for swp8 --> leaf88:swp1
      device.vm.network "private_network",
            :mac => "44:38:39:00:06:73",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8826',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10826',
            :libvirt__iface_name => 'swp8',
            auto_config: false
      # link for swp9 --> leaf89:swp1
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:d9",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8365',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10365',
            :libvirt__iface_name => 'swp9',
            auto_config: false
      # link for swp10 --> leaf90:swp1
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:75",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8315',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10315',
            :libvirt__iface_name => 'swp10',
            auto_config: false
      # link for swp11 --> leaf91:swp1
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:17",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8012',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10012',
            :libvirt__iface_name => 'swp11',
            auto_config: false
      # link for swp12 --> leaf92:swp1
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:83",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8450',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10450',
            :libvirt__iface_name => 'swp12',
            auto_config: false
      # link for swp13 --> leaf93:swp1
      device.vm.network "private_network",
            :mac => "44:38:39:00:05:9f",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8720',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10720',
            :libvirt__iface_name => 'swp13',
            auto_config: false
      # link for swp14 --> leaf94:swp1
      device.vm.network "private_network",
            :mac => "44:38:39:00:07:a5",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8979',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10979',
            :libvirt__iface_name => 'swp14',
            auto_config: false
      # link for swp15 --> leaf95:swp1
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:89",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8325',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10325',
            :libvirt__iface_name => 'swp15',
            auto_config: false
      # link for swp16 --> leaf96:swp1
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:bf",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8608',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10608',
            :libvirt__iface_name => 'swp16',
            auto_config: false



    # Fixes "stdin: is not a tty" and "mesg: ttyname failed : Inappropriate ioctl for device"  messages --> https://github.com/mitchellh/vagrant/issues/1673
    device.vm.provision :shell , inline: "(sudo grep -q 'mesg n' /root/.profile 2>/dev/null && sudo sed -i '/mesg n/d' /root/.profile  2>/dev/null) || true;", privileged: false

    #Copy over Topology.dot File
    device.vm.provision "file", source: "topology.dot", destination: "~/topology.dot"
    device.vm.provision :shell, privileged: false, inline: "sudo mv ~/topology.dot /etc/ptm.d/topology.dot"


    # Run the Config specified in the Node Attributes
    device.vm.provision :shell , privileged: false, :inline => 'echo "$(whoami)" > /tmp/normal_user'
    device.vm.provision :shell , path: "./helper_scripts/extra_switch_config.sh"


    # Install Rules for the interface re-map
    device.vm.provision :shell , :inline => <<-delete_udev_directory
if [ -d "/etc/udev/rules.d/70-persistent-net.rules" ]; then
    rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
fi
rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
delete_udev_directory

device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:be --> eth0"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:be", NAME="eth0", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:37 --> fp0"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:37", NAME="fp0", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:06:65 --> fp1"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:06:65", NAME="fp1", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:05:59 --> fp2"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:05:59", NAME="fp2", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:8f --> fp3"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:8f", NAME="fp3", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:99 --> fp4"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:99", NAME="fp4", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:06:e1 --> fp5"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:06:e1", NAME="fp5", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:8f --> fp6"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:8f", NAME="fp6", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:06:37 --> fp7"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:06:37", NAME="fp7", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:2b --> fp8"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:2b", NAME="fp8", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:06:89 --> fp9"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:06:89", NAME="fp9", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:05:ab --> fp10"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:05:ab", NAME="fp10", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:1d --> fp11"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:1d", NAME="fp11", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:06:93 --> fp12"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:06:93", NAME="fp12", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:06:a3 --> fp13"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:06:a3", NAME="fp13", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:06:a7 --> fp14"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:06:a7", NAME="fp14", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:05:17 --> fp15"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:05:17", NAME="fp15", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:06:59 --> swp1"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:06:59", NAME="swp1", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:08:85 --> swp2"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:08:85", NAME="swp2", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:ff --> swp3"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:ff", NAME="swp3", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:05:29 --> swp4"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:05:29", NAME="swp4", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:13 --> swp5"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:13", NAME="swp5", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:1b --> swp6"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:1b", NAME="swp6", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:15 --> swp7"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:15", NAME="swp7", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:06:73 --> swp8"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:06:73", NAME="swp8", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:d9 --> swp9"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:d9", NAME="swp9", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:75 --> swp10"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:75", NAME="swp10", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:17 --> swp11"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:17", NAME="swp11", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:83 --> swp12"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:83", NAME="swp12", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:05:9f --> swp13"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:05:9f", NAME="swp13", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:07:a5 --> swp14"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:07:a5", NAME="swp14", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:89 --> swp15"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:89", NAME="swp15", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:bf --> swp16"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:bf", NAME="swp16", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule

      device.vm.provision :shell , :inline => <<-vagrant_interface_rule
echo "  INFO: Adding UDEV Rule: Vagrant interface = vagrant"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{ifindex}=="2", NAME="vagrant", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
echo "#### UDEV Rules (/etc/udev/rules.d/70-persistent-net.rules) ####"
cat /etc/udev/rules.d/70-persistent-net.rules
vagrant_interface_rule

# Run Any Platform Specific Code and Apply the interface Re-map
    #   (may or may not perform a reboot depending on platform)
    device.vm.provision :shell , :inline => $script

end

  ##### DEFINE VM for chassis03-lc3-2 #####
  config.vm.define "chassis03-lc3-2" do |device|

    device.vm.hostname = "chassis03-lc3-2"

    device.vm.box = "CumulusCommunity/cumulus-vx"
    device.vm.box_version = "3.5.0"

    device.vm.provider :libvirt do |v|
      v.memory = 768
    end
    #   see note here: https://github.com/pradels/vagrant-libvirt#synced-folders
    device.vm.synced_folder ".", "/vagrant", disabled: true



    # NETWORK INTERFACES
      # link for eth0 --> oob-mgmt-switch4:swp32
      device.vm.network "private_network",
            :mac => "44:38:39:00:05:da",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10749',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8749',
            :libvirt__iface_name => 'eth0',
            auto_config: false
      # link for fp0 --> chassis03-fc1-1:fp20
      device.vm.network "private_network",
            :mac => "44:38:39:00:06:5b",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8814',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10814',
            :libvirt__iface_name => 'fp0',
            auto_config: false
      # link for fp1 --> chassis03-fc1-1:fp21
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:97",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8332',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10332',
            :libvirt__iface_name => 'fp1',
            auto_config: false
      # link for fp2 --> chassis03-fc1-1:fp22
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:87",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8452',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10452',
            :libvirt__iface_name => 'fp2',
            auto_config: false
      # link for fp3 --> chassis03-fc1-1:fp23
      device.vm.network "private_network",
            :mac => "44:38:39:00:06:69",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8821',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10821',
            :libvirt__iface_name => 'fp3',
            auto_config: false
      # link for fp4 --> chassis03-fc2-1:fp20
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:c1",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8225',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10225',
            :libvirt__iface_name => 'fp4',
            auto_config: false
      # link for fp5 --> chassis03-fc2-1:fp21
      device.vm.network "private_network",
            :mac => "44:38:39:00:05:3f",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8672',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10672',
            :libvirt__iface_name => 'fp5',
            auto_config: false
      # link for fp6 --> chassis03-fc2-1:fp22
      device.vm.network "private_network",
            :mac => "44:38:39:00:06:13",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8778',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10778',
            :libvirt__iface_name => 'fp6',
            auto_config: false
      # link for fp7 --> chassis03-fc2-1:fp23
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:01",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8513',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10513',
            :libvirt__iface_name => 'fp7',
            auto_config: false
      # link for fp8 --> chassis03-fc3-1:fp20
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:89",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8197',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10197',
            :libvirt__iface_name => 'fp8',
            auto_config: false
      # link for fp9 --> chassis03-fc3-1:fp21
      device.vm.network "private_network",
            :mac => "44:38:39:00:05:3d",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8671',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10671',
            :libvirt__iface_name => 'fp9',
            auto_config: false
      # link for fp10 --> chassis03-fc3-1:fp22
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:21",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8529',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10529',
            :libvirt__iface_name => 'fp10',
            auto_config: false
      # link for fp11 --> chassis03-fc3-1:fp23
      device.vm.network "private_network",
            :mac => "44:38:39:00:05:39",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8669',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10669',
            :libvirt__iface_name => 'fp11',
            auto_config: false
      # link for fp12 --> chassis03-fc4-1:fp20
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:9b",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8206',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10206',
            :libvirt__iface_name => 'fp12',
            auto_config: false
      # link for fp13 --> chassis03-fc4-1:fp21
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:0f",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8392',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10392',
            :libvirt__iface_name => 'fp13',
            auto_config: false
      # link for fp14 --> chassis03-fc4-1:fp22
      device.vm.network "private_network",
            :mac => "44:38:39:00:08:1d",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '9039',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '11039',
            :libvirt__iface_name => 'fp14',
            auto_config: false
      # link for fp15 --> chassis03-fc4-1:fp23
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:3b",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8030',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10030',
            :libvirt__iface_name => 'fp15',
            auto_config: false
      # link for swp1 --> leaf81:swp3
      device.vm.network "private_network",
            :mac => "44:38:39:00:09:2b",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '9174',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '11174',
            :libvirt__iface_name => 'swp1',
            auto_config: false
      # link for swp2 --> leaf82:swp3
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:cd",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8103',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10103',
            :libvirt__iface_name => 'swp2',
            auto_config: false
      # link for swp3 --> leaf83:swp3
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:4b",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8166',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10166',
            :libvirt__iface_name => 'swp3',
            auto_config: false
      # link for swp4 --> leaf84:swp3
      device.vm.network "private_network",
            :mac => "44:38:39:00:08:15",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '9035',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '11035',
            :libvirt__iface_name => 'swp4',
            auto_config: false
      # link for swp5 --> leaf85:swp3
      device.vm.network "private_network",
            :mac => "44:38:39:00:06:5f",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8816',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10816',
            :libvirt__iface_name => 'swp5',
            auto_config: false
      # link for swp6 --> leaf86:swp3
      device.vm.network "private_network",
            :mac => "44:38:39:00:08:f9",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '9149',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '11149',
            :libvirt__iface_name => 'swp6',
            auto_config: false
      # link for swp7 --> leaf87:swp3
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:65",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8563',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10563',
            :libvirt__iface_name => 'swp7',
            auto_config: false
      # link for swp8 --> leaf88:swp3
      device.vm.network "private_network",
            :mac => "44:38:39:00:09:49",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '9189',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '11189',
            :libvirt__iface_name => 'swp8',
            auto_config: false
      # link for swp9 --> leaf89:swp3
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:c7",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8612',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10612',
            :libvirt__iface_name => 'swp9',
            auto_config: false
      # link for swp10 --> leaf90:swp3
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:13",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8138',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10138',
            :libvirt__iface_name => 'swp10',
            auto_config: false
      # link for swp11 --> leaf91:swp3
      device.vm.network "private_network",
            :mac => "44:38:39:00:06:99",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8845',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10845',
            :libvirt__iface_name => 'swp11',
            auto_config: false
      # link for swp12 --> leaf92:swp3
      device.vm.network "private_network",
            :mac => "44:38:39:00:06:51",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8809',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10809',
            :libvirt__iface_name => 'swp12',
            auto_config: false
      # link for swp13 --> leaf93:swp3
      device.vm.network "private_network",
            :mac => "44:38:39:00:05:15",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8651',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10651',
            :libvirt__iface_name => 'swp13',
            auto_config: false
      # link for swp14 --> leaf94:swp3
      device.vm.network "private_network",
            :mac => "44:38:39:00:09:1f",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '9168',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '11168',
            :libvirt__iface_name => 'swp14',
            auto_config: false
      # link for swp15 --> leaf95:swp3
      device.vm.network "private_network",
            :mac => "44:38:39:00:07:81",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8961',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10961',
            :libvirt__iface_name => 'swp15',
            auto_config: false
      # link for swp16 --> leaf96:swp3
      device.vm.network "private_network",
            :mac => "44:38:39:00:06:09",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8773',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10773',
            :libvirt__iface_name => 'swp16',
            auto_config: false



    # Fixes "stdin: is not a tty" and "mesg: ttyname failed : Inappropriate ioctl for device"  messages --> https://github.com/mitchellh/vagrant/issues/1673
    device.vm.provision :shell , inline: "(sudo grep -q 'mesg n' /root/.profile 2>/dev/null && sudo sed -i '/mesg n/d' /root/.profile  2>/dev/null) || true;", privileged: false

    #Copy over Topology.dot File
    device.vm.provision "file", source: "topology.dot", destination: "~/topology.dot"
    device.vm.provision :shell, privileged: false, inline: "sudo mv ~/topology.dot /etc/ptm.d/topology.dot"


    # Run the Config specified in the Node Attributes
    device.vm.provision :shell , privileged: false, :inline => 'echo "$(whoami)" > /tmp/normal_user'
    device.vm.provision :shell , path: "./helper_scripts/extra_switch_config.sh"


    # Install Rules for the interface re-map
    device.vm.provision :shell , :inline => <<-delete_udev_directory
if [ -d "/etc/udev/rules.d/70-persistent-net.rules" ]; then
    rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
fi
rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
delete_udev_directory

device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:05:da --> eth0"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:05:da", NAME="eth0", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:06:5b --> fp0"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:06:5b", NAME="fp0", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:97 --> fp1"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:97", NAME="fp1", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:87 --> fp2"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:87", NAME="fp2", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:06:69 --> fp3"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:06:69", NAME="fp3", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:c1 --> fp4"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:c1", NAME="fp4", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:05:3f --> fp5"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:05:3f", NAME="fp5", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:06:13 --> fp6"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:06:13", NAME="fp6", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:01 --> fp7"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:01", NAME="fp7", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:89 --> fp8"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:89", NAME="fp8", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:05:3d --> fp9"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:05:3d", NAME="fp9", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:21 --> fp10"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:21", NAME="fp10", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:05:39 --> fp11"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:05:39", NAME="fp11", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:9b --> fp12"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:9b", NAME="fp12", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:0f --> fp13"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:0f", NAME="fp13", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:08:1d --> fp14"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:08:1d", NAME="fp14", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:3b --> fp15"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:3b", NAME="fp15", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:09:2b --> swp1"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:09:2b", NAME="swp1", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:cd --> swp2"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:cd", NAME="swp2", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:4b --> swp3"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:4b", NAME="swp3", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:08:15 --> swp4"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:08:15", NAME="swp4", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:06:5f --> swp5"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:06:5f", NAME="swp5", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:08:f9 --> swp6"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:08:f9", NAME="swp6", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:65 --> swp7"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:65", NAME="swp7", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:09:49 --> swp8"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:09:49", NAME="swp8", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:c7 --> swp9"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:c7", NAME="swp9", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:13 --> swp10"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:13", NAME="swp10", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:06:99 --> swp11"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:06:99", NAME="swp11", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:06:51 --> swp12"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:06:51", NAME="swp12", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:05:15 --> swp13"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:05:15", NAME="swp13", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:09:1f --> swp14"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:09:1f", NAME="swp14", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:07:81 --> swp15"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:07:81", NAME="swp15", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:06:09 --> swp16"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:06:09", NAME="swp16", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule

      device.vm.provision :shell , :inline => <<-vagrant_interface_rule
echo "  INFO: Adding UDEV Rule: Vagrant interface = vagrant"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{ifindex}=="2", NAME="vagrant", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
echo "#### UDEV Rules (/etc/udev/rules.d/70-persistent-net.rules) ####"
cat /etc/udev/rules.d/70-persistent-net.rules
vagrant_interface_rule

# Run Any Platform Specific Code and Apply the interface Re-map
    #   (may or may not perform a reboot depending on platform)
    device.vm.provision :shell , :inline => $script

end

  ##### DEFINE VM for chassis03-lc3-1 #####
  config.vm.define "chassis03-lc3-1" do |device|

    device.vm.hostname = "chassis03-lc3-1"

    device.vm.box = "CumulusCommunity/cumulus-vx"
    device.vm.box_version = "3.5.0"

    device.vm.provider :libvirt do |v|
      v.memory = 768
    end
    #   see note here: https://github.com/pradels/vagrant-libvirt#synced-folders
    device.vm.synced_folder ".", "/vagrant", disabled: true



    # NETWORK INTERFACES
      # link for eth0 --> oob-mgmt-switch4:swp31
      device.vm.network "private_network",
            :mac => "44:38:39:00:06:40",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10800',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8800',
            :libvirt__iface_name => 'eth0',
            auto_config: false
      # link for fp0 --> chassis03-fc1-1:fp16
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:e7",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8500',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10500',
            :libvirt__iface_name => 'fp0',
            auto_config: false
      # link for fp1 --> chassis03-fc1-1:fp17
      device.vm.network "private_network",
            :mac => "44:38:39:00:06:c9",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8869',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10869',
            :libvirt__iface_name => 'fp1',
            auto_config: false
      # link for fp2 --> chassis03-fc1-1:fp18
      device.vm.network "private_network",
            :mac => "44:38:39:00:07:e1",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '9009',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '11009',
            :libvirt__iface_name => 'fp2',
            auto_config: false
      # link for fp3 --> chassis03-fc1-1:fp19
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:c3",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8610',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10610',
            :libvirt__iface_name => 'fp3',
            auto_config: false
      # link for fp4 --> chassis03-fc2-1:fp16
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:bf",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8224',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10224',
            :libvirt__iface_name => 'fp4',
            auto_config: false
      # link for fp5 --> chassis03-fc2-1:fp17
      device.vm.network "private_network",
            :mac => "44:38:39:00:05:e1",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8753',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10753',
            :libvirt__iface_name => 'fp5',
            auto_config: false
      # link for fp6 --> chassis03-fc2-1:fp18
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:23",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8530',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10530',
            :libvirt__iface_name => 'fp6',
            auto_config: false
      # link for fp7 --> chassis03-fc2-1:fp19
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:9f",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8464',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10464',
            :libvirt__iface_name => 'fp7',
            auto_config: false
      # link for fp8 --> chassis03-fc3-1:fp16
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:8f",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8328',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10328',
            :libvirt__iface_name => 'fp8',
            auto_config: false
      # link for fp9 --> chassis03-fc3-1:fp17
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:7d",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8191',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10191',
            :libvirt__iface_name => 'fp9',
            auto_config: false
      # link for fp10 --> chassis03-fc3-1:fp18
      device.vm.network "private_network",
            :mac => "44:38:39:00:06:3b",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8798',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10798',
            :libvirt__iface_name => 'fp10',
            auto_config: false
      # link for fp11 --> chassis03-fc3-1:fp19
      device.vm.network "private_network",
            :mac => "44:38:39:00:08:25",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '9043',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '11043',
            :libvirt__iface_name => 'fp11',
            auto_config: false
      # link for fp12 --> chassis03-fc4-1:fp16
      device.vm.network "private_network",
            :mac => "44:38:39:00:09:47",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '9188',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '11188',
            :libvirt__iface_name => 'fp12',
            auto_config: false
      # link for fp13 --> chassis03-fc4-1:fp17
      device.vm.network "private_network",
            :mac => "44:38:39:00:07:0f",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8904',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10904',
            :libvirt__iface_name => 'fp13',
            auto_config: false
      # link for fp14 --> chassis03-fc4-1:fp18
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:f1",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8377',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10377',
            :libvirt__iface_name => 'fp14',
            auto_config: false
      # link for fp15 --> chassis03-fc4-1:fp19
      device.vm.network "private_network",
            :mac => "44:38:39:00:07:77",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8956',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10956',
            :libvirt__iface_name => 'fp15',
            auto_config: false
      # link for swp1 --> leaf65:swp3
      device.vm.network "private_network",
            :mac => "44:38:39:00:06:1d",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8783',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10783',
            :libvirt__iface_name => 'swp1',
            auto_config: false
      # link for swp2 --> leaf66:swp3
      device.vm.network "private_network",
            :mac => "44:38:39:00:08:17",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '9036',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '11036',
            :libvirt__iface_name => 'swp2',
            auto_config: false
      # link for swp3 --> leaf67:swp3
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:eb",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8502',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10502',
            :libvirt__iface_name => 'swp3',
            auto_config: false
      # link for swp4 --> leaf68:swp3
      device.vm.network "private_network",
            :mac => "44:38:39:00:07:6f",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8952',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10952',
            :libvirt__iface_name => 'swp4',
            auto_config: false
      # link for swp5 --> leaf69:swp3
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:b1",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8601',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10601',
            :libvirt__iface_name => 'swp5',
            auto_config: false
      # link for swp6 --> leaf70:swp3
      device.vm.network "private_network",
            :mac => "44:38:39:00:09:1d",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '9167',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '11167',
            :libvirt__iface_name => 'swp6',
            auto_config: false
      # link for swp7 --> leaf71:swp3
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:c3",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8482',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10482',
            :libvirt__iface_name => 'swp7',
            auto_config: false
      # link for swp8 --> leaf72:swp3
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:35",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8283',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10283',
            :libvirt__iface_name => 'swp8',
            auto_config: false
      # link for swp9 --> leaf73:swp3
      device.vm.network "private_network",
            :mac => "44:38:39:00:08:5b",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '9070',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '11070',
            :libvirt__iface_name => 'swp9',
            auto_config: false
      # link for swp10 --> leaf74:swp3
      device.vm.network "private_network",
            :mac => "44:38:39:00:08:75",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '9083',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '11083',
            :libvirt__iface_name => 'swp10',
            auto_config: false
      # link for swp11 --> leaf75:swp3
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:91",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8073',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10073',
            :libvirt__iface_name => 'swp11',
            auto_config: false
      # link for swp12 --> leaf76:swp3
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:85",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8451',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10451',
            :libvirt__iface_name => 'swp12',
            auto_config: false
      # link for swp13 --> leaf77:swp3
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:e5",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8499',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10499',
            :libvirt__iface_name => 'swp13',
            auto_config: false
      # link for swp14 --> leaf78:swp3
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:b7",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8604',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10604',
            :libvirt__iface_name => 'swp14',
            auto_config: false
      # link for swp15 --> leaf79:swp3
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:15",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8267',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10267',
            :libvirt__iface_name => 'swp15',
            auto_config: false
      # link for swp16 --> leaf80:swp3
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:d7",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8492',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10492',
            :libvirt__iface_name => 'swp16',
            auto_config: false



    # Fixes "stdin: is not a tty" and "mesg: ttyname failed : Inappropriate ioctl for device"  messages --> https://github.com/mitchellh/vagrant/issues/1673
    device.vm.provision :shell , inline: "(sudo grep -q 'mesg n' /root/.profile 2>/dev/null && sudo sed -i '/mesg n/d' /root/.profile  2>/dev/null) || true;", privileged: false

    #Copy over Topology.dot File
    device.vm.provision "file", source: "topology.dot", destination: "~/topology.dot"
    device.vm.provision :shell, privileged: false, inline: "sudo mv ~/topology.dot /etc/ptm.d/topology.dot"


    # Run the Config specified in the Node Attributes
    device.vm.provision :shell , privileged: false, :inline => 'echo "$(whoami)" > /tmp/normal_user'
    device.vm.provision :shell , path: "./helper_scripts/extra_switch_config.sh"


    # Install Rules for the interface re-map
    device.vm.provision :shell , :inline => <<-delete_udev_directory
if [ -d "/etc/udev/rules.d/70-persistent-net.rules" ]; then
    rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
fi
rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
delete_udev_directory

device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:06:40 --> eth0"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:06:40", NAME="eth0", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:e7 --> fp0"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:e7", NAME="fp0", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:06:c9 --> fp1"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:06:c9", NAME="fp1", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:07:e1 --> fp2"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:07:e1", NAME="fp2", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:c3 --> fp3"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:c3", NAME="fp3", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:bf --> fp4"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:bf", NAME="fp4", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:05:e1 --> fp5"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:05:e1", NAME="fp5", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:23 --> fp6"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:23", NAME="fp6", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:9f --> fp7"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:9f", NAME="fp7", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:8f --> fp8"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:8f", NAME="fp8", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:7d --> fp9"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:7d", NAME="fp9", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:06:3b --> fp10"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:06:3b", NAME="fp10", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:08:25 --> fp11"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:08:25", NAME="fp11", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:09:47 --> fp12"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:09:47", NAME="fp12", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:07:0f --> fp13"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:07:0f", NAME="fp13", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:f1 --> fp14"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:f1", NAME="fp14", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:07:77 --> fp15"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:07:77", NAME="fp15", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:06:1d --> swp1"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:06:1d", NAME="swp1", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:08:17 --> swp2"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:08:17", NAME="swp2", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:eb --> swp3"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:eb", NAME="swp3", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:07:6f --> swp4"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:07:6f", NAME="swp4", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:b1 --> swp5"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:b1", NAME="swp5", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:09:1d --> swp6"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:09:1d", NAME="swp6", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:c3 --> swp7"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:c3", NAME="swp7", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:35 --> swp8"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:35", NAME="swp8", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:08:5b --> swp9"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:08:5b", NAME="swp9", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:08:75 --> swp10"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:08:75", NAME="swp10", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:91 --> swp11"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:91", NAME="swp11", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:85 --> swp12"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:85", NAME="swp12", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:e5 --> swp13"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:e5", NAME="swp13", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:b7 --> swp14"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:b7", NAME="swp14", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:15 --> swp15"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:15", NAME="swp15", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:d7 --> swp16"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:d7", NAME="swp16", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule

      device.vm.provision :shell , :inline => <<-vagrant_interface_rule
echo "  INFO: Adding UDEV Rule: Vagrant interface = vagrant"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{ifindex}=="2", NAME="vagrant", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
echo "#### UDEV Rules (/etc/udev/rules.d/70-persistent-net.rules) ####"
cat /etc/udev/rules.d/70-persistent-net.rules
vagrant_interface_rule

# Run Any Platform Specific Code and Apply the interface Re-map
    #   (may or may not perform a reboot depending on platform)
    device.vm.provision :shell , :inline => $script

end

  ##### DEFINE VM for chassis01-fc4-1 #####
  config.vm.define "chassis01-fc4-1" do |device|

    device.vm.hostname = "chassis01-fc4-1"

    device.vm.box = "CumulusCommunity/cumulus-vx"
    device.vm.box_version = "3.5.0"

    device.vm.provider :libvirt do |v|
      v.memory = 768
    end
    #   see note here: https://github.com/pradels/vagrant-libvirt#synced-folders
    device.vm.synced_folder ".", "/vagrant", disabled: true



    # NETWORK INTERFACES
      # link for eth0 --> oob-mgmt-switch4:swp14
      device.vm.network "private_network",
            :mac => "44:38:39:00:09:18",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '11164',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '9164',
            :libvirt__iface_name => 'eth0',
            auto_config: false
      # link for fp0 --> chassis01-lc1-1:fp12
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:38",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10028',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8028',
            :libvirt__iface_name => 'fp0',
            auto_config: false
      # link for fp1 --> chassis01-lc1-1:fp13
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:dc",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10494',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8494',
            :libvirt__iface_name => 'fp1',
            auto_config: false
      # link for fp2 --> chassis01-lc1-1:fp14
      device.vm.network "private_network",
            :mac => "44:38:39:00:06:7a",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10829',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8829',
            :libvirt__iface_name => 'fp2',
            auto_config: false
      # link for fp3 --> chassis01-lc1-1:fp15
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:48",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10164',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8164',
            :libvirt__iface_name => 'fp3',
            auto_config: false
      # link for fp4 --> chassis01-lc1-2:fp12
      device.vm.network "private_network",
            :mac => "44:38:39:00:05:d0",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10744',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8744',
            :libvirt__iface_name => 'fp4',
            auto_config: false
      # link for fp5 --> chassis01-lc1-2:fp13
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:b6",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10347',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8347',
            :libvirt__iface_name => 'fp5',
            auto_config: false
      # link for fp6 --> chassis01-lc1-2:fp14
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:c8",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10356',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8356',
            :libvirt__iface_name => 'fp6',
            auto_config: false
      # link for fp7 --> chassis01-lc1-2:fp15
      device.vm.network "private_network",
            :mac => "44:38:39:00:08:d6",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '11131',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '9131',
            :libvirt__iface_name => 'fp7',
            auto_config: false
      # link for fp8 --> chassis01-lc2-1:fp12
      device.vm.network "private_network",
            :mac => "44:38:39:00:07:22",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10913',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8913',
            :libvirt__iface_name => 'fp8',
            auto_config: false
      # link for fp9 --> chassis01-lc2-1:fp13
      device.vm.network "private_network",
            :mac => "44:38:39:00:07:90",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10968',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8968',
            :libvirt__iface_name => 'fp9',
            auto_config: false
      # link for fp10 --> chassis01-lc2-1:fp14
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:9e",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10079',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8079',
            :libvirt__iface_name => 'fp10',
            auto_config: false
      # link for fp11 --> chassis01-lc2-1:fp15
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:ec",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10246',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8246',
            :libvirt__iface_name => 'fp11',
            auto_config: false
      # link for fp12 --> chassis01-lc2-2:fp12
      device.vm.network "private_network",
            :mac => "44:38:39:00:08:24",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '11042',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '9042',
            :libvirt__iface_name => 'fp12',
            auto_config: false
      # link for fp13 --> chassis01-lc2-2:fp13
      device.vm.network "private_network",
            :mac => "44:38:39:00:06:c2",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10865',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8865',
            :libvirt__iface_name => 'fp13',
            auto_config: false
      # link for fp14 --> chassis01-lc2-2:fp14
      device.vm.network "private_network",
            :mac => "44:38:39:00:08:58",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '11068',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '9068',
            :libvirt__iface_name => 'fp14',
            auto_config: false
      # link for fp15 --> chassis01-lc2-2:fp15
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:50",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10424',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8424',
            :libvirt__iface_name => 'fp15',
            auto_config: false
      # link for fp16 --> chassis01-lc3-1:fp12
      device.vm.network "private_network",
            :mac => "44:38:39:00:07:ac",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10982',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8982',
            :libvirt__iface_name => 'fp16',
            auto_config: false
      # link for fp17 --> chassis01-lc3-1:fp13
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:1a",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10269',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8269',
            :libvirt__iface_name => 'fp17',
            auto_config: false
      # link for fp18 --> chassis01-lc3-1:fp14
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:08",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10004',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8004',
            :libvirt__iface_name => 'fp18',
            auto_config: false
      # link for fp19 --> chassis01-lc3-1:fp15
      device.vm.network "private_network",
            :mac => "44:38:39:00:09:30",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '11176',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '9176',
            :libvirt__iface_name => 'fp19',
            auto_config: false
      # link for fp20 --> chassis01-lc3-2:fp12
      device.vm.network "private_network",
            :mac => "44:38:39:00:06:94",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10842',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8842',
            :libvirt__iface_name => 'fp20',
            auto_config: false
      # link for fp21 --> chassis01-lc3-2:fp13
      device.vm.network "private_network",
            :mac => "44:38:39:00:06:a4",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10850',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8850',
            :libvirt__iface_name => 'fp21',
            auto_config: false
      # link for fp22 --> chassis01-lc3-2:fp14
      device.vm.network "private_network",
            :mac => "44:38:39:00:06:a8",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10852',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8852',
            :libvirt__iface_name => 'fp22',
            auto_config: false
      # link for fp23 --> chassis01-lc3-2:fp15
      device.vm.network "private_network",
            :mac => "44:38:39:00:05:18",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10652',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8652',
            :libvirt__iface_name => 'fp23',
            auto_config: false
      # link for fp24 --> chassis01-lc4-1:fp12
      device.vm.network "private_network",
            :mac => "44:38:39:00:07:ee",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '11015',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '9015',
            :libvirt__iface_name => 'fp24',
            auto_config: false
      # link for fp25 --> chassis01-lc4-1:fp13
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:84",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10322',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8322',
            :libvirt__iface_name => 'fp25',
            auto_config: false
      # link for fp26 --> chassis01-lc4-1:fp14
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:d0",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10488',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8488',
            :libvirt__iface_name => 'fp26',
            auto_config: false
      # link for fp27 --> chassis01-lc4-1:fp15
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:0c",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10262',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8262',
            :libvirt__iface_name => 'fp27',
            auto_config: false
      # link for fp28 --> chassis01-lc4-2:fp12
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:52",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10041',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8041',
            :libvirt__iface_name => 'fp28',
            auto_config: false
      # link for fp29 --> chassis01-lc4-2:fp13
      device.vm.network "private_network",
            :mac => "44:38:39:00:08:00",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '11024',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '9024',
            :libvirt__iface_name => 'fp29',
            auto_config: false
      # link for fp30 --> chassis01-lc4-2:fp14
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:82",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10065',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8065',
            :libvirt__iface_name => 'fp30',
            auto_config: false
      # link for fp31 --> chassis01-lc4-2:fp15
      device.vm.network "private_network",
            :mac => "44:38:39:00:06:82",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10833',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8833',
            :libvirt__iface_name => 'fp31',
            auto_config: false



    # Fixes "stdin: is not a tty" and "mesg: ttyname failed : Inappropriate ioctl for device"  messages --> https://github.com/mitchellh/vagrant/issues/1673
    device.vm.provision :shell , inline: "(sudo grep -q 'mesg n' /root/.profile 2>/dev/null && sudo sed -i '/mesg n/d' /root/.profile  2>/dev/null) || true;", privileged: false

    #Copy over Topology.dot File
    device.vm.provision "file", source: "topology.dot", destination: "~/topology.dot"
    device.vm.provision :shell, privileged: false, inline: "sudo mv ~/topology.dot /etc/ptm.d/topology.dot"


    # Run the Config specified in the Node Attributes
    device.vm.provision :shell , privileged: false, :inline => 'echo "$(whoami)" > /tmp/normal_user'
    device.vm.provision :shell , path: "./helper_scripts/extra_switch_config.sh"


    # Install Rules for the interface re-map
    device.vm.provision :shell , :inline => <<-delete_udev_directory
if [ -d "/etc/udev/rules.d/70-persistent-net.rules" ]; then
    rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
fi
rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
delete_udev_directory

device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:09:18 --> eth0"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:09:18", NAME="eth0", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:38 --> fp0"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:38", NAME="fp0", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:dc --> fp1"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:dc", NAME="fp1", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:06:7a --> fp2"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:06:7a", NAME="fp2", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:48 --> fp3"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:48", NAME="fp3", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:05:d0 --> fp4"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:05:d0", NAME="fp4", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:b6 --> fp5"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:b6", NAME="fp5", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:c8 --> fp6"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:c8", NAME="fp6", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:08:d6 --> fp7"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:08:d6", NAME="fp7", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:07:22 --> fp8"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:07:22", NAME="fp8", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:07:90 --> fp9"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:07:90", NAME="fp9", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:9e --> fp10"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:9e", NAME="fp10", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:ec --> fp11"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:ec", NAME="fp11", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:08:24 --> fp12"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:08:24", NAME="fp12", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:06:c2 --> fp13"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:06:c2", NAME="fp13", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:08:58 --> fp14"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:08:58", NAME="fp14", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:50 --> fp15"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:50", NAME="fp15", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:07:ac --> fp16"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:07:ac", NAME="fp16", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:1a --> fp17"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:1a", NAME="fp17", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:08 --> fp18"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:08", NAME="fp18", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:09:30 --> fp19"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:09:30", NAME="fp19", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:06:94 --> fp20"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:06:94", NAME="fp20", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:06:a4 --> fp21"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:06:a4", NAME="fp21", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:06:a8 --> fp22"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:06:a8", NAME="fp22", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:05:18 --> fp23"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:05:18", NAME="fp23", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:07:ee --> fp24"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:07:ee", NAME="fp24", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:84 --> fp25"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:84", NAME="fp25", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:d0 --> fp26"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:d0", NAME="fp26", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:0c --> fp27"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:0c", NAME="fp27", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:52 --> fp28"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:52", NAME="fp28", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:08:00 --> fp29"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:08:00", NAME="fp29", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:82 --> fp30"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:82", NAME="fp30", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:06:82 --> fp31"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:06:82", NAME="fp31", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule

      device.vm.provision :shell , :inline => <<-vagrant_interface_rule
echo "  INFO: Adding UDEV Rule: Vagrant interface = vagrant"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{ifindex}=="2", NAME="vagrant", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
echo "#### UDEV Rules (/etc/udev/rules.d/70-persistent-net.rules) ####"
cat /etc/udev/rules.d/70-persistent-net.rules
vagrant_interface_rule

# Run Any Platform Specific Code and Apply the interface Re-map
    #   (may or may not perform a reboot depending on platform)
    device.vm.provision :shell , :inline => $script

end

  ##### DEFINE VM for chassis02-lc3-2 #####
  config.vm.define "chassis02-lc3-2" do |device|

    device.vm.hostname = "chassis02-lc3-2"

    device.vm.box = "CumulusCommunity/cumulus-vx"
    device.vm.box_version = "3.5.0"

    device.vm.provider :libvirt do |v|
      v.memory = 768
    end
    #   see note here: https://github.com/pradels/vagrant-libvirt#synced-folders
    device.vm.synced_folder ".", "/vagrant", disabled: true



    # NETWORK INTERFACES
      # link for eth0 --> oob-mgmt-switch4:swp20
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:de",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10623',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8623',
            :libvirt__iface_name => 'eth0',
            auto_config: false
      # link for fp0 --> chassis02-fc1-1:fp20
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:9d",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8207',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10207',
            :libvirt__iface_name => 'fp0',
            auto_config: false
      # link for fp1 --> chassis02-fc1-1:fp21
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:c5",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8611',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10611',
            :libvirt__iface_name => 'fp1',
            auto_config: false
      # link for fp2 --> chassis02-fc1-1:fp22
      device.vm.network "private_network",
            :mac => "44:38:39:00:05:1f",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8656',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10656',
            :libvirt__iface_name => 'fp2',
            auto_config: false
      # link for fp3 --> chassis02-fc1-1:fp23
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:11",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8265',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10265',
            :libvirt__iface_name => 'fp3',
            auto_config: false
      # link for fp4 --> chassis02-fc2-1:fp20
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:ab",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8342',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10342',
            :libvirt__iface_name => 'fp4',
            auto_config: false
      # link for fp5 --> chassis02-fc2-1:fp21
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:73",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8058',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10058',
            :libvirt__iface_name => 'fp5',
            auto_config: false
      # link for fp6 --> chassis02-fc2-1:fp22
      device.vm.network "private_network",
            :mac => "44:38:39:00:08:bd",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '9119',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '11119',
            :libvirt__iface_name => 'fp6',
            auto_config: false
      # link for fp7 --> chassis02-fc2-1:fp23
      device.vm.network "private_network",
            :mac => "44:38:39:00:08:e3",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '9138',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '11138',
            :libvirt__iface_name => 'fp7',
            auto_config: false
      # link for fp8 --> chassis02-fc3-1:fp20
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:1f",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8272',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10272',
            :libvirt__iface_name => 'fp8',
            auto_config: false
      # link for fp9 --> chassis02-fc3-1:fp21
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:17",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8268',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10268',
            :libvirt__iface_name => 'fp9',
            auto_config: false
      # link for fp10 --> chassis02-fc3-1:fp22
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:df",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8112',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10112',
            :libvirt__iface_name => 'fp10',
            auto_config: false
      # link for fp11 --> chassis02-fc3-1:fp23
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:6f",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8568',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10568',
            :libvirt__iface_name => 'fp11',
            auto_config: false
      # link for fp12 --> chassis02-fc4-1:fp20
      device.vm.network "private_network",
            :mac => "44:38:39:00:09:05",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '9155',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '11155',
            :libvirt__iface_name => 'fp12',
            auto_config: false
      # link for fp13 --> chassis02-fc4-1:fp21
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:31",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8537',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10537',
            :libvirt__iface_name => 'fp13',
            auto_config: false
      # link for fp14 --> chassis02-fc4-1:fp22
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:ef",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8248',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10248',
            :libvirt__iface_name => 'fp14',
            auto_config: false
      # link for fp15 --> chassis02-fc4-1:fp23
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:2d",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8151',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10151',
            :libvirt__iface_name => 'fp15',
            auto_config: false
      # link for swp1 --> leaf81:swp2
      device.vm.network "private_network",
            :mac => "44:38:39:00:07:cb",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8998',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10998',
            :libvirt__iface_name => 'swp1',
            auto_config: false
      # link for swp2 --> leaf82:swp2
      device.vm.network "private_network",
            :mac => "44:38:39:00:05:cb",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8742',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10742',
            :libvirt__iface_name => 'swp2',
            auto_config: false
      # link for swp3 --> leaf83:swp2
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:3d",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8543',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10543',
            :libvirt__iface_name => 'swp3',
            auto_config: false
      # link for swp4 --> leaf84:swp2
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:75",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8059',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10059',
            :libvirt__iface_name => 'swp4',
            auto_config: false
      # link for swp5 --> leaf85:swp2
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:6d",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8183',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10183',
            :libvirt__iface_name => 'swp5',
            auto_config: false
      # link for swp6 --> leaf86:swp2
      device.vm.network "private_network",
            :mac => "44:38:39:00:07:13",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8906',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10906',
            :libvirt__iface_name => 'swp6',
            auto_config: false
      # link for swp7 --> leaf87:swp2
      device.vm.network "private_network",
            :mac => "44:38:39:00:05:5b",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8686',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10686',
            :libvirt__iface_name => 'swp7',
            auto_config: false
      # link for swp8 --> leaf88:swp2
      device.vm.network "private_network",
            :mac => "44:38:39:00:06:8f",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8840',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10840',
            :libvirt__iface_name => 'swp8',
            auto_config: false
      # link for swp9 --> leaf89:swp2
      device.vm.network "private_network",
            :mac => "44:38:39:00:06:b5",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8859',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10859',
            :libvirt__iface_name => 'swp9',
            auto_config: false
      # link for swp10 --> leaf90:swp2
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:cf",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8104',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10104',
            :libvirt__iface_name => 'swp10',
            auto_config: false
      # link for swp11 --> leaf91:swp2
      device.vm.network "private_network",
            :mac => "44:38:39:00:07:4f",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8936',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10936',
            :libvirt__iface_name => 'swp11',
            auto_config: false
      # link for swp12 --> leaf92:swp2
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:3d",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8159',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10159',
            :libvirt__iface_name => 'swp12',
            auto_config: false
      # link for swp13 --> leaf93:swp2
      device.vm.network "private_network",
            :mac => "44:38:39:00:06:df",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8880',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10880',
            :libvirt__iface_name => 'swp13',
            auto_config: false
      # link for swp14 --> leaf94:swp2
      device.vm.network "private_network",
            :mac => "44:38:39:00:06:35",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8795',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10795',
            :libvirt__iface_name => 'swp14',
            auto_config: false
      # link for swp15 --> leaf95:swp2
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:e3",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8626',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10626',
            :libvirt__iface_name => 'swp15',
            auto_config: false
      # link for swp16 --> leaf96:swp2
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:49",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8549',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10549',
            :libvirt__iface_name => 'swp16',
            auto_config: false



    # Fixes "stdin: is not a tty" and "mesg: ttyname failed : Inappropriate ioctl for device"  messages --> https://github.com/mitchellh/vagrant/issues/1673
    device.vm.provision :shell , inline: "(sudo grep -q 'mesg n' /root/.profile 2>/dev/null && sudo sed -i '/mesg n/d' /root/.profile  2>/dev/null) || true;", privileged: false

    #Copy over Topology.dot File
    device.vm.provision "file", source: "topology.dot", destination: "~/topology.dot"
    device.vm.provision :shell, privileged: false, inline: "sudo mv ~/topology.dot /etc/ptm.d/topology.dot"


    # Run the Config specified in the Node Attributes
    device.vm.provision :shell , privileged: false, :inline => 'echo "$(whoami)" > /tmp/normal_user'
    device.vm.provision :shell , path: "./helper_scripts/extra_switch_config.sh"


    # Install Rules for the interface re-map
    device.vm.provision :shell , :inline => <<-delete_udev_directory
if [ -d "/etc/udev/rules.d/70-persistent-net.rules" ]; then
    rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
fi
rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
delete_udev_directory

device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:de --> eth0"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:de", NAME="eth0", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:9d --> fp0"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:9d", NAME="fp0", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:c5 --> fp1"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:c5", NAME="fp1", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:05:1f --> fp2"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:05:1f", NAME="fp2", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:11 --> fp3"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:11", NAME="fp3", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:ab --> fp4"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:ab", NAME="fp4", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:73 --> fp5"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:73", NAME="fp5", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:08:bd --> fp6"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:08:bd", NAME="fp6", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:08:e3 --> fp7"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:08:e3", NAME="fp7", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:1f --> fp8"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:1f", NAME="fp8", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:17 --> fp9"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:17", NAME="fp9", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:df --> fp10"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:df", NAME="fp10", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:6f --> fp11"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:6f", NAME="fp11", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:09:05 --> fp12"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:09:05", NAME="fp12", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:31 --> fp13"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:31", NAME="fp13", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:ef --> fp14"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:ef", NAME="fp14", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:2d --> fp15"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:2d", NAME="fp15", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:07:cb --> swp1"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:07:cb", NAME="swp1", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:05:cb --> swp2"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:05:cb", NAME="swp2", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:3d --> swp3"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:3d", NAME="swp3", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:75 --> swp4"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:75", NAME="swp4", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:6d --> swp5"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:6d", NAME="swp5", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:07:13 --> swp6"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:07:13", NAME="swp6", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:05:5b --> swp7"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:05:5b", NAME="swp7", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:06:8f --> swp8"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:06:8f", NAME="swp8", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:06:b5 --> swp9"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:06:b5", NAME="swp9", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:cf --> swp10"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:cf", NAME="swp10", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:07:4f --> swp11"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:07:4f", NAME="swp11", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:3d --> swp12"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:3d", NAME="swp12", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:06:df --> swp13"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:06:df", NAME="swp13", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:06:35 --> swp14"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:06:35", NAME="swp14", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:e3 --> swp15"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:e3", NAME="swp15", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:49 --> swp16"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:49", NAME="swp16", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule

      device.vm.provision :shell , :inline => <<-vagrant_interface_rule
echo "  INFO: Adding UDEV Rule: Vagrant interface = vagrant"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{ifindex}=="2", NAME="vagrant", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
echo "#### UDEV Rules (/etc/udev/rules.d/70-persistent-net.rules) ####"
cat /etc/udev/rules.d/70-persistent-net.rules
vagrant_interface_rule

# Run Any Platform Specific Code and Apply the interface Re-map
    #   (may or may not perform a reboot depending on platform)
    device.vm.provision :shell , :inline => $script

end

  ##### DEFINE VM for chassis02-lc3-1 #####
  config.vm.define "chassis02-lc3-1" do |device|

    device.vm.hostname = "chassis02-lc3-1"

    device.vm.box = "CumulusCommunity/cumulus-vx"
    device.vm.box_version = "3.5.0"

    device.vm.provider :libvirt do |v|
      v.memory = 768
    end
    #   see note here: https://github.com/pradels/vagrant-libvirt#synced-folders
    device.vm.synced_folder ".", "/vagrant", disabled: true



    # NETWORK INTERFACES
      # link for eth0 --> oob-mgmt-switch4:swp19
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:c8",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10100',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8100',
            :libvirt__iface_name => 'eth0',
            auto_config: false
      # link for fp0 --> chassis02-fc1-1:fp16
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:05",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8259',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10259',
            :libvirt__iface_name => 'fp0',
            auto_config: false
      # link for fp1 --> chassis02-fc1-1:fp17
      device.vm.network "private_network",
            :mac => "44:38:39:00:06:cf",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8872',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10872',
            :libvirt__iface_name => 'fp1',
            auto_config: false
      # link for fp2 --> chassis02-fc1-1:fp18
      device.vm.network "private_network",
            :mac => "44:38:39:00:07:79",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8957',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10957',
            :libvirt__iface_name => 'fp2',
            auto_config: false
      # link for fp3 --> chassis02-fc1-1:fp19
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:21",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8145',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10145',
            :libvirt__iface_name => 'fp3',
            auto_config: false
      # link for fp4 --> chassis02-fc2-1:fp16
      device.vm.network "private_network",
            :mac => "44:38:39:00:06:c5",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8867',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10867',
            :libvirt__iface_name => 'fp4',
            auto_config: false
      # link for fp5 --> chassis02-fc2-1:fp17
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:77",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8444',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10444',
            :libvirt__iface_name => 'fp5',
            auto_config: false
      # link for fp6 --> chassis02-fc2-1:fp18
      device.vm.network "private_network",
            :mac => "44:38:39:00:05:6f",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8696',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10696',
            :libvirt__iface_name => 'fp6',
            auto_config: false
      # link for fp7 --> chassis02-fc2-1:fp19
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:bd",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8095',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10095',
            :libvirt__iface_name => 'fp7',
            auto_config: false
      # link for fp8 --> chassis02-fc3-1:fp16
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:d5",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8107',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10107',
            :libvirt__iface_name => 'fp8',
            auto_config: false
      # link for fp9 --> chassis02-fc3-1:fp17
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:e9",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8629',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10629',
            :libvirt__iface_name => 'fp9',
            auto_config: false
      # link for fp10 --> chassis02-fc3-1:fp18
      device.vm.network "private_network",
            :mac => "44:38:39:00:05:af",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8728',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10728',
            :libvirt__iface_name => 'fp10',
            auto_config: false
      # link for fp11 --> chassis02-fc3-1:fp19
      device.vm.network "private_network",
            :mac => "44:38:39:00:08:9d",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '9103',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '11103',
            :libvirt__iface_name => 'fp11',
            auto_config: false
      # link for fp12 --> chassis02-fc4-1:fp16
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:fd",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8127',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10127',
            :libvirt__iface_name => 'fp12',
            auto_config: false
      # link for fp13 --> chassis02-fc4-1:fp17
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:49",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8421',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10421',
            :libvirt__iface_name => 'fp13',
            auto_config: false
      # link for fp14 --> chassis02-fc4-1:fp18
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:53",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8426',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10426',
            :libvirt__iface_name => 'fp14',
            auto_config: false
      # link for fp15 --> chassis02-fc4-1:fp19
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:e5",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8371',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10371',
            :libvirt__iface_name => 'fp15',
            auto_config: false
      # link for swp1 --> leaf65:swp2
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:c9",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8101',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10101',
            :libvirt__iface_name => 'swp1',
            auto_config: false
      # link for swp2 --> leaf66:swp2
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:57",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8044',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10044',
            :libvirt__iface_name => 'swp2',
            auto_config: false
      # link for swp3 --> leaf67:swp2
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:ad",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8343',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10343',
            :libvirt__iface_name => 'swp3',
            auto_config: false
      # link for swp4 --> leaf68:swp2
      device.vm.network "private_network",
            :mac => "44:38:39:00:08:b9",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '9117',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '11117',
            :libvirt__iface_name => 'swp4',
            auto_config: false
      # link for swp5 --> leaf69:swp2
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:5d",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8559',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10559',
            :libvirt__iface_name => 'swp5',
            auto_config: false
      # link for swp6 --> leaf70:swp2
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:55",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8171',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10171',
            :libvirt__iface_name => 'swp6',
            auto_config: false
      # link for swp7 --> leaf71:swp2
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:a1",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8593',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10593',
            :libvirt__iface_name => 'swp7',
            auto_config: false
      # link for swp8 --> leaf72:swp2
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:41",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8545',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10545',
            :libvirt__iface_name => 'swp8',
            auto_config: false
      # link for swp9 --> leaf73:swp2
      device.vm.network "private_network",
            :mac => "44:38:39:00:08:af",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '9112',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '11112',
            :libvirt__iface_name => 'swp9',
            auto_config: false
      # link for swp10 --> leaf74:swp2
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:ff",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8256',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10256',
            :libvirt__iface_name => 'swp10',
            auto_config: false
      # link for swp11 --> leaf75:swp2
      device.vm.network "private_network",
            :mac => "44:38:39:00:06:f1",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8889',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10889',
            :libvirt__iface_name => 'swp11',
            auto_config: false
      # link for swp12 --> leaf76:swp2
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:a1",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8465',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10465',
            :libvirt__iface_name => 'swp12',
            auto_config: false
      # link for swp13 --> leaf77:swp2
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:1d",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8143',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10143',
            :libvirt__iface_name => 'swp13',
            auto_config: false
      # link for swp14 --> leaf78:swp2
      device.vm.network "private_network",
            :mac => "44:38:39:00:05:a7",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8724',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10724',
            :libvirt__iface_name => 'swp14',
            auto_config: false
      # link for swp15 --> leaf79:swp2
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:15",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8011',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10011',
            :libvirt__iface_name => 'swp15',
            auto_config: false
      # link for swp16 --> leaf80:swp2
      device.vm.network "private_network",
            :mac => "44:38:39:00:05:85",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8707',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10707',
            :libvirt__iface_name => 'swp16',
            auto_config: false



    # Fixes "stdin: is not a tty" and "mesg: ttyname failed : Inappropriate ioctl for device"  messages --> https://github.com/mitchellh/vagrant/issues/1673
    device.vm.provision :shell , inline: "(sudo grep -q 'mesg n' /root/.profile 2>/dev/null && sudo sed -i '/mesg n/d' /root/.profile  2>/dev/null) || true;", privileged: false

    #Copy over Topology.dot File
    device.vm.provision "file", source: "topology.dot", destination: "~/topology.dot"
    device.vm.provision :shell, privileged: false, inline: "sudo mv ~/topology.dot /etc/ptm.d/topology.dot"


    # Run the Config specified in the Node Attributes
    device.vm.provision :shell , privileged: false, :inline => 'echo "$(whoami)" > /tmp/normal_user'
    device.vm.provision :shell , path: "./helper_scripts/extra_switch_config.sh"


    # Install Rules for the interface re-map
    device.vm.provision :shell , :inline => <<-delete_udev_directory
if [ -d "/etc/udev/rules.d/70-persistent-net.rules" ]; then
    rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
fi
rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
delete_udev_directory

device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:c8 --> eth0"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:c8", NAME="eth0", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:05 --> fp0"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:05", NAME="fp0", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:06:cf --> fp1"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:06:cf", NAME="fp1", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:07:79 --> fp2"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:07:79", NAME="fp2", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:21 --> fp3"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:21", NAME="fp3", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:06:c5 --> fp4"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:06:c5", NAME="fp4", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:77 --> fp5"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:77", NAME="fp5", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:05:6f --> fp6"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:05:6f", NAME="fp6", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:bd --> fp7"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:bd", NAME="fp7", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:d5 --> fp8"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:d5", NAME="fp8", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:e9 --> fp9"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:e9", NAME="fp9", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:05:af --> fp10"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:05:af", NAME="fp10", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:08:9d --> fp11"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:08:9d", NAME="fp11", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:fd --> fp12"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:fd", NAME="fp12", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:49 --> fp13"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:49", NAME="fp13", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:53 --> fp14"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:53", NAME="fp14", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:e5 --> fp15"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:e5", NAME="fp15", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:c9 --> swp1"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:c9", NAME="swp1", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:57 --> swp2"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:57", NAME="swp2", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:ad --> swp3"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:ad", NAME="swp3", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:08:b9 --> swp4"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:08:b9", NAME="swp4", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:5d --> swp5"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:5d", NAME="swp5", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:55 --> swp6"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:55", NAME="swp6", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:a1 --> swp7"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:a1", NAME="swp7", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:41 --> swp8"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:41", NAME="swp8", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:08:af --> swp9"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:08:af", NAME="swp9", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:ff --> swp10"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:ff", NAME="swp10", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:06:f1 --> swp11"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:06:f1", NAME="swp11", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:a1 --> swp12"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:a1", NAME="swp12", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:1d --> swp13"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:1d", NAME="swp13", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:05:a7 --> swp14"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:05:a7", NAME="swp14", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:15 --> swp15"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:15", NAME="swp15", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:05:85 --> swp16"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:05:85", NAME="swp16", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule

      device.vm.provision :shell , :inline => <<-vagrant_interface_rule
echo "  INFO: Adding UDEV Rule: Vagrant interface = vagrant"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{ifindex}=="2", NAME="vagrant", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
echo "#### UDEV Rules (/etc/udev/rules.d/70-persistent-net.rules) ####"
cat /etc/udev/rules.d/70-persistent-net.rules
vagrant_interface_rule

# Run Any Platform Specific Code and Apply the interface Re-map
    #   (may or may not perform a reboot depending on platform)
    device.vm.provision :shell , :inline => $script

end

  ##### DEFINE VM for chassis02-lc4-1 #####
  config.vm.define "chassis02-lc4-1" do |device|

    device.vm.hostname = "chassis02-lc4-1"

    device.vm.box = "CumulusCommunity/cumulus-vx"
    device.vm.box_version = "3.5.0"

    device.vm.provider :libvirt do |v|
      v.memory = 768
    end
    #   see note here: https://github.com/pradels/vagrant-libvirt#synced-folders
    device.vm.synced_folder ".", "/vagrant", disabled: true



    # NETWORK INTERFACES
      # link for eth0 --> oob-mgmt-switch4:swp21
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:62",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10049',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8049',
            :libvirt__iface_name => 'eth0',
            auto_config: false
      # link for fp0 --> chassis02-fc1-1:fp24
      device.vm.network "private_network",
            :mac => "44:38:39:00:06:7b",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8830',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10830',
            :libvirt__iface_name => 'fp0',
            auto_config: false
      # link for fp1 --> chassis02-fc1-1:fp25
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:1d",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8399',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10399',
            :libvirt__iface_name => 'fp1',
            auto_config: false
      # link for fp2 --> chassis02-fc1-1:fp26
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:c5",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8099',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10099',
            :libvirt__iface_name => 'fp2',
            auto_config: false
      # link for fp3 --> chassis02-fc1-1:fp27
      device.vm.network "private_network",
            :mac => "44:38:39:00:05:b7",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8732',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10732',
            :libvirt__iface_name => 'fp3',
            auto_config: false
      # link for fp4 --> chassis02-fc2-1:fp24
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:cd",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8615',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10615',
            :libvirt__iface_name => 'fp4',
            auto_config: false
      # link for fp5 --> chassis02-fc2-1:fp25
      device.vm.network "private_network",
            :mac => "44:38:39:00:06:a5",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8851',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10851',
            :libvirt__iface_name => 'fp5',
            auto_config: false
      # link for fp6 --> chassis02-fc2-1:fp26
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:97",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8204',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10204',
            :libvirt__iface_name => 'fp6',
            auto_config: false
      # link for fp7 --> chassis02-fc2-1:fp27
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:f9",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8509',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10509',
            :libvirt__iface_name => 'fp7',
            auto_config: false
      # link for fp8 --> chassis02-fc3-1:fp24
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:1b",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8270',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10270',
            :libvirt__iface_name => 'fp8',
            auto_config: false
      # link for fp9 --> chassis02-fc3-1:fp25
      device.vm.network "private_network",
            :mac => "44:38:39:00:08:89",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '9093',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '11093',
            :libvirt__iface_name => 'fp9',
            auto_config: false
      # link for fp10 --> chassis02-fc3-1:fp26
      device.vm.network "private_network",
            :mac => "44:38:39:00:07:b7",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8988',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10988',
            :libvirt__iface_name => 'fp10',
            auto_config: false
      # link for fp11 --> chassis02-fc3-1:fp27
      device.vm.network "private_network",
            :mac => "44:38:39:00:08:03",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '9026',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '11026',
            :libvirt__iface_name => 'fp11',
            auto_config: false
      # link for fp12 --> chassis02-fc4-1:fp24
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:59",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8557',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10557',
            :libvirt__iface_name => 'fp12',
            auto_config: false
      # link for fp13 --> chassis02-fc4-1:fp25
      device.vm.network "private_network",
            :mac => "44:38:39:00:07:7f",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8960',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10960',
            :libvirt__iface_name => 'fp13',
            auto_config: false
      # link for fp14 --> chassis02-fc4-1:fp26
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:ed",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8631',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10631',
            :libvirt__iface_name => 'fp14',
            auto_config: false
      # link for fp15 --> chassis02-fc4-1:fp27
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:a9",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8085',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10085',
            :libvirt__iface_name => 'fp15',
            auto_config: false
      # link for swp1 --> leaf97:swp2
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:ef",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8632',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10632',
            :libvirt__iface_name => 'swp1',
            auto_config: false
      # link for swp2 --> leaf98:swp2
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:f5",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8379',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10379',
            :libvirt__iface_name => 'swp2',
            auto_config: false
      # link for swp3 --> leaf99:swp2
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:71",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8185',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10185',
            :libvirt__iface_name => 'swp3',
            auto_config: false
      # link for swp4 --> leaf100:swp2
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:cb",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8102',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10102',
            :libvirt__iface_name => 'swp4',
            auto_config: false
      # link for swp5 --> leaf101:swp2
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:d7",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8236',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10236',
            :libvirt__iface_name => 'swp5',
            auto_config: false
      # link for swp6 --> leaf102:swp2
      device.vm.network "private_network",
            :mac => "44:38:39:00:07:23",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8914',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10914',
            :libvirt__iface_name => 'swp6',
            auto_config: false
      # link for swp7 --> leaf103:swp2
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:f1",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8505',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10505',
            :libvirt__iface_name => 'swp7',
            auto_config: false
      # link for swp8 --> leaf104:swp2
      device.vm.network "private_network",
            :mac => "44:38:39:00:07:89",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8965',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10965',
            :libvirt__iface_name => 'swp8',
            auto_config: false
      # link for swp9 --> leaf105:swp2
      device.vm.network "private_network",
            :mac => "44:38:39:00:08:99",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '9101',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '11101',
            :libvirt__iface_name => 'swp9',
            auto_config: false
      # link for swp10 --> leaf106:swp2
      device.vm.network "private_network",
            :mac => "44:38:39:00:08:b7",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '9116',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '11116',
            :libvirt__iface_name => 'swp10',
            auto_config: false
      # link for swp11 --> leaf107:swp2
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:fb",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8254',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10254',
            :libvirt__iface_name => 'swp11',
            auto_config: false
      # link for swp12 --> leaf108:swp2
      device.vm.network "private_network",
            :mac => "44:38:39:00:08:45",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '9059',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '11059',
            :libvirt__iface_name => 'swp12',
            auto_config: false
      # link for swp13 --> leaf109:swp2
      device.vm.network "private_network",
            :mac => "44:38:39:00:05:97",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8716',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10716',
            :libvirt__iface_name => 'swp13',
            auto_config: false
      # link for swp14 --> leaf110:swp2
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:19",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8141',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10141',
            :libvirt__iface_name => 'swp14',
            auto_config: false
      # link for swp15 --> leaf111:swp2
      device.vm.network "private_network",
            :mac => "44:38:39:00:08:43",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '9058',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '11058',
            :libvirt__iface_name => 'swp15',
            auto_config: false
      # link for swp16 --> leaf112:swp2
      device.vm.network "private_network",
            :mac => "44:38:39:00:09:31",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '9177',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '11177',
            :libvirt__iface_name => 'swp16',
            auto_config: false



    # Fixes "stdin: is not a tty" and "mesg: ttyname failed : Inappropriate ioctl for device"  messages --> https://github.com/mitchellh/vagrant/issues/1673
    device.vm.provision :shell , inline: "(sudo grep -q 'mesg n' /root/.profile 2>/dev/null && sudo sed -i '/mesg n/d' /root/.profile  2>/dev/null) || true;", privileged: false

    #Copy over Topology.dot File
    device.vm.provision "file", source: "topology.dot", destination: "~/topology.dot"
    device.vm.provision :shell, privileged: false, inline: "sudo mv ~/topology.dot /etc/ptm.d/topology.dot"


    # Run the Config specified in the Node Attributes
    device.vm.provision :shell , privileged: false, :inline => 'echo "$(whoami)" > /tmp/normal_user'
    device.vm.provision :shell , path: "./helper_scripts/extra_switch_config.sh"


    # Install Rules for the interface re-map
    device.vm.provision :shell , :inline => <<-delete_udev_directory
if [ -d "/etc/udev/rules.d/70-persistent-net.rules" ]; then
    rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
fi
rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
delete_udev_directory

device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:62 --> eth0"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:62", NAME="eth0", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:06:7b --> fp0"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:06:7b", NAME="fp0", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:1d --> fp1"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:1d", NAME="fp1", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:c5 --> fp2"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:c5", NAME="fp2", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:05:b7 --> fp3"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:05:b7", NAME="fp3", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:cd --> fp4"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:cd", NAME="fp4", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:06:a5 --> fp5"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:06:a5", NAME="fp5", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:97 --> fp6"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:97", NAME="fp6", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:f9 --> fp7"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:f9", NAME="fp7", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:1b --> fp8"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:1b", NAME="fp8", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:08:89 --> fp9"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:08:89", NAME="fp9", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:07:b7 --> fp10"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:07:b7", NAME="fp10", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:08:03 --> fp11"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:08:03", NAME="fp11", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:59 --> fp12"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:59", NAME="fp12", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:07:7f --> fp13"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:07:7f", NAME="fp13", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:ed --> fp14"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:ed", NAME="fp14", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:a9 --> fp15"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:a9", NAME="fp15", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:ef --> swp1"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:ef", NAME="swp1", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:f5 --> swp2"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:f5", NAME="swp2", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:71 --> swp3"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:71", NAME="swp3", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:cb --> swp4"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:cb", NAME="swp4", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:d7 --> swp5"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:d7", NAME="swp5", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:07:23 --> swp6"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:07:23", NAME="swp6", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:f1 --> swp7"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:f1", NAME="swp7", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:07:89 --> swp8"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:07:89", NAME="swp8", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:08:99 --> swp9"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:08:99", NAME="swp9", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:08:b7 --> swp10"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:08:b7", NAME="swp10", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:fb --> swp11"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:fb", NAME="swp11", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:08:45 --> swp12"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:08:45", NAME="swp12", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:05:97 --> swp13"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:05:97", NAME="swp13", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:19 --> swp14"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:19", NAME="swp14", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:08:43 --> swp15"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:08:43", NAME="swp15", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:09:31 --> swp16"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:09:31", NAME="swp16", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule

      device.vm.provision :shell , :inline => <<-vagrant_interface_rule
echo "  INFO: Adding UDEV Rule: Vagrant interface = vagrant"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{ifindex}=="2", NAME="vagrant", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
echo "#### UDEV Rules (/etc/udev/rules.d/70-persistent-net.rules) ####"
cat /etc/udev/rules.d/70-persistent-net.rules
vagrant_interface_rule

# Run Any Platform Specific Code and Apply the interface Re-map
    #   (may or may not perform a reboot depending on platform)
    device.vm.provision :shell , :inline => $script

end

  ##### DEFINE VM for chassis02-lc4-2 #####
  config.vm.define "chassis02-lc4-2" do |device|

    device.vm.hostname = "chassis02-lc4-2"

    device.vm.box = "CumulusCommunity/cumulus-vx"
    device.vm.box_version = "3.5.0"

    device.vm.provider :libvirt do |v|
      v.memory = 768
    end
    #   see note here: https://github.com/pradels/vagrant-libvirt#synced-folders
    device.vm.synced_folder ".", "/vagrant", disabled: true



    # NETWORK INTERFACES
      # link for eth0 --> oob-mgmt-switch4:swp22
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:3e",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10287',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8287',
            :libvirt__iface_name => 'eth0',
            auto_config: false
      # link for fp0 --> chassis02-fc1-1:fp28
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:67",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8564',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10564',
            :libvirt__iface_name => 'fp0',
            auto_config: false
      # link for fp1 --> chassis02-fc1-1:fp29
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:e5",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8243',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10243',
            :libvirt__iface_name => 'fp1',
            auto_config: false
      # link for fp2 --> chassis02-fc1-1:fp30
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:2f",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8408',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10408',
            :libvirt__iface_name => 'fp2',
            auto_config: false
      # link for fp3 --> chassis02-fc1-1:fp31
      device.vm.network "private_network",
            :mac => "44:38:39:00:05:cd",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8743',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10743',
            :libvirt__iface_name => 'fp3',
            auto_config: false
      # link for fp4 --> chassis02-fc2-1:fp28
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:77",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8188',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10188',
            :libvirt__iface_name => 'fp4',
            auto_config: false
      # link for fp5 --> chassis02-fc2-1:fp29
      device.vm.network "private_network",
            :mac => "44:38:39:00:07:8d",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8967',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10967',
            :libvirt__iface_name => 'fp5',
            auto_config: false
      # link for fp6 --> chassis02-fc2-1:fp30
      device.vm.network "private_network",
            :mac => "44:38:39:00:05:25",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8659',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10659',
            :libvirt__iface_name => 'fp6',
            auto_config: false
      # link for fp7 --> chassis02-fc2-1:fp31
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:f7",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8380',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10380',
            :libvirt__iface_name => 'fp7',
            auto_config: false
      # link for fp8 --> chassis02-fc3-1:fp28
      device.vm.network "private_network",
            :mac => "44:38:39:00:06:39",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8797',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10797',
            :libvirt__iface_name => 'fp8',
            auto_config: false
      # link for fp9 --> chassis02-fc3-1:fp29
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:6d",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8439',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10439',
            :libvirt__iface_name => 'fp9',
            auto_config: false
      # link for fp10 --> chassis02-fc3-1:fp30
      device.vm.network "private_network",
            :mac => "44:38:39:00:07:15",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8907',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10907',
            :libvirt__iface_name => 'fp10',
            auto_config: false
      # link for fp11 --> chassis02-fc3-1:fp31
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:a3",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8338',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10338',
            :libvirt__iface_name => 'fp11',
            auto_config: false
      # link for fp12 --> chassis02-fc4-1:fp28
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:4b",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8422',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10422',
            :libvirt__iface_name => 'fp12',
            auto_config: false
      # link for fp13 --> chassis02-fc4-1:fp29
      device.vm.network "private_network",
            :mac => "44:38:39:00:06:57",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8812',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10812',
            :libvirt__iface_name => 'fp13',
            auto_config: false
      # link for fp14 --> chassis02-fc4-1:fp30
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:29",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8021',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10021',
            :libvirt__iface_name => 'fp14',
            auto_config: false
      # link for fp15 --> chassis02-fc4-1:fp31
      device.vm.network "private_network",
            :mac => "44:38:39:00:07:3b",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8926',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10926',
            :libvirt__iface_name => 'fp15',
            auto_config: false
      # link for swp1 --> leaf113:swp2
      device.vm.network "private_network",
            :mac => "44:38:39:00:09:25",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '9171',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '11171',
            :libvirt__iface_name => 'swp1',
            auto_config: false
      # link for swp2 --> leaf114:swp2
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:e3",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8370',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10370',
            :libvirt__iface_name => 'swp2',
            auto_config: false
      # link for swp3 --> leaf115:swp2
      device.vm.network "private_network",
            :mac => "44:38:39:00:05:c1",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8737',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10737',
            :libvirt__iface_name => 'swp3',
            auto_config: false
      # link for swp4 --> leaf116:swp2
      device.vm.network "private_network",
            :mac => "44:38:39:00:07:1d",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8911',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10911',
            :libvirt__iface_name => 'swp4',
            auto_config: false
      # link for swp5 --> leaf117:swp2
      device.vm.network "private_network",
            :mac => "44:38:39:00:08:4f",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '9064',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '11064',
            :libvirt__iface_name => 'swp5',
            auto_config: false
      # link for swp6 --> leaf118:swp2
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:2b",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8150',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10150',
            :libvirt__iface_name => 'swp6',
            auto_config: false
      # link for swp7 --> leaf119:swp2
      device.vm.network "private_network",
            :mac => "44:38:39:00:05:ad",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8727',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10727',
            :libvirt__iface_name => 'swp7',
            auto_config: false
      # link for swp8 --> leaf120:swp2
      device.vm.network "private_network",
            :mac => "44:38:39:00:05:0f",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8648',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10648',
            :libvirt__iface_name => 'swp8',
            auto_config: false
      # link for swp9 --> leaf121:swp2
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:5f",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8560',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10560',
            :libvirt__iface_name => 'swp9',
            auto_config: false
      # link for swp10 --> leaf122:swp2
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:f5",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8507',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10507',
            :libvirt__iface_name => 'swp10',
            auto_config: false
      # link for swp11 --> leaf123:swp2
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:f7",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8252',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10252',
            :libvirt__iface_name => 'swp11',
            auto_config: false
      # link for swp12 --> leaf124:swp2
      device.vm.network "private_network",
            :mac => "44:38:39:00:07:65",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8947',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10947',
            :libvirt__iface_name => 'swp12',
            auto_config: false
      # link for swp13 --> leaf125:swp2
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:3b",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8542',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10542',
            :libvirt__iface_name => 'swp13',
            auto_config: false
      # link for swp14 --> leaf126:swp2
      device.vm.network "private_network",
            :mac => "44:38:39:00:08:9b",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '9102',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '11102',
            :libvirt__iface_name => 'swp14',
            auto_config: false
      # link for swp15 --> leaf127:swp2
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:ed",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8119',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10119',
            :libvirt__iface_name => 'swp15',
            auto_config: false
      # link for swp16 --> leaf128:swp2
      device.vm.network "private_network",
            :mac => "44:38:39:00:05:4b",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8678',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10678',
            :libvirt__iface_name => 'swp16',
            auto_config: false



    # Fixes "stdin: is not a tty" and "mesg: ttyname failed : Inappropriate ioctl for device"  messages --> https://github.com/mitchellh/vagrant/issues/1673
    device.vm.provision :shell , inline: "(sudo grep -q 'mesg n' /root/.profile 2>/dev/null && sudo sed -i '/mesg n/d' /root/.profile  2>/dev/null) || true;", privileged: false

    #Copy over Topology.dot File
    device.vm.provision "file", source: "topology.dot", destination: "~/topology.dot"
    device.vm.provision :shell, privileged: false, inline: "sudo mv ~/topology.dot /etc/ptm.d/topology.dot"


    # Run the Config specified in the Node Attributes
    device.vm.provision :shell , privileged: false, :inline => 'echo "$(whoami)" > /tmp/normal_user'
    device.vm.provision :shell , path: "./helper_scripts/extra_switch_config.sh"


    # Install Rules for the interface re-map
    device.vm.provision :shell , :inline => <<-delete_udev_directory
if [ -d "/etc/udev/rules.d/70-persistent-net.rules" ]; then
    rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
fi
rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
delete_udev_directory

device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:3e --> eth0"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:3e", NAME="eth0", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:67 --> fp0"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:67", NAME="fp0", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:e5 --> fp1"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:e5", NAME="fp1", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:2f --> fp2"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:2f", NAME="fp2", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:05:cd --> fp3"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:05:cd", NAME="fp3", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:77 --> fp4"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:77", NAME="fp4", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:07:8d --> fp5"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:07:8d", NAME="fp5", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:05:25 --> fp6"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:05:25", NAME="fp6", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:f7 --> fp7"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:f7", NAME="fp7", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:06:39 --> fp8"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:06:39", NAME="fp8", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:6d --> fp9"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:6d", NAME="fp9", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:07:15 --> fp10"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:07:15", NAME="fp10", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:a3 --> fp11"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:a3", NAME="fp11", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:4b --> fp12"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:4b", NAME="fp12", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:06:57 --> fp13"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:06:57", NAME="fp13", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:29 --> fp14"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:29", NAME="fp14", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:07:3b --> fp15"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:07:3b", NAME="fp15", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:09:25 --> swp1"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:09:25", NAME="swp1", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:e3 --> swp2"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:e3", NAME="swp2", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:05:c1 --> swp3"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:05:c1", NAME="swp3", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:07:1d --> swp4"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:07:1d", NAME="swp4", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:08:4f --> swp5"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:08:4f", NAME="swp5", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:2b --> swp6"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:2b", NAME="swp6", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:05:ad --> swp7"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:05:ad", NAME="swp7", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:05:0f --> swp8"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:05:0f", NAME="swp8", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:5f --> swp9"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:5f", NAME="swp9", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:f5 --> swp10"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:f5", NAME="swp10", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:f7 --> swp11"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:f7", NAME="swp11", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:07:65 --> swp12"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:07:65", NAME="swp12", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:3b --> swp13"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:3b", NAME="swp13", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:08:9b --> swp14"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:08:9b", NAME="swp14", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:ed --> swp15"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:ed", NAME="swp15", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:05:4b --> swp16"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:05:4b", NAME="swp16", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule

      device.vm.provision :shell , :inline => <<-vagrant_interface_rule
echo "  INFO: Adding UDEV Rule: Vagrant interface = vagrant"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{ifindex}=="2", NAME="vagrant", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
echo "#### UDEV Rules (/etc/udev/rules.d/70-persistent-net.rules) ####"
cat /etc/udev/rules.d/70-persistent-net.rules
vagrant_interface_rule

# Run Any Platform Specific Code and Apply the interface Re-map
    #   (may or may not perform a reboot depending on platform)
    device.vm.provision :shell , :inline => $script

end

  ##### DEFINE VM for chassis01-lc1-2 #####
  config.vm.define "chassis01-lc1-2" do |device|

    device.vm.hostname = "chassis01-lc1-2"

    device.vm.box = "CumulusCommunity/cumulus-vx"
    device.vm.box_version = "3.5.0"

    device.vm.provider :libvirt do |v|
      v.memory = 768
    end
    #   see note here: https://github.com/pradels/vagrant-libvirt#synced-folders
    device.vm.synced_folder ".", "/vagrant", disabled: true



    # NETWORK INTERFACES
      # link for eth0 --> oob-mgmt-switch4:swp4
      device.vm.network "private_network",
            :mac => "44:38:39:00:07:76",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10955',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8955',
            :libvirt__iface_name => 'eth0',
            auto_config: false
      # link for fp0 --> chassis01-fc1-1:fp4
      device.vm.network "private_network",
            :mac => "44:38:39:00:08:61",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '9073',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '11073',
            :libvirt__iface_name => 'fp0',
            auto_config: false
      # link for fp1 --> chassis01-fc1-1:fp5
      device.vm.network "private_network",
            :mac => "44:38:39:00:05:27",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8660',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10660',
            :libvirt__iface_name => 'fp1',
            auto_config: false
      # link for fp2 --> chassis01-fc1-1:fp6
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:4d",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8039',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10039',
            :libvirt__iface_name => 'fp2',
            auto_config: false
      # link for fp3 --> chassis01-fc1-1:fp7
      device.vm.network "private_network",
            :mac => "44:38:39:00:07:17",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8908',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10908',
            :libvirt__iface_name => 'fp3',
            auto_config: false
      # link for fp4 --> chassis01-fc2-1:fp4
      device.vm.network "private_network",
            :mac => "44:38:39:00:09:41",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '9185',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '11185',
            :libvirt__iface_name => 'fp4',
            auto_config: false
      # link for fp5 --> chassis01-fc2-1:fp5
      device.vm.network "private_network",
            :mac => "44:38:39:00:08:bf",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '9120',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '11120',
            :libvirt__iface_name => 'fp5',
            auto_config: false
      # link for fp6 --> chassis01-fc2-1:fp6
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:f1",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8249',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10249',
            :libvirt__iface_name => 'fp6',
            auto_config: false
      # link for fp7 --> chassis01-fc2-1:fp7
      device.vm.network "private_network",
            :mac => "44:38:39:00:05:01",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8641',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10641',
            :libvirt__iface_name => 'fp7',
            auto_config: false
      # link for fp8 --> chassis01-fc3-1:fp4
      device.vm.network "private_network",
            :mac => "44:38:39:00:07:fb",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '9022',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '11022',
            :libvirt__iface_name => 'fp8',
            auto_config: false
      # link for fp9 --> chassis01-fc3-1:fp5
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:e1",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8497',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10497',
            :libvirt__iface_name => 'fp9',
            auto_config: false
      # link for fp10 --> chassis01-fc3-1:fp6
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:9d",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8591',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10591',
            :libvirt__iface_name => 'fp10',
            auto_config: false
      # link for fp11 --> chassis01-fc3-1:fp7
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:d1",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8361',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10361',
            :libvirt__iface_name => 'fp11',
            auto_config: false
      # link for fp12 --> chassis01-fc4-1:fp4
      device.vm.network "private_network",
            :mac => "44:38:39:00:05:cf",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8744',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10744',
            :libvirt__iface_name => 'fp12',
            auto_config: false
      # link for fp13 --> chassis01-fc4-1:fp5
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:b5",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8347',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10347',
            :libvirt__iface_name => 'fp13',
            auto_config: false
      # link for fp14 --> chassis01-fc4-1:fp6
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:c7",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8356',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10356',
            :libvirt__iface_name => 'fp14',
            auto_config: false
      # link for fp15 --> chassis01-fc4-1:fp7
      device.vm.network "private_network",
            :mac => "44:38:39:00:08:d5",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '9131',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '11131',
            :libvirt__iface_name => 'fp15',
            auto_config: false
      # link for swp1 --> leaf17:swp1
      device.vm.network "private_network",
            :mac => "44:38:39:00:05:63",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8690',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10690',
            :libvirt__iface_name => 'swp1',
            auto_config: false
      # link for swp2 --> leaf18:swp1
      device.vm.network "private_network",
            :mac => "44:38:39:00:05:0b",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8646',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10646',
            :libvirt__iface_name => 'swp2',
            auto_config: false
      # link for swp3 --> leaf19:swp1
      device.vm.network "private_network",
            :mac => "44:38:39:00:06:bb",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8862',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10862',
            :libvirt__iface_name => 'swp3',
            auto_config: false
      # link for swp4 --> leaf20:swp1
      device.vm.network "private_network",
            :mac => "44:38:39:00:05:e9",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8757',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10757',
            :libvirt__iface_name => 'swp4',
            auto_config: false
      # link for swp5 --> leaf21:swp1
      device.vm.network "private_network",
            :mac => "44:38:39:00:05:65",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8691',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10691',
            :libvirt__iface_name => 'swp5',
            auto_config: false
      # link for swp6 --> leaf22:swp1
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:db",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8238',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10238',
            :libvirt__iface_name => 'swp6',
            auto_config: false
      # link for swp7 --> leaf23:swp1
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:c7",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8228',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10228',
            :libvirt__iface_name => 'swp7',
            auto_config: false
      # link for swp8 --> leaf24:swp1
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:5d",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8303',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10303',
            :libvirt__iface_name => 'swp8',
            auto_config: false
      # link for swp9 --> leaf25:swp1
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:53",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8554',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10554',
            :libvirt__iface_name => 'swp9',
            auto_config: false
      # link for swp10 --> leaf26:swp1
      device.vm.network "private_network",
            :mac => "44:38:39:00:05:91",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8713',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10713',
            :libvirt__iface_name => 'swp10',
            auto_config: false
      # link for swp11 --> leaf27:swp1
      device.vm.network "private_network",
            :mac => "44:38:39:00:06:bd",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8863',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10863',
            :libvirt__iface_name => 'swp11',
            auto_config: false
      # link for swp12 --> leaf28:swp1
      device.vm.network "private_network",
            :mac => "44:38:39:00:05:87",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8708',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10708',
            :libvirt__iface_name => 'swp12',
            auto_config: false
      # link for swp13 --> leaf29:swp1
      device.vm.network "private_network",
            :mac => "44:38:39:00:06:6d",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8823',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10823',
            :libvirt__iface_name => 'swp13',
            auto_config: false
      # link for swp14 --> leaf30:swp1
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:1f",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8144',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10144',
            :libvirt__iface_name => 'swp14',
            auto_config: false
      # link for swp15 --> leaf31:swp1
      device.vm.network "private_network",
            :mac => "44:38:39:00:07:09",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8901',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10901',
            :libvirt__iface_name => 'swp15',
            auto_config: false
      # link for swp16 --> leaf32:swp1
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:3f",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8160',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10160',
            :libvirt__iface_name => 'swp16',
            auto_config: false



    # Fixes "stdin: is not a tty" and "mesg: ttyname failed : Inappropriate ioctl for device"  messages --> https://github.com/mitchellh/vagrant/issues/1673
    device.vm.provision :shell , inline: "(sudo grep -q 'mesg n' /root/.profile 2>/dev/null && sudo sed -i '/mesg n/d' /root/.profile  2>/dev/null) || true;", privileged: false

    #Copy over Topology.dot File
    device.vm.provision "file", source: "topology.dot", destination: "~/topology.dot"
    device.vm.provision :shell, privileged: false, inline: "sudo mv ~/topology.dot /etc/ptm.d/topology.dot"


    # Run the Config specified in the Node Attributes
    device.vm.provision :shell , privileged: false, :inline => 'echo "$(whoami)" > /tmp/normal_user'
    device.vm.provision :shell , path: "./helper_scripts/extra_switch_config.sh"


    # Install Rules for the interface re-map
    device.vm.provision :shell , :inline => <<-delete_udev_directory
if [ -d "/etc/udev/rules.d/70-persistent-net.rules" ]; then
    rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
fi
rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
delete_udev_directory

device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:07:76 --> eth0"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:07:76", NAME="eth0", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:08:61 --> fp0"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:08:61", NAME="fp0", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:05:27 --> fp1"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:05:27", NAME="fp1", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:4d --> fp2"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:4d", NAME="fp2", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:07:17 --> fp3"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:07:17", NAME="fp3", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:09:41 --> fp4"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:09:41", NAME="fp4", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:08:bf --> fp5"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:08:bf", NAME="fp5", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:f1 --> fp6"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:f1", NAME="fp6", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:05:01 --> fp7"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:05:01", NAME="fp7", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:07:fb --> fp8"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:07:fb", NAME="fp8", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:e1 --> fp9"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:e1", NAME="fp9", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:9d --> fp10"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:9d", NAME="fp10", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:d1 --> fp11"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:d1", NAME="fp11", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:05:cf --> fp12"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:05:cf", NAME="fp12", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:b5 --> fp13"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:b5", NAME="fp13", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:c7 --> fp14"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:c7", NAME="fp14", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:08:d5 --> fp15"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:08:d5", NAME="fp15", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:05:63 --> swp1"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:05:63", NAME="swp1", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:05:0b --> swp2"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:05:0b", NAME="swp2", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:06:bb --> swp3"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:06:bb", NAME="swp3", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:05:e9 --> swp4"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:05:e9", NAME="swp4", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:05:65 --> swp5"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:05:65", NAME="swp5", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:db --> swp6"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:db", NAME="swp6", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:c7 --> swp7"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:c7", NAME="swp7", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:5d --> swp8"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:5d", NAME="swp8", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:53 --> swp9"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:53", NAME="swp9", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:05:91 --> swp10"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:05:91", NAME="swp10", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:06:bd --> swp11"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:06:bd", NAME="swp11", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:05:87 --> swp12"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:05:87", NAME="swp12", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:06:6d --> swp13"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:06:6d", NAME="swp13", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:1f --> swp14"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:1f", NAME="swp14", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:07:09 --> swp15"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:07:09", NAME="swp15", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:3f --> swp16"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:3f", NAME="swp16", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule

      device.vm.provision :shell , :inline => <<-vagrant_interface_rule
echo "  INFO: Adding UDEV Rule: Vagrant interface = vagrant"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{ifindex}=="2", NAME="vagrant", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
echo "#### UDEV Rules (/etc/udev/rules.d/70-persistent-net.rules) ####"
cat /etc/udev/rules.d/70-persistent-net.rules
vagrant_interface_rule

# Run Any Platform Specific Code and Apply the interface Re-map
    #   (may or may not perform a reboot depending on platform)
    device.vm.provision :shell , :inline => $script

end

  ##### DEFINE VM for chassis01-lc1-1 #####
  config.vm.define "chassis01-lc1-1" do |device|

    device.vm.hostname = "chassis01-lc1-1"

    device.vm.box = "CumulusCommunity/cumulus-vx"
    device.vm.box_version = "3.5.0"

    device.vm.provider :libvirt do |v|
      v.memory = 768
    end
    #   see note here: https://github.com/pradels/vagrant-libvirt#synced-folders
    device.vm.synced_folder ".", "/vagrant", disabled: true



    # NETWORK INTERFACES
      # link for eth0 --> oob-mgmt-switch4:swp3
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:f4",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10122',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8122',
            :libvirt__iface_name => 'eth0',
            auto_config: false
      # link for fp0 --> chassis01-fc1-1:fp0
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:3f",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8544',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10544',
            :libvirt__iface_name => 'fp0',
            auto_config: false
      # link for fp1 --> chassis01-fc1-1:fp1
      device.vm.network "private_network",
            :mac => "44:38:39:00:08:93",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '9098',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '11098',
            :libvirt__iface_name => 'fp1',
            auto_config: false
      # link for fp2 --> chassis01-fc1-1:fp2
      device.vm.network "private_network",
            :mac => "44:38:39:00:05:fb",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8766',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10766',
            :libvirt__iface_name => 'fp2',
            auto_config: false
      # link for fp3 --> chassis01-fc1-1:fp3
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:13",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8394',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10394',
            :libvirt__iface_name => 'fp3',
            auto_config: false
      # link for fp4 --> chassis01-fc2-1:fp0
      device.vm.network "private_network",
            :mac => "44:38:39:00:07:f7",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '9020',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '11020',
            :libvirt__iface_name => 'fp4',
            auto_config: false
      # link for fp5 --> chassis01-fc2-1:fp1
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:85",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8579',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10579',
            :libvirt__iface_name => 'fp5',
            auto_config: false
      # link for fp6 --> chassis01-fc2-1:fp2
      device.vm.network "private_network",
            :mac => "44:38:39:00:05:4f",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8680',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10680',
            :libvirt__iface_name => 'fp6',
            auto_config: false
      # link for fp7 --> chassis01-fc2-1:fp3
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:a7",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8084',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10084',
            :libvirt__iface_name => 'fp7',
            auto_config: false
      # link for fp8 --> chassis01-fc3-1:fp0
      device.vm.network "private_network",
            :mac => "44:38:39:00:07:19",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8909',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10909',
            :libvirt__iface_name => 'fp8',
            auto_config: false
      # link for fp9 --> chassis01-fc3-1:fp1
      device.vm.network "private_network",
            :mac => "44:38:39:00:09:0b",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '9158',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '11158',
            :libvirt__iface_name => 'fp9',
            auto_config: false
      # link for fp10 --> chassis01-fc3-1:fp2
      device.vm.network "private_network",
            :mac => "44:38:39:00:06:bf",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8864',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10864',
            :libvirt__iface_name => 'fp10',
            auto_config: false
      # link for fp11 --> chassis01-fc3-1:fp3
      device.vm.network "private_network",
            :mac => "44:38:39:00:06:fd",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8895',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10895',
            :libvirt__iface_name => 'fp11',
            auto_config: false
      # link for fp12 --> chassis01-fc4-1:fp0
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:37",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8028',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10028',
            :libvirt__iface_name => 'fp12',
            auto_config: false
      # link for fp13 --> chassis01-fc4-1:fp1
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:db",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8494',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10494',
            :libvirt__iface_name => 'fp13',
            auto_config: false
      # link for fp14 --> chassis01-fc4-1:fp2
      device.vm.network "private_network",
            :mac => "44:38:39:00:06:79",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8829',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10829',
            :libvirt__iface_name => 'fp14',
            auto_config: false
      # link for fp15 --> chassis01-fc4-1:fp3
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:47",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8164',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10164',
            :libvirt__iface_name => 'fp15',
            auto_config: false
      # link for swp1 --> leaf01:swp1
      device.vm.network "private_network",
            :mac => "44:38:39:00:07:8b",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8966',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10966',
            :libvirt__iface_name => 'swp1',
            auto_config: false
      # link for swp2 --> leaf02:swp1
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:e5",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8115',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10115',
            :libvirt__iface_name => 'swp2',
            auto_config: false
      # link for swp3 --> leaf03:swp1
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:a5",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8467',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10467',
            :libvirt__iface_name => 'swp3',
            auto_config: false
      # link for swp4 --> leaf04:swp1
      device.vm.network "private_network",
            :mac => "44:38:39:00:07:dd",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '9007',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '11007',
            :libvirt__iface_name => 'swp4',
            auto_config: false
      # link for swp5 --> leaf05:swp1
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:29",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8149',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10149',
            :libvirt__iface_name => 'swp5',
            auto_config: false
      # link for swp6 --> leaf06:swp1
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:43",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8162',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10162',
            :libvirt__iface_name => 'swp6',
            auto_config: false
      # link for swp7 --> leaf07:swp1
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:b9",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8221',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10221',
            :libvirt__iface_name => 'swp7',
            auto_config: false
      # link for swp8 --> leaf08:swp1
      device.vm.network "private_network",
            :mac => "44:38:39:00:09:13",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '9162',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '11162',
            :libvirt__iface_name => 'swp8',
            auto_config: false
      # link for swp9 --> leaf09:swp1
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:07",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8132',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10132',
            :libvirt__iface_name => 'swp9',
            auto_config: false
      # link for swp10 --> leaf10:swp1
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:7f",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8192',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10192',
            :libvirt__iface_name => 'swp10',
            auto_config: false
      # link for swp11 --> leaf11:swp1
      device.vm.network "private_network",
            :mac => "44:38:39:00:09:0f",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '9160',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '11160',
            :libvirt__iface_name => 'swp11',
            auto_config: false
      # link for swp12 --> leaf12:swp1
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:d3",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8618',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10618',
            :libvirt__iface_name => 'swp12',
            auto_config: false
      # link for swp13 --> leaf13:swp1
      device.vm.network "private_network",
            :mac => "44:38:39:00:05:51",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8681',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10681',
            :libvirt__iface_name => 'swp13',
            auto_config: false
      # link for swp14 --> leaf14:swp1
      device.vm.network "private_network",
            :mac => "44:38:39:00:06:67",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8820',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10820',
            :libvirt__iface_name => 'swp14',
            auto_config: false
      # link for swp15 --> leaf15:swp1
      device.vm.network "private_network",
            :mac => "44:38:39:00:08:a1",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '9105',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '11105',
            :libvirt__iface_name => 'swp15',
            auto_config: false
      # link for swp16 --> leaf16:swp1
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:b3",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8346',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10346',
            :libvirt__iface_name => 'swp16',
            auto_config: false



    # Fixes "stdin: is not a tty" and "mesg: ttyname failed : Inappropriate ioctl for device"  messages --> https://github.com/mitchellh/vagrant/issues/1673
    device.vm.provision :shell , inline: "(sudo grep -q 'mesg n' /root/.profile 2>/dev/null && sudo sed -i '/mesg n/d' /root/.profile  2>/dev/null) || true;", privileged: false

    #Copy over Topology.dot File
    device.vm.provision "file", source: "topology.dot", destination: "~/topology.dot"
    device.vm.provision :shell, privileged: false, inline: "sudo mv ~/topology.dot /etc/ptm.d/topology.dot"


    # Run the Config specified in the Node Attributes
    device.vm.provision :shell , privileged: false, :inline => 'echo "$(whoami)" > /tmp/normal_user'
    device.vm.provision :shell , path: "./helper_scripts/extra_switch_config.sh"


    # Install Rules for the interface re-map
    device.vm.provision :shell , :inline => <<-delete_udev_directory
if [ -d "/etc/udev/rules.d/70-persistent-net.rules" ]; then
    rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
fi
rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
delete_udev_directory

device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:f4 --> eth0"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:f4", NAME="eth0", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:3f --> fp0"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:3f", NAME="fp0", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:08:93 --> fp1"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:08:93", NAME="fp1", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:05:fb --> fp2"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:05:fb", NAME="fp2", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:13 --> fp3"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:13", NAME="fp3", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:07:f7 --> fp4"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:07:f7", NAME="fp4", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:85 --> fp5"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:85", NAME="fp5", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:05:4f --> fp6"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:05:4f", NAME="fp6", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:a7 --> fp7"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:a7", NAME="fp7", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:07:19 --> fp8"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:07:19", NAME="fp8", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:09:0b --> fp9"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:09:0b", NAME="fp9", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:06:bf --> fp10"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:06:bf", NAME="fp10", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:06:fd --> fp11"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:06:fd", NAME="fp11", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:37 --> fp12"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:37", NAME="fp12", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:db --> fp13"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:db", NAME="fp13", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:06:79 --> fp14"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:06:79", NAME="fp14", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:47 --> fp15"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:47", NAME="fp15", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:07:8b --> swp1"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:07:8b", NAME="swp1", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:e5 --> swp2"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:e5", NAME="swp2", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:a5 --> swp3"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:a5", NAME="swp3", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:07:dd --> swp4"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:07:dd", NAME="swp4", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:29 --> swp5"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:29", NAME="swp5", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:43 --> swp6"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:43", NAME="swp6", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:b9 --> swp7"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:b9", NAME="swp7", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:09:13 --> swp8"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:09:13", NAME="swp8", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:07 --> swp9"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:07", NAME="swp9", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:7f --> swp10"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:7f", NAME="swp10", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:09:0f --> swp11"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:09:0f", NAME="swp11", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:d3 --> swp12"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:d3", NAME="swp12", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:05:51 --> swp13"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:05:51", NAME="swp13", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:06:67 --> swp14"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:06:67", NAME="swp14", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:08:a1 --> swp15"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:08:a1", NAME="swp15", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:b3 --> swp16"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:b3", NAME="swp16", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule

      device.vm.provision :shell , :inline => <<-vagrant_interface_rule
echo "  INFO: Adding UDEV Rule: Vagrant interface = vagrant"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{ifindex}=="2", NAME="vagrant", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
echo "#### UDEV Rules (/etc/udev/rules.d/70-persistent-net.rules) ####"
cat /etc/udev/rules.d/70-persistent-net.rules
vagrant_interface_rule

# Run Any Platform Specific Code and Apply the interface Re-map
    #   (may or may not perform a reboot depending on platform)
    device.vm.provision :shell , :inline => $script

end

  ##### DEFINE VM for chassis03-lc4-1 #####
  config.vm.define "chassis03-lc4-1" do |device|

    device.vm.hostname = "chassis03-lc4-1"

    device.vm.box = "CumulusCommunity/cumulus-vx"
    device.vm.box_version = "3.5.0"

    device.vm.provider :libvirt do |v|
      v.memory = 768
    end
    #   see note here: https://github.com/pradels/vagrant-libvirt#synced-folders
    device.vm.synced_folder ".", "/vagrant", disabled: true



    # NETWORK INTERFACES
      # link for eth0 --> oob-mgmt-switch4:swp33
      device.vm.network "private_network",
            :mac => "44:38:39:00:07:52",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '10937',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '8937',
            :libvirt__iface_name => 'eth0',
            auto_config: false
      # link for fp0 --> chassis03-fc1-1:fp24
      device.vm.network "private_network",
            :mac => "44:38:39:00:06:95",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8843',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10843',
            :libvirt__iface_name => 'fp0',
            auto_config: false
      # link for fp1 --> chassis03-fc1-1:fp25
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:d9",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8237',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10237',
            :libvirt__iface_name => 'fp1',
            auto_config: false
      # link for fp2 --> chassis03-fc1-1:fp26
      device.vm.network "private_network",
            :mac => "44:38:39:00:07:c1",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8993',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10993',
            :libvirt__iface_name => 'fp2',
            auto_config: false
      # link for fp3 --> chassis03-fc1-1:fp27
      device.vm.network "private_network",
            :mac => "44:38:39:00:08:73",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '9082',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '11082',
            :libvirt__iface_name => 'fp3',
            auto_config: false
      # link for fp4 --> chassis03-fc2-1:fp24
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:41",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8161',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10161',
            :libvirt__iface_name => 'fp4',
            auto_config: false
      # link for fp5 --> chassis03-fc2-1:fp25
      device.vm.network "private_network",
            :mac => "44:38:39:00:06:63",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8818',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10818',
            :libvirt__iface_name => 'fp5',
            auto_config: false
      # link for fp6 --> chassis03-fc2-1:fp26
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:e9",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8117',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10117',
            :libvirt__iface_name => 'fp6',
            auto_config: false
      # link for fp7 --> chassis03-fc2-1:fp27
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:69",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8437',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10437',
            :libvirt__iface_name => 'fp7',
            auto_config: false
      # link for fp8 --> chassis03-fc3-1:fp24
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:8b",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8070',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10070',
            :libvirt__iface_name => 'fp8',
            auto_config: false
      # link for fp9 --> chassis03-fc3-1:fp25
      device.vm.network "private_network",
            :mac => "44:38:39:00:05:8b",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8710',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10710',
            :libvirt__iface_name => 'fp9',
            auto_config: false
      # link for fp10 --> chassis03-fc3-1:fp26
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:ef",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8120',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10120',
            :libvirt__iface_name => 'fp10',
            auto_config: false
      # link for fp11 --> chassis03-fc3-1:fp27
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:bb",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8094',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10094',
            :libvirt__iface_name => 'fp11',
            auto_config: false
      # link for fp12 --> chassis03-fc4-1:fp24
      device.vm.network "private_network",
            :mac => "44:38:39:00:09:33",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '9178',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '11178',
            :libvirt__iface_name => 'fp12',
            auto_config: false
      # link for fp13 --> chassis03-fc4-1:fp25
      device.vm.network "private_network",
            :mac => "44:38:39:00:09:51",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '9193',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '11193',
            :libvirt__iface_name => 'fp13',
            auto_config: false
      # link for fp14 --> chassis03-fc4-1:fp26
      device.vm.network "private_network",
            :mac => "44:38:39:00:09:55",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '9195',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '11195',
            :libvirt__iface_name => 'fp14',
            auto_config: false
      # link for fp15 --> chassis03-fc4-1:fp27
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:23",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8146',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10146',
            :libvirt__iface_name => 'fp15',
            auto_config: false
      # link for swp1 --> leaf97:swp3
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:93",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8458',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10458',
            :libvirt__iface_name => 'swp1',
            auto_config: false
      # link for swp2 --> leaf98:swp3
      device.vm.network "private_network",
            :mac => "44:38:39:00:08:0d",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '9031',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '11031',
            :libvirt__iface_name => 'swp2',
            auto_config: false
      # link for swp3 --> leaf99:swp3
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:25",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8275',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10275',
            :libvirt__iface_name => 'swp3',
            auto_config: false
      # link for swp4 --> leaf100:swp3
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:b3",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8090',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10090',
            :libvirt__iface_name => 'swp4',
            auto_config: false
      # link for swp5 --> leaf101:swp3
      device.vm.network "private_network",
            :mac => "44:38:39:00:07:87",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8964',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10964',
            :libvirt__iface_name => 'swp5',
            auto_config: false
      # link for swp6 --> leaf102:swp3
      device.vm.network "private_network",
            :mac => "44:38:39:00:05:35",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8667',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10667',
            :libvirt__iface_name => 'swp6',
            auto_config: false
      # link for swp7 --> leaf103:swp3
      device.vm.network "private_network",
            :mac => "44:38:39:00:08:c9",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '9125',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '11125',
            :libvirt__iface_name => 'swp7',
            auto_config: false
      # link for swp8 --> leaf104:swp3
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:71",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8569',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10569',
            :libvirt__iface_name => 'swp8',
            auto_config: false
      # link for swp9 --> leaf105:swp3
      device.vm.network "private_network",
            :mac => "44:38:39:00:05:03",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8642',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10642',
            :libvirt__iface_name => 'swp9',
            auto_config: false
      # link for swp10 --> leaf106:swp3
      device.vm.network "private_network",
            :mac => "44:38:39:00:08:f7",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '9148',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '11148',
            :libvirt__iface_name => 'swp10',
            auto_config: false
      # link for swp11 --> leaf107:swp3
      device.vm.network "private_network",
            :mac => "44:38:39:00:06:d5",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8875',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10875',
            :libvirt__iface_name => 'swp11',
            auto_config: false
      # link for swp12 --> leaf108:swp3
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:b3",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8474',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10474',
            :libvirt__iface_name => 'swp12',
            auto_config: false
      # link for swp13 --> leaf109:swp3
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:0b",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8006',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10006',
            :libvirt__iface_name => 'swp13',
            auto_config: false
      # link for swp14 --> leaf110:swp3
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:8b",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8326',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10326',
            :libvirt__iface_name => 'swp14',
            auto_config: false
      # link for swp15 --> leaf111:swp3
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:55",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '8555',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '10555',
            :libvirt__iface_name => 'swp15',
            auto_config: false
      # link for swp16 --> leaf112:swp3
      device.vm.network "private_network",
            :mac => "44:38:39:00:08:ed",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '9143',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '11143',
            :libvirt__iface_name => 'swp16',
            auto_config: false



    # Fixes "stdin: is not a tty" and "mesg: ttyname failed : Inappropriate ioctl for device"  messages --> https://github.com/mitchellh/vagrant/issues/1673
    device.vm.provision :shell , inline: "(sudo grep -q 'mesg n' /root/.profile 2>/dev/null && sudo sed -i '/mesg n/d' /root/.profile  2>/dev/null) || true;", privileged: false

    #Copy over Topology.dot File
    device.vm.provision "file", source: "topology.dot", destination: "~/topology.dot"
    device.vm.provision :shell, privileged: false, inline: "sudo mv ~/topology.dot /etc/ptm.d/topology.dot"


    # Run the Config specified in the Node Attributes
    device.vm.provision :shell , privileged: false, :inline => 'echo "$(whoami)" > /tmp/normal_user'
    device.vm.provision :shell , path: "./helper_scripts/extra_switch_config.sh"


    # Install Rules for the interface re-map
    device.vm.provision :shell , :inline => <<-delete_udev_directory
if [ -d "/etc/udev/rules.d/70-persistent-net.rules" ]; then
    rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
fi
rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
delete_udev_directory

device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:07:52 --> eth0"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:07:52", NAME="eth0", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:06:95 --> fp0"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:06:95", NAME="fp0", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:d9 --> fp1"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:d9", NAME="fp1", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:07:c1 --> fp2"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:07:c1", NAME="fp2", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:08:73 --> fp3"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:08:73", NAME="fp3", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:41 --> fp4"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:41", NAME="fp4", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:06:63 --> fp5"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:06:63", NAME="fp5", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:e9 --> fp6"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:e9", NAME="fp6", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:69 --> fp7"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:69", NAME="fp7", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:8b --> fp8"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:8b", NAME="fp8", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:05:8b --> fp9"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:05:8b", NAME="fp9", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:ef --> fp10"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:ef", NAME="fp10", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:bb --> fp11"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:bb", NAME="fp11", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:09:33 --> fp12"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:09:33", NAME="fp12", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:09:51 --> fp13"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:09:51", NAME="fp13", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:09:55 --> fp14"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:09:55", NAME="fp14", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:23 --> fp15"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:23", NAME="fp15", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:93 --> swp1"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:93", NAME="swp1", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:08:0d --> swp2"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:08:0d", NAME="swp2", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:25 --> swp3"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:25", NAME="swp3", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:b3 --> swp4"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:b3", NAME="swp4", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:07:87 --> swp5"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:07:87", NAME="swp5", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:05:35 --> swp6"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:05:35", NAME="swp6", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:08:c9 --> swp7"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:08:c9", NAME="swp7", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:71 --> swp8"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:71", NAME="swp8", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:05:03 --> swp9"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:05:03", NAME="swp9", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:08:f7 --> swp10"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:08:f7", NAME="swp10", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:06:d5 --> swp11"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:06:d5", NAME="swp11", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:b3 --> swp12"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:b3", NAME="swp12", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:0b --> swp13"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:0b", NAME="swp13", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:8b --> swp14"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:8b", NAME="swp14", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:55 --> swp15"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:55", NAME="swp15", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:08:ed --> swp16"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:08:ed", NAME="swp16", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule

      device.vm.provision :shell , :inline => <<-vagrant_interface_rule
echo "  INFO: Adding UDEV Rule: Vagrant interface = vagrant"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{ifindex}=="2", NAME="vagrant", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
echo "#### UDEV Rules (/etc/udev/rules.d/70-persistent-net.rules) ####"
cat /etc/udev/rules.d/70-persistent-net.rules
vagrant_interface_rule

# Run Any Platform Specific Code and Apply the interface Re-map
    #   (may or may not perform a reboot depending on platform)
    device.vm.provision :shell , :inline => $script

end



end
